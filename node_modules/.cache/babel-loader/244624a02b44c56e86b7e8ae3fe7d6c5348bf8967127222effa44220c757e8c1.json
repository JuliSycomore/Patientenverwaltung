{"ast":null,"code":"var _jsxFileName = \"/Users/julianrogowski/Desktop/patientenverwaltung-app/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n/* global __GEMINI_API_KEY__ */\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from 'firebase/auth';\nimport { getFirestore, collection, doc, addDoc, getDocs, setDoc, deleteDoc, onSnapshot, query, writeBatch } from 'firebase/firestore';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, ReferenceArea } from 'recharts';\nimport SCL90RComponent from './components/SCL90R.js';\nimport FEP2Component from './components/FEP2.js';\nimport BDI2Component from './components/BDI2.js';\nimport HSCL11Component from './components/HSCL11.js';\nimport ICD11ECTBrowser from './components/ICD11ECTBrowser.js';\nimport EBMBrowser from './components/EBMBrowser.js';\nimport BillingModal from './components/BillingModal.js';\nimport AbrechnungsUebersicht from './components/AbrechnungsUebersicht.js';\nimport DiagnostikUebersicht from './components/DiagnostikUebersicht.js';\nimport AddTestFlowModal from './components/AddTestFlowModal.js';\nimport ManualBillingSetupModal from './components/ManualBillingSetupModal.js';\n\n// --- ICONS ---\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UserPlus = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 227\n  }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"9\",\n    cy: \"7\",\n    r: \"4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 281\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"19\",\n    x2: \"19\",\n    y1: \"8\",\n    y2: \"14\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 311\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"22\",\n    x2: \"16\",\n    y1: \"11\",\n    y2: \"11\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 350\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 26,\n  columnNumber: 50\n}, this);\n_c = UserPlus;\nconst Edit3 = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 20h9\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 224\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 245\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 27,\n  columnNumber: 47\n}, this);\n_c2 = Edit3;\nconst Trash2 = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"3 6 5 6 21 6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 225\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 259\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"10\",\n    y1: \"11\",\n    x2: \"10\",\n    y2: \"17\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 350\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"14\",\n    y1: \"11\",\n    x2: \"14\",\n    y2: \"17\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 390\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 28,\n  columnNumber: 48\n}, this);\n_c3 = Trash2;\nconst PlusCircleIcon = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"10\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 233\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"12\",\n    y1: \"8\",\n    x2: \"12\",\n    y2: \"16\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 266\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"8\",\n    y1: \"12\",\n    x2: \"16\",\n    y2: \"12\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 305\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 29,\n  columnNumber: 56\n}, this);\n_c4 = PlusCircleIcon;\nconst XCircle = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"10\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 226\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"15\",\n    y1: \"9\",\n    x2: \"9\",\n    y2: \"15\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 266\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"9\",\n    y1: \"9\",\n    x2: \"15\",\n    y2: \"15\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 309\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 30,\n  columnNumber: 49\n}, this);\n_c5 = XCircle;\nconst Save = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 223\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"17 21 17 13 7 13 7 21\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 299\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"7 3 7 8 15 8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 342\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 31,\n  columnNumber: 46\n}, this);\n_c6 = Save;\nconst AlertTriangle = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 232\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"12\",\n    y1: \"9\",\n    x2: \"12\",\n    y2: \"13\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 338\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"12\",\n    y1: \"17\",\n    x2: \"12.01\",\n    y2: \"17\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 382\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 32,\n  columnNumber: 55\n}, this);\n_c7 = AlertTriangle;\nconst InfoIcon = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"10\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 227\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"12\",\n    y1: \"16\",\n    x2: \"12\",\n    y2: \"12\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 267\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"12\",\n    y1: \"8\",\n    x2: \"12.01\",\n    y2: \"8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 312\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 33,\n  columnNumber: 50\n}, this);\n_c8 = InfoIcon;\nconst FileJson2 = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 228\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M14 2v6h6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 292\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4 12h1.6a2 2 0 0 0 1.9-3.4L6 6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 314\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4 18h1.6a2 2 0 0 1 1.9 3.4L6 24\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 358\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 12h1.6a2 2 0 0 1 1.9-3.4L14 6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 403\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 18h1.6a2 2 0 0 0 1.9 3.4L14 24\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 449\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 34,\n  columnNumber: 51\n}, this);\n_c9 = FileJson2;\nconst WandSparkles = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"m9.5 2.55 1.294 1.294a1 1 0 0 0 1.414 0L13.5 2.55\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 231\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4.94 4.94 6.22 6.22a1 1 0 0 0 1.41 0l1.29-1.29\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 293\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M2.55 9.51 3.84 10.8a1 1 0 0 0 1.41 0l1.3-1.29\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 353\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"m19.07 4.93-1.29 1.29a1 1 0 0 1-1.41 0l-1.29-1.29\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 412\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M21.45 9.51l-1.29 1.29a1 1 0 0 1-1.41 0l-1.3-1.29\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 474\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M14.5 12.94a1 1 0 0 0 0 1.41l1.29 1.29\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 536\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M10.8 17.78a1 1 0 0 0 0 1.41l1.29 1.29\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 587\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M17.78 10.8a1 1 0 0 0 0 1.41l1.29 1.29\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 638\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 10.5V4.5\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 689\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 10.5C7 11 4 15 4 20\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 714\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 10.5c5 .5 8 4.5 8 9.5\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 750\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 35,\n  columnNumber: 54\n}, this);\n_c0 = WandSparkles;\nconst LogOut = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 225\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"16 17 21 12 16 7\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 277\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"21\",\n    y1: \"12\",\n    x2: \"9\",\n    y2: \"12\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 315\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 36,\n  columnNumber: 48\n}, this);\n_c1 = LogOut;\nconst ClipboardIcon = ({\n  className = \"w-4 h-4\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n    x: \"9\",\n    y: \"9\",\n    width: \"13\",\n    height: \"13\",\n    rx: \"2\",\n    ry: \"2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 232\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 294\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 37,\n  columnNumber: 55\n}, this);\n_c10 = ClipboardIcon;\nconst CheckIcon = ({\n  className = \"w-4 h-4\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"3\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"20 6 9 17 4 12\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 228\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 38,\n  columnNumber: 51\n}, this);\n_c11 = CheckIcon;\nconst ChevronRightIcon = ({\n  className = \"w-4 h-4\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"9 18 15 12 9 6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 235\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 39,\n  columnNumber: 58\n}, this);\n\n// Ihre Firebase Konfiguration:\n_c12 = ChevronRightIcon;\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDZ_qqqKW7WDCZ9botek2VBwXNMQO3JYwU\",\n  authDomain: \"psychotherapie0512.firebaseapp.com\",\n  projectId: \"psychotherapie0512\",\n  storageBucket: \"psychotherapie0512.firebasestorage.app\",\n  messagingSenderId: \"131279046361\",\n  appId: \"1:131279046361:web:e5dd2d18b206fb820b60c8\"\n};\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst firestoreAppId = 'default-patient-app-v5';\n\n// NEU: Konstante für Hausaufgaben-Gründe\nconst homeworkFailureReasons = {\n  \"Motivational\": [\"Geringe Motivation\", \"Zweifel am Nutzen der Hausaufgabe\", \"Keine Einsicht in die Relevanz\"],\n  \"Emotional\": [\"Angst vor Versagen\", \"Scham oder Schuldgefühle\", \"Vermeidung unangenehmer Gefühle\"],\n  \"Kognitive\": [\"Negative automatische Gedanken\", \"Perfektionismus\"],\n  \"Organisatorisch/Praktisch\": [\"Zeitmangel\", \"Vergessen\", \"Keine klaren Anweisungen oder Verständnisprobleme\"],\n  \"Interaktion mit Therapeut\": [\"Widerstand gegen den Therapeuten\", \"Beziehungskonflikte\", \"Mangel an Vertrauen\"],\n  \"Psychopathologisch\": [\"Konzentrationsprobleme\", \"Antriebslosigkeit\", \"Überwältigende Symptome\"]\n};\n\n// NEU: Liste der verfügbaren diagnostischen Tests\nconst availableTests = [{\n  id: 'scl90r',\n  name: 'SCL-90-R - Symptom-Checklist-90-R',\n  ebm: '35601',\n  recommendation: 10\n}, {\n  id: 'fep2',\n  name: 'FEP-2 - Fragebogen zur Erfassung von Persönlichkeitsstörungen',\n  ebm: '35601',\n  recommendation: 12\n}, {\n  id: 'bdi2',\n  name: 'BDI-II - Beck-Depressions-Inventar II',\n  ebm: '35600',\n  recommendation: 2\n}, {\n  id: 'hscl11',\n  name: 'HSCL-11 - Hopkins Symptom Checklist-11',\n  ebm: '35600',\n  recommendation: 1\n}];\nconst initialPatientsData = [{\n  name: \"Mustermann\",\n  geburtsdatum: \"1998-04-04\",\n  chiffre: \"M040498\",\n  therapyType: \"LZT\",\n  approvedHours: 60,\n  conductedHours: 24,\n  diagnoses: [\"[G] F00.0*: Demenz bei Alzheimer-Krankheit, mit frühem Beginn (Typ 2)\", \"[V] F01.1: Multiinfarkt-Demenz\", \"[A] F20.0: Paranoide Schizophrenie\", \"[ZN] F32.1: Mittelgradige depressive Episode\", \"F40.0: Agoraphobie\"],\n  sessions: [{\n    date: \"2025-05-20\",\n    notes: \"Erste Sitzung, Exploration der Hauptbeschwerden.\"\n  }, {\n    date: \"2025-05-27\",\n    notes: \"Vertiefung der Anamnese, erste Verhaltensanalysen.\"\n  }],\n  hscl11Results: [],\n  bdi2Results: [],\n  fep2Results: [],\n  scl90rResults: [],\n  krankheitsanamnese: \"Patient berichtet über seit ca. 2 Jahren zunehmende Vergesslichkeit und Orientierungsprobleme.\",\n  lebensgeschichte: \"Geboren 1955, verheiratet, 2 Kinder, früher als Buchhalter tätig.\",\n  problemanalyseMakro: \"Kognitive Defizite im Vordergrund, affektive Belastung durch erlebten Kontrollverlust.\",\n  therapieplan: \"Supportive Gespräche, kognitives Training, Psychoedukation für Angehörige.\"\n}];\nconst Modal = ({\n  isOpen,\n  onClose,\n  title,\n  children,\n  size = \"lg\"\n}) => {\n  if (!isOpen) return null;\n  const sizeClasses = {\n    sm: 'max-w-sm',\n    md: 'max-w-md',\n    lg: 'max-w-lg',\n    xl: 'max-w-xl',\n    '2xl': 'max-w-2xl',\n    '3xl': 'max-w-3xl',\n    '4xl': 'max-w-4xl',\n    '5xl': 'max-w-5xl'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex justify-center items-center z-50 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `bg-white p-6 rounded-lg shadow-xl w-full ${sizeClasses[size]} max-h-[90vh] overflow-y-auto`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold text-gray-800\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 553\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"text-gray-500 hover:text-gray-700\",\n          children: /*#__PURE__*/_jsxDEV(XCircle, {\n            className: \"w-7 h-7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 690\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 618\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 497\n      }, this), children]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 387\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 274\n  }, this);\n};\n_c13 = Modal;\nconst ConfirmationModal = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  message\n}) => {\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen,\n    onClose: onClose,\n    title: title,\n    size: \"sm\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n        className: \"mx-auto mb-4 w-12 h-12 text-red-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 209\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-700 mb-6\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 274\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none\",\n          children: \"Abbrechen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 368\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onConfirm,\n          className: \"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none\",\n          children: \"Best\\xE4tigen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 528\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 321\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 180\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 115\n  }, this);\n};\n_c14 = ConfirmationModal;\nconst PatientForm = ({\n  patient,\n  onSave,\n  onCancel\n}) => {\n  _s();\n  const [formData, setFormData] = useState(patient || {\n    name: '',\n    vorname: '',\n    chiffre: '',\n    geburtsdatum: '',\n    adresse: '',\n    email: '',\n    telefon: '',\n    therapyType: 'LZT',\n    approvedHours: 0,\n    conductedHours: 0,\n    diagnoses: [],\n    sessions: [],\n    hscl11Results: [],\n    bdi2Results: [],\n    fep2Results: [],\n    scl90rResults: [],\n    krankheitsanamnese: \"\",\n    lebensgeschichte: \"\",\n    problemanalyseMakro: \"\",\n    therapieplan: \"\"\n  });\n  useEffect(() => {\n    if (patient) {\n      setFormData({\n        ...patient,\n        geburtsdatum: patient.geburtsdatum || '',\n        // Sicherstellen, dass das Feld existiert\n        hscl11Results: patient.hscl11Results || [],\n        bdi2Results: patient.bdi2Results || [],\n        fep2Results: patient.fep2Results || [],\n        scl90rResults: patient.scl90rResults || [],\n        krankheitsanamnese: patient.krankheitsanamnese || \"\",\n        lebensgeschichte: patient.lebensgeschichte || \"\",\n        problemanalyseMakro: patient.problemanalyseMakro || \"\",\n        therapieplan: patient.therapieplan || \"\"\n      });\n    } else {\n      setFormData({\n        name: '',\n        chiffre: '',\n        geburtsdatum: '',\n        therapyType: 'LZT',\n        approvedHours: 0,\n        conductedHours: 0,\n        diagnoses: [],\n        sessions: [],\n        hscl11Results: [],\n        bdi2Results: [],\n        fep2Results: [],\n        scl90rResults: [],\n        krankheitsanamnese: \"\",\n        lebensgeschichte: \"\",\n        problemanalyseMakro: \"\",\n        therapieplan: \"\"\n      });\n    }\n  }, [patient]);\n  useEffect(() => {\n    const {\n      name,\n      geburtsdatum\n    } = formData;\n    if (name && geburtsdatum) {\n      try {\n        const firstLetter = name.charAt(0).toUpperCase();\n        const [year, month, day] = geburtsdatum.split('-');\n        if (year && month && day) {\n          const yy = year.slice(-2);\n          const newChiffre = `${firstLetter}${day}${month}${yy}`;\n          setFormData(prev => ({\n            ...prev,\n            chiffre: newChiffre\n          }));\n        }\n      } catch (e) {\n        console.error(\"Fehler bei der Chiffre-Generierung\", e);\n        setFormData(prev => ({\n          ...prev,\n          chiffre: ''\n        }));\n      }\n    } else {\n      if (formData.chiffre !== '') {\n        setFormData(prev => ({\n          ...prev,\n          chiffre: ''\n        }));\n      }\n    }\n  }, [formData]); // Add formData to the dependency array\n\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'number' ? parseInt(value, 10) || 0 : value\n    }));\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    onSave(formData);\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"vorname\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Vorname\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"vorname\",\n          id: \"vorname\",\n          value: formData.vorname,\n          onChange: handleChange,\n          required: true,\n          className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"name\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Nachname\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"name\",\n          id: \"name\",\n          value: formData.name,\n          onChange: handleChange,\n          required: true,\n          className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"geburtsdatum\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Geburtsdatum\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          name: \"geburtsdatum\",\n          id: \"geburtsdatum\",\n          value: formData.geburtsdatum,\n          onChange: handleChange,\n          required: true,\n          className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"chiffre\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Chiffre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"chiffre\",\n          id: \"chiffre\",\n          value: formData.chiffre,\n          readOnly: true,\n          className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100 cursor-not-allowed sm:text-sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"adresse\",\n        className: \"block text-sm font-medium text-gray-700\",\n        children: \"Adresse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"adresse\",\n        id: \"adresse\",\n        value: formData.adresse,\n        onChange: handleChange,\n        className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"E-Mail\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          id: \"email\",\n          value: formData.email,\n          onChange: handleChange,\n          className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"telefon\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Telefon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"tel\",\n          name: \"telefon\",\n          id: \"telefon\",\n          value: formData.telefon,\n          onChange: handleChange,\n          className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"therapyType\",\n        className: \"block text-sm font-medium text-gray-700\",\n        children: \"Therapieform\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"therapyType\",\n        id: \"therapyType\",\n        value: formData.therapyType,\n        onChange: handleChange,\n        className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"LZT\",\n          children: \"Langzeittherapie (LZT)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"KZT\",\n          children: \"Kurzzeittherapie (KZT)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"approvedHours\",\n        className: \"block text-sm font-medium text-gray-700\",\n        children: \"Genehmigte Stunden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"approvedHours\",\n        id: \"approvedHours\",\n        value: formData.approvedHours,\n        onChange: handleChange,\n        min: \"0\",\n        className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"conductedHours\",\n        className: \"block text-sm font-medium text-gray-700\",\n        children: \"Durchgef\\xFChrte Stunden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"conductedHours\",\n        id: \"conductedHours\",\n        value: formData.conductedHours,\n        onChange: handleChange,\n        min: \"0\",\n        className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-end space-x-3 pt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onCancel,\n        className: \"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500\",\n        children: \"Abbrechen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Save, {\n          className: \"w-4 h-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 229\n        }, this), \" Speichern\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 9\n  }, this);\n};\n_s(PatientForm, \"XE3TDwQBrVcmS3u1xCYje8tVQ08=\");\n_c15 = PatientForm;\nasync function generateGeminiText(prompt) {\n  let chatHistory = [{\n    role: \"user\",\n    parts: [{\n      text: prompt\n    }]\n  }];\n  const payload = {\n    contents: chatHistory\n  };\n  const GEMINI_API_KEY = \"AIzaSyCWQFze_8cKDZ6W2DTqfqIcvhcsKWfuZLw\"; // Tragen Sie hier Ihren lokalen Schlüssel ein\n  const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${GEMINI_API_KEY}`;\n  try {\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(payload)\n    });\n    if (!response.ok) {\n      var _errorData$error;\n      const errorData = await response.json();\n      console.error(\"Gemini API error details:\", errorData);\n      const errorMessage = ((_errorData$error = errorData.error) === null || _errorData$error === void 0 ? void 0 : _errorData$error.message) || `API request failed with status ${response.status}`;\n      throw new Error(errorMessage);\n    }\n    const result = await response.json();\n    if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {\n      return result.candidates[0].content.parts[0].text;\n    } else if (result.candidates && result.candidates.length > 0 && result.candidates[0].finishReason === \"SAFETY\") {\n      console.warn(\"Gemini API response blocked due to safety reasons.\");\n      return \"Die Antwort wurde aufgrund von Sicherheitsrichtlinien blockiert.\";\n    } else {\n      console.error(\"Unexpected Gemini API response structure:\", result);\n      throw new Error(\"Unerwartete Antwortstruktur von der API.\");\n    }\n  } catch (error) {\n    console.error(\"Error calling Gemini API:\", error);\n    throw error;\n  }\n}\nfunction App() {\n  _s2();\n  var _selectedPatient$sess, _selectedPatient$sess2, _diagnosisInfo$inkl, _diagnosisInfo$exkl, _diagnosisInfo$inclus, _diagnosisInfo$exclus;\n  // --- States ---\n  const [mainView, setMainView] = useState('patients');\n  const [patients, setPatients] = useState([]);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [authError, setAuthError] = useState(null);\n  const [appError, setAppError] = useState(null);\n  const [userId, setUserId] = useState(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoginView, setIsLoginView] = useState(true);\n  const [isAuthLoading, setIsAuthLoading] = useState(false);\n  const [isPatientModalOpen, setIsPatientModalOpen] = useState(false);\n  const [editingPatient, setEditingPatient] = useState(null);\n  const [isConfirmDeleteModalOpen, setIsConfirmDeleteModalOpen] = useState(false);\n  const [patientToDeleteId, setPatientToDeleteId] = useState(null);\n  const [newDiagnosis, setNewDiagnosis] = useState('');\n  const [newDiagnosisCode, setNewDiagnosisCode] = useState('');\n  const [newDiagnosisSicherheit, setNewDiagnosisSicherheit] = useState('G');\n  const [lookedUpDiagnosisName, setLookedUpDiagnosisName] = useState('');\n  const [newSessionDate, setNewSessionDate] = useState(new Date().toISOString().split('T')[0]);\n  const [newSessionNotes, setNewSessionNotes] = useState('');\n  const [activeDetailTab, setActiveDetailTab] = useState('übersicht');\n  const [activeDiagnostikSubTab, setActiveDiagnostikSubTab] = useState('overview');\n  const [sessionSummaries, setSessionSummaries] = useState({});\n  const [diagnosisInfo, setDiagnosisInfo] = useState({\n    code: '',\n    name: '',\n    beschreibung: '',\n    inkl: [],\n    exkl: [],\n    hinweise: [],\n    zusatz_info_code: '',\n    sicherheit: '',\n    isLoading: false,\n    error: null,\n    isOpen: false,\n    source: ''\n  });\n  const [localIcd10Data, setLocalIcd10Data] = useState({});\n  const [editableConductedHours, setEditableConductedHours] = useState(\"\");\n  const [editableKrankheitsanamnese, setEditableKrankheitsanamnese] = useState(\"\");\n  const [editableLebensgeschichte, setEditableLebensgeschichte] = useState(\"\");\n  const [editableProblemanalyseMakro, setEditableProblemanalyseMakro] = useState(\"\");\n  const [editableTherapieplan, setEditableTherapieplan] = useState(\"\");\n  const [therapeutischeAssistenzOutput, setTherapeutischeAssistenzOutput] = useState(\"\");\n  const [isLoadingTherapeutischeAssistenz, setIsLoadingTherapeutischeAssistenz] = useState(false);\n  const [assistenzError, setAssistenzError] = useState(null);\n  const detailViewRef = useRef(null);\n  const overviewRef = useRef(null);\n  const [isRegistering, setIsRegistering] = useState(false);\n  const [improvementState, setImprovementState] = useState({\n    isOpen: false,\n    isLoading: false,\n    originalText: '',\n    improvedText: '',\n    sessionIndex: null,\n    error: null\n  });\n  const [editingSessionIndex, setEditingSessionIndex] = useState(null);\n  const [editingSessionText, setEditingSessionText] = useState('');\n  const [editingHours, setEditingHours] = useState({});\n  const [sortConfig, setSortConfig] = useState({\n    key: 'name',\n    direction: 'ascending'\n  });\n  const [expandedSessions, setExpandedSessions] = useState({});\n  const [copiedStatus, setCopiedStatus] = useState({});\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\n  const [nextAppointment, setNextAppointment] = useState({\n    isLoading: false,\n    text: null,\n    error: null\n  });\n  const [unbilledAppointments, setUnbilledAppointments] = useState([]);\n  const [isLoadingAppointments, setIsLoadingAppointments] = useState(false);\n  const [billingModalState, setBillingModalState] = useState({\n    isOpen: false,\n    event: null\n  });\n  const [ebmData, setEbmData] = useState([]);\n  const [isManualBillingSetupOpen, setIsManualBillingSetupOpen] = useState(false); // NEU\n  const [confirmDeleteState, setConfirmDeleteState] = useState({\n    isOpen: false,\n    onConfirm: null,\n    message: '',\n    title: ''\n  });\n\n  // NEU: States für den Test-Workflow\n  const [isAddTestModalOpen, setIsAddTestModalOpen] = useState(false);\n  const [currentTestToAdd, setCurrentTestToAdd] = useState(null);\n  const calculateAge = birthdate => {\n    if (!birthdate) return '';\n    const birthDate = new Date(birthdate);\n    const today = new Date();\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const m = today.getMonth() - birthDate.getMonth();\n    if (m < 0 || m === 0 && today.getDate() < birthDate.getDate()) {\n      age--;\n    }\n    return age;\n  };\n  const handleDeleteEbmEntry = async (sessionDate, ebmIndexToDelete) => {\n    if (!selectedPatient || !userId) return;\n    const patientRef = doc(db, getPatientsCollectionPath(), selectedPatient.id);\n    const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n    const sessionIndex = updatedSessions.findIndex(s => s.date === sessionDate);\n    if (sessionIndex === -1) {\n      setAppError(\"Sitzung zum Löschen des Eintrags nicht gefunden.\");\n      return;\n    }\n    const sessionToUpdate = updatedSessions[sessionIndex];\n    const entryToDelete = sessionToUpdate.ebmEntries[ebmIndexToDelete];\n\n    // Finde den zugehörigen Test, falls es einer ist\n    const linkedTest = availableTests.find(t => t.ebm === entryToDelete.nummer);\n    const performDelete = async () => {\n      // EBM-Eintrag aus der Sitzung entfernen\n      sessionToUpdate.ebmEntries.splice(ebmIndexToDelete, 1);\n      let finalPatientData = {\n        sessions: updatedSessions\n      };\n\n      // Wenn ein Test-Link besteht, auch das Testergebnis löschen\n      if (linkedTest && entryToDelete.testInstanceId) {\n        const resultKey = `${linkedTest.id}Results`;\n        const oldResults = selectedPatient[resultKey] || [];\n        const newResults = oldResults.filter(r => r.testInstanceId !== entryToDelete.testInstanceId);\n        finalPatientData[resultKey] = newResults;\n      }\n      try {\n        await setDoc(patientRef, finalPatientData, {\n          merge: true\n        });\n        setConfirmDeleteState({\n          isOpen: false\n        }); // Modal schließen\n      } catch (err) {\n        setAppError(`Fehler beim Löschen: ${err.message}`);\n      }\n    };\n\n    // Wenn es ein verknüpfter Test ist, frage nach Bestätigung\n    if (linkedTest) {\n      setConfirmDeleteState({\n        isOpen: true,\n        title: \"Eintrag wirklich löschen?\",\n        message: `Dieser Abrechnungseintrag ist mit dem Diagnostiktest \"${linkedTest.name}\" verknüpft. Wenn Sie ihn löschen, wird auch das zugehörige Testergebnis unwiderruflich entfernt. Fortfahren?`,\n        onConfirm: performDelete\n      });\n    } else {\n      // Ansonsten direkt löschen\n      await performDelete();\n    }\n  };\n  const handleStartManualBilling = (patientId, date, sessionNumber) => {\n    // sessionNumber ist neu\n    const patient = patients.find(p => p.id === patientId);\n    if (!patient) {\n      setAppError(\"Patient für manuelle Abrechnung nicht gefunden.\");\n      return;\n    }\n    const syntheticEvent = {\n      id: `manual_${Date.now()}`,\n      summary: `Manuelle Sitzung (${patient.chiffre})`,\n      start: {\n        dateTime: new Date(date).toISOString()\n      },\n      sitzungsnummer: sessionNumber,\n      // NEU\n      isManual: true\n    };\n    handleStartBilling(syntheticEvent);\n  };\n  const toggleSessionExpansion = index => {\n    setExpandedSessions(prev => ({\n      ...prev,\n      [index]: !prev[index]\n    }));\n  };\n  const sortedPatients = React.useMemo(() => {\n    let sortablePatients = [...patients];\n    if (sortConfig !== null) {\n      sortablePatients.sort((a, b) => {\n        if (a[sortConfig.key] < b[sortConfig.key]) {\n          return sortConfig.direction === 'ascending' ? -1 : 1;\n        }\n        if (a[sortConfig.key] > b[sortConfig.key]) {\n          return sortConfig.direction === 'ascending' ? 1 : -1;\n        }\n        return 0;\n      });\n    }\n    return sortablePatients;\n  }, [patients, sortConfig]);\n  const handleCopyNote = (text, index) => {\n    navigator.clipboard.writeText(text).then(() => {\n      setCopiedStatus({\n        [index]: true\n      });\n      setTimeout(() => setCopiedStatus({\n        [index]: false\n      }), 2000);\n    }, err => {\n      console.error('Fehler beim Kopieren: ', err);\n      setAppError(\"Text konnte nicht kopiert werden.\");\n    });\n  };\n  const fetchNextAppointment = useCallback(async chiffre => {\n    if (!chiffre) return;\n    setNextAppointment({\n      isLoading: true,\n      text: null,\n      error: null\n    });\n    try {\n      const response = await fetch(`http://localhost:3001/api/calendar/nextevent?chiffre=${chiffre}`);\n      if (response.status === 404) {\n        setNextAppointment({\n          isLoading: false,\n          text: 'Kein zukünftiger Termin gefunden.',\n          error: null\n        });\n        return;\n      }\n      if (!response.ok) {\n        throw new Error('Kalender-API-Anfrage fehlgeschlagen.');\n      }\n      const event = await response.json();\n      const startDate = new Date(event.start);\n      const endDate = new Date(event.end);\n      const dateOptions = {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric'\n      };\n      const timeOptions = {\n        hour: '2-digit',\n        minute: '2-digit'\n      };\n      const formattedDate = startDate.toLocaleDateString('de-DE', dateOptions);\n      const formattedStartTime = startDate.toLocaleTimeString('de-DE', timeOptions);\n      const formattedEndTime = endDate.toLocaleTimeString('de-DE', timeOptions);\n      setNextAppointment({\n        isLoading: false,\n        text: `Nächster Termin: ${formattedDate} um ${formattedStartTime} bis ${formattedEndTime} Uhr`,\n        error: null\n      });\n    } catch (error) {\n      console.error('Fehler beim Abrufen des Termins:', error);\n      setNextAppointment({\n        isLoading: false,\n        text: null,\n        error: 'Termin konnte nicht geladen werden.'\n      });\n    }\n  }, []);\n  const getPatientsCollectionPath = useCallback(() => {\n    if (!userId) return null;\n    return `/artifacts/${firestoreAppId}/users/${userId}/patients`;\n  }, [userId]);\n  const findIcd10CodeLocal = useCallback(codeToFind => {\n    const upperCodeToFind = codeToFind.toUpperCase();\n    let found = localIcd10Data[upperCodeToFind];\n    if (found) return found;\n    const baseCode = upperCodeToFind.replace(/(\\.-[*]|\\.\\*|[*]|-)$/, '');\n    found = localIcd10Data[`${baseCode}.-*`] || localIcd10Data[`${baseCode}.*`] || localIcd10Data[baseCode];\n    if (found) return found;\n    const possibleCategoryCode = Object.keys(localIcd10Data).find(key => key.startsWith(upperCodeToFind) && (localIcd10Data[key].code_kategorie || localIcd10Data[key].code));\n    if (possibleCategoryCode) return localIcd10Data[possibleCategoryCode];\n    return null;\n  }, [localIcd10Data]);\n  const handleStartBilling = event => {\n    setBillingModalState({\n      isOpen: true,\n      event: event\n    });\n  };\n  const handleSaveBilling = async billingData => {\n    const {\n      chiffre,\n      eventId,\n      eventStart,\n      notes,\n      ebmEntries\n    } = billingData;\n    const targetPatient = patients.find(p => p.chiffre === chiffre);\n    if (!targetPatient) {\n      setAppError(`Patient mit Chiffre ${chiffre} nicht gefunden.`);\n      return;\n    }\n    const newSession = {\n      date: new Date(eventStart).toISOString(),\n      structuredNotes: notes,\n      ebmEntries: ebmEntries,\n      eventId: eventId,\n      homeworkStatus: (notes.hausaufgaben || []).filter(task => task.trim() !== '').map(taskText => ({\n        text: taskText,\n        done: false,\n        reason: ''\n      }))\n    };\n    const collectionPath = getPatientsCollectionPath();\n    const patientRef = doc(db, collectionPath, targetPatient.id);\n    const updatedSessions = [...(targetPatient.sessions || []), newSession];\n    updatedSessions.sort((a, b) => new Date(b.date) - new Date(a.date));\n    try {\n      await setDoc(patientRef, {\n        sessions: updatedSessions\n      }, {\n        merge: true\n      });\n      setBillingModalState({\n        isOpen: false,\n        event: null\n      });\n      setActiveDetailTab('abrechnung');\n    } catch (err) {\n      setAppError(\"Fehler beim Speichern der Abrechnung.\");\n      console.error(\"Error saving billing:\", err);\n    }\n  };\n  const handleSaveTestAndResults = async testData => {\n    const {\n      testId,\n      sessionId,\n      multiplier,\n      phase,\n      date,\n      results\n    } = testData;\n    if (!selectedPatient || !testId) {\n      setAppError(\"Fehler: Patient oder Test nicht spezifiziert.\");\n      return;\n    }\n    const testInfo = availableTests.find(t => t.id === testId);\n    if (!testInfo) {\n      setAppError(\"Testkonfiguration nicht gefunden.\");\n      return;\n    }\n    const patientRef = doc(db, getPatientsCollectionPath(), selectedPatient.id);\n    const testInstanceId = `test_${testId}_${Date.now()}`; // NEU: Eindeutige ID\n    const newTestEbmEntry = {\n      nummer: testInfo.ebm,\n      anzahl: multiplier || 1,\n      faktor: 1,\n      testInstanceId\n    }; // NEU: ID zum EBM-Eintrag\n\n    // 1. Zuerst das Testergebnis speichern (dies geschieht immer)\n    const resultKey = `${testId}Results`;\n    const newTestResult = {\n      date: new Date().toISOString(),\n      ...results,\n      testInstanceId\n    }; // NEU\n    const updatedTestResults = [...(selectedPatient[resultKey] || []), newTestResult];\n    let finalPatientData = {\n      [resultKey]: updatedTestResults\n    };\n    try {\n      // Option A: Zu einer bestehenden Sitzung hinzufügen\n      if (sessionId && sessionId !== 'new') {\n        const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n        const sessionIndex = updatedSessions.findIndex(s => (s.eventId || s.date) === sessionId);\n        if (sessionIndex === -1) {\n          throw new Error(\"Die ausgewählte Sitzung zum Hinzufügen wurde nicht gefunden.\");\n        }\n        const sessionToUpdate = updatedSessions[sessionIndex];\n        sessionToUpdate.ebmEntries = [...(sessionToUpdate.ebmEntries || []), newTestEbmEntry];\n        finalPatientData.sessions = updatedSessions;\n\n        // Option B: Eine neue Abrechnung nur für den Test erstellen\n      } else {\n        const testBillingSession = {\n          date: new Date(date).toISOString(),\n          eventId: `test_${testId}_${Date.now()}`,\n          ebmEntries: [newTestEbmEntry],\n          structuredNotes: {\n            thema: `Testdiagnostik: ${testInfo.name}`,\n            Phase: phase\n          }\n        };\n        const updatedSessions = [...(selectedPatient.sessions || []), testBillingSession];\n        updatedSessions.sort((a, b) => new Date(b.date) - new Date(a.date));\n        finalPatientData.sessions = updatedSessions;\n      }\n\n      // 2. Alle Änderungen (Testergebnis + ggf. Sitzungsupdate) in einer Transaktion speichern\n      await setDoc(patientRef, finalPatientData, {\n        merge: true\n      });\n      alert(`Test \"${testInfo.name}\" wurde gespeichert und abgerechnet.`);\n      setActiveDiagnostikSubTab(testId);\n    } catch (err) {\n      setAppError(`Fehler beim Speichern der Testdaten: ${err.message}`);\n      console.error(\"Error saving test data:\", err);\n    }\n  };\n  const handleUpdateHomeworkStatus = async (sessionDate, homeworkIndex, newStatus) => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n    const sessionToUpdate = updatedSessions.find(s => s.date === sessionDate);\n    if (sessionToUpdate && sessionToUpdate.homeworkStatus && sessionToUpdate.homeworkStatus[homeworkIndex]) {\n      Object.assign(sessionToUpdate.homeworkStatus[homeworkIndex], newStatus);\n    }\n    try {\n      await setDoc(patientRef, {\n        sessions: updatedSessions\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error updating homework status:\", err);\n      setAppError(\"Fehler beim Aktualisieren des Hausaufgabenstatus.\");\n    }\n  };\n\n  // --- useEffects ---\n  useEffect(() => {\n    if (ebmData.length === 0) {\n      fetch('/ebm_data_full.json').then(res => res.json()).then(setEbmData).catch(err => console.error(\"Failed to load EBM data\", err));\n    }\n  }, [ebmData.length]);\n  useEffect(() => {\n    if (mainView === 'patientenakte') {\n      setIsLoadingAppointments(true);\n      fetch('http://localhost:3001/api/calendar/past-events').then(res => {\n        if (!res.ok) {\n          return res.json().then(errorData => {\n            throw new Error(errorData.message || `Serverfehler: ${res.status}`);\n          });\n        }\n        return res.json();\n      }).then(calendarEvents => {\n        if (!Array.isArray(calendarEvents)) {\n          throw new Error(\"Unerwartetes Datenformat vom Server erhalten.\");\n        }\n        ;\n        const billedEventIds = new Set();\n        patients.forEach(p => {\n          (p.sessions || []).forEach(s => {\n            if (s.eventId) billedEventIds.add(s.eventId);\n          });\n        });\n        const unbilled = calendarEvents.filter(event => {\n          var _event$summary;\n          return !billedEventIds.has(event.id) && ((_event$summary = event.summary) === null || _event$summary === void 0 ? void 0 : _event$summary.match(/[A-Z][0-9]{6}/));\n        });\n        setUnbilledAppointments(unbilled);\n      }).catch(err => {\n        if (err.message && err.message.includes('Nicht bei Google authentifiziert')) {\n          setAppError(`Kalender-Fehler: Sie müssen sich erneut bei Google authentifizieren. Rufen Sie dazu im Browser auf: http://localhost:3001/auth/google`);\n        } else {\n          setAppError(`Offene Abrechnungen konnten nicht geladen werden: ${err.message}`);\n        }\n      }).finally(() => setIsLoadingAppointments(false));\n    }\n  }, [mainView, patients]);\n  useEffect(() => {\n    if (selectedPatient) {\n      fetchNextAppointment(selectedPatient.chiffre);\n    } else {\n      setNextAppointment({\n        isLoading: false,\n        text: null,\n        error: null\n      });\n    }\n  }, [selectedPatient, fetchNextAppointment]);\n  useEffect(() => {\n    fetch('/icd10f_data.json').then(response => {\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n      return response.json();\n    }).then(data => {\n      const indexedData = {};\n      data.forEach(item => {\n        if (item.code) {\n          indexedData[item.code.toUpperCase()] = item;\n        }\n      });\n      setLocalIcd10Data(indexedData);\n    }).catch(error => {\n      console.error(\"Fehler beim Laden der lokalen ICD-10 Daten:\", error);\n      setAppError(\"Lokale ICD-10 Daten konnten nicht geladen werden. \" + error.message);\n    });\n  }, []);\n  useEffect(() => {\n    if (selectedPatient) {\n      setEditableConductedHours(selectedPatient.conductedHours !== null && selectedPatient.conductedHours !== undefined ? String(selectedPatient.conductedHours) : \"\");\n      setEditableKrankheitsanamnese(selectedPatient.krankheitsanamnese || \"\");\n      setEditableLebensgeschichte(selectedPatient.lebensgeschichte || \"\");\n      setEditableProblemanalyseMakro(selectedPatient.problemanalyseMakro || \"\");\n      setEditableTherapieplan(selectedPatient.therapieplan || \"\");\n      if (detailViewRef.current) {\n        setTimeout(() => {\n          detailViewRef.current.scrollIntoView({\n            behavior: 'smooth',\n            block: 'start'\n          });\n        }, 100);\n      }\n    } else {\n      setEditableConductedHours(\"\");\n      setEditableKrankheitsanamnese(\"\");\n      setEditableLebensgeschichte(\"\");\n      setEditableProblemanalyseMakro(\"\");\n      setEditableTherapieplan(\"\");\n    }\n  }, [selectedPatient]);\n  useEffect(() => {\n    if (newDiagnosisCode.trim() !== '') {\n      const found = findIcd10CodeLocal(newDiagnosisCode.trim().toUpperCase());\n      if (found && found.name) {\n        setLookedUpDiagnosisName(found.name);\n      } else {\n        setLookedUpDiagnosisName('');\n      }\n    } else {\n      setLookedUpDiagnosisName('');\n    }\n  }, [newDiagnosisCode, findIcd10CodeLocal]);\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, user => {\n      if (user) {\n        setUserId(user.uid);\n      } else {\n        setUserId(null);\n      }\n      setIsAuthReady(true);\n      setIsLoading(false);\n    });\n    return () => unsubscribe();\n  }, []);\n  const seedInitialData = useCallback(async () => {\n    if (!userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    try {\n      const patientsCollection = collection(db, collectionPath);\n      const querySnapshot = await getDocs(patientsCollection);\n      if (querySnapshot.empty) {\n        const batch = writeBatch(db);\n        initialPatientsData.forEach(patientData => {\n          const newPatientRef = doc(patientsCollection);\n          batch.set(newPatientRef, {\n            ...patientData,\n            hscl11Results: patientData.hscl11Results || [],\n            bdi2Results: patientData.bdi2Results || [],\n            fep2Results: patientData.fep2Results || [],\n            scl90rResults: patientData.scl90rResults || [],\n            diagnoses_icd11: patientData.diagnoses_icd11 || [],\n            krankheitsanamnese: patientData.krankheitsanamnese || \"\",\n            lebensgeschichte: patientData.lebensgeschichte || \"\",\n            problemanalyseMakro: patientData.problemanalyseMakro || \"\",\n            therapieplan: patientData.therapieplan || \"\"\n          });\n        });\n        await batch.commit();\n      }\n    } catch (err) {\n      console.error(\"Error seeding initial data:\", err);\n      setAppError(\"Fehler beim Laden der initialen Daten.\");\n    }\n  }, [userId, getPatientsCollectionPath]);\n  useEffect(() => {\n    if (!isAuthReady || !userId) {\n      setPatients([]);\n      return;\n    }\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    setIsLoading(true);\n    seedInitialData();\n    const patientsQuery = query(collection(db, collectionPath));\n    const unsubscribe = onSnapshot(patientsQuery, snapshot => {\n      let patientsData = snapshot.docs.map(docSnap => ({\n        id: docSnap.id,\n        ...docSnap.data(),\n        diagnoses_icd11: docSnap.data().diagnoses_icd11 || []\n      }));\n      patientsData.sort((a, b) => a.name.localeCompare(b.name));\n      setPatients(patientsData);\n      setIsLoading(false);\n    }, err => {\n      console.error(\"Error fetching patients:\", err);\n      setAppError(\"Fehler beim Laden der Patientendaten.\");\n      setIsLoading(false);\n    });\n    return () => unsubscribe();\n  }, [isAuthReady, userId, getPatientsCollectionPath, seedInitialData]);\n  useEffect(() => {\n    if (selectedPatient && selectedPatient.id && patients.length > 0) {\n      const currentPatientDataFromList = patients.find(p => p.id === selectedPatient.id);\n      if (currentPatientDataFromList) {\n        if (JSON.stringify(currentPatientDataFromList) !== JSON.stringify(selectedPatient)) {\n          setSelectedPatient(currentPatientDataFromList);\n        }\n      } else {\n        setSelectedPatient(null);\n      }\n    }\n  }, [patients, selectedPatient]);\n  useEffect(() => {\n    const loadIcd10Data = async () => {\n      try {\n        const response = await fetch('/icd10f_data.json');\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        const indexedData = {};\n        data.forEach(item => {\n          if (item.code) {\n            indexedData[item.code.toUpperCase()] = item;\n            const baseCode = item.code.replace(/[*†]/, '').toUpperCase();\n            if (baseCode !== item.code.toUpperCase()) {\n              indexedData[baseCode] = item;\n            }\n          }\n        });\n        setLocalIcd10Data(indexedData);\n      } catch (error) {\n        console.error(\"Fehler beim Laden der lokalen ICD-10 Daten:\", error);\n        setAppError(\"Lokale ICD-10 Daten konnten nicht geladen werden. \" + error.message);\n      }\n    };\n    loadIcd10Data();\n  }, []);\n  const bdiCutoffs = [{\n    y1: 0,\n    y2: 8,\n    label: \"Keine Depression\",\n    color: \"rgba(75, 192, 192, 0.2)\"\n  }, {\n    y1: 9,\n    y2: 13,\n    label: \"Minimale Depression\",\n    color: \"rgba(54, 162, 235, 0.2)\"\n  }, {\n    y1: 14,\n    y2: 19,\n    label: \"Leichte Depression\",\n    color: \"rgba(255, 206, 86, 0.2)\"\n  }, {\n    y1: 20,\n    y2: 28,\n    label: \"Mittelschwere Depression\",\n    color: \"rgba(255, 159, 64, 0.2)\"\n  }, {\n    y1: 29,\n    y2: 63,\n    label: \"Schwere Depression\",\n    color: \"rgba(255, 99, 132, 0.2)\"\n  }];\n  const bdiAxisTicks = [0, 8, 13, 19, 28, 63];\n  const handleAuthAction = async isRegistering => {\n    setIsAuthLoading(true);\n    setAuthError(null);\n    try {\n      if (isRegistering) {\n        await createUserWithEmailAndPassword(auth, email, password);\n      } else {\n        await signInWithEmailAndPassword(auth, email, password);\n      }\n      setEmail(\"\");\n      setPassword(\"\");\n    } catch (error) {\n      console.error(\"Authentication error:\", error);\n      setAuthError(error.message);\n    } finally {\n      setIsAuthLoading(false);\n    }\n  };\n  const handleLogout = async () => {\n    try {\n      await signOut(auth);\n      setSelectedPatient(null);\n      setPatients([]);\n    } catch (error) {\n      console.error(\"Error signing out: \", error);\n      setAppError(\"Fehler beim Abmelden.\");\n    }\n  };\n  const handleSavePatient = async patientData => {\n    if (!userId) {\n      setAppError(\"Benutzer nicht authentifiziert.\");\n      return;\n    }\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const dataToSave = {\n      ...patientData,\n      hscl11Results: patientData.hscl11Results || [],\n      bdi2Results: patientData.bdi2Results || [],\n      fep2Results: patientData.fep2Results || [],\n      scl90rResults: patientData.scl90rResults || [],\n      krankheitsanamnese: patientData.krankheitsanamnese || \"\",\n      lebensgeschichte: patientData.lebensgeschichte || \"\",\n      problemanalyseMakro: patientData.problemanalyseMakro || \"\",\n      therapieplan: patientData.therapieplan || \"\"\n    };\n    try {\n      if (editingPatient && editingPatient.id) {\n        const patientRef = doc(db, collectionPath, editingPatient.id);\n        await setDoc(patientRef, dataToSave, {\n          merge: true\n        });\n      } else {\n        await addDoc(collection(db, collectionPath), dataToSave);\n      }\n      setIsPatientModalOpen(false);\n      setEditingPatient(null);\n    } catch (err) {\n      console.error(\"Error saving patient:\", err);\n      setAppError(\"Fehler beim Speichern des Patienten.\");\n    }\n  };\n  const openDeleteConfirmation = patientId => {\n    setPatientToDeleteId(patientId);\n    setIsConfirmDeleteModalOpen(true);\n  };\n  const confirmDeletePatient = async () => {\n    if (!patientToDeleteId || !userId) {\n      setAppError(\"Löschvorgang fehlgeschlagen.\");\n      setIsConfirmDeleteModalOpen(false);\n      return;\n    }\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    try {\n      const patientRef = doc(db, collectionPath, patientToDeleteId);\n      await deleteDoc(patientRef);\n      if (selectedPatient && selectedPatient.id === patientToDeleteId) {\n        setSelectedPatient(null);\n      }\n      setPatientToDeleteId(null);\n      setIsConfirmDeleteModalOpen(false);\n    } catch (err) {\n      console.error(\"Error deleting patient:\", err);\n      setAppError(\"Fehler beim Löschen des Patienten.\");\n      setIsConfirmDeleteModalOpen(false);\n    }\n  };\n  const handleAddDiagnosis = async () => {\n    const codeToAdd = newDiagnosisCode.trim().toUpperCase();\n    if (!selectedPatient || !codeToAdd || !userId) {\n      setAppError(\"Bitte füllen Sie alle erforderlichen Felder aus.\");\n      return;\n    }\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n\n    // Diagnosestring zusammenbauen\n    const sicherheitPrefix = newDiagnosisSicherheit ? `[${newDiagnosisSicherheit}] ` : \"\";\n    const beschreibung = newDiagnosis.trim() ? `: ${newDiagnosis.trim()}` : lookedUpDiagnosisName ? `: ${lookedUpDiagnosisName}` : \"\";\n    const diagnosisString = `${sicherheitPrefix}${codeToAdd}${beschreibung}`;\n\n    // Aktualisiere die Diagnosen im Firestore\n    const updatedDiagnoses = [...(selectedPatient.diagnoses || []), diagnosisString];\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      console.log(\"Speichere neue Diagnose:\", diagnosisString);\n      await setDoc(patientRef, {\n        diagnoses: updatedDiagnoses\n      }, {\n        merge: true\n      });\n\n      // Reset der Eingabefelder\n      setNewDiagnosisCode('');\n      setNewDiagnosis('');\n      setLookedUpDiagnosisName('');\n      setNewDiagnosisSicherheit('G');\n    } catch (err) {\n      console.error(\"Error adding diagnosis:\", err);\n      setAppError(\"Fehler beim Hinzufügen der Diagnose.\");\n    }\n  };\n  const handleRemoveDiagnosis = async diagnosisStringToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedDiagnoses = selectedPatient.diagnoses.filter(d => d !== diagnosisStringToRemove);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        diagnoses: updatedDiagnoses\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing diagnosis:\", err);\n      setAppError(\"Fehler beim Entfernen der Diagnose.\");\n    }\n  };\n  const handleAddSession = async () => {\n    if (!selectedPatient || !newSessionNotes.trim() || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const newSession = {\n      date: newSessionDate,\n      notes: newSessionNotes.trim()\n    };\n    const updatedSessions = [...(selectedPatient.sessions || []), newSession];\n    updatedSessions.sort((a, b) => new Date(b.date) - new Date(a.date));\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        sessions: updatedSessions\n      }, {\n        merge: true\n      });\n      setNewSessionNotes('');\n    } catch (err) {\n      console.error(\"Error adding session:\", err);\n      setAppError(\"Fehler beim Hinzufügen der Sitzung.\");\n    }\n  };\n  const handleUpdateConductedHours = async (patientId, hours) => {\n    if (!patientId || !userId) return;\n    if (isNaN(hours) || hours < 0) {\n      console.error(\"Ungültige Stundenzahl für Firestore-Update:\", hours);\n      return;\n    }\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const patientRef = doc(db, collectionPath, patientId);\n    try {\n      await setDoc(patientRef, {\n        conductedHours: hours\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error updating conducted hours:\", err);\n      setAppError(\"Fehler beim Aktualisieren der Stunden.\");\n    }\n  };\n  const handleAddBdiResult = async newResult => {\n    // Parameter 'newResult' ist neu\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedBdiResults = [...(selectedPatient.bdi2Results || []), newResult];\n    updatedBdiResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        bdi2Results: updatedBdiResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error adding BDI-II result:\", err);\n      setAppError(\"Fehler beim Hinzufügen des BDI-II Ergebnisses.\");\n    }\n  };\n  const handleAddHsclResult = async newResult => {\n    // Parameter 'newResult' ist neu\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedHsclResults = [...(selectedPatient.hscl11Results || []), newResult];\n    updatedHsclResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        hscl11Results: updatedHsclResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error adding HSCL result:\", err);\n      setAppError(\"Fehler beim Hinzufügen des HSCL-Ergebnisses.\");\n    }\n  };\n  const handleRemoveHsclResult = async dateToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedHsclResults = selectedPatient.hscl11Results.filter(r => r.date !== dateToRemove);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        hscl11Results: updatedHsclResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing HSCL result:\", err);\n      setAppError(\"Fehler beim Entfernen des HSCL-Ergebnisses.\");\n    }\n  };\n  const handleRemoveBdiResult = async dateToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedBdiResults = selectedPatient.bdi2Results.filter(r => r.date !== dateToRemove);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        bdi2Results: updatedBdiResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing BDI-II result:\", err);\n      setAppError(\"Fehler beim Entfernen des BDI-II Ergebnisses.\");\n    }\n  };\n  const handleAddFepResult = async result => {\n    // Erhält jetzt das fertige Ergebnis-Objekt\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedFepResults = [...(selectedPatient.fep2Results || []), result];\n    updatedFepResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        fep2Results: updatedFepResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error adding FEP-2 result:\", err);\n      setAppError(\"Fehler beim Hinzufügen des FEP-2 Ergebnisses.\");\n    }\n  };\n  const handleRemoveFepResult = async dateToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedFepResults = selectedPatient.fep2Results.filter(r => r.date !== dateToRemove);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        fep2Results: updatedFepResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing FEP-2 result:\", err);\n      setAppError(\"Fehler beim Entfernen des FEP-2 Ergebnisses.\");\n    }\n  };\n  const handleAddScl90rResult = async result => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const newResultToSave = {\n      rawScores: result.rawScores,\n      tScores: result.tScores,\n      globalScores: result.globalScores,\n      itemScores: result.itemScores,\n      // Das entscheidende Feld, das fehlte\n      date: result.date // Behalten Sie das ursprüngliche Datum für die Anzeige bei\n    };\n\n    // Fügen Sie das neue, explizit erstellte Ergebnisobjekt zum Array hinzu\n    const updatedScl90rResults = [...(selectedPatient.scl90rResults || []), newResultToSave];\n\n    // Sortieren Sie die Ergebnisse nach Datum, damit das Neueste oben steht\n    updatedScl90rResults.sort((a, b) => new Date(b.date) - new Date(a.date));\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        scl90rResults: updatedScl90rResults\n      }, {\n        merge: true\n      });\n      console.log(\"SCL-90-R-Ergebnis erfolgreich gespeichert mit itemScores.\");\n    } catch (err) {\n      console.error(\"Error adding SCL-90-R result:\", err);\n      setAppError(\"Fehler beim Speichern des SCL-90-R Ergebnisses.\");\n    }\n  };\n  const handleRemoveScl90rResult = async dateToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n\n    // Filtern Sie das Array, um das Ergebnis mit dem übereinstimmenden Datum zu entfernen\n    const updatedScl90rResults = selectedPatient.scl90rResults.filter(r => r.date !== dateToRemove);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        scl90rResults: updatedScl90rResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing SCL-90-R result:\", err);\n      setAppError(\"Fehler beim Entfernen des SCL-90-R Ergebnisses.\");\n    }\n  };\n  const fetchSessionSummary = async (sessionNotes, sessionIndex) => {\n    setSessionSummaries(prev => ({\n      ...prev,\n      [sessionIndex]: {\n        ...prev[sessionIndex],\n        isLoading: true,\n        error: null\n      }\n    }));\n    const prompt = `Fasse die folgenden Therapiesitzungsnotizen prägnant zusammen. Konzentriere dich auf die wichtigsten Themen, Interventionen und den Fortschritt des Patienten:\\n\\n\"${sessionNotes}\"`;\n    try {\n      const summary = await generateGeminiText(prompt);\n      setSessionSummaries(prev => ({\n        ...prev,\n        [sessionIndex]: {\n          summary: summary,\n          isLoading: false,\n          error: null\n        }\n      }));\n    } catch (e) {\n      setSessionSummaries(prev => ({\n        ...prev,\n        [sessionIndex]: {\n          ...prev[sessionIndex],\n          isLoading: false,\n          error: e.message\n        }\n      }));\n      setAppError(`Fehler bei der Zusammenfassung: ${e.message}`);\n    }\n  };\n  const handleKrankheitsmodellChange = async (fieldName, value) => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        [fieldName]: value\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(`Error updating ${fieldName}:`, err);\n      setAppError(`Fehler beim Speichern von ${fieldName}.`);\n    }\n  };\n  const handleTherapeutischeAssistenzAnfordern = async () => {\n    if (!selectedPatient) {\n      setAssistenzError(\"Bitte wählen Sie zuerst einen Patienten aus.\");\n      return;\n    }\n    setIsLoadingTherapeutischeAssistenz(true);\n    setTherapeutischeAssistenzOutput(\"\");\n    setAssistenzError(null);\n    const patientenDatenText = `\nHier sind die relevanten Patientendaten:\n\n**Krankheitsanamnese:**\n${selectedPatient.krankheitsanamnese || \"Keine Angaben.\"}\n\n**Lebensgeschichte/Biografie:**\n${selectedPatient.lebensgeschichte || \"Keine Angaben.\"}\n\n**Problemanalyse auf Makroebene:**\n${selectedPatient.problemanalyseMakro || \"Keine Angaben.\"}\n\n**Therapieplanung (bisherig):**\n${selectedPatient.therapieplan || \"Keine Angaben.\"}\n\n**Verlaufsdokumentation (Sitzungsnotizen):**\n${(selectedPatient.sessions || []).map((s, i) => `Sitzung ${i + 1} (${new Date(s.date).toLocaleDateString('de-DE')}): ${s.notes}`).join(\"\\n\\n\") || \"Keine Sitzungsnotizen vorhanden.\"}\n\n**Diagnosen:**\n${(selectedPatient.diagnoses || []).join(\", \") || \"Keine Diagnosen erfasst.\"}\n\n**Genehmigte Stunden:** ${selectedPatient.approvedHours}\n**Durchgeführte Stunden:** ${selectedPatient.conductedHours}\n    `;\n    const systemPrompt = `Du bist ein interdisziplinäres Expertenteam, bestehend aus erfahrenen Verhaltenstherapeuten wie Jürgen Margraf, Dr. Stavemann, Aaron T. Beck, Judith Beck und Jonathan S. Abramowitz sowie aus leitenden Chefärzten und Psychiatern wie Prof. Dr. Mathias Berger. Das Team verfügt über exzellente Fachkompetenz in der evidenzbasierten psychotherapeutischen Praxis und legt besonderen Wert auf präzise medizinische Dokumentation sowie therapeutische Qualität. Darüber hinaus gehören auch international anerkannte Experten wie David H. Barlow, Stefan G. Hofmann und Steven Hayes zum Team. Du verfügst über tiefgehendes Wissen in Ansätzen der sogenannten „dritten Welle“ der Verhaltenstherapie, insbesondere in ACT, Schematherapie und DBT.\n\nDeine Aufgabe ist es, auf Grundlage folgender Elemente, welche du aus den bereitgestellten Patientendaten entnimmst:\n- Krankheitsanamnese\n- Lebensgeschichte/Biografie\n- Problemanalyse auf Makroebene\n- Therapieplanung (bisherig)\n- Verlaufsdokumentation (Sitzungsnotizen)\n\neine strukturierte Rückmeldung zu geben mit dem Ziel:\n1. Wesentliche Schwerpunkte in der weiteren Therapieplanung zu identifizieren.\n2. Konkrete Interventionsideen zu formulieren, orientiert an den zugelassenen Stunden.\n3. Hinweise zu geben, worauf in der Strukturierung der Sitzungen geachtet werden sollte (z.B. Themenfokus, Symptomschwere, Therapiezielorientierung).\n\nBerücksichtige dabei:\n• Die begrenzte Anzahl genehmigter Stunden.\n• Dass Themen nicht zu häufig gewechselt werden sollen.\n• Die Konsistenz und Nachvollziehbarkeit im Verlauf.\n\nBitte plane deine Analyse gründlich und reflektiert. Handle in Etappen:\n1. Diagnostische Schwerpunkte benennen\n2. Therapieziele definieren\n3. Interventionsvorschläge machen\n4. Hinweise zur Dokumentation geben\n\nAtme einmal tief ein und aus und nehme dir Zeit für die Aufgabe. Mache bitte weiter, bis das Problem vollständig gelöst ist. Planen bitte ausführlich vor jeder Aktion.\n\nHier sind die Daten des aktuellen Falls:\n${patientenDatenText}\n\nBitte gib deine strukturierte Rückmeldung.`;\n    try {\n      const assistenz = await generateGeminiText(systemPrompt);\n      setTherapeutischeAssistenzOutput(assistenz);\n    } catch (e) {\n      setAssistenzError(`Fehler bei der Anforderung der therapeutischen Assistenz: ${e.message}`);\n    } finally {\n      setIsLoadingTherapeutischeAssistenz(false);\n    }\n  };\n  const showDiagnosisInfo = diagnosisString => {\n    console.log(\"Zeige Info für:\", diagnosisString); // Debug-Ausgabe\n\n    const sicherheitMatch = diagnosisString.match(/^\\[([AVGZN]+)\\]\\s*/i);\n    const sicherheit = sicherheitMatch ? sicherheitMatch[1].toUpperCase() : '';\n    const codeAndName = sicherheitMatch ? diagnosisString.substring(sicherheitMatch[0].length) : diagnosisString;\n    const codeMatch = codeAndName.match(/^([A-Z][0-9]{1,2}(\\.[0-9A-Z]{1,2})?[*†]?)/i);\n    const code = codeMatch ? codeMatch[0].toUpperCase() : codeAndName.split(':')[0].trim().toUpperCase();\n    console.log(\"Suche nach Code:\", code); // Debug-Ausgabe\n    const localData = findIcd10CodeLocal(code);\n    console.log(\"Gefundene Daten:\", localData); // Debug-Ausgabe\n\n    if (localData) {\n      setDiagnosisInfo({\n        code: localData.code || code,\n        name: localData.name || '',\n        beschreibung: localData.beschreibung || localData.beschreibung_kategorie || '',\n        inkl: localData.inkl || [],\n        exkl: localData.exkl || [],\n        hinweise: localData.hinweise || [],\n        zusatz_info_code: localData.zusatz_info_code || '',\n        sicherheit: sicherheit,\n        isLoading: false,\n        error: null,\n        isOpen: true,\n        source: 'local'\n      });\n    } else {\n      setDiagnosisInfo({\n        code: code,\n        name: \"Unbekannter ICD-10 Code\",\n        isLoading: false,\n        error: `Für den ICD-10 Code \"${code}\" wurden keine Informationen in der lokalen Datenbank gefunden.`,\n        isOpen: true,\n        source: 'error'\n      });\n    }\n  };\n  const fetchIcd11Details = async diagnosis => {\n    if (!diagnosis || !diagnosis.uri) {\n      setAppError(\"Keine gültige URI für die ICD-11 Diagnose vorhanden.\");\n      return;\n    }\n    const {\n      code,\n      title,\n      uri\n    } = diagnosis;\n    setDiagnosisInfo({\n      code: code,\n      name: title,\n      isLoading: true,\n      error: null,\n      isOpen: true,\n      source: 'api'\n    });\n    try {\n      var _fullData$title, _fullData$definition;\n      const response = await fetch(`http://localhost:3001/api/icd11-info?uri=${encodeURIComponent(uri)}`);\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'API-Anfrage fehlgeschlagen');\n      }\n      const fullData = await response.json();\n      setDiagnosisInfo({\n        code: fullData.code || code,\n        name: ((_fullData$title = fullData.title) === null || _fullData$title === void 0 ? void 0 : _fullData$title['@value']) || title,\n        beschreibung: ((_fullData$definition = fullData.definition) === null || _fullData$definition === void 0 ? void 0 : _fullData$definition['@value']) || '',\n        diagnosticCriteria: fullData.diagnosticCriteria,\n        inclusions: fullData.inclusion,\n        exclusions: fullData.exclusion,\n        isLoading: false,\n        error: null,\n        isOpen: true,\n        source: 'api_detail'\n      });\n    } catch (error) {\n      console.error('Fehler beim Abrufen der ICD-11 Details:', error);\n      setDiagnosisInfo({\n        code: code,\n        isLoading: false,\n        error: `Konnte Informationen für ${code} nicht laden: ${error.message}`,\n        isOpen: true,\n        source: 'api'\n      });\n    }\n  };\n  const handleAssignIcd11Diagnosis = async (patientId, icd11Entity) => {\n    if (!patientId || !icd11Entity || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const patientRef = doc(db, collectionPath, patientId);\n    const targetPatient = patients.find(p => p.id === patientId);\n    if (!targetPatient) {\n      setAppError(\"Ziel-Patient konnte nicht gefunden werden.\");\n      return;\n    }\n    const newDiagnosis = {\n      code: icd11Entity.code,\n      title: icd11Entity.selectedText,\n      uri: icd11Entity.linearizationUri || icd11Entity.foundationUri,\n      date: new Date().toISOString()\n    };\n    const updatedDiagnoses = [...(targetPatient.diagnoses_icd11 || []), newDiagnosis];\n    try {\n      await setDoc(patientRef, {\n        diagnoses_icd11: updatedDiagnoses\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error assigning ICD-11 diagnosis:\", err);\n      setAppError(\"Fehler beim Zuweisen der ICD-11 Diagnose.\");\n    }\n  };\n  const handleRemoveIcd11Diagnosis = async diagnosisToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedDiagnoses = selectedPatient.diagnoses_icd11.filter(d => d.date !== diagnosisToRemove.date);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        diagnoses_icd11: updatedDiagnoses\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing ICD-11 diagnosis:\", err);\n      setAppError(\"Fehler beim Entfernen der ICD-11 Diagnose.\");\n    }\n  };\n\n  // app.js, in der App Komponente\n\n  const handleImproveSessionNote = async (session, index) => {\n    // Setzt den Ladezustand für den spezifischen Button\n    setImprovementState({\n      ...improvementState,\n      isLoading: true,\n      sessionIndex: index,\n      error: null\n    });\n\n    // Die Sitzungsnummer wird berechnet (angenommen, die neuste Sitzung ist oben)\n    const sessionNumber = selectedPatient.sessions.length - index;\n\n    // Der von Ihnen definierte Prompt wird mit den aktuellen Sitzungsdaten kombiniert\n    const fullPrompt = `Stelle dir vor du bist ein Team aus erfahrenen Psychotherapeut/Verhaltenstherapeut wie wie Jürgen Margraf, Dr. Stavemann, Aaron T. Beck, Judith Beck und Jonathan S. Abramowitz, welche großen Wert auf fachlich präzise Dokumentation und Äußerungen legen. Du hast ein großes fachliches Wissen über die klassische VT sowie auch in dritte Welle Verfahren wie ACT durch Steve Hayes und Russ Harris. Kannst du meine Therapiedokumentation verbessern? Kannst du die Doku weiterhin wie folgt organisieren: Sitzungsnummer, Thema, Patientenbericht, Therapeutische Interventionen (Stichpunktartig mit kurzer  , z.B. 1.Kognitive Umstrukturierung: - Disputation der Grundannahmen des Patienten (\"Ich bin wertlos, weil ich keine Beziehung habe\") mittels sokraitscher Gesprächsführung), Gesamteindruck, Risikoabschätzung (falls keine Suizidalität vorliegt: Auf Nachfrage wurden suizidale Gedanken, Impulse sowie Handlungsabsichten glaubhaft und eindeutig verneint. Die Absprachefähigkeit der Patientin ist gegeben. Es besteht kein Anhalt für eine akute Eigen- oder Fremdgefährdung.), ggf. falls benannt Hausaufgaben, Plan für die nächste Sitzung. Das macht die Dokumentation übersichtlicher. Der Teil des Pateintenberichts soll im Fließtext geschrieben sein. Kannst du den fertigen Text mir dann auch im Markdownformat ausgeben, aber bitte ohne * ** oder # (also nicht fett oder mit Titeln) oder em-dashes. Zeig den Text als Codeblock, wie in einem Terminal. Atme einmal tief ein und aus und nehme dir Zeit für die Aufgabe. Mache bitte weiter, bis das Problem vollständig gelöst ist. Planen bitte ausführlich vor jeder Aktion.\n\n\n---\n${session.notes}\n---\n`;\n    try {\n      const improvedText = await generateGeminiText(fullPrompt);\n      // Öffnet das Modal mit dem Vergleich\n      setImprovementState({\n        isOpen: true,\n        isLoading: false,\n        originalText: session.notes,\n        improvedText: improvedText.replace(/^```(json|text)?\\s*|```$/gm, ''),\n        // Entfernt mögliche ``` Markierungen der KI\n        sessionIndex: index,\n        error: null\n      });\n    } catch (e) {\n      const errorMsg = `Fehler bei der Verbesserung der Notiz: ${e.message}`;\n      setImprovementState({\n        isLoading: false,\n        error: errorMsg,\n        sessionIndex: null,\n        isOpen: false\n      });\n      setAppError(errorMsg);\n    }\n  };\n  const handleAcceptImprovement = async () => {\n    if (improvementState.sessionIndex === null || !selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n\n    // Ersetzt den alten Notiztext durch den neuen im Array\n    updatedSessions[improvementState.sessionIndex].notes = improvementState.improvedText;\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        sessions: updatedSessions\n      }, {\n        merge: true\n      });\n      // Schließt das Modal und setzt den State zurück\n      setImprovementState({\n        isOpen: false,\n        isLoading: false,\n        originalText: '',\n        improvedText: '',\n        sessionIndex: null,\n        error: null\n      });\n    } catch (err) {\n      console.error(\"Error updating session note:\", err);\n      setAppError(\"Fehler beim Aktualisieren der Sitzungsnotiz.\");\n    }\n  };\n  const handleEditSessionStart = (session, index) => {\n    setEditingSessionIndex(index);\n    setEditingSessionText(session.notes);\n    toggleSessionExpansion(index);\n  };\n\n  // Bricht den Bearbeitungsmodus ab\n  const handleEditSessionCancel = () => {\n    setEditingSessionIndex(null);\n    setEditingSessionText('');\n  };\n\n  // Speichert die bearbeitete Sitzungsnotiz in Firestore\n  const handleEditSessionSave = async () => {\n    if (editingSessionIndex === null || !selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n\n    // Eine tiefe Kopie des Session-Arrays erstellen, um direkten State nicht zu mutieren\n    const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n\n    // Die Notiz an der richtigen Stelle im Array aktualisieren\n    updatedSessions[editingSessionIndex].notes = editingSessionText;\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        sessions: updatedSessions\n      }, {\n        merge: true\n      });\n      // Bearbeitungsmodus beenden\n      handleEditSessionCancel();\n    } catch (err) {\n      console.error(\"Error updating session note:\", err);\n      setAppError(\"Fehler beim Aktualisieren der Sitzungsnotiz.\");\n    }\n  };\n  const totalApprovedHours = patients.reduce((sum, p) => sum + (p.approvedHours || 0), 0);\n  const totalConductedHours = patients.reduce((sum, p) => sum + (p.conductedHours || 0), 0);\n  const overallProgressTarget = 600;\n  const overallProgress = overallProgressTarget > 0 ? totalConductedHours / overallProgressTarget * 100 : 0;\n  const inputStd = \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\";\n  const btnPrimary = \"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-md shadow-sm flex items-center justify-center\";\n  const btnDanger = \"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-3 rounded-md flex items-center\";\n  const btnInfo = \"bg-sky-500 hover:bg-sky-600 text-white font-semibold py-1 px-2 text-xs rounded-md flex items-center\";\n  const textareaStd = \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm min-h-[150px]\";\n  if (!isAuthReady) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-center items-center h-screen text-xl font-semibold text-gray-700\",\n    children: \"Authentifizierung wird initialisiert...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1360,\n    columnNumber: 30\n  }, this);\n  if (!userId) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gradient-to-br from-slate-100 to-sky-100 flex flex-col justify-center items-center p-4\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-8 rounded-xl shadow-2xl w-full max-w-md\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-center text-indigo-600 mb-8\",\n          children: isLoginView ? \"Login Patientenverwaltung\" : \"Registrierung\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1362,\n          columnNumber: 218\n        }, this), authError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"bg-red-100 text-red-700 p-3 rounded-md mb-4 text-sm\",\n          children: authError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1362,\n          columnNumber: 366\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: e => {\n            e.preventDefault();\n            handleAuthAction(isRegistering);\n          },\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"email\",\n              className: \"block text-sm font-medium text-gray-700\",\n              children: \"E-Mail Adresse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1362,\n              columnNumber: 557\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              name: \"email\",\n              id: \"email\",\n              required: true,\n              value: email,\n              onChange: e => setEmail(e.target.value),\n              className: inputStd\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1362,\n              columnNumber: 654\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1362,\n            columnNumber: 552\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"password\",\n              className: \"block text-sm font-medium text-gray-700\",\n              children: \"Passwort\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1362,\n              columnNumber: 798\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              name: \"password\",\n              id: \"password\",\n              required: true,\n              value: password,\n              onChange: e => setPassword(e.target.value),\n              className: inputStd\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1362,\n              columnNumber: 892\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1362,\n            columnNumber: 793\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: isAuthLoading,\n            className: `${btnPrimary} w-full py-3 text-base ${isAuthLoading ? 'opacity-50 cursor-not-allowed' : ''}`,\n            children: isAuthLoading ? isLoginView ? \"Anmelden...\" : \"Registrieren...\" : isLoginView ? \"Anmelden\" : \"Registrieren\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1362,\n            columnNumber: 1046\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1362,\n          columnNumber: 449\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setIsLoginView(!isLoginView);\n            setAuthError(null);\n          },\n          className: \"mt-6 text-sm text-indigo-600 hover:text-indigo-500 text-center w-full\",\n          children: isLoginView ? \"Noch kein Konto? Jetzt registrieren.\" : \"Bereits registriert? Zum Login.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1362,\n          columnNumber: 1328\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1362,\n        columnNumber: 149\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1362,\n      columnNumber: 28\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-slate-100 to-sky-100 font-sans\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"bg-indigo-700 text-white shadow-lg\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold tracking-tight\",\n          children: \"Therapie-Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1368,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-4\",\n          children: [userId && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs opacity-75 hidden sm:block\",\n            children: [\"UserID: \", userId]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1370,\n            columnNumber: 36\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLogout,\n            className: \"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-3 rounded-md text-sm flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(LogOut, {\n              className: \"mr-2 h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1372,\n              columnNumber: 29\n            }, this), \" Logout\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1371,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1369,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1367,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1366,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container mx-auto p-4 sm:p-6 lg:p-8\",\n      children: [/*#__PURE__*/_jsxDEV(ConfirmationModal, {\n        isOpen: isConfirmDeleteModalOpen,\n        onClose: () => setIsConfirmDeleteModalOpen(false),\n        onConfirm: confirmDeletePatient,\n        title: \"Patient l\\xF6schen\",\n        message: \"M\\xF6chten Sie diesen Patienten wirklich l\\xF6schen? Diese Aktion kann nicht r\\xFCckg\\xE4ngig gemacht werden.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1380,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: isPatientModalOpen,\n        onClose: () => setIsPatientModalOpen(false),\n        title: editingPatient ? \"Patient bearbeiten\" : \"Neuen Patienten anlegen\",\n        children: /*#__PURE__*/_jsxDEV(PatientForm, {\n          patient: editingPatient,\n          onSave: handleSavePatient,\n          onCancel: () => setIsPatientModalOpen(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1395,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1390,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 border-b border-gray-300\",\n        children: /*#__PURE__*/_jsxDEV(\"nav\", {\n          className: \"flex space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setMainView('patients'),\n            className: `py-3 px-4 font-medium text-lg rounded-t-lg ${mainView === 'patients' ? 'bg-white text-indigo-700 shadow-md' : 'bg-transparent text-gray-500 hover:text-indigo-600'}`,\n            children: \"Patienten\\xFCbersicht\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1405,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setMainView('patientenakte');\n              setSelectedPatient(null); /* Optional: Patient abwählen beim Tab-Wechsel */\n            },\n            className: `py-3 px-4 font-medium text-lg rounded-t-lg ${mainView === 'patientenakte' ? 'bg-white text-indigo-700 shadow-md' : 'bg-transparent text-gray-500 hover:text-indigo-600'}`,\n            children: \"Patientenakte\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1410,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setMainView('ebm'),\n            className: `py-3 px-4 font-medium text-lg rounded-t-lg ${mainView === 'ebm' ? 'bg-white text-indigo-700 shadow-md' : 'bg-transparent text-gray-500 hover:text-indigo-600'}`,\n            children: \"EBM\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1414,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setMainView('icd11'),\n            className: `py-3 px-4 font-medium text-lg rounded-t-lg ${mainView === 'icd11' ? 'bg-white text-indigo-700 shadow-md' : 'bg-transparent text-gray-500 hover:text-indigo-600'}`,\n            children: \"ICD-11 Nachschlagewerk\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1419,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1402,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1401,\n        columnNumber: 17\n      }, this), mainView === 'patients' && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          ref: overviewRef,\n          className: \"mb-6 flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-semibold text-gray-800\",\n            children: \"Patienten\\xFCbersicht\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1428,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setEditingPatient(null);\n              setIsPatientModalOpen(true);\n            },\n            className: `${btnPrimary} py-2 px-4`,\n            children: [/*#__PURE__*/_jsxDEV(UserPlus, {\n              className: \"w-5 h-5 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1430,\n              columnNumber: 33\n            }, this), \" Patient hinzuf\\xFCgen\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1429,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1427,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white shadow-xl rounded-lg overflow-hidden mb-8\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"overflow-x-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"w-full min-w-max table-auto text-left\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                className: \"bg-gray-100 border-b border-gray-300\",\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider cursor-pointer\",\n                    onClick: () => setSortConfig(prev => ({\n                      key: 'name',\n                      direction: prev.key === 'name' && prev.direction === 'ascending' ? 'descending' : 'ascending'\n                    })),\n                    children: [\"Name \", sortConfig.key === 'name' && (sortConfig.direction === 'ascending' ? '▲' : '▼')]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1439,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider\",\n                    children: \"Chiffre\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1449,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider\",\n                    children: \"Diagnosen\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1452,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider\",\n                    children: \"Therapie\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1455,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider cursor-pointer\",\n                    onClick: () => setSortConfig(prev => ({\n                      key: 'conductedHours',\n                      direction: prev.key === 'conductedHours' && prev.direction === 'ascending' ? 'descending' : 'ascending'\n                    })),\n                    children: [\"Stunden \", sortConfig.key === 'conductedHours' && (sortConfig.direction === 'ascending' ? '▲' : '▼')]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1459,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider\",\n                    children: \"Fortschritt\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1469,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider\",\n                    children: \"Aktionen\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1472,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1438,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1437,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: [sortedPatients.length === 0 && !isLoading && /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: /*#__PURE__*/_jsxDEV(\"td\", {\n                    colSpan: \"7\",\n                    className: \"text-center py-10 text-gray-500\",\n                    children: \"Keine Patienten gefunden.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1478,\n                    columnNumber: 92\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1478,\n                  columnNumber: 88\n                }, this), sortedPatients.map(patient => {\n                  const progress = patient.approvedHours > 0 ? patient.conductedHours / patient.approvedHours * 100 : 0;\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: `hover:bg-indigo-50 cursor-pointer ${(selectedPatient === null || selectedPatient === void 0 ? void 0 : selectedPatient.id) === patient.id ? 'bg-indigo-100' : ''}`,\n                    onClick: () => {\n                      setSelectedPatient(patient);\n                      setActiveDetailTab('übersicht');\n                      setSessionSummaries({});\n                      setTherapeutischeAssistenzOutput('');\n                      setAssistenzError(null);\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3 px-4 whitespace-nowrap text-sm font-medium text-gray-800\",\n                      children: [patient.name, \", \", patient.vorname]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1483,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3 px-4 whitespace-nowrap text-sm text-gray-600\",\n                      children: patient.chiffre\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1484,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3 px-4 text-sm text-gray-600 max-w-xs\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex flex-col space-y-1\",\n                        children: [(patient.diagnoses || []).slice(0, 4).map((diag, idx) => {\n                          const sicherheitMatch = diag.match(/^\\[([AVGZN]+)\\]/i);\n                          const sicherheit = sicherheitMatch ? sicherheitMatch[1].toUpperCase() : '';\n                          const colorClasses = {\n                            'G': 'bg-green-100 text-green-800 hover:bg-green-200',\n                            'V': 'bg-yellow-100 text-yellow-800 hover:bg-yellow-200',\n                            'A': 'bg-red-100 text-red-800 hover:bg-red-200',\n                            'ZN': 'bg-blue-100 text-blue-800 hover:bg-blue-200'\n                          }[sicherheit] || 'bg-gray-100 text-gray-800 hover:bg-gray-200';\n                          return /*#__PURE__*/_jsxDEV(\"span\", {\n                            className: `px-2 py-0.5 text-xs rounded-full truncate inline-block cursor-pointer ${colorClasses}`,\n                            onClick: e => {\n                              e.stopPropagation();\n                              showDiagnosisInfo(diag);\n                            },\n                            title: `Info zu ${diag} anzeigen`,\n                            children: [\" \", diag, \" \"]\n                          }, idx, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1485,\n                            columnNumber: 652\n                          }, this);\n                        }), (patient.diagnoses || []).length > 4 && /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-xs text-gray-500 mt-1\",\n                          children: \"...\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1485,\n                          columnNumber: 933\n                        }, this), (patient.diagnoses || []).length === 0 && \"-\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1485,\n                        columnNumber: 110\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1485,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3 px-4 whitespace-nowrap text-sm text-gray-600\",\n                      children: patient.therapyType\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1486,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3 px-4 whitespace-nowrap text-sm text-gray-600\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center justify-center space-x-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-12 text-right\",\n                          children: editingHours.hasOwnProperty(patient.id) ? /*#__PURE__*/_jsxDEV(\"input\", {\n                            type: \"number\",\n                            value: editingHours[patient.id],\n                            className: \"w-16 text-center border border-indigo-300 rounded-md shadow-sm\",\n                            autoFocus: true,\n                            onClick: e => e.stopPropagation(),\n                            onChange: e => {\n                              e.stopPropagation();\n                              setEditingHours(prev => ({\n                                ...prev,\n                                [patient.id]: e.target.value\n                              }));\n                            },\n                            onBlur: e => {\n                              e.stopPropagation();\n                              const finalHours = parseInt(editingHours[patient.id], 10);\n                              if (!isNaN(finalHours) && finalHours >= 0 && finalHours !== patient.conductedHours) {\n                                const clampedHours = Math.min(finalHours, patient.approvedHours);\n                                handleUpdateConductedHours(patient.id, clampedHours);\n                              }\n                              setEditingHours({});\n                            },\n                            onKeyDown: e => {\n                              if (e.key === 'Enter') e.target.blur();else if (e.key === 'Escape') setEditingHours({});\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1492,\n                            columnNumber: 69\n                          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                            className: \"cursor-pointer hover:bg-indigo-100 p-1 rounded-md\",\n                            title: \"Stundenzahl bearbeiten\",\n                            onClick: e => {\n                              e.stopPropagation();\n                              setEditingHours({\n                                [patient.id]: String(patient.conductedHours)\n                              });\n                            },\n                            children: patient.conductedHours\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1517,\n                            columnNumber: 69\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1490,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-gray-400\",\n                          children: \"/\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1530,\n                          columnNumber: 61\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-12 text-left\",\n                          children: /*#__PURE__*/_jsxDEV(\"span\", {\n                            children: patient.approvedHours\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1532,\n                            columnNumber: 65\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1531,\n                          columnNumber: 61\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1488,\n                        columnNumber: 57\n                      }, this), \" \"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1487,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3 px-4 whitespace-nowrap\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-full bg-gray-200 rounded-full h-2.5\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: `h-2.5 rounded-full ${progress > 80 ? 'bg-red-500' : progress > 50 ? 'bg-yellow-400' : 'bg-green-500'}`,\n                          style: {\n                            width: `${Math.min(progress, 100)}%`\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1535,\n                          columnNumber: 152\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1535,\n                        columnNumber: 97\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-xs text-gray-500 block text-center mt-1\",\n                        children: [Math.round(progress), \"%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1535,\n                        columnNumber: 334\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1535,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3 px-4 whitespace-nowrap text-sm space-x-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: e => {\n                          e.stopPropagation();\n                          setEditingPatient(patient);\n                          setIsPatientModalOpen(true);\n                        },\n                        className: \"text-indigo-600 hover:text-indigo-800 transition duration-150 p-1 rounded hover:bg-indigo-100\",\n                        title: \"Bearbeiten\",\n                        children: /*#__PURE__*/_jsxDEV(Edit3, {\n                          className: \"w-5 h-5\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1536,\n                          columnNumber: 347\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1536,\n                        columnNumber: 115\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: e => {\n                          e.stopPropagation();\n                          openDeleteConfirmation(patient.id);\n                        },\n                        className: \"text-red-500 hover:text-red-700 transition duration-150 p-1 rounded hover:bg-red-100\",\n                        title: \"L\\xF6schen\",\n                        children: /*#__PURE__*/_jsxDEV(Trash2, {\n                          className: \"w-5 h-5\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1536,\n                          columnNumber: 584\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1536,\n                        columnNumber: 385\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1536,\n                      columnNumber: 53\n                    }, this)]\n                  }, patient.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1482,\n                    columnNumber: 49\n                  }, this);\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1477,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {\n                className: \"bg-gray-50 border-t-2 border-gray-300\",\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    colSpan: \"4\",\n                    className: \"py-3 px-4 text-sm font-semibold text-gray-700 text-right\",\n                    children: \"Gesamt:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1541,\n                    columnNumber: 98\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-3 px-4 text-sm font-semibold text-gray-700 text-center\",\n                    children: `${totalConductedHours} / ${totalApprovedHours}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1541,\n                    columnNumber: 195\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"py-3 px-4 whitespace-nowrap\",\n                    colSpan: \"2\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-xs text-gray-600 mr-3 w-auto\",\n                        children: \"Fortschritt (600 Std.):\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1541,\n                        columnNumber: 415\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"w-full bg-gray-200 rounded-full h-2.5 flex-grow\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"bg-blue-500 h-2.5 rounded-full\",\n                          style: {\n                            width: `${Math.min(overallProgress, 100)}%`\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1541,\n                          columnNumber: 562\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1541,\n                        columnNumber: 497\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-xs text-gray-600 ml-2\",\n                        children: [Math.round(overallProgress), \"%\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1541,\n                        columnNumber: 678\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1541,\n                      columnNumber: 380\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1541,\n                    columnNumber: 324\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1541,\n                  columnNumber: 94\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1541,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1436,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1435,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1434,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true), mainView === 'patientenakte' &&\n      /*#__PURE__*/\n      // Haupt-Grid für Seitenleiste und Inhalt\n      _jsxDEV(\"div\", {\n        className: `grid grid-cols-1 ${isSidebarCollapsed ? 'md:grid-cols-[auto,1fr]' : 'md:grid-cols-4'} gap-6 lg:gap-8`,\n        children: [!isSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold text-gray-800 mb-4\",\n            children: \"Patienten\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1559,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white rounded-lg shadow-md max-h-[75vh] overflow-y-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"divide-y divide-gray-200\",\n              children: sortedPatients.map(patient => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => setSelectedPatient(patient),\n                className: `p-3 cursor-pointer text-sm font-medium transition-colors duration-150 ${(selectedPatient === null || selectedPatient === void 0 ? void 0 : selectedPatient.id) === patient.id ? 'bg-indigo-600 text-white' : 'text-gray-700 hover:bg-indigo-50'}`,\n                children: [patient.name, \", \", patient.vorname]\n              }, patient.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1563,\n                columnNumber: 45\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1561,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1560,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1558,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: isSidebarCollapsed ? 'col-span-full' : 'md:col-span-3',\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setIsSidebarCollapsed(!isSidebarCollapsed),\n            className: \"mb-4 text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center\",\n            children: isSidebarCollapsed ? '›› Patientenliste einblenden' : '‹‹ Patientenliste ausblenden'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1579,\n            columnNumber: 29\n          }, this), selectedPatient ?\n          /*#__PURE__*/\n          // --- DETAILANSICHT FÜR AUSGEWÄHLTEN PATIENTEN ---\n          _jsxDEV(\"div\", {\n            ref: detailViewRef,\n            className: \"bg-white shadow-xl rounded-lg p-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center mb-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-2xl font-semibold text-indigo-700\",\n                children: [selectedPatient.vorname, \" \", selectedPatient.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1587,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setSelectedPatient(null),\n                className: \"text-gray-500 hover:text-gray-700\",\n                children: /*#__PURE__*/_jsxDEV(XCircle, {\n                  className: \"w-7 h-7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1588,\n                  columnNumber: 136\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1588,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1586,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border-b border-gray-200 mb-6\",\n              children: /*#__PURE__*/_jsxDEV(\"nav\", {\n                className: \"-mb-px flex space-x-4 sm:space-x-8 overflow-x-auto\",\n                \"aria-label\": \"Tabs\",\n                children: ['Übersicht', 'Diagnosen', 'Abrechnung', 'Krankheitsmodell', 'Diagnostik', 'Assistenz'].map(tab => /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setActiveDetailTab(tab.toLowerCase()),\n                  className: `capitalize whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${activeDetailTab === tab.toLowerCase() ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`,\n                  children: tab\n                }, tab, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1595,\n                  columnNumber: 49\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1593,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1592,\n              columnNumber: 37\n            }, this), activeDetailTab === 'übersicht' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-span-1 md:col-span-2 p-3 bg-indigo-50 border border-indigo-200 rounded-lg\",\n                children: [nextAppointment.isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-indigo-700\",\n                  children: \"Lade n\\xE4chsten Termin...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1606,\n                  columnNumber: 79\n                }, this), nextAppointment.error && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-red-600\",\n                  children: nextAppointment.error\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1607,\n                  columnNumber: 75\n                }, this), nextAppointment.text && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-semibold text-indigo-800\",\n                  children: nextAppointment.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1608,\n                  columnNumber: 74\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1605,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-lg font-semibold text-gray-700 mb-3 border-b pb-2\",\n                  children: \"Letzte Hausaufgabe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1613,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-3 bg-gray-50 rounded-lg text-sm space-y-3\",\n                  children: (_selectedPatient$sess = selectedPatient.sessions) !== null && _selectedPatient$sess !== void 0 && (_selectedPatient$sess2 = _selectedPatient$sess[0]) !== null && _selectedPatient$sess2 !== void 0 && _selectedPatient$sess2.homeworkStatus && selectedPatient.sessions[0].homeworkStatus.length > 0 ? selectedPatient.sessions[0].homeworkStatus.map((task, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      className: \"h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500\",\n                      checked: task.done,\n                      onChange: e => handleUpdateHomeworkStatus(selectedPatient.sessions[0].date, index, {\n                        done: e.target.checked\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1618,\n                      columnNumber: 65\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `flex-grow ${task.done ? 'text-gray-500 line-through' : 'text-gray-800'}`,\n                      children: task.text\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1624,\n                      columnNumber: 65\n                    }, this), !task.done && /*#__PURE__*/_jsxDEV(\"select\", {\n                      className: \"text-xs border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50\",\n                      value: task.reason || '',\n                      onChange: e => handleUpdateHomeworkStatus(selectedPatient.sessions[0].date, index, {\n                        reason: e.target.value\n                      }),\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"\",\n                        children: \"Grund w\\xE4hlen...\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1633,\n                        columnNumber: 73\n                      }, this), Object.entries(homeworkFailureReasons).map(([category, reasons]) => /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                        label: category,\n                        children: reasons.map(reason => /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: reason,\n                          children: reason\n                        }, reason, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1636,\n                          columnNumber: 104\n                        }, this))\n                      }, category, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1635,\n                        columnNumber: 77\n                      }, this))]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1628,\n                      columnNumber: 69\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1617,\n                    columnNumber: 61\n                  }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-500\",\n                    children: \"Keine Hausaufgabe f\\xFCr die letzte Sitzung erfasst.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1644,\n                    columnNumber: 57\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1614,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1612,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-lg font-semibold text-gray-700 mb-3 border-b pb-2\",\n                  children: \"Stammdaten\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1650,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-2 md:grid-cols-3 gap-4 mt-3 text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"Nachname\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1652,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: selectedPatient.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1652,\n                      columnNumber: 113\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1652,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"Vorname\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1653,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: selectedPatient.vorname\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1653,\n                      columnNumber: 112\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1653,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"Geburtsdatum\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1654,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: new Date(selectedPatient.geburtsdatum).toLocaleDateString('de-DE')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1654,\n                      columnNumber: 117\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1654,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"Alter\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1655,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: calculateAge(selectedPatient.geburtsdatum)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1655,\n                      columnNumber: 110\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1655,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"E-Mail\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1656,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: selectedPatient.email || '-'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1656,\n                      columnNumber: 111\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1656,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"Telefon\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1657,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: selectedPatient.telefon || '-'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1657,\n                      columnNumber: 112\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1657,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-span-2 md:col-span-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"Adresse\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1658,\n                      columnNumber: 95\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: selectedPatient.adresse || '-'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1658,\n                      columnNumber: 149\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1658,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1651,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1649,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-lg font-semibold text-gray-700 mb-3 border-b pb-2\",\n                  children: \"Kontingent\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1662,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-2 gap-4 mt-3 text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"Genehmigte Stunden\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1664,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: selectedPatient.approvedHours\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1664,\n                      columnNumber: 123\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1664,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"Durchgef\\xFChrte Stunden\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1665,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: selectedPatient.conductedHours\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1665,\n                      columnNumber: 126\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1665,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1663,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1661,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-lg font-semibold text-gray-700 mb-3 border-b pb-2\",\n                  children: \"Diagnosen im \\xDCberblick\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1669,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"space-y-1 mt-3\",\n                  children: [(selectedPatient.diagnoses || []).map((diag, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"flex justify-between items-center text-sm p-2 bg-gray-50 rounded-md\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: diag\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1671,\n                      columnNumber: 208\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => showDiagnosisInfo(diag),\n                      className: btnInfo,\n                      children: /*#__PURE__*/_jsxDEV(InfoIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1671,\n                        columnNumber: 295\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1671,\n                      columnNumber: 227\n                    }, this)]\n                  }, `icd10-${i}`, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1671,\n                    columnNumber: 105\n                  }, this)), (selectedPatient.diagnoses_icd11 || []).map((diag, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"flex justify-between items-center text-sm p-2 bg-purple-50 rounded-md\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [diag.code, \" - \", diag.title]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1672,\n                      columnNumber: 216\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => fetchIcd11Details(diag),\n                      className: `${btnInfo} bg-purple-500 hover:bg-purple-600`,\n                      children: /*#__PURE__*/_jsxDEV(InfoIcon, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1672,\n                        columnNumber: 362\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1672,\n                      columnNumber: 255\n                    }, this)]\n                  }, `icd11-${i}`, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1672,\n                    columnNumber: 111\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1670,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1668,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1604,\n              columnNumber: 41\n            }, this), activeDetailTab === 'diagnosen' && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1679,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-xl font-semibold text-gray-700 mb-3\",\n                  children: \"ICD-10 F-Diagnosen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1682,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mb-3 p-4 bg-gray-50 rounded-md\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"grid grid-cols-1 md:grid-cols-3 gap-4 items-end\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"newDiagnosisCode\",\n                        className: \"block text-xs font-medium text-gray-700\",\n                        children: \"Code (z.B. F32.2)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1683,\n                        columnNumber: 163\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        id: \"newDiagnosisCode\",\n                        value: newDiagnosisCode,\n                        onChange: e => setNewDiagnosisCode(e.target.value.toUpperCase()),\n                        placeholder: \"F-Code\",\n                        className: `${inputStd} mt-1`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1683,\n                        columnNumber: 274\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1683,\n                      columnNumber: 158\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"newDiagnosisSicherheit\",\n                        className: \"block text-xs font-medium text-gray-700\",\n                        children: \"Sicherheit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1683,\n                        columnNumber: 473\n                      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                        id: \"newDiagnosisSicherheit\",\n                        value: newDiagnosisSicherheit,\n                        onChange: e => setNewDiagnosisSicherheit(e.target.value),\n                        className: `${inputStd} mt-1`,\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"G\",\n                          children: \"G (Gesichert)\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1683,\n                          columnNumber: 741\n                        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"V\",\n                          children: \"V (Verdacht auf)\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1683,\n                          columnNumber: 781\n                        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"A\",\n                          children: \"A (Ausschluss)\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1683,\n                          columnNumber: 824\n                        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"ZN\",\n                          children: \"ZN (Zustand nach)\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1683,\n                          columnNumber: 865\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1683,\n                        columnNumber: 583\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1683,\n                      columnNumber: 468\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"md:col-span-1\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"newDiagnosisName\",\n                        className: \"block text-xs font-medium text-gray-700\",\n                        children: \"Manuelle Beschreibung (optional)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1683,\n                        columnNumber: 956\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        id: \"newDiagnosisName\",\n                        value: newDiagnosis,\n                        onChange: e => setNewDiagnosis(e.target.value),\n                        placeholder: \"Eigene Beschreibung\",\n                        className: `${inputStd} mt-1`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1683,\n                        columnNumber: 1082\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1683,\n                      columnNumber: 925\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: handleAddDiagnosis,\n                      className: `${btnPrimary} bg-green-500 hover:bg-green-600 py-2 px-3 h-10 md:self-end`,\n                      children: [/*#__PURE__*/_jsxDEV(PlusCircleIcon, {\n                        className: \"w-5 h-5 mr-1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1683,\n                        columnNumber: 1391\n                      }, this), \" Hinzuf\\xFCgen\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1683,\n                      columnNumber: 1267\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1683,\n                    columnNumber: 93\n                  }, this), lookedUpDiagnosisName && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-indigo-600 mt-1\",\n                    children: [\"Gefunden: \", lookedUpDiagnosisName]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1683,\n                    columnNumber: 1486\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1683,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"space-y-1 mb-3\",\n                  children: [(selectedPatient.diagnoses || []).map((diagString, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"flex justify-between items-center bg-gray-50 p-2 rounded-md\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm text-gray-700\",\n                      children: diagString\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1685,\n                      columnNumber: 200\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => showDiagnosisInfo(diagString),\n                        className: `${btnInfo} p-1`,\n                        title: \"Info zu dieser Diagnose abrufen\",\n                        children: [/*#__PURE__*/_jsxDEV(FileJson2, {\n                          className: \"w-4 h-4 mr-1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1685,\n                          columnNumber: 427\n                        }, this), \" Info\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1685,\n                        columnNumber: 304\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => handleRemoveDiagnosis(diagString),\n                        className: `${btnDanger} p-1 text-xs`,\n                        children: /*#__PURE__*/_jsxDEV(Trash2, {\n                          className: \"w-4 h-4\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1685,\n                          columnNumber: 576\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1685,\n                        columnNumber: 479\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1685,\n                      columnNumber: 259\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1685,\n                    columnNumber: 112\n                  }, this)), (selectedPatient.diagnoses || []).length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500\",\n                    children: \"Keine Diagnosen erfasst.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1686,\n                    columnNumber: 100\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1684,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1681,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-xl font-semibold text-gray-700 mb-3\",\n                  children: \"ICD-11 Diagnosen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1690,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"space-y-1\",\n                  children: [(selectedPatient.diagnoses_icd11 || []).map((diag, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"flex justify-between items-center bg-purple-50 p-2 rounded-md hover:bg-purple-100 cursor-pointer\",\n                    onClick: () => fetchIcd11Details(diag),\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm text-purple-800\",\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        className: \"font-mono\",\n                        children: diag.code\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1692,\n                        columnNumber: 319\n                      }, this), \" - \", diag.title]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1692,\n                      columnNumber: 277\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: e => {\n                        e.stopPropagation();\n                        handleRemoveIcd11Diagnosis(diag);\n                      },\n                      className: \"text-red-500 hover:text-red-700 p-1 text-xs\",\n                      title: \"ICD-11 Diagnose entfernen\",\n                      children: /*#__PURE__*/_jsxDEV(Trash2, {\n                        className: \"w-4 h-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1692,\n                        columnNumber: 565\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1692,\n                      columnNumber: 391\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1692,\n                    columnNumber: 112\n                  }, this)), (selectedPatient.diagnoses_icd11 || []).length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500\",\n                    children: \"Keine ICD-11 Diagnosen erfasst.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1693,\n                    columnNumber: 106\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1691,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1689,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1678,\n              columnNumber: 74\n            }, this), activeDetailTab === 'abrechnung' && /*#__PURE__*/_jsxDEV(AbrechnungsUebersicht, {\n              patient: selectedPatient,\n              ebmData: ebmData,\n              unbilledAppointments: unbilledAppointments,\n              onStartBilling: handleStartBilling\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1701,\n              columnNumber: 41\n            }, this), activeDetailTab === 'krankheitsmodell' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"krankheitsanamnese\",\n                  className: \"block text-lg font-semibold text-gray-700 mb-1\",\n                  children: \"Krankheitsanamnese\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1710,\n                  columnNumber: 73\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  id: \"krankheitsanamnese\",\n                  name: \"krankheitsanamnese\",\n                  rows: \"6\",\n                  className: textareaStd,\n                  value: editableKrankheitsanamnese,\n                  onChange: e => setEditableKrankheitsanamnese(e.target.value),\n                  onBlur: e => handleKrankheitsmodellChange('krankheitsanamnese', e.target.value),\n                  placeholder: \"Hier die Krankheitsanamnese eintragen...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1710,\n                  columnNumber: 194\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1710,\n                columnNumber: 68\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"lebensgeschichte\",\n                  className: \"block text-lg font-semibold text-gray-700 mb-1\",\n                  children: \"Lebensgeschichte / Biographie\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1710,\n                  columnNumber: 546\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  id: \"lebensgeschichte\",\n                  name: \"lebensgeschichte\",\n                  rows: \"6\",\n                  className: textareaStd,\n                  value: editableLebensgeschichte,\n                  onChange: e => setEditableLebensgeschichte(e.target.value),\n                  onBlur: e => handleKrankheitsmodellChange('lebensgeschichte', e.target.value),\n                  placeholder: \"Wichtige Aspekte der Lebensgeschichte...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1710,\n                  columnNumber: 676\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1710,\n                columnNumber: 541\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"problemanalyseMakro\",\n                  className: \"block text-lg font-semibold text-gray-700 mb-1\",\n                  children: \"Problemanalyse auf Makroebene\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1710,\n                  columnNumber: 1018\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  id: \"problemanalyseMakro\",\n                  name: \"problemanalyseMakro\",\n                  rows: \"6\",\n                  className: textareaStd,\n                  value: editableProblemanalyseMakro,\n                  onChange: e => setEditableProblemanalyseMakro(e.target.value),\n                  onBlur: e => handleKrankheitsmodellChange('problemanalyseMakro', e.target.value),\n                  placeholder: \"Analyse der \\xFCbergeordneten Problembereiche...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1710,\n                  columnNumber: 1151\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1710,\n                columnNumber: 1013\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"therapieplan\",\n                  className: \"block text-lg font-semibold text-gray-700 mb-1\",\n                  children: \"Therapieplan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1710,\n                  columnNumber: 1513\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  id: \"therapieplan\",\n                  name: \"therapieplan\",\n                  rows: \"6\",\n                  className: textareaStd,\n                  value: editableTherapieplan,\n                  onChange: e => setEditableTherapieplan(e.target.value),\n                  onBlur: e => handleKrankheitsmodellChange('therapieplan', e.target.value),\n                  placeholder: \"Therapieziele und -ma\\xDFnahmen...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1710,\n                  columnNumber: 1622\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1710,\n                columnNumber: 1508\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1710,\n              columnNumber: 41\n            }, this), activeDetailTab === 'diagnostik' && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border-b border-gray-200 mb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"nav\", {\n                  className: \"-mb-px flex space-x-6\",\n                  \"aria-label\": \"Diagnostik Sub-Tabs\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => setActiveDiagnostikSubTab('overview'),\n                    className: `whitespace-nowrap pb-2 px-1 border-b-2 font-medium text-sm ${activeDiagnostikSubTab === 'overview' ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`,\n                    children: \"\\xDCbersicht\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1717,\n                    columnNumber: 53\n                  }, this), availableTests.map(test => {\n                    var _selectedPatient;\n                    return ((_selectedPatient = selectedPatient[`${test.id}Results`]) === null || _selectedPatient === void 0 ? void 0 : _selectedPatient.length) > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setActiveDiagnostikSubTab(test.id),\n                      className: `whitespace-nowrap pb-2 px-1 border-b-2 font-medium text-sm ${activeDiagnostikSubTab === test.id ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`,\n                      children: test.id.toUpperCase()\n                    }, test.id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1722,\n                      columnNumber: 57\n                    }, this);\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1716,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1715,\n                columnNumber: 45\n              }, this), activeDiagnostikSubTab === 'overview' && /*#__PURE__*/_jsxDEV(DiagnostikUebersicht, {\n                patient: selectedPatient,\n                availableTests: availableTests,\n                onAddTest: test => {\n                  setCurrentTestToAdd(test);\n                  setIsAddTestModalOpen(true);\n                },\n                onShowTestDetails: testId => setActiveDiagnostikSubTab(testId)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1730,\n                columnNumber: 49\n              }, this), activeDiagnostikSubTab === 'scl90r' && /*#__PURE__*/_jsxDEV(SCL90RComponent, {\n                patient: selectedPatient,\n                onDeleteResult: handleRemoveScl90rResult\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1738,\n                columnNumber: 85\n              }, this), activeDiagnostikSubTab === 'fep2' && /*#__PURE__*/_jsxDEV(FEP2Component, {\n                patient: selectedPatient,\n                onDeleteResult: handleRemoveFepResult\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1739,\n                columnNumber: 83\n              }, this), activeDiagnostikSubTab === 'bdi2' && /*#__PURE__*/_jsxDEV(BDI2Component, {\n                patient: selectedPatient,\n                onDeleteResult: handleRemoveBdiResult,\n                bdiCutoffs: bdiCutoffs,\n                bdiAxisTicks: bdiAxisTicks,\n                CustomBdiLabel: CustomBdiLabel\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1740,\n                columnNumber: 83\n              }, this), activeDiagnostikSubTab === 'hscl11' && /*#__PURE__*/_jsxDEV(HSCL11Component, {\n                patient: selectedPatient,\n                onDeleteResult: handleRemoveHsclResult\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1741,\n                columnNumber: 85\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1714,\n              columnNumber: 41\n            }, this), activeDetailTab === 'assistenz' && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-xl font-semibold text-gray-700 mb-4\",\n                children: \"Therapeutische Assistenz\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1747,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleTherapeutischeAssistenzAnfordern,\n                disabled: isLoadingTherapeutischeAssistenz,\n                className: `${btnPrimary} bg-purple-600 hover:bg-purple-700 mb-4 flex items-center`,\n                children: [/*#__PURE__*/_jsxDEV(WandSparkles, {\n                  className: \"mr-2 h-5 w-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1749,\n                  columnNumber: 49\n                }, this), isLoadingTherapeutischeAssistenz ? \"Analysiere Daten...\" : \"Expertenfeedback anfordern\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1748,\n                columnNumber: 45\n              }, this), isLoadingTherapeutischeAssistenz && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center py-10\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-700 mx-auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1752,\n                  columnNumber: 118\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-3 text-gray-600\",\n                  children: \"Bitte warten, die KI analysiert die Patientendaten...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1752,\n                  columnNumber: 214\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1752,\n                columnNumber: 83\n              }, this), assistenzError && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-red-100 border-l-4 border-red-500 text-red-700 p-4\",\n                role: \"alert\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-bold\",\n                  children: \"Fehler bei der Assistenz\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1753,\n                  columnNumber: 149\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: assistenzError\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1753,\n                  columnNumber: 202\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1753,\n                columnNumber: 65\n              }, this), therapeutischeAssistenzOutput && !isLoadingTherapeutischeAssistenz && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 p-4 bg-gray-50 rounded-md border\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-lg font-semibold text-gray-800 mb-2\",\n                  children: \"Vorschl\\xE4ge des Expertenteams:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1754,\n                  columnNumber: 172\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"whitespace-pre-wrap text-sm text-gray-700 leading-relaxed\",\n                  children: therapeutischeAssistenzOutput\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1754,\n                  columnNumber: 263\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1754,\n                columnNumber: 117\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1746,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1585,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"animate-fade-in space-y-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-xl font-semibold text-gray-800\",\n                  children: \"Offene Abrechnungen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1762,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setIsManualBillingSetupOpen(true),\n                  className: \"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-md shadow-sm flex items-center justify-center text-sm\",\n                  children: \"Sitzung manuell abrechnen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1764,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1761,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-white rounded-lg shadow-md p-4\",\n                children: [isLoadingAppointments && /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Lade offene Termine...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1772,\n                  columnNumber: 71\n                }, this), !isLoadingAppointments && unbilledAppointments.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"Keine offenen Abrechnungen gefunden.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1773,\n                  columnNumber: 109\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"space-y-2\",\n                  children: unbilledAppointments.map(event => /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => handleStartBilling(event),\n                      className: \"w-full text-left p-3 bg-yellow-100 hover:bg-yellow-200 rounded-md text-sm text-yellow-800 font-medium\",\n                      children: [new Date(event.start.dateTime).toLocaleDateString('de-DE'), \" - \", event.summary]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1777,\n                      columnNumber: 57\n                    }, this)\n                  }, event.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1776,\n                    columnNumber: 53\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1774,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1771,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1760,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-xl font-semibold text-gray-800 mb-4\",\n                children: \"Terminkalender\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1787,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-white rounded-lg shadow-md p-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4 text-sm text-blue-700\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"font-bold\",\n                    children: \"Anleitung zum Einbetten Ihres Google Kalenders:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1790,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n                    className: \"list-decimal list-inside mt-2 space-y-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [\"\\xD6ffnen Sie Ihren \", /*#__PURE__*/_jsxDEV(\"a\", {\n                        href: \"[https://calendar.google.com/](https://calendar.google.com/)\",\n                        target: \"_blank\",\n                        rel: \"noopener noreferrer\",\n                        className: \"text-blue-600 underline\",\n                        children: \"Google Kalender\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1792,\n                        columnNumber: 74\n                      }, this), \" im Browser.\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1792,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: \"Gehen Sie zu \\\"Einstellungen\\\" (Zahnrad-Symbol) \\u2192 \\\"Einstellungen\\\".\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1793,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: \"W\\xE4hlen Sie links unter \\\"Einstellungen f\\xFCr meine Kalender\\\" den Kalender aus, den Sie einbetten m\\xF6chten.\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1794,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [\"Scrollen Sie zu \\\"Kalender integrieren\\\" und kopieren Sie den Link aus dem Feld \", /*#__PURE__*/_jsxDEV(\"b\", {\n                        children: \"\\\"\\xD6ffentlich freigegebener Link zu diesem Kalender\\\"\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1795,\n                        columnNumber: 135\n                      }, this), \" oder den HTML-Code aus \", /*#__PURE__*/_jsxDEV(\"b\", {\n                        children: \"\\\"Einbettungscode\\\"\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1795,\n                        columnNumber: 216\n                      }, this), \".\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1795,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                      children: [\"Ersetzen Sie den \", /*#__PURE__*/_jsxDEV(\"code\", {\n                        children: \"src\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1796,\n                        columnNumber: 74\n                      }, this), \"-Link im \", /*#__PURE__*/_jsxDEV(\"code\", {\n                        children: \"iframe\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1796,\n                        columnNumber: 99\n                      }, this), \" unten im Code durch den Link aus Ihrem Kalender.\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1796,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1791,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1789,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n                  title: \"Google Calendar\",\n                  src: \"https://calendar.google.com/calendar/embed?src=julisycomorepsy%40gmail.com&ctz=Europe%2FBerlin](https://calendar.google.com/calendar/embed?src=julisycomorepsy%40gmail.com&ctz=Europe%2FBerlin)\",\n                  style: {\n                    border: 0\n                  },\n                  width: \"100%\",\n                  height: \"600\",\n                  frameBorder: \"0\",\n                  scrolling: \"no\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1799,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1788,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1786,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1759,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1577,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1554,\n        columnNumber: 21\n      }, this), mainView === 'icd11' && /*#__PURE__*/_jsxDEV(ICD11ECTBrowser, {\n        patients: patients,\n        selectedPatient: selectedPatient,\n        onAssignDiagnosis: handleAssignIcd11Diagnosis\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1817,\n        columnNumber: 21\n      }, this), mainView === 'ebm' && /*#__PURE__*/_jsxDEV(EBMBrowser, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1823,\n        columnNumber: 41\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: diagnosisInfo.isOpen,\n        onClose: () => setDiagnosisInfo(prev => ({\n          ...prev,\n          isOpen: false\n        })),\n        title: `Diagnose-Info: ${diagnosisInfo.code || ''}`,\n        size: \"3xl\",\n        children: [diagnosisInfo.isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center py-4\",\n          children: \"Informationen werden geladen...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1833,\n          columnNumber: 25\n        }, this), diagnosisInfo.error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-600 bg-red-100 p-3 rounded-md\",\n          children: [\"Fehler: \", diagnosisInfo.error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1836,\n          columnNumber: 25\n        }, this), !diagnosisInfo.isLoading && diagnosisInfo.source === 'local' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-700 leading-relaxed p-2 space-y-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-indigo-700\",\n            children: [diagnosisInfo.name, /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-500 text-base ml-2\",\n              children: [\"(\", diagnosisInfo.code, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1846,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1844,\n            columnNumber: 29\n          }, this), diagnosisInfo.beschreibung && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              className: \"font-medium text-gray-800 block mb-1\",\n              children: \"Beschreibung:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1852,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"whitespace-pre-wrap\",\n              children: diagnosisInfo.beschreibung\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1855,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1851,\n            columnNumber: 33\n          }, this), ((_diagnosisInfo$inkl = diagnosisInfo.inkl) === null || _diagnosisInfo$inkl === void 0 ? void 0 : _diagnosisInfo$inkl.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              className: \"font-medium text-gray-800 block mb-1\",\n              children: \"Inklusive:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1862,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-disc list-inside\",\n              children: diagnosisInfo.inkl.map((item, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: item\n              }, idx, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1867,\n                columnNumber: 45\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1865,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1861,\n            columnNumber: 33\n          }, this), ((_diagnosisInfo$exkl = diagnosisInfo.exkl) === null || _diagnosisInfo$exkl === void 0 ? void 0 : _diagnosisInfo$exkl.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              className: \"font-medium text-gray-800 block mb-1\",\n              children: \"Exklusive:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1874,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-disc list-inside\",\n              children: diagnosisInfo.exkl.map((item, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: item\n              }, idx, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1879,\n                columnNumber: 45\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1877,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1873,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1843,\n          columnNumber: 25\n        }, this), !diagnosisInfo.isLoading && diagnosisInfo.source === 'api_detail' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-700 leading-relaxed p-2 space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-semibold text-purple-700\",\n            children: [diagnosisInfo.name, /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-500 text-base ml-2 font-mono\",\n              children: [\"(\", diagnosisInfo.code, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1892,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1890,\n            columnNumber: 29\n          }, this), diagnosisInfo.beschreibung && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              className: \"font-medium text-gray-800 block mb-1\",\n              children: \"Beschreibung (Definition):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1900,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"whitespace-pre-wrap bg-gray-50 p-2 rounded-md\",\n              children: diagnosisInfo.beschreibung\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1903,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1899,\n            columnNumber: 33\n          }, this), ((_diagnosisInfo$inclus = diagnosisInfo.inclusions) === null || _diagnosisInfo$inclus === void 0 ? void 0 : _diagnosisInfo$inclus.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              className: \"font-medium text-gray-800 block mb-1\",\n              children: \"Inklusive:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1912,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-disc list-inside pl-2 space-y-1\",\n              children: diagnosisInfo.inclusions.map((item, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: item.label['@value']\n              }, idx, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1917,\n                columnNumber: 45\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1915,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1911,\n            columnNumber: 33\n          }, this), ((_diagnosisInfo$exclus = diagnosisInfo.exclusions) === null || _diagnosisInfo$exclus === void 0 ? void 0 : _diagnosisInfo$exclus.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              className: \"font-medium text-gray-800 block mb-1\",\n              children: \"Exklusive:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1926,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-disc list-inside pl-2 space-y-1\",\n              children: diagnosisInfo.exclusions.map((item, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n                children: [item.label['@value'], item.foundationReference && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-gray-400 ml-2\",\n                  children: [\"(\", item.linearizationReference.split('/').pop(), \")\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1934,\n                  columnNumber: 53\n                }, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1931,\n                columnNumber: 45\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1929,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1925,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1889,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1826,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        isOpen: improvementState.isOpen,\n        onClose: () => setImprovementState({\n          ...improvementState,\n          isOpen: false\n        }),\n        title: \"Sitzungsdokumentation verbessern\",\n        size: \"5xl\",\n        children: [improvementState.error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-500 bg-red-100 p-3 rounded-md mb-4\",\n          children: improvementState.error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1950,\n          columnNumber: 48\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-lg text-gray-700 mb-2\",\n              children: \"Original\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1953,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n              className: \"text-sm bg-gray-100 p-3 rounded-md whitespace-pre-wrap font-sans h-96 overflow-y-auto border\",\n              children: improvementState.originalText\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1954,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1952,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"font-semibold text-lg text-gray-700 mb-2\",\n              children: \"Vorschlag\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1957,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n              className: \"text-sm bg-gray-800 text-green-300 font-mono p-3 rounded-md whitespace-pre-wrap h-96 overflow-y-auto\",\n              children: improvementState.improvedText\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1959,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1956,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1951,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-4 mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => setImprovementState({\n              ...improvementState,\n              isOpen: false\n            }),\n            className: \"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300\",\n            children: \"Abbrechen\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1963,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAcceptImprovement,\n            className: \"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(Save, {\n              className: \"w-4 h-4 mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1965,\n              columnNumber: 29\n            }, this), \" Original ersetzen\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1964,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1962,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1944,\n        columnNumber: 17\n      }, this), appError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fixed bottom-4 right-4 p-4 max-w-sm text-sm text-red-700 bg-red-100 border border-red-400 rounded-md shadow-lg z-[100]\",\n        children: [appError, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setAppError(null),\n          className: \"ml-4 mt-2 sm:mt-0 sm:ml-2 px-2 py-1 text-red-900 underline rounded-md hover:bg-red-200 text-xs\",\n          children: \"Ok\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1970,\n          columnNumber: 177\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1970,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(AddTestFlowModal, {\n        isOpen: isAddTestModalOpen,\n        onClose: () => setIsAddTestModalOpen(false),\n        onSave: handleSaveTestAndResults,\n        testInfo: currentTestToAdd,\n        patient: selectedPatient // Dies war schon da und ist korrekt\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1972,\n        columnNumber: 20\n      }, this), /*#__PURE__*/_jsxDEV(ManualBillingSetupModal, {\n        isOpen: isManualBillingSetupOpen,\n        onClose: () => setIsManualBillingSetupOpen(false),\n        patients: sortedPatients,\n        onStart: handleStartManualBilling\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1980,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1378,\n      columnNumber: 13\n    }, this), billingModalState.isOpen && /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: billingModalState.isOpen,\n      onClose: () => setBillingModalState({\n        isOpen: false,\n        event: null\n      }),\n      title: `Termin abrechnen: ${billingModalState.event.summary}`,\n      size: \"4xl\",\n      children: /*#__PURE__*/_jsxDEV(BillingModal, {\n        event: billingModalState.event,\n        ebmData: ebmData,\n        onSave: handleSaveBilling,\n        onClose: () => setBillingModalState({\n          isOpen: false,\n          event: null\n        }),\n        generateGeminiText: generateGeminiText // <-- WICHTIG: Diese Zeile muss vorhanden sein\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1995,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1989,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"text-center py-6 text-sm text-gray-500 border-t border-gray-200 mt-10\",\n      children: [\"Therapie-Dashboard \\xA9 \", new Date().getFullYear()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2005,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1365,\n    columnNumber: 9\n  }, this);\n}\n_s2(App, \"aPepueddYHrqY7ppcmZfcl9av00=\");\n_c16 = App;\nconst CustomBdiLabel = props => {\n  const {\n    x,\n    y,\n    width,\n    text\n  } = props;\n  if (typeof x !== 'number' || isNaN(x) || typeof y !== 'number' || isNaN(y) || typeof width !== 'number' || isNaN(width) || width <= 0) {\n    return null;\n  }\n  const labelX = x + width / 2;\n  return /*#__PURE__*/_jsxDEV(\"text\", {\n    x: labelX,\n    y: y,\n    fill: \"#666\",\n    textAnchor: \"middle\",\n    dy: -4,\n    fontSize: \"10\",\n    children: text\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 2019,\n    columnNumber: 13\n  }, this);\n};\n_c17 = CustomBdiLabel;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17;\n$RefreshReg$(_c, \"UserPlus\");\n$RefreshReg$(_c2, \"Edit3\");\n$RefreshReg$(_c3, \"Trash2\");\n$RefreshReg$(_c4, \"PlusCircleIcon\");\n$RefreshReg$(_c5, \"XCircle\");\n$RefreshReg$(_c6, \"Save\");\n$RefreshReg$(_c7, \"AlertTriangle\");\n$RefreshReg$(_c8, \"InfoIcon\");\n$RefreshReg$(_c9, \"FileJson2\");\n$RefreshReg$(_c0, \"WandSparkles\");\n$RefreshReg$(_c1, \"LogOut\");\n$RefreshReg$(_c10, \"ClipboardIcon\");\n$RefreshReg$(_c11, \"CheckIcon\");\n$RefreshReg$(_c12, \"ChevronRightIcon\");\n$RefreshReg$(_c13, \"Modal\");\n$RefreshReg$(_c14, \"ConfirmationModal\");\n$RefreshReg$(_c15, \"PatientForm\");\n$RefreshReg$(_c16, \"App\");\n$RefreshReg$(_c17, \"CustomBdiLabel\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","initializeApp","getAuth","onAuthStateChanged","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","getFirestore","collection","doc","addDoc","getDocs","setDoc","deleteDoc","onSnapshot","query","writeBatch","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","ReferenceArea","SCL90RComponent","FEP2Component","BDI2Component","HSCL11Component","ICD11ECTBrowser","EBMBrowser","BillingModal","AbrechnungsUebersicht","DiagnostikUebersicht","AddTestFlowModal","ManualBillingSetupModal","jsxDEV","_jsxDEV","Fragment","_Fragment","UserPlus","className","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","children","d","fileName","_jsxFileName","lineNumber","columnNumber","cx","cy","r","x1","x2","y1","y2","_c","Edit3","_c2","Trash2","points","_c3","PlusCircleIcon","_c4","XCircle","_c5","Save","_c6","AlertTriangle","_c7","InfoIcon","_c8","FileJson2","_c9","WandSparkles","_c0","LogOut","_c1","ClipboardIcon","x","y","width","height","rx","ry","_c10","CheckIcon","_c11","ChevronRightIcon","_c12","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","auth","db","firestoreAppId","homeworkFailureReasons","availableTests","id","name","ebm","recommendation","initialPatientsData","geburtsdatum","chiffre","therapyType","approvedHours","conductedHours","diagnoses","sessions","date","notes","hscl11Results","bdi2Results","fep2Results","scl90rResults","krankheitsanamnese","lebensgeschichte","problemanalyseMakro","therapieplan","Modal","isOpen","onClose","title","size","sizeClasses","sm","md","lg","xl","onClick","_c13","ConfirmationModal","onConfirm","message","_c14","PatientForm","patient","onSave","onCancel","_s","formData","setFormData","vorname","adresse","email","telefon","firstLetter","charAt","toUpperCase","year","month","day","split","yy","slice","newChiffre","prev","e","console","error","handleChange","value","type","target","parseInt","handleSubmit","preventDefault","onSubmit","htmlFor","onChange","required","readOnly","min","_c15","generateGeminiText","prompt","chatHistory","role","parts","text","payload","contents","GEMINI_API_KEY","apiUrl","response","fetch","method","headers","body","JSON","stringify","ok","_errorData$error","errorData","json","errorMessage","status","Error","result","candidates","length","content","finishReason","warn","App","_s2","_selectedPatient$sess","_selectedPatient$sess2","_diagnosisInfo$inkl","_diagnosisInfo$exkl","_diagnosisInfo$inclus","_diagnosisInfo$exclus","mainView","setMainView","patients","setPatients","selectedPatient","setSelectedPatient","isLoading","setIsLoading","authError","setAuthError","appError","setAppError","userId","setUserId","isAuthReady","setIsAuthReady","setEmail","password","setPassword","isLoginView","setIsLoginView","isAuthLoading","setIsAuthLoading","isPatientModalOpen","setIsPatientModalOpen","editingPatient","setEditingPatient","isConfirmDeleteModalOpen","setIsConfirmDeleteModalOpen","patientToDeleteId","setPatientToDeleteId","newDiagnosis","setNewDiagnosis","newDiagnosisCode","setNewDiagnosisCode","newDiagnosisSicherheit","setNewDiagnosisSicherheit","lookedUpDiagnosisName","setLookedUpDiagnosisName","newSessionDate","setNewSessionDate","Date","toISOString","newSessionNotes","setNewSessionNotes","activeDetailTab","setActiveDetailTab","activeDiagnostikSubTab","setActiveDiagnostikSubTab","sessionSummaries","setSessionSummaries","diagnosisInfo","setDiagnosisInfo","code","beschreibung","inkl","exkl","hinweise","zusatz_info_code","sicherheit","source","localIcd10Data","setLocalIcd10Data","editableConductedHours","setEditableConductedHours","editableKrankheitsanamnese","setEditableKrankheitsanamnese","editableLebensgeschichte","setEditableLebensgeschichte","editableProblemanalyseMakro","setEditableProblemanalyseMakro","editableTherapieplan","setEditableTherapieplan","therapeutischeAssistenzOutput","setTherapeutischeAssistenzOutput","isLoadingTherapeutischeAssistenz","setIsLoadingTherapeutischeAssistenz","assistenzError","setAssistenzError","detailViewRef","overviewRef","isRegistering","setIsRegistering","improvementState","setImprovementState","originalText","improvedText","sessionIndex","editingSessionIndex","setEditingSessionIndex","editingSessionText","setEditingSessionText","editingHours","setEditingHours","sortConfig","setSortConfig","key","direction","expandedSessions","setExpandedSessions","copiedStatus","setCopiedStatus","isSidebarCollapsed","setIsSidebarCollapsed","nextAppointment","setNextAppointment","unbilledAppointments","setUnbilledAppointments","isLoadingAppointments","setIsLoadingAppointments","billingModalState","setBillingModalState","event","ebmData","setEbmData","isManualBillingSetupOpen","setIsManualBillingSetupOpen","confirmDeleteState","setConfirmDeleteState","isAddTestModalOpen","setIsAddTestModalOpen","currentTestToAdd","setCurrentTestToAdd","calculateAge","birthdate","birthDate","today","age","getFullYear","m","getMonth","getDate","handleDeleteEbmEntry","sessionDate","ebmIndexToDelete","patientRef","getPatientsCollectionPath","updatedSessions","parse","findIndex","s","sessionToUpdate","entryToDelete","ebmEntries","linkedTest","find","t","nummer","performDelete","splice","finalPatientData","testInstanceId","resultKey","oldResults","newResults","filter","merge","err","handleStartManualBilling","patientId","sessionNumber","p","syntheticEvent","now","summary","start","dateTime","sitzungsnummer","isManual","handleStartBilling","toggleSessionExpansion","index","sortedPatients","useMemo","sortablePatients","sort","a","b","handleCopyNote","navigator","clipboard","writeText","then","setTimeout","fetchNextAppointment","startDate","endDate","end","dateOptions","timeOptions","hour","minute","formattedDate","toLocaleDateString","formattedStartTime","toLocaleTimeString","formattedEndTime","findIcd10CodeLocal","codeToFind","upperCodeToFind","found","baseCode","replace","possibleCategoryCode","Object","keys","startsWith","code_kategorie","handleSaveBilling","billingData","eventId","eventStart","targetPatient","newSession","structuredNotes","homeworkStatus","hausaufgaben","task","trim","map","taskText","done","reason","collectionPath","handleSaveTestAndResults","testData","testId","sessionId","multiplier","phase","results","testInfo","newTestEbmEntry","anzahl","faktor","newTestResult","updatedTestResults","testBillingSession","thema","Phase","alert","handleUpdateHomeworkStatus","homeworkIndex","newStatus","assign","res","catch","calendarEvents","Array","isArray","billedEventIds","Set","forEach","add","unbilled","_event$summary","has","match","includes","finally","data","indexedData","item","undefined","String","current","scrollIntoView","behavior","block","unsubscribe","user","uid","seedInitialData","patientsCollection","querySnapshot","empty","batch","patientData","newPatientRef","set","diagnoses_icd11","commit","patientsQuery","snapshot","patientsData","docs","docSnap","localeCompare","currentPatientDataFromList","loadIcd10Data","bdiCutoffs","label","color","bdiAxisTicks","handleAuthAction","handleLogout","handleSavePatient","dataToSave","openDeleteConfirmation","confirmDeletePatient","handleAddDiagnosis","codeToAdd","sicherheitPrefix","diagnosisString","updatedDiagnoses","log","handleRemoveDiagnosis","diagnosisStringToRemove","handleAddSession","handleUpdateConductedHours","hours","isNaN","handleAddBdiResult","newResult","updatedBdiResults","handleAddHsclResult","updatedHsclResults","handleRemoveHsclResult","dateToRemove","handleRemoveBdiResult","handleAddFepResult","updatedFepResults","handleRemoveFepResult","handleAddScl90rResult","newResultToSave","rawScores","tScores","globalScores","itemScores","updatedScl90rResults","handleRemoveScl90rResult","fetchSessionSummary","sessionNotes","handleKrankheitsmodellChange","fieldName","handleTherapeutischeAssistenzAnfordern","patientenDatenText","i","join","systemPrompt","assistenz","showDiagnosisInfo","sicherheitMatch","codeAndName","substring","codeMatch","localData","beschreibung_kategorie","fetchIcd11Details","diagnosis","uri","_fullData$title","_fullData$definition","encodeURIComponent","fullData","definition","diagnosticCriteria","inclusions","inclusion","exclusions","exclusion","handleAssignIcd11Diagnosis","icd11Entity","selectedText","linearizationUri","foundationUri","handleRemoveIcd11Diagnosis","diagnosisToRemove","handleImproveSessionNote","session","fullPrompt","errorMsg","handleAcceptImprovement","handleEditSessionStart","handleEditSessionCancel","handleEditSessionSave","totalApprovedHours","reduce","sum","totalConductedHours","overallProgressTarget","overallProgress","inputStd","btnPrimary","btnDanger","btnInfo","textareaStd","disabled","ref","colSpan","progress","diag","idx","colorClasses","stopPropagation","hasOwnProperty","autoFocus","onBlur","finalHours","clampedHours","Math","onKeyDown","blur","style","round","tab","toLowerCase","checked","entries","category","reasons","placeholder","diagString","onStartBilling","rows","test","_selectedPatient","onAddTest","onShowTestDetails","onDeleteResult","CustomBdiLabel","href","rel","src","border","frameBorder","scrolling","onAssignDiagnosis","foundationReference","linearizationReference","pop","onStart","_c16","props","labelX","textAnchor","dy","fontSize","_c17","$RefreshReg$"],"sources":["/Users/julianrogowski/Desktop/patientenverwaltung-app/src/App.js"],"sourcesContent":["/* global __GEMINI_API_KEY__ */\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport {\n    getAuth,\n    onAuthStateChanged,\n    createUserWithEmailAndPassword,\n    signInWithEmailAndPassword,\n    signOut\n} from 'firebase/auth';\nimport { getFirestore, collection, doc, addDoc, getDocs, setDoc, deleteDoc, onSnapshot, query, writeBatch } from 'firebase/firestore';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, ReferenceArea } from 'recharts';\nimport SCL90RComponent from './components/SCL90R.js';\nimport FEP2Component from './components/FEP2.js';\nimport BDI2Component from './components/BDI2.js';\nimport HSCL11Component from './components/HSCL11.js';\nimport ICD11ECTBrowser from './components/ICD11ECTBrowser.js';\nimport EBMBrowser from './components/EBMBrowser.js';\nimport BillingModal from './components/BillingModal.js';\nimport AbrechnungsUebersicht from './components/AbrechnungsUebersicht.js';\nimport DiagnostikUebersicht from './components/DiagnostikUebersicht.js';\nimport AddTestFlowModal from './components/AddTestFlowModal.js';\nimport ManualBillingSetupModal from './components/ManualBillingSetupModal.js';\n\n// --- ICONS ---\nconst UserPlus = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\" /><circle cx=\"9\" cy=\"7\" r=\"4\" /><line x1=\"19\" x2=\"19\" y1=\"8\" y2=\"14\" /><line x1=\"22\" x2=\"16\" y1=\"11\" y2=\"11\" /></svg>);\nconst Edit3 = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M12 20h9\" /><path d=\"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z\" /></svg>);\nconst Trash2 = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><polyline points=\"3 6 5 6 21 6\" /><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" /><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" /><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" /></svg>);\nconst PlusCircleIcon = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><circle cx=\"12\" cy=\"12\" r=\"10\" /><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\" /><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\" /></svg>);\nconst XCircle = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line><line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line></svg>);\nconst Save = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\" /><polyline points=\"17 21 17 13 7 13 7 21\" /><polyline points=\"7 3 7 8 15 8\" /></svg>);\nconst AlertTriangle = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path><line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line><line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line></svg>);\nconst InfoIcon = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"></line><line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"></line></svg>);\nconst FileJson2 = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4\" /><path d=\"M14 2v6h6\" /><path d=\"M4 12h1.6a2 2 0 0 0 1.9-3.4L6 6\" /><path d=\"M4 18h1.6a2 2 0 0 1 1.9 3.4L6 24\" /><path d=\"M12 12h1.6a2 2 0 0 1 1.9-3.4L14 6\" /><path d=\"M12 18h1.6a2 2 0 0 0 1.9 3.4L14 24\" /></svg>);\nconst WandSparkles = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"m9.5 2.55 1.294 1.294a1 1 0 0 0 1.414 0L13.5 2.55\" /><path d=\"M4.94 4.94 6.22 6.22a1 1 0 0 0 1.41 0l1.29-1.29\" /><path d=\"M2.55 9.51 3.84 10.8a1 1 0 0 0 1.41 0l1.3-1.29\" /><path d=\"m19.07 4.93-1.29 1.29a1 1 0 0 1-1.41 0l-1.29-1.29\" /><path d=\"M21.45 9.51l-1.29 1.29a1 1 0 0 1-1.41 0l-1.3-1.29\" /><path d=\"M14.5 12.94a1 1 0 0 0 0 1.41l1.29 1.29\" /><path d=\"M10.8 17.78a1 1 0 0 0 0 1.41l1.29 1.29\" /><path d=\"M17.78 10.8a1 1 0 0 0 0 1.41l1.29 1.29\" /><path d=\"M12 10.5V4.5\" /><path d=\"M12 10.5C7 11 4 15 4 20\" /><path d=\"M12 10.5c5 .5 8 4.5 8 9.5\" /></svg>);\nconst LogOut = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\" /><polyline points=\"16 17 21 12 16 7\" /><line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\" /></svg>);\nconst ClipboardIcon = ({ className = \"w-4 h-4\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" ry=\"2\"></rect><path d=\"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\"></path></svg>);\nconst CheckIcon = ({ className = \"w-4 h-4\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><polyline points=\"20 6 9 17 4 12\"></polyline></svg>);\nconst ChevronRightIcon = ({ className = \"w-4 h-4\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><polyline points=\"9 18 15 12 9 6\"></polyline></svg>);\n\n// Ihre Firebase Konfiguration:\nconst firebaseConfig = {\n    apiKey: \"AIzaSyDZ_qqqKW7WDCZ9botek2VBwXNMQO3JYwU\",\n    authDomain: \"psychotherapie0512.firebaseapp.com\",\n    projectId: \"psychotherapie0512\",\n    storageBucket: \"psychotherapie0512.firebasestorage.app\",\n    messagingSenderId: \"131279046361\",\n    appId: \"1:131279046361:web:e5dd2d18b206fb820b60c8\"\n};\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst firestoreAppId = 'default-patient-app-v5';\n\n// NEU: Konstante für Hausaufgaben-Gründe\nconst homeworkFailureReasons = {\n    \"Motivational\": [\"Geringe Motivation\", \"Zweifel am Nutzen der Hausaufgabe\", \"Keine Einsicht in die Relevanz\"],\n    \"Emotional\": [\"Angst vor Versagen\", \"Scham oder Schuldgefühle\", \"Vermeidung unangenehmer Gefühle\"],\n    \"Kognitive\": [\"Negative automatische Gedanken\", \"Perfektionismus\"],\n    \"Organisatorisch/Praktisch\": [\"Zeitmangel\", \"Vergessen\", \"Keine klaren Anweisungen oder Verständnisprobleme\"],\n    \"Interaktion mit Therapeut\": [\"Widerstand gegen den Therapeuten\", \"Beziehungskonflikte\", \"Mangel an Vertrauen\"],\n    \"Psychopathologisch\": [\"Konzentrationsprobleme\", \"Antriebslosigkeit\", \"Überwältigende Symptome\"]\n};\n\n// NEU: Liste der verfügbaren diagnostischen Tests\nconst availableTests = [\n    { id: 'scl90r', name: 'SCL-90-R - Symptom-Checklist-90-R', ebm: '35601', recommendation: 10 },\n    { id: 'fep2', name: 'FEP-2 - Fragebogen zur Erfassung von Persönlichkeitsstörungen', ebm: '35601', recommendation: 12 },\n    { id: 'bdi2', name: 'BDI-II - Beck-Depressions-Inventar II', ebm: '35600', recommendation: 2 },\n    { id: 'hscl11', name: 'HSCL-11 - Hopkins Symptom Checklist-11', ebm: '35600', recommendation: 1 },\n];\n\nconst initialPatientsData = [\n    {\n        name: \"Mustermann\",\n        geburtsdatum: \"1998-04-04\",\n        chiffre: \"M040498\",\n        therapyType: \"LZT\",\n        approvedHours: 60,\n        conductedHours: 24,\n        diagnoses: [\"[G] F00.0*: Demenz bei Alzheimer-Krankheit, mit frühem Beginn (Typ 2)\", \"[V] F01.1: Multiinfarkt-Demenz\", \"[A] F20.0: Paranoide Schizophrenie\", \"[ZN] F32.1: Mittelgradige depressive Episode\", \"F40.0: Agoraphobie\"],\n        sessions: [{ date: \"2025-05-20\", notes: \"Erste Sitzung, Exploration der Hauptbeschwerden.\" }, { date: \"2025-05-27\", notes: \"Vertiefung der Anamnese, erste Verhaltensanalysen.\" }],\n        hscl11Results: [],\n        bdi2Results: [],\n        fep2Results: [],\n        scl90rResults: [],\n        krankheitsanamnese: \"Patient berichtet über seit ca. 2 Jahren zunehmende Vergesslichkeit und Orientierungsprobleme.\",\n        lebensgeschichte: \"Geboren 1955, verheiratet, 2 Kinder, früher als Buchhalter tätig.\",\n        problemanalyseMakro: \"Kognitive Defizite im Vordergrund, affektive Belastung durch erlebten Kontrollverlust.\",\n        therapieplan: \"Supportive Gespräche, kognitives Training, Psychoedukation für Angehörige.\"\n    },\n];\n\nconst Modal = ({ isOpen, onClose, title, children, size = \"lg\" }) => { if (!isOpen) return null; const sizeClasses = { sm: 'max-w-sm', md: 'max-w-md', lg: 'max-w-lg', xl: 'max-w-xl', '2xl': 'max-w-2xl', '3xl': 'max-w-3xl', '4xl': 'max-w-4xl', '5xl': 'max-w-5xl' }; return (<div className=\"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex justify-center items-center z-50 p-4\"><div className={`bg-white p-6 rounded-lg shadow-xl w-full ${sizeClasses[size]} max-h-[90vh] overflow-y-auto`}><div className=\"flex justify-between items-center mb-4\"><h2 className=\"text-2xl font-semibold text-gray-800\">{title}</h2><button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\"><XCircle className=\"w-7 h-7\" /></button></div>{children}</div></div>); };\nconst ConfirmationModal = ({ isOpen, onClose, onConfirm, title, message }) => { if (!isOpen) return null; return (<Modal isOpen={isOpen} onClose={onClose} title={title} size=\"sm\"><div className=\"text-center\"><AlertTriangle className=\"mx-auto mb-4 w-12 h-12 text-red-500\" /><p className=\"text-gray-700 mb-6\">{message}</p><div className=\"flex justify-center space-x-4\"><button onClick={onClose} className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none\">Abbrechen</button><button onClick={onConfirm} className=\"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none\">Bestätigen</button></div></div></Modal>); };const PatientForm = ({ patient, onSave, onCancel }) => {\n    const [formData, setFormData] = useState(\n        patient || {\n            name: '',\n            vorname: '',\n            chiffre: '',\n            geburtsdatum: '',\n            adresse: '',\n            email: '',\n            telefon: '',\n            therapyType: 'LZT',\n            approvedHours: 0,\n            conductedHours: 0,\n            diagnoses: [],\n            sessions: [],\n            hscl11Results: [],\n            bdi2Results: [],\n            fep2Results: [],\n            scl90rResults: [],\n            krankheitsanamnese: \"\",\n            lebensgeschichte: \"\",\n            problemanalyseMakro: \"\",\n            therapieplan: \"\"\n        }\n    );\n\n    useEffect(() => {\n        if (patient) {\n            setFormData({\n                ...patient,\n                geburtsdatum: patient.geburtsdatum || '', // Sicherstellen, dass das Feld existiert\n                hscl11Results: patient.hscl11Results || [],\n                bdi2Results: patient.bdi2Results || [],\n                fep2Results: patient.fep2Results || [],\n                scl90rResults: patient.scl90rResults || [],\n                krankheitsanamnese: patient.krankheitsanamnese || \"\",\n                lebensgeschichte: patient.lebensgeschichte || \"\",\n                problemanalyseMakro: patient.problemanalyseMakro || \"\",\n                therapieplan: patient.therapieplan || \"\"\n            });\n        } else {\n            setFormData({\n                name: '',\n                chiffre: '',\n                geburtsdatum: '',\n                therapyType: 'LZT',\n                approvedHours: 0,\n                conductedHours: 0,\n                diagnoses: [],\n                sessions: [],\n                hscl11Results: [],\n                bdi2Results: [],\n                fep2Results: [],\n                scl90rResults: [],\n                krankheitsanamnese: \"\",\n                lebensgeschichte: \"\",\n                problemanalyseMakro: \"\",\n                therapieplan: \"\"\n            });\n        }\n    }, [patient]);\n\n    useEffect(() => {\n        const { name, geburtsdatum } = formData;\n        if (name && geburtsdatum) {\n            try {\n                const firstLetter = name.charAt(0).toUpperCase();\n                const [year, month, day] = geburtsdatum.split('-');\n\n                if (year && month && day) {\n                    const yy = year.slice(-2);\n                    const newChiffre = `${firstLetter}${day}${month}${yy}`;\n                    setFormData(prev => ({ ...prev, chiffre: newChiffre }));\n                }\n            } catch (e) {\n                console.error(\"Fehler bei der Chiffre-Generierung\", e);\n                setFormData(prev => ({ ...prev, chiffre: '' }));\n            }\n        } else {\n            if (formData.chiffre !== '') {\n                setFormData(prev => ({ ...prev, chiffre: '' }));\n            }\n        }\n    }, [formData]); // Add formData to the dependency array\n\n    const handleChange = (e) => { const { name, value, type } = e.target; setFormData((prev) => ({ ...prev, [name]: type === 'number' ? parseInt(value, 10) || 0 : value })); };\n    const handleSubmit = (e) => { e.preventDefault(); onSave(formData); };\n\n\n\n    return (\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                    <label htmlFor=\"vorname\" className=\"block text-sm font-medium text-gray-700\">Vorname</label>\n                    <input type=\"text\" name=\"vorname\" id=\"vorname\" value={formData.vorname} onChange={handleChange} required className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\" />\n                </div>\n                <div>\n                    <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700\">Nachname</label>\n                    <input type=\"text\" name=\"name\" id=\"name\" value={formData.name} onChange={handleChange} required className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\" />\n                </div>\n                <div>\n                    <label htmlFor=\"geburtsdatum\" className=\"block text-sm font-medium text-gray-700\">Geburtsdatum</label>\n                    <input type=\"date\" name=\"geburtsdatum\" id=\"geburtsdatum\" value={formData.geburtsdatum} onChange={handleChange} required className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\" />\n                </div>\n                <div>\n                    <label htmlFor=\"chiffre\" className=\"block text-sm font-medium text-gray-700\">Chiffre</label>\n                    <input type=\"text\" name=\"chiffre\" id=\"chiffre\" value={formData.chiffre} readOnly className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100 cursor-not-allowed sm:text-sm\" />\n                </div>\n            </div>\n            <div>\n                <label htmlFor=\"adresse\" className=\"block text-sm font-medium text-gray-700\">Adresse</label>\n                <input type=\"text\" name=\"adresse\" id=\"adresse\" value={formData.adresse} onChange={handleChange} className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\" />\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                    <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">E-Mail</label>\n                    <input type=\"email\" name=\"email\" id=\"email\" value={formData.email} onChange={handleChange} className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\" />\n                </div>\n                <div>\n                    <label htmlFor=\"telefon\" className=\"block text-sm font-medium text-gray-700\">Telefon</label>\n                    <input type=\"tel\" name=\"telefon\" id=\"telefon\" value={formData.telefon} onChange={handleChange} className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\" />\n                </div>\n            </div>\n\n            <div>\n                <label htmlFor=\"therapyType\" className=\"block text-sm font-medium text-gray-700\">Therapieform</label>\n                <select name=\"therapyType\" id=\"therapyType\" value={formData.therapyType} onChange={handleChange} className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\">\n                    <option value=\"LZT\">Langzeittherapie (LZT)</option>\n                    <option value=\"KZT\">Kurzzeittherapie (KZT)</option>\n                </select>\n            </div>\n            <div>\n                <label htmlFor=\"approvedHours\" className=\"block text-sm font-medium text-gray-700\">Genehmigte Stunden</label>\n                <input type=\"number\" name=\"approvedHours\" id=\"approvedHours\" value={formData.approvedHours} onChange={handleChange} min=\"0\" className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\" />\n            </div>\n            <div>\n                <label htmlFor=\"conductedHours\" className=\"block text-sm font-medium text-gray-700\">Durchgeführte Stunden</label>\n                <input type=\"number\" name=\"conductedHours\" id=\"conductedHours\" value={formData.conductedHours} onChange={handleChange} min=\"0\" className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\" />\n            </div>\n            <div className=\"flex justify-end space-x-3 pt-4\">\n                <button type=\"button\" onClick={onCancel} className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500\">Abbrechen</button>\n                <button type=\"submit\" className=\"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 flex items-center\"><Save className=\"w-4 h-4 mr-2\" /> Speichern</button>\n            </div>\n        </form>\n    );\n};\n\nasync function generateGeminiText(prompt) {\n    let chatHistory = [{ role: \"user\", parts: [{ text: prompt }] }];\n    const payload = { contents: chatHistory };\n    const GEMINI_API_KEY = \"AIzaSyCWQFze_8cKDZ6W2DTqfqIcvhcsKWfuZLw\"; // Tragen Sie hier Ihren lokalen Schlüssel ein\n    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${GEMINI_API_KEY}`;\n    try {\n        const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });\n        if (!response.ok) { const errorData = await response.json(); console.error(\"Gemini API error details:\", errorData); const errorMessage = errorData.error?.message || `API request failed with status ${response.status}`; throw new Error(errorMessage); }\n        const result = await response.json();\n        if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) { return result.candidates[0].content.parts[0].text; }\n        else if (result.candidates && result.candidates.length > 0 && result.candidates[0].finishReason === \"SAFETY\") { console.warn(\"Gemini API response blocked due to safety reasons.\"); return \"Die Antwort wurde aufgrund von Sicherheitsrichtlinien blockiert.\"; }\n        else { console.error(\"Unexpected Gemini API response structure:\", result); throw new Error(\"Unerwartete Antwortstruktur von der API.\"); }\n    } catch (error) { console.error(\"Error calling Gemini API:\", error); throw error; }\n}\n\nfunction App() {\n    // --- States ---\n    const [mainView, setMainView] = useState('patients');\n    const [patients, setPatients] = useState([]);\n    const [selectedPatient, setSelectedPatient] = useState(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [authError, setAuthError] = useState(null);\n    const [appError, setAppError] = useState(null);\n    const [userId, setUserId] = useState(null);\n    const [isAuthReady, setIsAuthReady] = useState(false);\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [isLoginView, setIsLoginView] = useState(true);\n    const [isAuthLoading, setIsAuthLoading] = useState(false);\n    const [isPatientModalOpen, setIsPatientModalOpen] = useState(false);\n    const [editingPatient, setEditingPatient] = useState(null);\n    const [isConfirmDeleteModalOpen, setIsConfirmDeleteModalOpen] = useState(false);\n    const [patientToDeleteId, setPatientToDeleteId] = useState(null);\n    const [newDiagnosis, setNewDiagnosis] = useState('');\n    const [newDiagnosisCode, setNewDiagnosisCode] = useState('');\n    const [newDiagnosisSicherheit, setNewDiagnosisSicherheit] = useState('G');\n    const [lookedUpDiagnosisName, setLookedUpDiagnosisName] = useState('');\n    const [newSessionDate, setNewSessionDate] = useState(new Date().toISOString().split('T')[0]);\n    const [newSessionNotes, setNewSessionNotes] = useState('');\n    const [activeDetailTab, setActiveDetailTab] = useState('übersicht');\n    const [activeDiagnostikSubTab, setActiveDiagnostikSubTab] = useState('overview');\n    const [sessionSummaries, setSessionSummaries] = useState({});\n    const [diagnosisInfo, setDiagnosisInfo] = useState({ code: '', name: '', beschreibung: '', inkl: [], exkl: [], hinweise: [], zusatz_info_code: '', sicherheit: '', isLoading: false, error: null, isOpen: false, source: '' });\n    const [localIcd10Data, setLocalIcd10Data] = useState({});\n    const [editableConductedHours, setEditableConductedHours] = useState(\"\");\n    const [editableKrankheitsanamnese, setEditableKrankheitsanamnese] = useState(\"\");\n    const [editableLebensgeschichte, setEditableLebensgeschichte] = useState(\"\");\n    const [editableProblemanalyseMakro, setEditableProblemanalyseMakro] = useState(\"\");\n    const [editableTherapieplan, setEditableTherapieplan] = useState(\"\");\n    const [therapeutischeAssistenzOutput, setTherapeutischeAssistenzOutput] = useState(\"\");\n    const [isLoadingTherapeutischeAssistenz, setIsLoadingTherapeutischeAssistenz] = useState(false);\n    const [assistenzError, setAssistenzError] = useState(null);\n    const detailViewRef = useRef(null);\n    const overviewRef = useRef(null);\n    const [isRegistering, setIsRegistering] = useState(false);\n    const [improvementState, setImprovementState] = useState({ isOpen: false, isLoading: false, originalText: '', improvedText: '', sessionIndex: null, error: null });\n    const [editingSessionIndex, setEditingSessionIndex] = useState(null);\n    const [editingSessionText, setEditingSessionText] = useState('');\n    const [editingHours, setEditingHours] = useState({});\n    const [sortConfig, setSortConfig] = useState({ key: 'name', direction: 'ascending' });\n    const [expandedSessions, setExpandedSessions] = useState({});\n    const [copiedStatus, setCopiedStatus] = useState({});\n    const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\n    const [nextAppointment, setNextAppointment] = useState({ isLoading: false, text: null, error: null });\n    const [unbilledAppointments, setUnbilledAppointments] = useState([]);\n    const [isLoadingAppointments, setIsLoadingAppointments] = useState(false);\n    const [billingModalState, setBillingModalState] = useState({ isOpen: false, event: null });\n    const [ebmData, setEbmData] = useState([]);\n    const [isManualBillingSetupOpen, setIsManualBillingSetupOpen] = useState(false); // NEU\n    const [confirmDeleteState, setConfirmDeleteState] = useState({ isOpen: false, onConfirm: null, message: '', title: '' });\n\n    // NEU: States für den Test-Workflow\n    const [isAddTestModalOpen, setIsAddTestModalOpen] = useState(false);\n    const [currentTestToAdd, setCurrentTestToAdd] = useState(null);\n\n    const calculateAge = (birthdate) => {\n        if (!birthdate) return '';\n        const birthDate = new Date(birthdate);\n        const today = new Date();\n        let age = today.getFullYear() - birthDate.getFullYear();\n        const m = today.getMonth() - birthDate.getMonth();\n        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n            age--;\n        }\n        return age;\n    };\n\n    const handleDeleteEbmEntry = async (sessionDate, ebmIndexToDelete) => {\n        if (!selectedPatient || !userId) return;\n\n        const patientRef = doc(db, getPatientsCollectionPath(), selectedPatient.id);\n        const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n        const sessionIndex = updatedSessions.findIndex(s => s.date === sessionDate);\n\n        if (sessionIndex === -1) {\n            setAppError(\"Sitzung zum Löschen des Eintrags nicht gefunden.\");\n            return;\n        }\n\n        const sessionToUpdate = updatedSessions[sessionIndex];\n        const entryToDelete = sessionToUpdate.ebmEntries[ebmIndexToDelete];\n        \n        // Finde den zugehörigen Test, falls es einer ist\n        const linkedTest = availableTests.find(t => t.ebm === entryToDelete.nummer);\n\n        const performDelete = async () => {\n            // EBM-Eintrag aus der Sitzung entfernen\n            sessionToUpdate.ebmEntries.splice(ebmIndexToDelete, 1);\n            let finalPatientData = { sessions: updatedSessions };\n\n            // Wenn ein Test-Link besteht, auch das Testergebnis löschen\n            if (linkedTest && entryToDelete.testInstanceId) {\n                const resultKey = `${linkedTest.id}Results`;\n                const oldResults = selectedPatient[resultKey] || [];\n                const newResults = oldResults.filter(r => r.testInstanceId !== entryToDelete.testInstanceId);\n                finalPatientData[resultKey] = newResults;\n            }\n\n            try {\n                await setDoc(patientRef, finalPatientData, { merge: true });\n                setConfirmDeleteState({ isOpen: false }); // Modal schließen\n            } catch (err) {\n                setAppError(`Fehler beim Löschen: ${err.message}`);\n            }\n        };\n\n        // Wenn es ein verknüpfter Test ist, frage nach Bestätigung\n        if (linkedTest) {\n            setConfirmDeleteState({\n                isOpen: true,\n                title: \"Eintrag wirklich löschen?\",\n                message: `Dieser Abrechnungseintrag ist mit dem Diagnostiktest \"${linkedTest.name}\" verknüpft. Wenn Sie ihn löschen, wird auch das zugehörige Testergebnis unwiderruflich entfernt. Fortfahren?`,\n                onConfirm: performDelete\n            });\n        } else {\n            // Ansonsten direkt löschen\n            await performDelete();\n        }\n    };\n\n    const handleStartManualBilling = (patientId, date, sessionNumber) => { // sessionNumber ist neu\n        const patient = patients.find(p => p.id === patientId);\n        if (!patient) {\n            setAppError(\"Patient für manuelle Abrechnung nicht gefunden.\");\n            return;\n        }\n\n        const syntheticEvent = {\n            id: `manual_${Date.now()}`,\n            summary: `Manuelle Sitzung (${patient.chiffre})`,\n            start: {\n                dateTime: new Date(date).toISOString()\n            },\n            sitzungsnummer: sessionNumber, // NEU\n            isManual: true \n        };\n\n      handleStartBilling(syntheticEvent);\n    };\n\n    const toggleSessionExpansion = (index) => {\n        setExpandedSessions(prev => ({\n            ...prev,\n            [index]: !prev[index]\n        }));\n    };\n\n    const sortedPatients = React.useMemo(() => {\n        let sortablePatients = [...patients];\n        if (sortConfig !== null) {\n            sortablePatients.sort((a, b) => {\n                if (a[sortConfig.key] < b[sortConfig.key]) {\n                    return sortConfig.direction === 'ascending' ? -1 : 1;\n                }\n                if (a[sortConfig.key] > b[sortConfig.key]) {\n                    return sortConfig.direction === 'ascending' ? 1 : -1;\n                }\n                return 0;\n            });\n        }\n        return sortablePatients;\n    }, [patients, sortConfig]);\n\n    const handleCopyNote = (text, index) => {\n        navigator.clipboard.writeText(text).then(() => {\n            setCopiedStatus({ [index]: true });\n            setTimeout(() => setCopiedStatus({ [index]: false }), 2000);\n        }, (err) => {\n            console.error('Fehler beim Kopieren: ', err);\n            setAppError(\"Text konnte nicht kopiert werden.\");\n        });\n    };\n    const fetchNextAppointment = useCallback(async (chiffre) => {\n        if (!chiffre) return;\n        setNextAppointment({ isLoading: true, text: null, error: null });\n        try {\n            const response = await fetch(`http://localhost:3001/api/calendar/nextevent?chiffre=${chiffre}`);\n            if (response.status === 404) {\n                setNextAppointment({ isLoading: false, text: 'Kein zukünftiger Termin gefunden.', error: null });\n                return;\n            }\n            if (!response.ok) {\n                throw new Error('Kalender-API-Anfrage fehlgeschlagen.');\n            }\n            const event = await response.json();\n\n            const startDate = new Date(event.start);\n            const endDate = new Date(event.end);\n            const dateOptions = { day: '2-digit', month: '2-digit', year: 'numeric' };\n            const timeOptions = { hour: '2-digit', minute: '2-digit' };\n\n            const formattedDate = startDate.toLocaleDateString('de-DE', dateOptions);\n            const formattedStartTime = startDate.toLocaleTimeString('de-DE', timeOptions);\n            const formattedEndTime = endDate.toLocaleTimeString('de-DE', timeOptions);\n\n            setNextAppointment({\n                isLoading: false,\n                text: `Nächster Termin: ${formattedDate} um ${formattedStartTime} bis ${formattedEndTime} Uhr`,\n                error: null\n            });\n\n        } catch (error) {\n            console.error('Fehler beim Abrufen des Termins:', error);\n            setNextAppointment({ isLoading: false, text: null, error: 'Termin konnte nicht geladen werden.' });\n        }\n    }, []);\n    const getPatientsCollectionPath = useCallback(() => { if (!userId) return null; return `/artifacts/${firestoreAppId}/users/${userId}/patients`; }, [userId]);\n    const findIcd10CodeLocal = useCallback((codeToFind) => {\n        const upperCodeToFind = codeToFind.toUpperCase();\n        let found = localIcd10Data[upperCodeToFind];\n        if (found) return found;\n        const baseCode = upperCodeToFind.replace(/(\\.-[*]|\\.\\*|[*]|-)$/, '');\n        found = localIcd10Data[`${baseCode}.-*`] || localIcd10Data[`${baseCode}.*`] || localIcd10Data[baseCode];\n        if (found) return found;\n        const possibleCategoryCode = Object.keys(localIcd10Data).find(key => key.startsWith(upperCodeToFind) && (localIcd10Data[key].code_kategorie || localIcd10Data[key].code));\n        if (possibleCategoryCode) return localIcd10Data[possibleCategoryCode];\n        return null;\n    }, [localIcd10Data]);\n\n    const handleStartBilling = (event) => {\n        setBillingModalState({ isOpen: true, event: event });\n    };\n\n    const handleSaveBilling = async (billingData) => {\n        const { chiffre, eventId, eventStart, notes, ebmEntries } = billingData;\n\n        const targetPatient = patients.find(p => p.chiffre === chiffre);\n        if (!targetPatient) {\n            setAppError(`Patient mit Chiffre ${chiffre} nicht gefunden.`);\n            return;\n        }\n\n        const newSession = {\n            date: new Date(eventStart).toISOString(),\n            structuredNotes: notes,\n            ebmEntries: ebmEntries,\n            eventId: eventId,\n            homeworkStatus: (notes.hausaufgaben || [])\n                .filter(task => task.trim() !== '')\n                .map(taskText => ({ text: taskText, done: false, reason: '' }))\n        };\n\n        const collectionPath = getPatientsCollectionPath();\n        const patientRef = doc(db, collectionPath, targetPatient.id);\n        const updatedSessions = [...(targetPatient.sessions || []), newSession];\n        updatedSessions.sort((a, b) => new Date(b.date) - new Date(a.date));\n\n        try {\n            await setDoc(patientRef, { sessions: updatedSessions }, { merge: true });\n            setBillingModalState({ isOpen: false, event: null });\n            setActiveDetailTab('abrechnung');\n        } catch (err) {\n            setAppError(\"Fehler beim Speichern der Abrechnung.\");\n            console.error(\"Error saving billing:\", err);\n        }\n    };\n\n    const handleSaveTestAndResults = async (testData) => {\n        const { testId, sessionId, multiplier, phase, date, results } = testData;        if (!selectedPatient || !testId) {\n            setAppError(\"Fehler: Patient oder Test nicht spezifiziert.\");\n            return;\n        }\n    \n        const testInfo = availableTests.find(t => t.id === testId);\n        if (!testInfo) {\n            setAppError(\"Testkonfiguration nicht gefunden.\");\n            return;\n        }\n    \n        const patientRef = doc(db, getPatientsCollectionPath(), selectedPatient.id);\n        const testInstanceId = `test_${testId}_${Date.now()}`; // NEU: Eindeutige ID\n        const newTestEbmEntry = { nummer: testInfo.ebm, anzahl: multiplier || 1, faktor: 1, testInstanceId }; // NEU: ID zum EBM-Eintrag\n\n        // 1. Zuerst das Testergebnis speichern (dies geschieht immer)\n        const resultKey = `${testId}Results`;\n        const newTestResult = { date: new Date().toISOString(), ...results, testInstanceId }; // NEU\n        const updatedTestResults = [...(selectedPatient[resultKey] || []), newTestResult];\n        \n        let finalPatientData = {\n            [resultKey]: updatedTestResults\n        };\n\n        try {\n            // Option A: Zu einer bestehenden Sitzung hinzufügen\n            if (sessionId && sessionId !== 'new') {\n                const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n                const sessionIndex = updatedSessions.findIndex(s => (s.eventId || s.date) === sessionId);\n                \n                if (sessionIndex === -1) {\n                    throw new Error(\"Die ausgewählte Sitzung zum Hinzufügen wurde nicht gefunden.\");\n                }\n\n                const sessionToUpdate = updatedSessions[sessionIndex];\n                sessionToUpdate.ebmEntries = [...(sessionToUpdate.ebmEntries || []), newTestEbmEntry];\n                finalPatientData.sessions = updatedSessions;\n\n            // Option B: Eine neue Abrechnung nur für den Test erstellen\n            } else {\n                const testBillingSession = {\n                    date: new Date(date).toISOString(),\n                    eventId: `test_${testId}_${Date.now()}`,\n                    ebmEntries: [newTestEbmEntry],\n                    structuredNotes: {\n                        thema: `Testdiagnostik: ${testInfo.name}`,\n                        Phase: phase,\n                    }\n                };\n                const updatedSessions = [...(selectedPatient.sessions || []), testBillingSession];\n                updatedSessions.sort((a, b) => new Date(b.date) - new Date(a.date));\n                finalPatientData.sessions = updatedSessions;\n            }\n    \n            // 2. Alle Änderungen (Testergebnis + ggf. Sitzungsupdate) in einer Transaktion speichern\n            await setDoc(patientRef, finalPatientData, { merge: true });\n            \n            alert(`Test \"${testInfo.name}\" wurde gespeichert und abgerechnet.`);\n            setActiveDiagnostikSubTab(testId);\n        } catch (err) {\n            setAppError(`Fehler beim Speichern der Testdaten: ${err.message}`);\n            console.error(\"Error saving test data:\", err);\n        }\n    };\n\n    const handleUpdateHomeworkStatus = async (sessionDate, homeworkIndex, newStatus) => {\n        if (!selectedPatient || !userId) return;\n\n        const collectionPath = getPatientsCollectionPath();\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n\n        const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n\n        const sessionToUpdate = updatedSessions.find(s => s.date === sessionDate);\n        if (sessionToUpdate && sessionToUpdate.homeworkStatus && sessionToUpdate.homeworkStatus[homeworkIndex]) {\n            Object.assign(sessionToUpdate.homeworkStatus[homeworkIndex], newStatus);\n        }\n\n        try {\n            await setDoc(patientRef, { sessions: updatedSessions }, { merge: true });\n        } catch (err) {\n            console.error(\"Error updating homework status:\", err);\n            setAppError(\"Fehler beim Aktualisieren des Hausaufgabenstatus.\");\n        }\n    };\n\n\n    // --- useEffects ---\n    useEffect(() => {\n        if (ebmData.length === 0) {\n            fetch('/ebm_data_full.json')\n                .then(res => res.json())\n                .then(setEbmData)\n                .catch(err => console.error(\"Failed to load EBM data\", err));\n        }\n    }, [ebmData.length]);\n\n    useEffect(() => {\n        if (mainView === 'patientenakte') {\n            setIsLoadingAppointments(true);\n            fetch('http://localhost:3001/api/calendar/past-events')\n                .then(res => {\n                    if (!res.ok) {\n                        return res.json().then(errorData => {\n                            throw new Error(errorData.message || `Serverfehler: ${res.status}`);\n                        });\n                    }\n                    return res.json();\n                })\n                .then(calendarEvents => {\n                    if (!Array.isArray(calendarEvents)) {\n                        throw new Error(\"Unerwartetes Datenformat vom Server erhalten.\");\n                    };\n                    const billedEventIds = new Set();\n                    patients.forEach(p => {\n                        (p.sessions || []).forEach(s => {\n                            if (s.eventId) billedEventIds.add(s.eventId);\n                        });\n                    });\n                    const unbilled = calendarEvents.filter(event =>\n                        !billedEventIds.has(event.id) &&\n                        event.summary?.match(/[A-Z][0-9]{6}/)\n                    );\n                    setUnbilledAppointments(unbilled);\n                })\n                .catch(err => {\n                    if (err.message && err.message.includes('Nicht bei Google authentifiziert')) {\n                        setAppError(`Kalender-Fehler: Sie müssen sich erneut bei Google authentifizieren. Rufen Sie dazu im Browser auf: http://localhost:3001/auth/google`);\n                    } else {\n                        setAppError(`Offene Abrechnungen konnten nicht geladen werden: ${err.message}`);\n                    }\n                })\n                .finally(() => setIsLoadingAppointments(false));\n        }\n    }, [mainView, patients]);\n\n    useEffect(() => {\n        if (selectedPatient) {\n            fetchNextAppointment(selectedPatient.chiffre);\n        } else {\n            setNextAppointment({ isLoading: false, text: null, error: null });\n        }\n    }, [selectedPatient, fetchNextAppointment]);\n\n    useEffect(() => {\n        fetch('/icd10f_data.json')\n            .then(response => { if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`); return response.json(); })\n            .then(data => {\n                const indexedData = {};\n                data.forEach(item => { if (item.code) { indexedData[item.code.toUpperCase()] = item; } });\n                setLocalIcd10Data(indexedData);\n            })\n            .catch(error => { console.error(\"Fehler beim Laden der lokalen ICD-10 Daten:\", error); setAppError(\"Lokale ICD-10 Daten konnten nicht geladen werden. \" + error.message); });\n    }, []);\n\n    useEffect(() => {\n        if (selectedPatient) {\n            setEditableConductedHours(selectedPatient.conductedHours !== null && selectedPatient.conductedHours !== undefined ? String(selectedPatient.conductedHours) : \"\");\n            setEditableKrankheitsanamnese(selectedPatient.krankheitsanamnese || \"\");\n            setEditableLebensgeschichte(selectedPatient.lebensgeschichte || \"\");\n            setEditableProblemanalyseMakro(selectedPatient.problemanalyseMakro || \"\");\n            setEditableTherapieplan(selectedPatient.therapieplan || \"\");\n            if (detailViewRef.current) { setTimeout(() => { detailViewRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' }); }, 100); }\n        } else {\n            setEditableConductedHours(\"\");\n            setEditableKrankheitsanamnese(\"\");\n            setEditableLebensgeschichte(\"\");\n            setEditableProblemanalyseMakro(\"\");\n            setEditableTherapieplan(\"\");\n        }\n    }, [selectedPatient]);\n\n    useEffect(() => {\n        if (newDiagnosisCode.trim() !== '') {\n            const found = findIcd10CodeLocal(newDiagnosisCode.trim().toUpperCase());\n            if (found && found.name) {\n                setLookedUpDiagnosisName(found.name);\n            } else {\n                setLookedUpDiagnosisName('');\n            }\n        } else {\n            setLookedUpDiagnosisName('');\n        }\n    }, [newDiagnosisCode, findIcd10CodeLocal]);\n\n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, (user) => {\n            if (user) { setUserId(user.uid); } else { setUserId(null); }\n            setIsAuthReady(true); setIsLoading(false);\n        });\n        return () => unsubscribe();\n    }, []);\n\n    const seedInitialData = useCallback(async () => {\n        if (!userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        try {\n            const patientsCollection = collection(db, collectionPath);\n            const querySnapshot = await getDocs(patientsCollection);\n            if (querySnapshot.empty) {\n                const batch = writeBatch(db);\n                initialPatientsData.forEach(patientData => {\n                    const newPatientRef = doc(patientsCollection);\n                    batch.set(newPatientRef, { ...patientData, hscl11Results: patientData.hscl11Results || [], bdi2Results: patientData.bdi2Results || [], fep2Results: patientData.fep2Results || [], scl90rResults: patientData.scl90rResults || [], diagnoses_icd11: patientData.diagnoses_icd11 || [], krankheitsanamnese: patientData.krankheitsanamnese || \"\", lebensgeschichte: patientData.lebensgeschichte || \"\", problemanalyseMakro: patientData.problemanalyseMakro || \"\", therapieplan: patientData.therapieplan || \"\" });\n                });\n                await batch.commit();\n            }\n        } catch (err) {\n            console.error(\"Error seeding initial data:\", err);\n            setAppError(\"Fehler beim Laden der initialen Daten.\");\n        }\n    }, [userId, getPatientsCollectionPath]);\n\n\n    useEffect(() => {\n        if (!isAuthReady || !userId) { setPatients([]); return; }\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        setIsLoading(true);\n        seedInitialData();\n        const patientsQuery = query(collection(db, collectionPath));\n        const unsubscribe = onSnapshot(patientsQuery, (snapshot) => {\n            let patientsData = snapshot.docs.map(docSnap => ({ id: docSnap.id, ...docSnap.data(), diagnoses_icd11: docSnap.data().diagnoses_icd11 || [] }));\n            patientsData.sort((a, b) => a.name.localeCompare(b.name));\n            setPatients(patientsData);\n            setIsLoading(false);\n        }, (err) => {\n            console.error(\"Error fetching patients:\", err);\n            setAppError(\"Fehler beim Laden der Patientendaten.\");\n            setIsLoading(false);\n        });\n        return () => unsubscribe();\n    }, [isAuthReady, userId, getPatientsCollectionPath, seedInitialData]);\n\n    useEffect(() => {\n        if (selectedPatient && selectedPatient.id && patients.length > 0) {\n            const currentPatientDataFromList = patients.find(p => p.id === selectedPatient.id);\n            if (currentPatientDataFromList) {\n                if (JSON.stringify(currentPatientDataFromList) !== JSON.stringify(selectedPatient)) {\n                    setSelectedPatient(currentPatientDataFromList);\n                }\n            } else { setSelectedPatient(null); }\n        }\n    }, [patients, selectedPatient]);\n\n    useEffect(() => {\n        const loadIcd10Data = async () => {\n            try {\n                const response = await fetch('/icd10f_data.json');\n                if (!response.ok) {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n                const data = await response.json();\n                const indexedData = {};\n                data.forEach(item => {\n                    if (item.code) {\n                        indexedData[item.code.toUpperCase()] = item;\n                        const baseCode = item.code.replace(/[*†]/, '').toUpperCase();\n                        if (baseCode !== item.code.toUpperCase()) {\n                            indexedData[baseCode] = item;\n                        }\n                    }\n                });\n                setLocalIcd10Data(indexedData);\n            } catch (error) {\n                console.error(\"Fehler beim Laden der lokalen ICD-10 Daten:\", error);\n                setAppError(\"Lokale ICD-10 Daten konnten nicht geladen werden. \" + error.message);\n            }\n        };\n\n        loadIcd10Data();\n    }, []);\n\n\n    const bdiCutoffs = [\n        { y1: 0, y2: 8, label: \"Keine Depression\", color: \"rgba(75, 192, 192, 0.2)\" },\n        { y1: 9, y2: 13, label: \"Minimale Depression\", color: \"rgba(54, 162, 235, 0.2)\" },\n        { y1: 14, y2: 19, label: \"Leichte Depression\", color: \"rgba(255, 206, 86, 0.2)\" },\n        { y1: 20, y2: 28, label: \"Mittelschwere Depression\", color: \"rgba(255, 159, 64, 0.2)\" },\n        { y1: 29, y2: 63, label: \"Schwere Depression\", color: \"rgba(255, 99, 132, 0.2)\" }\n    ];\n\n    const bdiAxisTicks = [0, 8, 13, 19, 28, 63];\n\n    const handleAuthAction = async (isRegistering) => {\n        setIsAuthLoading(true);\n        setAuthError(null);\n        try {\n            if (isRegistering) {\n                await createUserWithEmailAndPassword(auth, email, password);\n            } else {\n                await signInWithEmailAndPassword(auth, email, password);\n            }\n            setEmail(\"\");\n            setPassword(\"\");\n        } catch (error) {\n            console.error(\"Authentication error:\", error);\n            setAuthError(error.message);\n        } finally {\n            setIsAuthLoading(false);\n        }\n    };\n    const handleLogout = async () => {\n        try {\n            await signOut(auth);\n            setSelectedPatient(null);\n            setPatients([]);\n        } catch (error) {\n            console.error(\"Error signing out: \", error);\n            setAppError(\"Fehler beim Abmelden.\");\n        }\n    };\n    const handleSavePatient = async (patientData) => {\n        if (!userId) { setAppError(\"Benutzer nicht authentifiziert.\"); return; }\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        const dataToSave = {\n            ...patientData,\n            hscl11Results: patientData.hscl11Results || [],\n            bdi2Results: patientData.bdi2Results || [],\n            fep2Results: patientData.fep2Results || [],\n            scl90rResults: patientData.scl90rResults || [],\n            krankheitsanamnese: patientData.krankheitsanamnese || \"\",\n            lebensgeschichte: patientData.lebensgeschichte || \"\",\n            problemanalyseMakro: patientData.problemanalyseMakro || \"\",\n            therapieplan: patientData.therapieplan || \"\"\n        };\n        try {\n            if (editingPatient && editingPatient.id) {\n                const patientRef = doc(db, collectionPath, editingPatient.id);\n                await setDoc(patientRef, dataToSave, { merge: true });\n            } else {\n                await addDoc(collection(db, collectionPath), dataToSave);\n            }\n            setIsPatientModalOpen(false);\n            setEditingPatient(null);\n        } catch (err) {\n            console.error(\"Error saving patient:\", err);\n            setAppError(\"Fehler beim Speichern des Patienten.\");\n        }\n    };\n    const openDeleteConfirmation = (patientId) => {\n        setPatientToDeleteId(patientId); setIsConfirmDeleteModalOpen(true);\n    };\n    const confirmDeletePatient = async () => {\n        if (!patientToDeleteId || !userId) { setAppError(\"Löschvorgang fehlgeschlagen.\"); setIsConfirmDeleteModalOpen(false); return; }\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        try {\n            const patientRef = doc(db, collectionPath, patientToDeleteId);\n            await deleteDoc(patientRef);\n            if (selectedPatient && selectedPatient.id === patientToDeleteId) {\n                setSelectedPatient(null);\n            }\n            setPatientToDeleteId(null);\n            setIsConfirmDeleteModalOpen(false);\n        } catch (err) {\n            console.error(\"Error deleting patient:\", err);\n            setAppError(\"Fehler beim Löschen des Patienten.\");\n            setIsConfirmDeleteModalOpen(false);\n        }\n    };\n    const handleAddDiagnosis = async () => {\n        const codeToAdd = newDiagnosisCode.trim().toUpperCase();\n        if (!selectedPatient || !codeToAdd || !userId) {\n            setAppError(\"Bitte füllen Sie alle erforderlichen Felder aus.\");\n            return;\n        }\n\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        // Diagnosestring zusammenbauen\n        const sicherheitPrefix = newDiagnosisSicherheit ? `[${newDiagnosisSicherheit}] ` : \"\";\n        const beschreibung = newDiagnosis.trim()\n            ? `: ${newDiagnosis.trim()}`\n            : (lookedUpDiagnosisName ? `: ${lookedUpDiagnosisName}` : \"\");\n        const diagnosisString = `${sicherheitPrefix}${codeToAdd}${beschreibung}`;\n\n        // Aktualisiere die Diagnosen im Firestore\n        const updatedDiagnoses = [...(selectedPatient.diagnoses || []), diagnosisString];\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n\n        try {\n            console.log(\"Speichere neue Diagnose:\", diagnosisString);\n            await setDoc(patientRef, { diagnoses: updatedDiagnoses }, { merge: true });\n\n            // Reset der Eingabefelder\n            setNewDiagnosisCode('');\n            setNewDiagnosis('');\n            setLookedUpDiagnosisName('');\n            setNewDiagnosisSicherheit('G');\n        } catch (err) {\n            console.error(\"Error adding diagnosis:\", err);\n            setAppError(\"Fehler beim Hinzufügen der Diagnose.\");\n        }\n    };\n    const handleRemoveDiagnosis = async (diagnosisStringToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const updatedDiagnoses = selectedPatient.diagnoses.filter(d => d !== diagnosisStringToRemove);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { diagnoses: updatedDiagnoses }, { merge: true }); }\n        catch (err) { console.error(\"Error removing diagnosis:\", err); setAppError(\"Fehler beim Entfernen der Diagnose.\"); }\n    };\n    const handleAddSession = async () => {\n        if (!selectedPatient || !newSessionNotes.trim() || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const newSession = { date: newSessionDate, notes: newSessionNotes.trim() };\n        const updatedSessions = [...(selectedPatient.sessions || []), newSession];\n        updatedSessions.sort((a, b) => new Date(b.date) - new Date(a.date));\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { sessions: updatedSessions }, { merge: true }); setNewSessionNotes(''); }\n        catch (err) { console.error(\"Error adding session:\", err); setAppError(\"Fehler beim Hinzufügen der Sitzung.\"); }\n    };\n    const handleUpdateConductedHours = async (patientId, hours) => {\n        if (!patientId || !userId) return;\n        if (isNaN(hours) || hours < 0) {\n            console.error(\"Ungültige Stundenzahl für Firestore-Update:\", hours);\n            return;\n        }\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        const patientRef = doc(db, collectionPath, patientId);\n        try {\n            await setDoc(patientRef, { conductedHours: hours }, { merge: true });\n        } catch (err) {\n            console.error(\"Error updating conducted hours:\", err);\n            setAppError(\"Fehler beim Aktualisieren der Stunden.\");\n        }\n    };\n    const handleAddBdiResult = async (newResult) => { // Parameter 'newResult' ist neu\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const updatedBdiResults = [...(selectedPatient.bdi2Results || []), newResult];\n        updatedBdiResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { bdi2Results: updatedBdiResults }, { merge: true });\n        } catch (err) {\n            console.error(\"Error adding BDI-II result:\", err);\n            setAppError(\"Fehler beim Hinzufügen des BDI-II Ergebnisses.\");\n        }\n    };\n    const handleAddHsclResult = async (newResult) => { // Parameter 'newResult' ist neu\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const updatedHsclResults = [...(selectedPatient.hscl11Results || []), newResult];\n        updatedHsclResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { hscl11Results: updatedHsclResults }, { merge: true });\n        } catch (err) {\n            console.error(\"Error adding HSCL result:\", err);\n            setAppError(\"Fehler beim Hinzufügen des HSCL-Ergebnisses.\");\n        }\n    };\n    const handleRemoveHsclResult = async (dateToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const updatedHsclResults = selectedPatient.hscl11Results.filter(r => r.date !== dateToRemove);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { hscl11Results: updatedHsclResults }, { merge: true }); }\n        catch (err) { console.error(\"Error removing HSCL result:\", err); setAppError(\"Fehler beim Entfernen des HSCL-Ergebnisses.\"); }\n    };\n    const handleRemoveBdiResult = async (dateToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const updatedBdiResults = selectedPatient.bdi2Results.filter(r => r.date !== dateToRemove);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { bdi2Results: updatedBdiResults }, { merge: true }); }\n        catch (err) { console.error(\"Error removing BDI-II result:\", err); setAppError(\"Fehler beim Entfernen des BDI-II Ergebnisses.\"); }\n    };\n    const handleAddFepResult = async (result) => { // Erhält jetzt das fertige Ergebnis-Objekt\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const updatedFepResults = [...(selectedPatient.fep2Results || []), result];\n        updatedFepResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { fep2Results: updatedFepResults }, { merge: true });\n        } catch (err) {\n            console.error(\"Error adding FEP-2 result:\", err);\n            setAppError(\"Fehler beim Hinzufügen des FEP-2 Ergebnisses.\");\n        }\n    };\n    const handleRemoveFepResult = async (dateToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const updatedFepResults = selectedPatient.fep2Results.filter(r => r.date !== dateToRemove);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { fep2Results: updatedFepResults }, { merge: true }); }\n        catch (err) { console.error(\"Error removing FEP-2 result:\", err); setAppError(\"Fehler beim Entfernen des FEP-2 Ergebnisses.\"); }\n    };\n    const handleAddScl90rResult = async (result) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const newResultToSave = {\n            rawScores: result.rawScores,\n            tScores: result.tScores,\n            globalScores: result.globalScores,\n            itemScores: result.itemScores, // Das entscheidende Feld, das fehlte\n            date: result.date // Behalten Sie das ursprüngliche Datum für die Anzeige bei\n        };\n\n        // Fügen Sie das neue, explizit erstellte Ergebnisobjekt zum Array hinzu\n        const updatedScl90rResults = [...(selectedPatient.scl90rResults || []), newResultToSave];\n\n        // Sortieren Sie die Ergebnisse nach Datum, damit das Neueste oben steht\n        updatedScl90rResults.sort((a, b) => new Date(b.date) - new Date(a.date));\n\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { scl90rResults: updatedScl90rResults }, { merge: true });\n            console.log(\"SCL-90-R-Ergebnis erfolgreich gespeichert mit itemScores.\");\n        } catch (err) {\n            console.error(\"Error adding SCL-90-R result:\", err);\n            setAppError(\"Fehler beim Speichern des SCL-90-R Ergebnisses.\");\n        }\n    };\n    const handleRemoveScl90rResult = async (dateToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        // Filtern Sie das Array, um das Ergebnis mit dem übereinstimmenden Datum zu entfernen\n        const updatedScl90rResults = selectedPatient.scl90rResults.filter(r => r.date !== dateToRemove);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { scl90rResults: updatedScl90rResults }, { merge: true });\n        } catch (err) {\n            console.error(\"Error removing SCL-90-R result:\", err);\n            setAppError(\"Fehler beim Entfernen des SCL-90-R Ergebnisses.\");\n        }\n    };\n    const fetchSessionSummary = async (sessionNotes, sessionIndex) => {\n        setSessionSummaries(prev => ({ ...prev, [sessionIndex]: { ...prev[sessionIndex], isLoading: true, error: null } }));\n        const prompt = `Fasse die folgenden Therapiesitzungsnotizen prägnant zusammen. Konzentriere dich auf die wichtigsten Themen, Interventionen und den Fortschritt des Patienten:\\n\\n\"${sessionNotes}\"`;\n        try { const summary = await generateGeminiText(prompt); setSessionSummaries(prev => ({ ...prev, [sessionIndex]: { summary: summary, isLoading: false, error: null } })); }\n        catch (e) { setSessionSummaries(prev => ({ ...prev, [sessionIndex]: { ...prev[sessionIndex], isLoading: false, error: e.message } })); setAppError(`Fehler bei der Zusammenfassung: ${e.message}`); }\n    };\n    const handleKrankheitsmodellChange = async (fieldName, value) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { [fieldName]: value }, { merge: true });\n        } catch (err) {\n            console.error(`Error updating ${fieldName}:`, err);\n            setAppError(`Fehler beim Speichern von ${fieldName}.`);\n        }\n    };\n    const handleTherapeutischeAssistenzAnfordern = async () => {\n        if (!selectedPatient) {\n            setAssistenzError(\"Bitte wählen Sie zuerst einen Patienten aus.\");\n            return;\n        }\n        setIsLoadingTherapeutischeAssistenz(true);\n        setTherapeutischeAssistenzOutput(\"\");\n        setAssistenzError(null);\n\n        const patientenDatenText = `\nHier sind die relevanten Patientendaten:\n\n**Krankheitsanamnese:**\n${selectedPatient.krankheitsanamnese || \"Keine Angaben.\"}\n\n**Lebensgeschichte/Biografie:**\n${selectedPatient.lebensgeschichte || \"Keine Angaben.\"}\n\n**Problemanalyse auf Makroebene:**\n${selectedPatient.problemanalyseMakro || \"Keine Angaben.\"}\n\n**Therapieplanung (bisherig):**\n${selectedPatient.therapieplan || \"Keine Angaben.\"}\n\n**Verlaufsdokumentation (Sitzungsnotizen):**\n${(selectedPatient.sessions || []).map((s, i) => `Sitzung ${i + 1} (${new Date(s.date).toLocaleDateString('de-DE')}): ${s.notes}`).join(\"\\n\\n\") || \"Keine Sitzungsnotizen vorhanden.\"}\n\n**Diagnosen:**\n${(selectedPatient.diagnoses || []).join(\", \") || \"Keine Diagnosen erfasst.\"}\n\n**Genehmigte Stunden:** ${selectedPatient.approvedHours}\n**Durchgeführte Stunden:** ${selectedPatient.conductedHours}\n    `;\n\n        const systemPrompt = `Du bist ein interdisziplinäres Expertenteam, bestehend aus erfahrenen Verhaltenstherapeuten wie Jürgen Margraf, Dr. Stavemann, Aaron T. Beck, Judith Beck und Jonathan S. Abramowitz sowie aus leitenden Chefärzten und Psychiatern wie Prof. Dr. Mathias Berger. Das Team verfügt über exzellente Fachkompetenz in der evidenzbasierten psychotherapeutischen Praxis und legt besonderen Wert auf präzise medizinische Dokumentation sowie therapeutische Qualität. Darüber hinaus gehören auch international anerkannte Experten wie David H. Barlow, Stefan G. Hofmann und Steven Hayes zum Team. Du verfügst über tiefgehendes Wissen in Ansätzen der sogenannten „dritten Welle“ der Verhaltenstherapie, insbesondere in ACT, Schematherapie und DBT.\n\nDeine Aufgabe ist es, auf Grundlage folgender Elemente, welche du aus den bereitgestellten Patientendaten entnimmst:\n- Krankheitsanamnese\n- Lebensgeschichte/Biografie\n- Problemanalyse auf Makroebene\n- Therapieplanung (bisherig)\n- Verlaufsdokumentation (Sitzungsnotizen)\n\neine strukturierte Rückmeldung zu geben mit dem Ziel:\n1. Wesentliche Schwerpunkte in der weiteren Therapieplanung zu identifizieren.\n2. Konkrete Interventionsideen zu formulieren, orientiert an den zugelassenen Stunden.\n3. Hinweise zu geben, worauf in der Strukturierung der Sitzungen geachtet werden sollte (z.B. Themenfokus, Symptomschwere, Therapiezielorientierung).\n\nBerücksichtige dabei:\n• Die begrenzte Anzahl genehmigter Stunden.\n• Dass Themen nicht zu häufig gewechselt werden sollen.\n• Die Konsistenz und Nachvollziehbarkeit im Verlauf.\n\nBitte plane deine Analyse gründlich und reflektiert. Handle in Etappen:\n1. Diagnostische Schwerpunkte benennen\n2. Therapieziele definieren\n3. Interventionsvorschläge machen\n4. Hinweise zur Dokumentation geben\n\nAtme einmal tief ein und aus und nehme dir Zeit für die Aufgabe. Mache bitte weiter, bis das Problem vollständig gelöst ist. Planen bitte ausführlich vor jeder Aktion.\n\nHier sind die Daten des aktuellen Falls:\n${patientenDatenText}\n\nBitte gib deine strukturierte Rückmeldung.`;\n\n        try {\n            const assistenz = await generateGeminiText(systemPrompt);\n            setTherapeutischeAssistenzOutput(assistenz);\n        } catch (e) {\n            setAssistenzError(`Fehler bei der Anforderung der therapeutischen Assistenz: ${e.message}`);\n        } finally {\n            setIsLoadingTherapeutischeAssistenz(false);\n        }\n    };\n    const showDiagnosisInfo = (diagnosisString) => {\n        console.log(\"Zeige Info für:\", diagnosisString); // Debug-Ausgabe\n\n        const sicherheitMatch = diagnosisString.match(/^\\[([AVGZN]+)\\]\\s*/i);\n        const sicherheit = sicherheitMatch ? sicherheitMatch[1].toUpperCase() : '';\n\n        const codeAndName = sicherheitMatch\n            ? diagnosisString.substring(sicherheitMatch[0].length)\n            : diagnosisString;\n\n        const codeMatch = codeAndName.match(/^([A-Z][0-9]{1,2}(\\.[0-9A-Z]{1,2})?[*†]?)/i);\n        const code = codeMatch\n            ? codeMatch[0].toUpperCase()\n            : codeAndName.split(':')[0].trim().toUpperCase();\n\n        console.log(\"Suche nach Code:\", code); // Debug-Ausgabe\n        const localData = findIcd10CodeLocal(code);\n        console.log(\"Gefundene Daten:\", localData); // Debug-Ausgabe\n\n        if (localData) {\n            setDiagnosisInfo({\n                code: localData.code || code,\n                name: localData.name || '',\n                beschreibung: localData.beschreibung || localData.beschreibung_kategorie || '',\n                inkl: localData.inkl || [],\n                exkl: localData.exkl || [],\n                hinweise: localData.hinweise || [],\n                zusatz_info_code: localData.zusatz_info_code || '',\n                sicherheit: sicherheit,\n                isLoading: false,\n                error: null,\n                isOpen: true,\n                source: 'local'\n            });\n        } else {\n            setDiagnosisInfo({\n                code: code,\n                name: \"Unbekannter ICD-10 Code\",\n                isLoading: false,\n                error: `Für den ICD-10 Code \"${code}\" wurden keine Informationen in der lokalen Datenbank gefunden.`,\n                isOpen: true,\n                source: 'error'\n            });\n        }\n    };\n    const fetchIcd11Details = async (diagnosis) => {\n        if (!diagnosis || !diagnosis.uri) {\n            setAppError(\"Keine gültige URI für die ICD-11 Diagnose vorhanden.\");\n            return;\n        }\n        const { code, title, uri } = diagnosis;\n        setDiagnosisInfo({ code: code, name: title, isLoading: true, error: null, isOpen: true, source: 'api' });\n        try {\n            const response = await fetch(`http://localhost:3001/api/icd11-info?uri=${encodeURIComponent(uri)}`);\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw new Error(errorData.message || 'API-Anfrage fehlgeschlagen');\n            }\n            const fullData = await response.json();\n            setDiagnosisInfo({\n                code: fullData.code || code,\n                name: fullData.title?.['@value'] || title,\n                beschreibung: fullData.definition?.['@value'] || '',\n                diagnosticCriteria: fullData.diagnosticCriteria,\n                inclusions: fullData.inclusion,\n                exclusions: fullData.exclusion,\n                isLoading: false, error: null, isOpen: true,\n                source: 'api_detail'\n            });\n        } catch (error) {\n            console.error('Fehler beim Abrufen der ICD-11 Details:', error);\n            setDiagnosisInfo({ code: code, isLoading: false, error: `Konnte Informationen für ${code} nicht laden: ${error.message}`, isOpen: true, source: 'api' });\n        }\n    };\n    const handleAssignIcd11Diagnosis = async (patientId, icd11Entity) => {\n        if (!patientId || !icd11Entity || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        const patientRef = doc(db, collectionPath, patientId);\n        const targetPatient = patients.find(p => p.id === patientId);\n        if (!targetPatient) { setAppError(\"Ziel-Patient konnte nicht gefunden werden.\"); return; }\n        const newDiagnosis = { code: icd11Entity.code, title: icd11Entity.selectedText, uri: icd11Entity.linearizationUri || icd11Entity.foundationUri, date: new Date().toISOString() };\n        const updatedDiagnoses = [...(targetPatient.diagnoses_icd11 || []), newDiagnosis];\n        try { await setDoc(patientRef, { diagnoses_icd11: updatedDiagnoses }, { merge: true }); }\n        catch (err) { console.error(\"Error assigning ICD-11 diagnosis:\", err); setAppError(\"Fehler beim Zuweisen der ICD-11 Diagnose.\"); }\n    };\n    const handleRemoveIcd11Diagnosis = async (diagnosisToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        const updatedDiagnoses = selectedPatient.diagnoses_icd11.filter(d => d.date !== diagnosisToRemove.date);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { diagnoses_icd11: updatedDiagnoses }, { merge: true }); }\n        catch (err) { console.error(\"Error removing ICD-11 diagnosis:\", err); setAppError(\"Fehler beim Entfernen der ICD-11 Diagnose.\"); }\n    };\n\n    // app.js, in der App Komponente\n\n    const handleImproveSessionNote = async (session, index) => {\n        // Setzt den Ladezustand für den spezifischen Button\n        setImprovementState({ ...improvementState, isLoading: true, sessionIndex: index, error: null });\n\n        // Die Sitzungsnummer wird berechnet (angenommen, die neuste Sitzung ist oben)\n        const sessionNumber = selectedPatient.sessions.length - index;\n\n        // Der von Ihnen definierte Prompt wird mit den aktuellen Sitzungsdaten kombiniert\n        const fullPrompt = `Stelle dir vor du bist ein Team aus erfahrenen Psychotherapeut/Verhaltenstherapeut wie wie Jürgen Margraf, Dr. Stavemann, Aaron T. Beck, Judith Beck und Jonathan S. Abramowitz, welche großen Wert auf fachlich präzise Dokumentation und Äußerungen legen. Du hast ein großes fachliches Wissen über die klassische VT sowie auch in dritte Welle Verfahren wie ACT durch Steve Hayes und Russ Harris. Kannst du meine Therapiedokumentation verbessern? Kannst du die Doku weiterhin wie folgt organisieren: Sitzungsnummer, Thema, Patientenbericht, Therapeutische Interventionen (Stichpunktartig mit kurzer  , z.B. 1.Kognitive Umstrukturierung: - Disputation der Grundannahmen des Patienten (\"Ich bin wertlos, weil ich keine Beziehung habe\") mittels sokraitscher Gesprächsführung), Gesamteindruck, Risikoabschätzung (falls keine Suizidalität vorliegt: Auf Nachfrage wurden suizidale Gedanken, Impulse sowie Handlungsabsichten glaubhaft und eindeutig verneint. Die Absprachefähigkeit der Patientin ist gegeben. Es besteht kein Anhalt für eine akute Eigen- oder Fremdgefährdung.), ggf. falls benannt Hausaufgaben, Plan für die nächste Sitzung. Das macht die Dokumentation übersichtlicher. Der Teil des Pateintenberichts soll im Fließtext geschrieben sein. Kannst du den fertigen Text mir dann auch im Markdownformat ausgeben, aber bitte ohne * ** oder # (also nicht fett oder mit Titeln) oder em-dashes. Zeig den Text als Codeblock, wie in einem Terminal. Atme einmal tief ein und aus und nehme dir Zeit für die Aufgabe. Mache bitte weiter, bis das Problem vollständig gelöst ist. Planen bitte ausführlich vor jeder Aktion.\n\n\n---\n${session.notes}\n---\n`;\n\n        try {\n            const improvedText = await generateGeminiText(fullPrompt);\n            // Öffnet das Modal mit dem Vergleich\n            setImprovementState({\n                isOpen: true,\n                isLoading: false,\n                originalText: session.notes,\n                improvedText: improvedText.replace(/^```(json|text)?\\s*|```$/gm, ''), // Entfernt mögliche ``` Markierungen der KI\n                sessionIndex: index,\n                error: null\n            });\n        } catch (e) {\n            const errorMsg = `Fehler bei der Verbesserung der Notiz: ${e.message}`;\n            setImprovementState({ isLoading: false, error: errorMsg, sessionIndex: null, isOpen: false });\n            setAppError(errorMsg);\n        }\n    };\n\n    const handleAcceptImprovement = async () => {\n        if (improvementState.sessionIndex === null || !selectedPatient || !userId) return;\n\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n\n        // Ersetzt den alten Notiztext durch den neuen im Array\n        updatedSessions[improvementState.sessionIndex].notes = improvementState.improvedText;\n\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { sessions: updatedSessions }, { merge: true });\n            // Schließt das Modal und setzt den State zurück\n            setImprovementState({ isOpen: false, isLoading: false, originalText: '', improvedText: '', sessionIndex: null, error: null });\n        } catch (err) {\n            console.error(\"Error updating session note:\", err);\n            setAppError(\"Fehler beim Aktualisieren der Sitzungsnotiz.\");\n        }\n    };\n    const handleEditSessionStart = (session, index) => {\n        setEditingSessionIndex(index);\n        setEditingSessionText(session.notes);\n        toggleSessionExpansion(index);\n    };\n\n    // Bricht den Bearbeitungsmodus ab\n    const handleEditSessionCancel = () => {\n        setEditingSessionIndex(null);\n        setEditingSessionText('');\n    };\n\n    // Speichert die bearbeitete Sitzungsnotiz in Firestore\n    const handleEditSessionSave = async () => {\n        if (editingSessionIndex === null || !selectedPatient || !userId) return;\n\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        // Eine tiefe Kopie des Session-Arrays erstellen, um direkten State nicht zu mutieren\n        const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n\n        // Die Notiz an der richtigen Stelle im Array aktualisieren\n        updatedSessions[editingSessionIndex].notes = editingSessionText;\n\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { sessions: updatedSessions }, { merge: true });\n            // Bearbeitungsmodus beenden\n            handleEditSessionCancel();\n        } catch (err) {\n            console.error(\"Error updating session note:\", err);\n            setAppError(\"Fehler beim Aktualisieren der Sitzungsnotiz.\");\n        }\n    };\n\n    const totalApprovedHours = patients.reduce((sum, p) => sum + (p.approvedHours || 0), 0);\n    const totalConductedHours = patients.reduce((sum, p) => sum + (p.conductedHours || 0), 0);\n    const overallProgressTarget = 600;\n    const overallProgress = overallProgressTarget > 0 ? (totalConductedHours / overallProgressTarget) * 100 : 0;\n\n    const inputStd = \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\";\n    const btnPrimary = \"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-md shadow-sm flex items-center justify-center\";\n    const btnDanger = \"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-3 rounded-md flex items-center\";\n    const btnInfo = \"bg-sky-500 hover:bg-sky-600 text-white font-semibold py-1 px-2 text-xs rounded-md flex items-center\";\n    const textareaStd = \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm min-h-[150px]\";\n\n    if (!isAuthReady) return <div className=\"flex justify-center items-center h-screen text-xl font-semibold text-gray-700\">Authentifizierung wird initialisiert...</div>;\n\n    if (!userId) { return (<div className=\"min-h-screen bg-gradient-to-br from-slate-100 to-sky-100 flex flex-col justify-center items-center p-4\"> <div className=\"bg-white p-8 rounded-xl shadow-2xl w-full max-w-md\"> <h1 className=\"text-3xl font-bold text-center text-indigo-600 mb-8\">{isLoginView ? \"Login Patientenverwaltung\" : \"Registrierung\"}</h1>{authError && <p className=\"bg-red-100 text-red-700 p-3 rounded-md mb-4 text-sm\">{authError}</p>}<form onSubmit={(e) => { e.preventDefault(); handleAuthAction(isRegistering); }} className=\"space-y-6\"><div><label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">E-Mail Adresse</label><input type=\"email\" name=\"email\" id=\"email\" required value={email} onChange={(e) => setEmail(e.target.value)} className={inputStd} /></div><div><label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">Passwort</label><input type=\"password\" name=\"password\" id=\"password\" required value={password} onChange={(e) => setPassword(e.target.value)} className={inputStd} /></div><button type=\"submit\" disabled={isAuthLoading} className={`${btnPrimary} w-full py-3 text-base ${isAuthLoading ? 'opacity-50 cursor-not-allowed' : ''}`}>{isAuthLoading ? (isLoginView ? \"Anmelden...\" : \"Registrieren...\") : (isLoginView ? \"Anmelden\" : \"Registrieren\")}</button></form><button onClick={() => { setIsLoginView(!isLoginView); setAuthError(null); }} className=\"mt-6 text-sm text-indigo-600 hover:text-indigo-500 text-center w-full\">{isLoginView ? \"Noch kein Konto? Jetzt registrieren.\" : \"Bereits registriert? Zum Login.\"}</button></div></div>); }\n\n    return (\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-100 to-sky-100 font-sans\">\n            <header className=\"bg-indigo-700 text-white shadow-lg\">\n                <div className=\"container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center\">\n                    <h1 className=\"text-3xl font-bold tracking-tight\">Therapie-Dashboard</h1>\n                    <div className=\"flex items-center space-x-4\">\n                        {userId && <p className=\"text-xs opacity-75 hidden sm:block\">UserID: {userId}</p>}\n                        <button onClick={handleLogout} className=\"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-3 rounded-md text-sm flex items-center\">\n                            <LogOut className=\"mr-2 h-4 w-4\" /> Logout\n                        </button>\n                    </div>\n                </div>\n            </header>\n\n            <main className=\"container mx-auto p-4 sm:p-6 lg:p-8\">\n                {/* Add the ConfirmationModal */}\n                <ConfirmationModal\n                    isOpen={isConfirmDeleteModalOpen}\n                    onClose={() => setIsConfirmDeleteModalOpen(false)}\n                    onConfirm={confirmDeletePatient}\n                    title=\"Patient löschen\"\n                    message=\"Möchten Sie diesen Patienten wirklich löschen? Diese Aktion kann nicht rückgängig gemacht werden.\"\n                />\n                \n\n                {/* Add the PatientForm Modal */}\n                <Modal\n                    isOpen={isPatientModalOpen}\n                    onClose={() => setIsPatientModalOpen(false)}\n                    title={editingPatient ? \"Patient bearbeiten\" : \"Neuen Patienten anlegen\"}\n                >\n                    <PatientForm\n                        patient={editingPatient}\n                        onSave={handleSavePatient}\n                        onCancel={() => setIsPatientModalOpen(false)}\n                    />\n                </Modal>\n                <div className=\"mb-6 border-b border-gray-300\">\n                    <nav className=\"flex space-x-4\">\n\n                        {/* Umbenannt von \"Patientenverwaltung\" */}\n                        <button onClick={() => setMainView('patients')} className={`py-3 px-4 font-medium text-lg rounded-t-lg ${mainView === 'patients' ? 'bg-white text-indigo-700 shadow-md' : 'bg-transparent text-gray-500 hover:text-indigo-600'}`}>\n                            Patientenübersicht\n                        </button>\n\n                        {/* NEUER Tab für die Detailansicht */}\n                        <button onClick={() => { setMainView('patientenakte'); setSelectedPatient(null); /* Optional: Patient abwählen beim Tab-Wechsel */ }} className={`py-3 px-4 font-medium text-lg rounded-t-lg ${mainView === 'patientenakte' ? 'bg-white text-indigo-700 shadow-md' : 'bg-transparent text-gray-500 hover:text-indigo-600'}`}>\n                            Patientenakte\n                        </button>\n\n                        <button onClick={() => setMainView('ebm')} className={`py-3 px-4 font-medium text-lg rounded-t-lg ${mainView === 'ebm' ? 'bg-white text-indigo-700 shadow-md' : 'bg-transparent text-gray-500 hover:text-indigo-600'}`}>\n                            EBM\n                        </button>\n\n                        {/* Bestehender ICD-11 Tab */}\n                        <button onClick={() => setMainView('icd11')} className={`py-3 px-4 font-medium text-lg rounded-t-lg ${mainView === 'icd11' ? 'bg-white text-indigo-700 shadow-md' : 'bg-transparent text-gray-500 hover:text-indigo-600'}`}>\n                            ICD-11 Nachschlagewerk\n                        </button>\n                    </nav>\n                </div>\n\n                {mainView === 'patients' && (\n                    <>\n                        <div ref={overviewRef} className=\"mb-6 flex justify-between items-center\">\n                            <h2 className=\"text-2xl font-semibold text-gray-800\">Patientenübersicht</h2>\n                            <button onClick={() => { setEditingPatient(null); setIsPatientModalOpen(true); }} className={`${btnPrimary} py-2 px-4`}>\n                                <UserPlus className=\"w-5 h-5 mr-2\" /> Patient hinzufügen\n                            </button>\n                        </div>\n\n                        <div className=\"bg-white shadow-xl rounded-lg overflow-hidden mb-8\">\n                            <div className=\"overflow-x-auto\">\n                                <table className=\"w-full min-w-max table-auto text-left\">\n                                    <thead className=\"bg-gray-100 border-b border-gray-300\">\n                                        <tr>\n                                            <th\n                                                className=\"py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider cursor-pointer\"\n                                                onClick={() => setSortConfig(prev => ({\n                                                    key: 'name',\n                                                    direction: prev.key === 'name' && prev.direction === 'ascending' ? 'descending' : 'ascending'\n                                                }))}\n                                            >\n                                                Name {sortConfig.key === 'name' && (sortConfig.direction === 'ascending' ? '▲' : '▼')}\n                                            </th>\n\n                                            <th className=\"py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider\">\n                                                Chiffre\n                                            </th>\n                                            <th className=\"py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider\">\n                                                Diagnosen\n                                            </th>\n                                            <th className=\"py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider\">\n                                                Therapie\n                                            </th>\n\n                                            <th\n                                                className=\"py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider cursor-pointer\"\n                                                onClick={() => setSortConfig(prev => ({\n                                                    key: 'conductedHours',\n                                                    direction: prev.key === 'conductedHours' && prev.direction === 'ascending' ? 'descending' : 'ascending'\n                                                }))}\n                                            >\n                                                Stunden {sortConfig.key === 'conductedHours' && (sortConfig.direction === 'ascending' ? '▲' : '▼')}\n                                            </th>\n\n                                            <th className=\"py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider\">\n                                                Fortschritt\n                                            </th>\n                                            <th className=\"py-3 px-4 text-sm font-semibold text-gray-600 uppercase tracking-wider\">\n                                                Aktionen\n                                            </th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {sortedPatients.length === 0 && !isLoading && (<tr><td colSpan=\"7\" className=\"text-center py-10 text-gray-500\">Keine Patienten gefunden.</td></tr>)}\n                                        {sortedPatients.map((patient) => {\n                                            const progress = patient.approvedHours > 0 ? (patient.conductedHours / patient.approvedHours) * 100 : 0;\n                                            return (\n                                                <tr key={patient.id} className={`hover:bg-indigo-50 cursor-pointer ${selectedPatient?.id === patient.id ? 'bg-indigo-100' : ''}`} onClick={() => { setSelectedPatient(patient); setActiveDetailTab('übersicht'); setSessionSummaries({}); setTherapeutischeAssistenzOutput(''); setAssistenzError(null); }}>\n                                                    <td className=\"py-3 px-4 whitespace-nowrap text-sm font-medium text-gray-800\">{patient.name}, {patient.vorname}</td>\n                                                    <td className=\"py-3 px-4 whitespace-nowrap text-sm text-gray-600\">{patient.chiffre}</td>\n                                                    <td className=\"py-3 px-4 text-sm text-gray-600 max-w-xs\"><div className=\"flex flex-col space-y-1\">{(patient.diagnoses || []).slice(0, 4).map((diag, idx) => { const sicherheitMatch = diag.match(/^\\[([AVGZN]+)\\]/i); const sicherheit = sicherheitMatch ? sicherheitMatch[1].toUpperCase() : ''; const colorClasses = { 'G': 'bg-green-100 text-green-800 hover:bg-green-200', 'V': 'bg-yellow-100 text-yellow-800 hover:bg-yellow-200', 'A': 'bg-red-100 text-red-800 hover:bg-red-200', 'ZN': 'bg-blue-100 text-blue-800 hover:bg-blue-200' }[sicherheit] || 'bg-gray-100 text-gray-800 hover:bg-gray-200'; return (<span key={idx} className={`px-2 py-0.5 text-xs rounded-full truncate inline-block cursor-pointer ${colorClasses}`} onClick={(e) => { e.stopPropagation(); showDiagnosisInfo(diag); }} title={`Info zu ${diag} anzeigen`}> {diag} </span>); })}{(patient.diagnoses || []).length > 4 && (<span className=\"text-xs text-gray-500 mt-1\">...</span>)}{(patient.diagnoses || []).length === 0 && \"-\"}</div></td>\n                                                    <td className=\"py-3 px-4 whitespace-nowrap text-sm text-gray-600\">{patient.therapyType}</td>\n                                                    <td className=\"py-3 px-4 whitespace-nowrap text-sm text-gray-600\">\n                                                        <div className=\"flex items-center justify-center space-x-2\">\n                                                            {/* Container für die bearbeitbare Stundenzahl */}\n                                                            <div className=\"w-12 text-right\">\n                                                                {editingHours.hasOwnProperty(patient.id) ? (\n                                                                    <input\n                                                                        type=\"number\"\n                                                                        value={editingHours[patient.id]}\n                                                                        className=\"w-16 text-center border border-indigo-300 rounded-md shadow-sm\"\n                                                                        autoFocus\n                                                                        onClick={(e) => e.stopPropagation()}\n                                                                        onChange={(e) => {\n                                                                            e.stopPropagation();\n                                                                            setEditingHours(prev => ({ ...prev, [patient.id]: e.target.value }));\n                                                                        }}\n                                                                        onBlur={(e) => {\n                                                                            e.stopPropagation();\n                                                                            const finalHours = parseInt(editingHours[patient.id], 10);\n                                                                            if (!isNaN(finalHours) && finalHours >= 0 && finalHours !== patient.conductedHours) {\n                                                                                const clampedHours = Math.min(finalHours, patient.approvedHours);\n                                                                                handleUpdateConductedHours(patient.id, clampedHours);\n                                                                            }\n                                                                            setEditingHours({});\n                                                                        }}\n                                                                        onKeyDown={(e) => {\n                                                                            if (e.key === 'Enter') e.target.blur();\n                                                                            else if (e.key === 'Escape') setEditingHours({});\n                                                                        }}\n                                                                    />\n                                                                ) : (\n                                                                    <span\n                                                                        className=\"cursor-pointer hover:bg-indigo-100 p-1 rounded-md\"\n                                                                        title=\"Stundenzahl bearbeiten\"\n                                                                        onClick={(e) => {\n                                                                            e.stopPropagation();\n                                                                            setEditingHours({ [patient.id]: String(patient.conductedHours) });\n                                                                        }}\n                                                                    >\n                                                                        {patient.conductedHours}\n                                                                    </span>\n                                                                )}\n                                                            </div>\n                                                            {/* Trenner und genehmigte Stunden */}\n                                                            <span className=\"text-gray-400\">/</span>\n                                                            <div className=\"w-12 text-left\">\n                                                                <span>{patient.approvedHours}</span>\n                                                            </div>\n                                                        </div> </td>\n                                                    <td className=\"py-3 px-4 whitespace-nowrap\"><div className=\"w-full bg-gray-200 rounded-full h-2.5\"><div className={`h-2.5 rounded-full ${progress > 80 ? 'bg-red-500' : progress > 50 ? 'bg-yellow-400' : 'bg-green-500'}`} style={{ width: `${Math.min(progress, 100)}%` }}></div></div><span className=\"text-xs text-gray-500 block text-center mt-1\">{Math.round(progress)}%</span></td>\n                                                    <td className=\"py-3 px-4 whitespace-nowrap text-sm space-x-2\"><button onClick={(e) => { e.stopPropagation(); setEditingPatient(patient); setIsPatientModalOpen(true); }} className=\"text-indigo-600 hover:text-indigo-800 transition duration-150 p-1 rounded hover:bg-indigo-100\" title=\"Bearbeiten\"><Edit3 className=\"w-5 h-5\" /></button><button onClick={(e) => { e.stopPropagation(); openDeleteConfirmation(patient.id); }} className=\"text-red-500 hover:text-red-700 transition duration-150 p-1 rounded hover:bg-red-100\" title=\"Löschen\"><Trash2 className=\"w-5 h-5\" /></button></td>\n                                                </tr>\n                                            );\n                                        })}\n                                    </tbody>\n                                    <tfoot className=\"bg-gray-50 border-t-2 border-gray-300\"><tr><td colSpan=\"4\" className=\"py-3 px-4 text-sm font-semibold text-gray-700 text-right\">Gesamt:</td><td className=\"py-3 px-4 text-sm font-semibold text-gray-700 text-center\">{`${totalConductedHours} / ${totalApprovedHours}`}</td><td className=\"py-3 px-4 whitespace-nowrap\" colSpan=\"2\"><div className=\"flex items-center\"><span className=\"text-xs text-gray-600 mr-3 w-auto\">Fortschritt (600 Std.):</span><div className=\"w-full bg-gray-200 rounded-full h-2.5 flex-grow\"><div className=\"bg-blue-500 h-2.5 rounded-full\" style={{ width: `${Math.min(overallProgress, 100)}%` }}></div></div><span className=\"text-xs text-gray-600 ml-2\">{Math.round(overallProgress)}%</span></div></td></tr></tfoot>\n                                </table>\n                            </div>\n                        </div>\n\n\n                    </>\n                )}\n\n                {/* ----- Patientenakte ----- */}\n                {mainView === 'patientenakte' && (\n\n                    // Haupt-Grid für Seitenleiste und Inhalt\n                    <div className={`grid grid-cols-1 ${isSidebarCollapsed ? 'md:grid-cols-[auto,1fr]' : 'md:grid-cols-4'} gap-6 lg:gap-8`}>\n\n                        {/* ----- Seitenleisten-Container (inkl. Button) ----- */}\n                        {!isSidebarCollapsed && (\n                            <div className=\"md:col-span-1\">\n                                <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Patienten</h3>\n                                <div className=\"bg-white rounded-lg shadow-md max-h-[75vh] overflow-y-auto\">\n                                    <ul className=\"divide-y divide-gray-200\">\n                                        {sortedPatients.map(patient => (\n                                            <li\n                                                key={patient.id}\n                                                onClick={() => setSelectedPatient(patient)}\n                                                className={`p-3 cursor-pointer text-sm font-medium transition-colors duration-150 ${selectedPatient?.id === patient.id ? 'bg-indigo-600 text-white' : 'text-gray-700 hover:bg-indigo-50'}`}\n                                            >\n                                                {patient.name}, {patient.vorname}\n                                            </li>\n                                        ))}\n                                    </ul>\n                                </div>\n                            </div>\n                        )}\n\n                        {/* ----- Hauptinhalts-Container (passt sich an) ----- */}\n                        <div className={isSidebarCollapsed ? 'col-span-full' : 'md:col-span-3'}>\n                            {/* Button zum Ein-/Ausklappen der Seitenleiste */}\n                            <button onClick={() => setIsSidebarCollapsed(!isSidebarCollapsed)} className=\"mb-4 text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center\">\n                                {isSidebarCollapsed ? '›› Patientenliste einblenden' : '‹‹ Patientenliste ausblenden'}\n                            </button>\n\n                            {selectedPatient ? (\n                                // --- DETAILANSICHT FÜR AUSGEWÄHLTEN PATIENTEN ---\n                                <div ref={detailViewRef} className=\"bg-white shadow-xl rounded-lg p-6\">\n                                    <div className=\"flex justify-between items-center mb-1\">\n                                        <h3 className=\"text-2xl font-semibold text-indigo-700\">{selectedPatient.vorname} {selectedPatient.name}</h3>\n                                        <button onClick={() => setSelectedPatient(null)} className=\"text-gray-500 hover:text-gray-700\"><XCircle className=\"w-7 h-7\" /></button>\n                                    </div>\n\n                                    {/* --- KORRIGIERTE TAB-STRUKTUR --- */}\n                                    <div className=\"border-b border-gray-200 mb-6\">\n                                        <nav className=\"-mb-px flex space-x-4 sm:space-x-8 overflow-x-auto\" aria-label=\"Tabs\">\n                                            {['Übersicht', 'Diagnosen', 'Abrechnung', 'Krankheitsmodell', 'Diagnostik', 'Assistenz'].map(tab => (\n                                                <button key={tab} onClick={() => setActiveDetailTab(tab.toLowerCase())} className={`capitalize whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${activeDetailTab === tab.toLowerCase() ? 'border-indigo-500 text-indigo-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`}>\n                                                    {tab}\n                                                </button>\n                                            ))}\n                                        </nav>\n                                    </div>\n\n                                    {/* 1. Tab: Übersicht - KORRIGIERT */}\n                                    {activeDetailTab === 'übersicht' && (\n                                        <div className=\"space-y-6\">\n                                            <div className=\"col-span-1 md:col-span-2 p-3 bg-indigo-50 border border-indigo-200 rounded-lg\">\n                                                {nextAppointment.isLoading && <p className=\"text-sm text-indigo-700\">Lade nächsten Termin...</p>}\n                                                {nextAppointment.error && <p className=\"text-sm text-red-600\">{nextAppointment.error}</p>}\n                                                {nextAppointment.text && <p className=\"text-sm font-semibold text-indigo-800\">{nextAppointment.text}</p>}\n                                            </div>\n\n                                            {/* NEU: Interaktive Hausaufgaben */}\n                                            <div>\n                                                <h4 className=\"text-lg font-semibold text-gray-700 mb-3 border-b pb-2\">Letzte Hausaufgabe</h4>\n                                                <div className=\"p-3 bg-gray-50 rounded-lg text-sm space-y-3\">\n                                                    {(selectedPatient.sessions?.[0]?.homeworkStatus && selectedPatient.sessions[0].homeworkStatus.length > 0) ? (\n                                                        selectedPatient.sessions[0].homeworkStatus.map((task, index) => (\n                                                            <div key={index} className=\"flex items-center gap-4\">\n                                                                <input\n                                                                    type=\"checkbox\"\n                                                                    className=\"h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500\"\n                                                                    checked={task.done}\n                                                                    onChange={(e) => handleUpdateHomeworkStatus(selectedPatient.sessions[0].date, index, { done: e.target.checked })}\n                                                                />\n                                                                <span className={`flex-grow ${task.done ? 'text-gray-500 line-through' : 'text-gray-800'}`}>\n                                                                    {task.text}\n                                                                </span>\n                                                                {!task.done && (\n                                                                    <select\n                                                                        className=\"text-xs border-gray-300 rounded-md shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50\"\n                                                                        value={task.reason || ''}\n                                                                        onChange={(e) => handleUpdateHomeworkStatus(selectedPatient.sessions[0].date, index, { reason: e.target.value })}\n                                                                    >\n                                                                        <option value=\"\">Grund wählen...</option>\n                                                                        {Object.entries(homeworkFailureReasons).map(([category, reasons]) => (\n                                                                            <optgroup label={category} key={category}>\n                                                                                {reasons.map(reason => <option key={reason} value={reason}>{reason}</option>)}\n                                                                            </optgroup>\n                                                                        ))}\n                                                                    </select>\n                                                                )}\n                                                            </div>\n                                                        ))\n                                                    ) : (\n                                                        <p className=\"text-gray-500\">Keine Hausaufgabe für die letzte Sitzung erfasst.</p>\n                                                    )}\n                                                </div>\n                                            </div>\n\n                                            <div>\n                                                <h4 className=\"text-lg font-semibold text-gray-700 mb-3 border-b pb-2\">Stammdaten</h4>\n                                                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4 mt-3 text-sm\">\n                                                    <div><p className=\"font-semibold text-gray-500\">Nachname</p><p>{selectedPatient.name}</p></div>\n                                                    <div><p className=\"font-semibold text-gray-500\">Vorname</p><p>{selectedPatient.vorname}</p></div>\n                                                    <div><p className=\"font-semibold text-gray-500\">Geburtsdatum</p><p>{new Date(selectedPatient.geburtsdatum).toLocaleDateString('de-DE')}</p></div>\n                                                    <div><p className=\"font-semibold text-gray-500\">Alter</p><p>{calculateAge(selectedPatient.geburtsdatum)}</p></div>\n                                                    <div><p className=\"font-semibold text-gray-500\">E-Mail</p><p>{selectedPatient.email || '-'}</p></div>\n                                                    <div><p className=\"font-semibold text-gray-500\">Telefon</p><p>{selectedPatient.telefon || '-'}</p></div>\n                                                    <div className=\"col-span-2 md:col-span-3\"><p className=\"font-semibold text-gray-500\">Adresse</p><p>{selectedPatient.adresse || '-'}</p></div>\n                                                </div>\n                                            </div>\n                                            <div>\n                                                <h4 className=\"text-lg font-semibold text-gray-700 mb-3 border-b pb-2\">Kontingent</h4>\n                                                <div className=\"grid grid-cols-2 gap-4 mt-3 text-sm\">\n                                                    <div><p className=\"font-semibold text-gray-500\">Genehmigte Stunden</p><p>{selectedPatient.approvedHours}</p></div>\n                                                    <div><p className=\"font-semibold text-gray-500\">Durchgeführte Stunden</p><p>{selectedPatient.conductedHours}</p></div>\n                                                </div>\n                                            </div>\n                                            <div>\n                                                <h4 className=\"text-lg font-semibold text-gray-700 mb-3 border-b pb-2\">Diagnosen im Überblick</h4>\n                                                <ul className=\"space-y-1 mt-3\">\n                                                    {(selectedPatient.diagnoses || []).map((diag, i) => <li key={`icd10-${i}`} className=\"flex justify-between items-center text-sm p-2 bg-gray-50 rounded-md\"><span>{diag}</span><button onClick={() => showDiagnosisInfo(diag)} className={btnInfo}><InfoIcon /></button></li>)}\n                                                    {(selectedPatient.diagnoses_icd11 || []).map((diag, i) => <li key={`icd11-${i}`} className=\"flex justify-between items-center text-sm p-2 bg-purple-50 rounded-md\"><span>{diag.code} - {diag.title}</span><button onClick={() => fetchIcd11Details(diag)} className={`${btnInfo} bg-purple-500 hover:bg-purple-600`}><InfoIcon /></button></li>)}\n                                                </ul>\n                                            </div>\n                                        </div>\n                                    )}\n\n                                    {activeDetailTab === 'diagnosen' && (<div>\n                                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n                                        </div>\n                                        <div className=\"mb-6\">\n                                            <h4 className=\"text-xl font-semibold text-gray-700 mb-3\">ICD-10 F-Diagnosen</h4>\n                                            <div className=\"mb-3 p-4 bg-gray-50 rounded-md\"><div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 items-end\"><div><label htmlFor=\"newDiagnosisCode\" className=\"block text-xs font-medium text-gray-700\">Code (z.B. F32.2)</label><input type=\"text\" id=\"newDiagnosisCode\" value={newDiagnosisCode} onChange={(e) => setNewDiagnosisCode(e.target.value.toUpperCase())} placeholder=\"F-Code\" className={`${inputStd} mt-1`} /></div><div><label htmlFor=\"newDiagnosisSicherheit\" className=\"block text-xs font-medium text-gray-700\">Sicherheit</label><select id=\"newDiagnosisSicherheit\" value={newDiagnosisSicherheit} onChange={(e) => setNewDiagnosisSicherheit(e.target.value)} className={`${inputStd} mt-1`}><option value=\"G\">G (Gesichert)</option><option value=\"V\">V (Verdacht auf)</option><option value=\"A\">A (Ausschluss)</option><option value=\"ZN\">ZN (Zustand nach)</option></select></div><div className=\"md:col-span-1\"><label htmlFor=\"newDiagnosisName\" className=\"block text-xs font-medium text-gray-700\">Manuelle Beschreibung (optional)</label><input type=\"text\" id=\"newDiagnosisName\" value={newDiagnosis} onChange={(e) => setNewDiagnosis(e.target.value)} placeholder=\"Eigene Beschreibung\" className={`${inputStd} mt-1`} /></div><button onClick={handleAddDiagnosis} className={`${btnPrimary} bg-green-500 hover:bg-green-600 py-2 px-3 h-10 md:self-end`}><PlusCircleIcon className=\"w-5 h-5 mr-1\" /> Hinzufügen</button></div>{lookedUpDiagnosisName && <p className=\"text-xs text-indigo-600 mt-1\">Gefunden: {lookedUpDiagnosisName}</p>}</div>\n                                            <ul className=\"space-y-1 mb-3\">\n                                                {(selectedPatient.diagnoses || []).map((diagString, index) => (<li key={index} className=\"flex justify-between items-center bg-gray-50 p-2 rounded-md\"><span className=\"text-sm text-gray-700\">{diagString}</span><div className=\"flex items-center space-x-2\"><button onClick={() => showDiagnosisInfo(diagString)} className={`${btnInfo} p-1`} title=\"Info zu dieser Diagnose abrufen\"><FileJson2 className=\"w-4 h-4 mr-1\" /> Info</button><button onClick={() => handleRemoveDiagnosis(diagString)} className={`${btnDanger} p-1 text-xs`}><Trash2 className=\"w-4 h-4\" /></button></div></li>))}\n                                                {(selectedPatient.diagnoses || []).length === 0 && <p className=\"text-sm text-gray-500\">Keine Diagnosen erfasst.</p>}\n                                            </ul>\n                                        </div>\n                                        <div className=\"mb-6\">\n                                            <h4 className=\"text-xl font-semibold text-gray-700 mb-3\">ICD-11 Diagnosen</h4>\n                                            <ul className=\"space-y-1\">\n                                                {(selectedPatient.diagnoses_icd11 || []).map((diag, index) => (<li key={index} className=\"flex justify-between items-center bg-purple-50 p-2 rounded-md hover:bg-purple-100 cursor-pointer\" onClick={() => fetchIcd11Details(diag)}><span className=\"text-sm text-purple-800\"><strong className=\"font-mono\">{diag.code}</strong> - {diag.title}</span><button onClick={(e) => { e.stopPropagation(); handleRemoveIcd11Diagnosis(diag); }} className=\"text-red-500 hover:text-red-700 p-1 text-xs\" title=\"ICD-11 Diagnose entfernen\"><Trash2 className=\"w-4 h-4\" /></button></li>))}\n                                                {(selectedPatient.diagnoses_icd11 || []).length === 0 && <p className=\"text-sm text-gray-500\">Keine ICD-11 Diagnosen erfasst.</p>}\n                                            </ul>\n                                        </div>\n                                    </div>\n                                    )}\n\n                                    {/* === NEUE IMPLEMENTIERUNG ABRECHNUNGSTAB === */}\n                                    {activeDetailTab === 'abrechnung' && (\n                                        <AbrechnungsUebersicht\n                                            patient={selectedPatient}\n                                            ebmData={ebmData}\n                                            unbilledAppointments={unbilledAppointments}\n                                            onStartBilling={handleStartBilling}\n                                        />\n                                    )}\n\n                                    {activeDetailTab === 'krankheitsmodell' && (\n                                        <div className=\"space-y-6\"><div><label htmlFor=\"krankheitsanamnese\" className=\"block text-lg font-semibold text-gray-700 mb-1\">Krankheitsanamnese</label><textarea id=\"krankheitsanamnese\" name=\"krankheitsanamnese\" rows=\"6\" className={textareaStd} value={editableKrankheitsanamnese} onChange={(e) => setEditableKrankheitsanamnese(e.target.value)} onBlur={(e) => handleKrankheitsmodellChange('krankheitsanamnese', e.target.value)} placeholder=\"Hier die Krankheitsanamnese eintragen...\"></textarea></div><div><label htmlFor=\"lebensgeschichte\" className=\"block text-lg font-semibold text-gray-700 mb-1\">Lebensgeschichte / Biographie</label><textarea id=\"lebensgeschichte\" name=\"lebensgeschichte\" rows=\"6\" className={textareaStd} value={editableLebensgeschichte} onChange={(e) => setEditableLebensgeschichte(e.target.value)} onBlur={(e) => handleKrankheitsmodellChange('lebensgeschichte', e.target.value)} placeholder=\"Wichtige Aspekte der Lebensgeschichte...\"></textarea></div><div><label htmlFor=\"problemanalyseMakro\" className=\"block text-lg font-semibold text-gray-700 mb-1\">Problemanalyse auf Makroebene</label><textarea id=\"problemanalyseMakro\" name=\"problemanalyseMakro\" rows=\"6\" className={textareaStd} value={editableProblemanalyseMakro} onChange={(e) => setEditableProblemanalyseMakro(e.target.value)} onBlur={(e) => handleKrankheitsmodellChange('problemanalyseMakro', e.target.value)} placeholder=\"Analyse der übergeordneten Problembereiche...\"></textarea></div><div><label htmlFor=\"therapieplan\" className=\"block text-lg font-semibold text-gray-700 mb-1\">Therapieplan</label><textarea id=\"therapieplan\" name=\"therapieplan\" rows=\"6\" className={textareaStd} value={editableTherapieplan} onChange={(e) => setEditableTherapieplan(e.target.value)} onBlur={(e) => handleKrankheitsmodellChange('therapieplan', e.target.value)} placeholder=\"Therapieziele und -maßnahmen...\"></textarea></div></div>)}\n\n                                    {/* === NEUE IMPLEMENTIERUNG DIAGNOSTIKTAB === */}\n                                    {activeDetailTab === 'diagnostik' && (\n                                        <div>\n                                            <div className=\"border-b border-gray-200 mb-4\">\n                                                <nav className=\"-mb-px flex space-x-6\" aria-label=\"Diagnostik Sub-Tabs\">\n                                                    <button onClick={() => setActiveDiagnostikSubTab('overview')} className={`whitespace-nowrap pb-2 px-1 border-b-2 font-medium text-sm ${activeDiagnostikSubTab === 'overview' ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`}>\n                                                        Übersicht\n                                                    </button>\n                                                    {availableTests.map(test => (\n                                                        (selectedPatient[`${test.id}Results`]?.length > 0) &&\n                                                        <button key={test.id} onClick={() => setActiveDiagnostikSubTab(test.id)} className={`whitespace-nowrap pb-2 px-1 border-b-2 font-medium text-sm ${activeDiagnostikSubTab === test.id ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`}>\n                                                            {test.id.toUpperCase()}\n                                                        </button>\n                                                    ))}\n                                                </nav>\n                                            </div>\n\n                                            {activeDiagnostikSubTab === 'overview' && (\n                                                <DiagnostikUebersicht\n                                                    patient={selectedPatient}\n                                                    availableTests={availableTests}\n                                                    onAddTest={(test) => { setCurrentTestToAdd(test); setIsAddTestModalOpen(true); }}\n                                                    onShowTestDetails={(testId) => setActiveDiagnostikSubTab(testId)}\n                                                />\n                                            )}\n\n                                            {activeDiagnostikSubTab === 'scl90r' && <SCL90RComponent patient={selectedPatient} onDeleteResult={handleRemoveScl90rResult} />}\n                                            {activeDiagnostikSubTab === 'fep2' && <FEP2Component patient={selectedPatient} onDeleteResult={handleRemoveFepResult} />}\n                                            {activeDiagnostikSubTab === 'bdi2' && <BDI2Component patient={selectedPatient} onDeleteResult={handleRemoveBdiResult} bdiCutoffs={bdiCutoffs} bdiAxisTicks={bdiAxisTicks} CustomBdiLabel={CustomBdiLabel} />}\n                                            {activeDiagnostikSubTab === 'hscl11' && <HSCL11Component patient={selectedPatient} onDeleteResult={handleRemoveHsclResult} />}\n                                        </div>\n                                    )}\n\n                                    {activeDetailTab === 'assistenz' && (\n                                        <div>\n                                            <h3 className=\"text-xl font-semibold text-gray-700 mb-4\">Therapeutische Assistenz</h3>\n                                            <button onClick={handleTherapeutischeAssistenzAnfordern} disabled={isLoadingTherapeutischeAssistenz} className={`${btnPrimary} bg-purple-600 hover:bg-purple-700 mb-4 flex items-center`}>\n                                                <WandSparkles className=\"mr-2 h-5 w-5\" />\n                                                {isLoadingTherapeutischeAssistenz ? \"Analysiere Daten...\" : \"Expertenfeedback anfordern\"}\n                                            </button>\n                                            {isLoadingTherapeutischeAssistenz && (<div className=\"text-center py-10\"><div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-700 mx-auto\"></div><p className=\"mt-3 text-gray-600\">Bitte warten, die KI analysiert die Patientendaten...</p></div>)}\n                                            {assistenzError && (<div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4\" role=\"alert\"><p className=\"font-bold\">Fehler bei der Assistenz</p><p>{assistenzError}</p></div>)}\n                                            {therapeutischeAssistenzOutput && !isLoadingTherapeutischeAssistenz && (<div className=\"mt-4 p-4 bg-gray-50 rounded-md border\"><h4 className=\"text-lg font-semibold text-gray-800 mb-2\">Vorschläge des Expertenteams:</h4><div className=\"whitespace-pre-wrap text-sm text-gray-700 leading-relaxed\">{therapeutischeAssistenzOutput}</div></div>)}\n                                        </div>\n                                    )}</div>\n\n                            ) : (\n                                <div className=\"animate-fade-in space-y-6\">\n                                    <div>\n                                        <div className=\"flex justify-between items-center mb-4\">\n                                            <h3 className=\"text-xl font-semibold text-gray-800\">Offene Abrechnungen</h3>\n                                            {/* NEU: Button für manuelle Abrechnung */}\n                                            <button\n                                                onClick={() => setIsManualBillingSetupOpen(true)}\n                                                className=\"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-md shadow-sm flex items-center justify-center text-sm\"\n                                            >\n                                                Sitzung manuell abrechnen\n                                            </button>\n                                        </div>\n                                        <div className=\"bg-white rounded-lg shadow-md p-4\">\n                                            {isLoadingAppointments && <p>Lade offene Termine...</p>}\n                                            {!isLoadingAppointments && unbilledAppointments.length === 0 && <p className=\"text-sm text-gray-500\">Keine offenen Abrechnungen gefunden.</p>}\n                                            <ul className=\"space-y-2\">\n                                                {unbilledAppointments.map(event => (\n                                                    <li key={event.id}>\n                                                        <button onClick={() => handleStartBilling(event)} className=\"w-full text-left p-3 bg-yellow-100 hover:bg-yellow-200 rounded-md text-sm text-yellow-800 font-medium\">\n                                                            {new Date(event.start.dateTime).toLocaleDateString('de-DE')} - {event.summary}\n                                                        </button>\n                                                    </li>\n                                                ))}\n                                            </ul>\n                                        </div>\n                                    </div>\n\n                                    <div>\n                                        <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Terminkalender</h3>\n                                        <div className=\"bg-white rounded-lg shadow-md p-4\">\n                                            <div className=\"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4 text-sm text-blue-700\">\n                                                <p className=\"font-bold\">Anleitung zum Einbetten Ihres Google Kalenders:</p>\n                                                <ol className=\"list-decimal list-inside mt-2 space-y-1\">\n                                                    <li>Öffnen Sie Ihren <a href=\"[https://calendar.google.com/](https://calendar.google.com/)\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 underline\">Google Kalender</a> im Browser.</li>\n                                                    <li>Gehen Sie zu \"Einstellungen\" (Zahnrad-Symbol) &rarr; \"Einstellungen\".</li>\n                                                    <li>Wählen Sie links unter \"Einstellungen für meine Kalender\" den Kalender aus, den Sie einbetten möchten.</li>\n                                                    <li>Scrollen Sie zu \"Kalender integrieren\" und kopieren Sie den Link aus dem Feld <b>\"Öffentlich freigegebener Link zu diesem Kalender\"</b> oder den HTML-Code aus <b>\"Einbettungscode\"</b>.</li>\n                                                    <li>Ersetzen Sie den <code>src</code>-Link im <code>iframe</code> unten im Code durch den Link aus Ihrem Kalender.</li>\n                                                </ol>\n                                            </div>\n                                            <iframe\n                                                title=\"Google Calendar\"\n                                                src=\"https://calendar.google.com/calendar/embed?src=julisycomorepsy%40gmail.com&ctz=Europe%2FBerlin](https://calendar.google.com/calendar/embed?src=julisycomorepsy%40gmail.com&ctz=Europe%2FBerlin)\"\n                                                style={{ border: 0 }}\n                                                width=\"100%\"\n                                                height=\"600\"\n                                                frameBorder=\"0\"\n                                                scrolling=\"no\"\n                                            ></iframe>\n                                        </div>\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                )}\n\n                {mainView === 'icd11' && (\n                    <ICD11ECTBrowser\n                        patients={patients}\n                        selectedPatient={selectedPatient}\n                        onAssignDiagnosis={handleAssignIcd11Diagnosis}\n                    />\n                )}\n                {mainView === 'ebm' && (<EBMBrowser />)}\n\n\n                <Modal\n                    isOpen={diagnosisInfo.isOpen}\n                    onClose={() => setDiagnosisInfo(prev => ({ ...prev, isOpen: false }))}\n                    title={`Diagnose-Info: ${diagnosisInfo.code || ''}`}\n                    size=\"3xl\"\n                >\n                    {diagnosisInfo.isLoading && (\n                        <p className=\"text-center py-4\">Informationen werden geladen...</p>\n                    )}\n                    {diagnosisInfo.error && (\n                        <p className=\"text-red-600 bg-red-100 p-3 rounded-md\">\n                            Fehler: {diagnosisInfo.error}\n                        </p>\n                    )}\n\n                    {/* --- Bestehender Block für ICD-10 --- */}\n                    {!diagnosisInfo.isLoading && diagnosisInfo.source === 'local' && (\n                        <div className=\"text-sm text-gray-700 leading-relaxed p-2 space-y-3\">\n                            <h3 className=\"text-lg font-semibold text-indigo-700\">\n                                {diagnosisInfo.name}\n                                <span className=\"text-gray-500 text-base ml-2\">\n                                    ({diagnosisInfo.code})\n                                </span>\n                            </h3>\n                            {diagnosisInfo.beschreibung && (\n                                <div>\n                                    <strong className=\"font-medium text-gray-800 block mb-1\">\n                                        Beschreibung:\n                                    </strong>\n                                    <p className=\"whitespace-pre-wrap\">\n                                        {diagnosisInfo.beschreibung}\n                                    </p>\n                                </div>\n                            )}\n                            {diagnosisInfo.inkl?.length > 0 && (\n                                <div>\n                                    <strong className=\"font-medium text-gray-800 block mb-1\">\n                                        Inklusive:\n                                    </strong>\n                                    <ul className=\"list-disc list-inside\">\n                                        {diagnosisInfo.inkl.map((item, idx) => (\n                                            <li key={idx}>{item}</li>\n                                        ))}\n                                    </ul>\n                                </div>\n                            )}\n                            {diagnosisInfo.exkl?.length > 0 && (\n                                <div>\n                                    <strong className=\"font-medium text-gray-800 block mb-1\">\n                                        Exklusive:\n                                    </strong>\n                                    <ul className=\"list-disc list-inside\">\n                                        {diagnosisInfo.exkl.map((item, idx) => (\n                                            <li key={idx}>{item}</li>\n                                        ))}\n                                    </ul>\n                                </div>\n                            )}\n                        </div>\n                    )}\n\n                    {/* --- NEUER Block für ICD-11 --- */}\n                    {!diagnosisInfo.isLoading && diagnosisInfo.source === 'api_detail' && (\n                        <div className=\"text-sm text-gray-700 leading-relaxed p-2 space-y-4\">\n                            <h3 className=\"text-lg font-semibold text-purple-700\">\n                                {diagnosisInfo.name}\n                                <span className=\"text-gray-500 text-base ml-2 font-mono\">\n                                    ({diagnosisInfo.code})\n                                </span>\n                            </h3>\n\n                            {/* Die Beschreibung kommt aus dem 'definition' Feld der API  */}\n                            {diagnosisInfo.beschreibung && (\n                                <div>\n                                    <strong className=\"font-medium text-gray-800 block mb-1\">\n                                        Beschreibung (Definition):\n                                    </strong>\n                                    <p className=\"whitespace-pre-wrap bg-gray-50 p-2 rounded-md\">\n                                        {diagnosisInfo.beschreibung}\n                                    </p>\n                                </div>\n                            )}\n\n                            {/* Inklusionen sind ein Array von Objekten  */}\n                            {diagnosisInfo.inclusions?.length > 0 && (\n                                <div>\n                                    <strong className=\"font-medium text-gray-800 block mb-1\">\n                                        Inklusive:\n                                    </strong>\n                                    <ul className=\"list-disc list-inside pl-2 space-y-1\">\n                                        {diagnosisInfo.inclusions.map((item, idx) => (\n                                            <li key={idx}>{item.label['@value']}</li>\n                                        ))}\n                                    </ul>\n                                </div>\n                            )}\n\n                            {/* Exklusionen sind ebenfalls ein Array von Objekten  */}\n                            {diagnosisInfo.exclusions?.length > 0 && (\n                                <div>\n                                    <strong className=\"font-medium text-gray-800 block mb-1\">\n                                        Exklusive:\n                                    </strong>\n                                    <ul className=\"list-disc list-inside pl-2 space-y-1\">\n                                        {diagnosisInfo.exclusions.map((item, idx) => (\n                                            <li key={idx}>\n                                                {item.label['@value']}\n                                                {item.foundationReference &&\n                                                    <span className=\"text-xs text-gray-400 ml-2\">({item.linearizationReference.split('/').pop()})</span>}\n                                            </li>\n                                        ))}\n                                    </ul>\n                                </div>\n                            )}\n                        </div>\n                    )}\n                </Modal>\n\n                <Modal\n                    isOpen={improvementState.isOpen}\n                    onClose={() => setImprovementState({ ...improvementState, isOpen: false })}\n                    title=\"Sitzungsdokumentation verbessern\"\n                    size=\"5xl\"\n                >\n                    {improvementState.error && <p className=\"text-red-500 bg-red-100 p-3 rounded-md mb-4\">{improvementState.error}</p>}\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                        <div>\n                            <h4 className=\"font-semibold text-lg text-gray-700 mb-2\">Original</h4>\n                            <pre className=\"text-sm bg-gray-100 p-3 rounded-md whitespace-pre-wrap font-sans h-96 overflow-y-auto border\">{improvementState.originalText}</pre>\n                        </div>\n                        <div>\n                            <h4 className=\"font-semibold text-lg text-gray-700 mb-2\">Vorschlag</h4>\n                            {/* Das <pre>-Tag stellt den Text wie in einem Terminal dar, mit Monospace-Schrift */}\n                            <pre className=\"text-sm bg-gray-800 text-green-300 font-mono p-3 rounded-md whitespace-pre-wrap h-96 overflow-y-auto\">{improvementState.improvedText}</pre>\n                        </div>\n                    </div>\n                    <div className=\"flex justify-end space-x-4 mt-6\">\n                        <button type=\"button\" onClick={() => setImprovementState({ ...improvementState, isOpen: false })} className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300\">Abbrechen</button>\n                        <button onClick={handleAcceptImprovement} className=\"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 flex items-center\">\n                            <Save className=\"w-4 h-4 mr-2\" /> Original ersetzen\n                        </button>\n                    </div>\n                </Modal>\n\n                {appError && (<div className=\"fixed bottom-4 right-4 p-4 max-w-sm text-sm text-red-700 bg-red-100 border border-red-400 rounded-md shadow-lg z-[100]\">{appError}<button onClick={() => setAppError(null)} className=\"ml-4 mt-2 sm:mt-0 sm:ml-2 px-2 py-1 text-red-900 underline rounded-md hover:bg-red-200 text-xs\">Ok</button></div>)}\n\n                   <AddTestFlowModal \n        isOpen={isAddTestModalOpen}\n        onClose={() => setIsAddTestModalOpen(false)}\n        onSave={handleSaveTestAndResults}\n        testInfo={currentTestToAdd}\n        patient={selectedPatient} // Dies war schon da und ist korrekt\n    />\n\n    <ManualBillingSetupModal\n        isOpen={isManualBillingSetupOpen}\n        onClose={() => setIsManualBillingSetupOpen(false)}\n        patients={sortedPatients}\n        onStart={handleStartManualBilling}\n    />\n            </main>\n\n            {billingModalState.isOpen && (\n                <Modal\n                    isOpen={billingModalState.isOpen}\n                    onClose={() => setBillingModalState({ isOpen: false, event: null })}\n                    title={`Termin abrechnen: ${billingModalState.event.summary}`}\n                    size=\"4xl\"\n                >\n                    <BillingModal\n                        event={billingModalState.event}\n                        ebmData={ebmData}\n                        onSave={handleSaveBilling}\n                        onClose={() => setBillingModalState({ isOpen: false, event: null })}\n                        generateGeminiText={generateGeminiText} // <-- WICHTIG: Diese Zeile muss vorhanden sein\n                    />\n                </Modal>\n            )}\n        \n            <footer className=\"text-center py-6 text-sm text-gray-500 border-t border-gray-200 mt-10\">Therapie-Dashboard &copy; {new Date().getFullYear()}</footer>\n        </div>\n    );\n}\n\n\nconst CustomBdiLabel = (props) => {\n    const { x, y, width, text } = props;\n    if (typeof x !== 'number' || isNaN(x) ||\n        typeof y !== 'number' || isNaN(y) ||\n        typeof width !== 'number' || isNaN(width) || width <= 0) {\n        return null;\n    }\n    const labelX = x + width / 2;\n    return (<text x={labelX} y={y} fill=\"#666\" textAnchor=\"middle\" dy={-4} fontSize=\"10\">{text}</text>);\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}