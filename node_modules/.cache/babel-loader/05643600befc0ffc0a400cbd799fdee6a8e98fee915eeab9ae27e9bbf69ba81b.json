{"ast":null,"code":"var _jsxFileName = \"/Users/julianrogowski/Desktop/patientenverwaltung-app/src/components/ICD11ECTBrowser.js\",\n  _s = $RefreshSig$();\n// src/components/ICD11ECTBrowser.js\nimport React, { useEffect } from 'react';\n\n// Importieren Sie die ECT-Bibliothek und das CSS gemäß der Dokumentation\nimport * as ECT from '@whoicd/icd11ect';\nimport '@whoicd/icd11ect/style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ICD11ECTBrowser = () => {\n  _s();\n  useEffect(() => {\n    // Diese Funktion wird einmal ausgeführt, wenn die Komponente geladen wird.\n\n    // Definition der Einstellungen für den Embedded Browser\n    const mySettings = {\n      apiServerUrl: \"https://id.who.int\",\n      // Die offizielle, produktive API-URL\n      apiSecured: true,\n      // Wichtig: Aktiviert die OAUTH-Authentifizierung\n\n      // UI und Sprach-Einstellungen\n      language: \"de\",\n      // Sprache auf Deutsch setzen\n      browserHierarchyAvailable: true,\n      // Zeigt den Baum-Browser links an\n      browserAdvancedSearchAvailable: true,\n      // Aktiviert die erweiterte Suche\n      includeDiagnosticCriteria: true,\n      // Zeigt diagnostische Kriterien an, falls verfügbar\n      hierarchyResizable: true,\n      // Erlaubt das Ändern der Baum-Breite\n      height: \"80vh\" // Setzt eine feste Höhe für das Tool\n    };\n\n    // Definition der Callbacks\n    const myCallbacks = {\n      // Diese Funktion wird vom ECT aufgerufen, wenn es ein neues Token benötigt\n      getNewTokenFunction: async () => {\n        try {\n          // Die URL muss exakt auf Ihren lokalen Token-Server zeigen\n          const response = await fetch('http://localhost:3001/api/icd11-token');\n          if (!response.ok) {\n            console.error('Fehler beim Abrufen des Tokens vom Backend.');\n            throw new Error('Could not fetch token');\n          }\n          const result = await response.json();\n          return result.token; // Gibt das Token an die ECT-Bibliothek zurück\n        } catch (e) {\n          console.error(\"Fehler bei der Token-Anfrage:\", e);\n          return null; // Gibt null zurück, wenn ein Fehler auftritt\n        }\n      }\n    };\n\n    // KORRIGIERTER AUFRUF: Verwenden Sie ECT.Handler.configure\n    ECT.Handler.configure(mySettings, myCallbacks);\n  }, []); // Der leere Array sorgt dafür, dass dieser Effekt nur einmal ausgeführt wird.\n\n  return (\n    /*#__PURE__*/\n    // Dieser div-Container ist der Ankerpunkt, in den die ECT-Bibliothek\n    // das Nachschlagewerk rendert. Die ID '1' ist eine eindeutige Kennung.\n    _jsxDEV(\"div\", {\n      className: \"ctw-eb-window\",\n      \"data-ctw-ino\": \"1\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this)\n  );\n};\n_s(ICD11ECTBrowser, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = ICD11ECTBrowser;\nexport default ICD11ECTBrowser;\nvar _c;\n$RefreshReg$(_c, \"ICD11ECTBrowser\");","map":{"version":3,"names":["React","useEffect","ECT","jsxDEV","_jsxDEV","ICD11ECTBrowser","_s","mySettings","apiServerUrl","apiSecured","language","browserHierarchyAvailable","browserAdvancedSearchAvailable","includeDiagnosticCriteria","hierarchyResizable","height","myCallbacks","getNewTokenFunction","response","fetch","ok","console","error","Error","result","json","token","e","Handler","configure","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/julianrogowski/Desktop/patientenverwaltung-app/src/components/ICD11ECTBrowser.js"],"sourcesContent":["// src/components/ICD11ECTBrowser.js\nimport React, { useEffect } from 'react';\n\n// Importieren Sie die ECT-Bibliothek und das CSS gemäß der Dokumentation\nimport * as ECT from '@whoicd/icd11ect';\nimport '@whoicd/icd11ect/style.css';\n\nconst ICD11ECTBrowser = () => {\n    useEffect(() => {\n        // Diese Funktion wird einmal ausgeführt, wenn die Komponente geladen wird.\n        \n        // Definition der Einstellungen für den Embedded Browser\n        const mySettings = {\n            apiServerUrl: \"https://id.who.int\",  // Die offizielle, produktive API-URL\n            apiSecured: true,                   // Wichtig: Aktiviert die OAUTH-Authentifizierung\n            \n            // UI und Sprach-Einstellungen\n            language: \"de\",                     // Sprache auf Deutsch setzen\n            browserHierarchyAvailable: true,    // Zeigt den Baum-Browser links an\n            browserAdvancedSearchAvailable: true, // Aktiviert die erweiterte Suche\n            includeDiagnosticCriteria: true,    // Zeigt diagnostische Kriterien an, falls verfügbar\n            hierarchyResizable: true,           // Erlaubt das Ändern der Baum-Breite\n            height: \"80vh\"                      // Setzt eine feste Höhe für das Tool\n        };\n\n        // Definition der Callbacks\n        const myCallbacks = {\n            // Diese Funktion wird vom ECT aufgerufen, wenn es ein neues Token benötigt\n            getNewTokenFunction: async () => {\n                try {\n                    // Die URL muss exakt auf Ihren lokalen Token-Server zeigen\n                    const response = await fetch('http://localhost:3001/api/icd11-token');\n                    if (!response.ok) {\n                        console.error('Fehler beim Abrufen des Tokens vom Backend.');\n                        throw new Error('Could not fetch token');\n                    }\n                    const result = await response.json();\n                    return result.token; // Gibt das Token an die ECT-Bibliothek zurück\n                } catch (e) {\n                    console.error(\"Fehler bei der Token-Anfrage:\", e);\n                    return null; // Gibt null zurück, wenn ein Fehler auftritt\n                }\n            }\n        };\n\n        // KORRIGIERTER AUFRUF: Verwenden Sie ECT.Handler.configure\n        ECT.Handler.configure(mySettings, myCallbacks);\n        \n    }, []); // Der leere Array sorgt dafür, dass dieser Effekt nur einmal ausgeführt wird.\n\n    return (\n        // Dieser div-Container ist der Ankerpunkt, in den die ECT-Bibliothek\n        // das Nachschlagewerk rendert. Die ID '1' ist eine eindeutige Kennung.\n        <div className=\"ctw-eb-window\" data-ctw-ino=\"1\"></div>\n    );\n};\n\nexport default ICD11ECTBrowser;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;;AAExC;AACA,OAAO,KAAKC,GAAG,MAAM,kBAAkB;AACvC,OAAO,4BAA4B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1BL,SAAS,CAAC,MAAM;IACZ;;IAEA;IACA,MAAMM,UAAU,GAAG;MACfC,YAAY,EAAE,oBAAoB;MAAG;MACrCC,UAAU,EAAE,IAAI;MAAoB;;MAEpC;MACAC,QAAQ,EAAE,IAAI;MAAsB;MACpCC,yBAAyB,EAAE,IAAI;MAAK;MACpCC,8BAA8B,EAAE,IAAI;MAAE;MACtCC,yBAAyB,EAAE,IAAI;MAAK;MACpCC,kBAAkB,EAAE,IAAI;MAAY;MACpCC,MAAM,EAAE,MAAM,CAAsB;IACxC,CAAC;;IAED;IACA,MAAMC,WAAW,GAAG;MAChB;MACAC,mBAAmB,EAAE,MAAAA,CAAA,KAAY;QAC7B,IAAI;UACA;UACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,uCAAuC,CAAC;UACrE,IAAI,CAACD,QAAQ,CAACE,EAAE,EAAE;YACdC,OAAO,CAACC,KAAK,CAAC,6CAA6C,CAAC;YAC5D,MAAM,IAAIC,KAAK,CAAC,uBAAuB,CAAC;UAC5C;UACA,MAAMC,MAAM,GAAG,MAAMN,QAAQ,CAACO,IAAI,CAAC,CAAC;UACpC,OAAOD,MAAM,CAACE,KAAK,CAAC,CAAC;QACzB,CAAC,CAAC,OAAOC,CAAC,EAAE;UACRN,OAAO,CAACC,KAAK,CAAC,+BAA+B,EAAEK,CAAC,CAAC;UACjD,OAAO,IAAI,CAAC,CAAC;QACjB;MACJ;IACJ,CAAC;;IAED;IACAzB,GAAG,CAAC0B,OAAO,CAACC,SAAS,CAACtB,UAAU,EAAES,WAAW,CAAC;EAElD,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;;EAER;IAAA;IACI;IACA;IACAZ,OAAA;MAAK0B,SAAS,EAAC,eAAe;MAAC,gBAAa;IAAG;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM;EAAC;AAE9D,CAAC;AAAC5B,EAAA,CAhDID,eAAe;AAAA8B,EAAA,GAAf9B,eAAe;AAkDrB,eAAeA,eAAe;AAAC,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}