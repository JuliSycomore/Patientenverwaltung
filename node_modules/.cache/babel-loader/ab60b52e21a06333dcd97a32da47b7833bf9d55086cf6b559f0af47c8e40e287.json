{"ast":null,"code":"import React,{useState,useMemo,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditIcon=_ref=>{let{className=\"w-4 h-4\"}=_ref;return/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",className:className,children:[/*#__PURE__*/_jsx(\"path\",{d:\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"})]});};const TrashIcon=_ref2=>{let{className=\"w-4 h-4\"}=_ref2;return/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",className:className,children:[/*#__PURE__*/_jsx(\"polyline\",{points:\"3 6 5 6 21 6\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"})]});};const CopyIcon=_ref3=>{let{className=\"w-4 h-4\"}=_ref3;return/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",className:className,children:[/*#__PURE__*/_jsx(\"rect\",{x:\"9\",y:\"9\",width:\"13\",height:\"13\",rx:\"2\",ry:\"2\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\"})]});};const DIAGNOSTIK_PUNKTE={'35600':34,'35601':39,'35602':56};const fieldConfig={sitzungsnummer:{label:'Sitzungsnummer',order:1},thema:{label:'Thema der Sitzung',order:2},patientenbericht:{label:'Patientenbericht',order:3},psychotherapeutischesThemaInhalt:{label:'Psychotherapeutisches Thema und Inhalt der Sitzung',order:4},therapeutischeInterventionen:{label:'Therapeutische Interventionen',order:5,isList:true},gesamteindruck:{label:'Gesamteindruck',order:6},risikoabschaetzung:{label:'Risikoabschätzung (Suizidalität)',order:7},hausaufgaben:{label:'Hausaufgaben',order:8,isList:true}};const AbrechnungsUebersicht=_ref4=>{let{patient,availableTests,onAddBillingPeriod,quarterlyAnalysis,onEditSession,onDeleteSession,onDeleteBillingPeriod}=_ref4;const[selectedView,setSelectedView]=useState(null);// 'quarter-YYYY-Q-X' or 'session-ID'\nconst sortedQuarterKeys=useMemo(()=>{if(!quarterlyAnalysis)return[];return Object.keys(quarterlyAnalysis).sort((a,b)=>{const[yearA,quarterA]=a.split('-Q');const[yearB,quarterB]=b.split('-Q');if(yearA!==yearB)return yearB-yearA;return quarterB-quarterA;});},[quarterlyAnalysis]);useEffect(()=>{if(sortedQuarterKeys.length>0&&!selectedView){setSelectedView(\"quarter-\".concat(sortedQuarterKeys[0]));}else if(sortedQuarterKeys.length===0&&!selectedView&&therapySessions.length>0){setSelectedView(\"session-\".concat(therapySessions[0].id));}},[sortedQuarterKeys,selectedView]);const therapySessions=useMemo(()=>{return(patient.sessions||[]).filter(s=>s.structuredNotes&&s.structuredNotes.sitzungsnummer).sort((a,b)=>new Date(b.date)-new Date(a.date));},[patient.sessions]);const{isAddDisabled,disabledReason}=useMemo(()=>{var _patient$billingPerio;if(!patient)return{isAddDisabled:true,disabledReason:''};const nonProbatorikPeriods=((_patient$billingPerio=patient.billingPeriods)===null||_patient$billingPerio===void 0?void 0:_patient$billingPerio.filter(p=>p.type!=='probatorik').length)||0;const isKZT=patient.approvedHours<=24;const isLZT=patient.approvedHours>24;if(isKZT&&nonProbatorikPeriods>=3){return{isAddDisabled:true,disabledReason:\"Maximal 3 Zeiträume (Verlauf/Abschluss) für KZT erreicht.\"};}if(isLZT&&nonProbatorikPeriods>=7){return{isAddDisabled:true,disabledReason:\"Maximal 7 Zeiträume (Verlauf/Abschluss) für LZT erreicht.\"};}return{isAddDisabled:false,disabledReason:''};},[patient]);const handleCopySession=notes=>{const keysToCopy=Object.keys(notes).sort((a,b)=>{var _fieldConfig$a,_fieldConfig$b;return(((_fieldConfig$a=fieldConfig[a])===null||_fieldConfig$a===void 0?void 0:_fieldConfig$a.order)||99)-(((_fieldConfig$b=fieldConfig[b])===null||_fieldConfig$b===void 0?void 0:_fieldConfig$b.order)||99);});const textToCopy=keysToCopy.map(key=>{var _fieldConfig$key;const value=notes[key];if(!value)return null;const label=((_fieldConfig$key=fieldConfig[key])===null||_fieldConfig$key===void 0?void 0:_fieldConfig$key.label)||key;let formattedValue;if(Array.isArray(value)){formattedValue=value.map(item=>\"- \".concat(item)).join('\\n');}else{formattedValue=String(value);}return\"\".concat(label,\":\\n\").concat(formattedValue);}).filter(Boolean).join('\\n\\n');navigator.clipboard.writeText(textToCopy).then(()=>alert('Sitzungsdoku in die Zwischenablage kopiert!')).catch(err=>alert('Kopieren fehlgeschlagen.'));};const selectedQuarterKey=selectedView!==null&&selectedView!==void 0&&selectedView.startsWith('quarter-')?selectedView.substring(8):null;const selectedSessionId=selectedView!==null&&selectedView!==void 0&&selectedView.startsWith('session-')?selectedView.substring(8):null;const selectedQuarterDetails=quarterlyAnalysis?quarterlyAnalysis[selectedQuarterKey]:null;const selectedTherapySession=therapySessions.find(s=>s.id===selectedSessionId);return/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-1 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-bold text-gray-800 mb-2\",children:\"Diagnostik nach Quartal\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1 max-h-[25vh] overflow-y-auto pr-2\",children:sortedQuarterKeys.length>0?sortedQuarterKeys.map(key=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setSelectedView(\"quarter-\".concat(key)),className:\"p-2 rounded-md cursor-pointer text-xs transition-colors flex justify-between items-center \".concat(selectedQuarterKey===key?'bg-teal-600 text-white':'bg-gray-100 hover:bg-teal-50 text-gray-800'),children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:key}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-mono text-xs px-2 py-0.5 rounded-full \".concat(selectedQuarterKey===key?'bg-white/20':'bg-gray-200'),children:[quarterlyAnalysis[key].pointsUsed,\" / \",quarterlyAnalysis[key].pointsLimit,\" P.\"]})]},key)):/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 p-3 bg-gray-50 rounded-md\",children:\"Keine Diagnostik-Daten vorhanden.\"})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-bold text-gray-800 mb-2\",children:\"Verwaltete Abrechnungszeitr\\xE4ume\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1 max-h-[25vh] overflow-y-auto pr-2\",children:(patient.billingPeriods||[]).map(period=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-2 rounded-md bg-gray-100 text-gray-800 text-xs flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:period.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500\",children:[\"Datum: \",new Date(period.date).toLocaleDateString('de-DE')]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDeleteBillingPeriod(period.id),className:\"p-1.5 text-gray-400 hover:bg-red-100 hover:text-red-600 rounded-full\",title:\"Diesen Zeitraum l\\xF6schen\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"w-4 h-4\"})})]},period.id))}),/*#__PURE__*/_jsx(\"button\",{onClick:onAddBillingPeriod,disabled:isAddDisabled,title:disabledReason,className:\"mt-3 w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-3 rounded-md text-sm flex items-center justify-center transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed\",children:\"Neuen Abrechnungszeitraum anlegen\"}),isAddDisabled&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-red-600 text-center mt-1\",children:disabledReason})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-bold text-gray-800 mb-2\",children:\"Therapiesitzungen\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1 max-h-[25vh] overflow-y-auto pr-2\",children:therapySessions.map(session=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setSelectedView(\"session-\".concat(session.id)),className:\"p-2 rounded-md cursor-pointer text-xs transition-colors flex justify-between items-center \".concat(selectedSessionId===session.id?'bg-teal-600 text-white':'bg-gray-100 hover:bg-teal-50 text-gray-800'),children:[/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold\",children:[\"Sitzung \",session.structuredNotes.sitzungsnummer,\" - \",new Date(session.date).toLocaleDateString('de-DE')]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center flex-shrink-0\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();onEditSession(session);},className:\"p-1 hover:bg-white/20 rounded-full\",children:/*#__PURE__*/_jsx(EditIcon,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.stopPropagation();onDeleteSession(session.id);},className:\"p-1 hover:bg-white/20 rounded-full\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"w-4 h-4\"})})]})]},session.id))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2\",children:selectedQuarterDetails?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-lg shadow-sm border space-y-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold text-gray-700\",children:[\"Details f\\xFCr Quartal: \",selectedQuarterKey]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"font-semibold text-blue-800 mb-2\",children:\"Durchgef\\xFChrte Tests in diesem Quartal\"}),selectedQuarterDetails.tests&&selectedQuarterDetails.tests.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-blue-200\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-1 text-left font-semibold\",children:\"Test\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-1 text-left font-semibold\",children:\"Datum\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-1 text-right font-semibold\",children:\"Punkte\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:selectedQuarterDetails.tests.map((test,i)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b last:border-b-0 border-blue-100\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2\",children:test.name}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2\",children:new Date(test.date).toLocaleDateString('de-DE')}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 text-right font-mono\",children:DIAGNOSTIK_PUNKTE[test.ebm]||0})]},test.testInstanceId||i))}),/*#__PURE__*/_jsxs(\"tfoot\",{children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"font-bold border-t-2 border-blue-300\",children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\",className:\"pt-2 text-right\",children:\"Gesamt verbraucht:\"}),/*#__PURE__*/_jsx(\"td\",{className:\"pt-2 text-right font-mono\",children:selectedQuarterDetails.pointsUsed})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"font-bold\",children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\",className:\"pt-1 text-right text-gray-600\",children:\"Limit:\"}),/*#__PURE__*/_jsx(\"td\",{className:\"pt-1 text-right font-mono text-gray-600\",children:selectedQuarterDetails.pointsLimit})]}),/*#__PURE__*/_jsxs(\"tr\",{className:\"font-bold text-blue-800\",children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"2\",className:\"pt-1 text-right\",children:\"Verbleibend:\"}),/*#__PURE__*/_jsx(\"td\",{className:\"pt-1 text-right font-mono\",children:selectedQuarterDetails.pointsLimit-selectedQuarterDetails.pointsUsed})]})]})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"In diesem Quartal wurden keine Tests durchgef\\xFChrt.\"})]})]}):selectedTherapySession?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-lg shadow-sm border space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold text-gray-700\",children:[\"Details f\\xFCr Sitzung \",selectedTherapySession.structuredNotes.sitzungsnummer,\" vom \",new Date(selectedTherapySession.date).toLocaleDateString('de-DE')]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleCopySession(selectedTherapySession.structuredNotes),className:\"p-2 text-gray-500 hover:bg-gray-100 hover:text-teal-600 rounded-full transition-colors\",title:\"Sitzungsdokumentation in die Zwischenablage kopieren\",children:/*#__PURE__*/_jsx(CopyIcon,{className:\"w-5 h-5\"})})]}),Object.keys(selectedTherapySession.structuredNotes||{}).sort((a,b)=>{var _fieldConfig$a2,_fieldConfig$b2;return(((_fieldConfig$a2=fieldConfig[a])===null||_fieldConfig$a2===void 0?void 0:_fieldConfig$a2.order)||99)-(((_fieldConfig$b2=fieldConfig[b])===null||_fieldConfig$b2===void 0?void 0:_fieldConfig$b2.order)||99);}).map(key=>{const value=selectedTherapySession.structuredNotes[key];if(!value&&value!==0)return null;const config=fieldConfig[key]||{};const label=config.label||key.replace(/([A-Z])/g,' $1').trim();const isList=config.isList||false;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"font-semibold text-sm text-gray-600 capitalize\",children:label}),isList?/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-800 bg-gray-50 p-3 rounded-md mt-1\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-disc list-inside space-y-1\",children:Array.isArray(value)?value.map((item,index)=>/*#__PURE__*/_jsx(\"li\",{children:item},index)):String(value).split('\\n').map((item,index)=>item.trim()&&/*#__PURE__*/_jsx(\"li\",{children:item.trim().replace(/^- /,'')},index))})}):/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-800 bg-gray-50 p-2 rounded-md mt-1 whitespace-pre-wrap\",children:String(value)})]},key);})]}):/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full bg-gray-50 rounded-lg border\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"W\\xE4hlen Sie links einen Eintrag aus, um die Details anzuzeigen.\"})})})]});};export default AbrechnungsUebersicht;","map":{"version":3,"names":["React","useState","useMemo","useEffect","jsx","_jsx","jsxs","_jsxs","EditIcon","_ref","className","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","children","d","TrashIcon","_ref2","points","CopyIcon","_ref3","x","y","width","height","rx","ry","DIAGNOSTIK_PUNKTE","fieldConfig","sitzungsnummer","label","order","thema","patientenbericht","psychotherapeutischesThemaInhalt","therapeutischeInterventionen","isList","gesamteindruck","risikoabschaetzung","hausaufgaben","AbrechnungsUebersicht","_ref4","patient","availableTests","onAddBillingPeriod","quarterlyAnalysis","onEditSession","onDeleteSession","onDeleteBillingPeriod","selectedView","setSelectedView","sortedQuarterKeys","Object","keys","sort","a","b","yearA","quarterA","split","yearB","quarterB","length","concat","therapySessions","id","sessions","filter","s","structuredNotes","Date","date","isAddDisabled","disabledReason","_patient$billingPerio","nonProbatorikPeriods","billingPeriods","p","type","isKZT","approvedHours","isLZT","handleCopySession","notes","keysToCopy","_fieldConfig$a","_fieldConfig$b","textToCopy","map","key","_fieldConfig$key","value","formattedValue","Array","isArray","item","join","String","Boolean","navigator","clipboard","writeText","then","alert","catch","err","selectedQuarterKey","startsWith","substring","selectedSessionId","selectedQuarterDetails","selectedTherapySession","find","onClick","pointsUsed","pointsLimit","period","name","toLocaleDateString","title","disabled","session","e","stopPropagation","tests","test","i","ebm","testInstanceId","colSpan","_fieldConfig$a2","_fieldConfig$b2","config","replace","trim","index"],"sources":["/Users/julianrogowski/Documents/Visual Code/patientenverwaltung-app/src/components/PatientenTabs/Abrechnung.js"],"sourcesContent":["import React, { useState, useMemo, useEffect } from 'react';\n\nconst EditIcon = ({ className = \"w-4 h-4\" }) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path><path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path></svg>;\nconst TrashIcon = ({ className = \"w-4 h-4\" }) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><polyline points=\"3 6 5 6 21 6\"></polyline><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path></svg>;\nconst CopyIcon = ({ className = \"w-4 h-4\" }) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" ry=\"2\"></rect><path d=\"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\"></path></svg>;\n\nconst DIAGNOSTIK_PUNKTE = { '35600': 34, '35601': 39, '35602': 56 };\n\nconst fieldConfig = {\n    sitzungsnummer: { label: 'Sitzungsnummer', order: 1 },\n    thema: { label: 'Thema der Sitzung', order: 2 },\n    patientenbericht: { label: 'Patientenbericht', order: 3 },\n    psychotherapeutischesThemaInhalt: { label: 'Psychotherapeutisches Thema und Inhalt der Sitzung', order: 4 },\n    therapeutischeInterventionen: { label: 'Therapeutische Interventionen', order: 5, isList: true },\n    gesamteindruck: { label: 'Gesamteindruck', order: 6 },\n    risikoabschaetzung: { label: 'Risikoabschätzung (Suizidalität)', order: 7 },\n    hausaufgaben: { label: 'Hausaufgaben', order: 8, isList: true }\n};\n\nconst AbrechnungsUebersicht = ({ patient, availableTests, onAddBillingPeriod, quarterlyAnalysis, onEditSession, onDeleteSession, onDeleteBillingPeriod }) => {\n    const [selectedView, setSelectedView] = useState(null); // 'quarter-YYYY-Q-X' or 'session-ID'\n\n    const sortedQuarterKeys = useMemo(() => {\n        if (!quarterlyAnalysis) return [];\n        return Object.keys(quarterlyAnalysis).sort((a, b) => {\n            const [yearA, quarterA] = a.split('-Q');\n            const [yearB, quarterB] = b.split('-Q');\n            if (yearA !== yearB) return yearB - yearA;\n            return quarterB - quarterA;\n        });\n    }, [quarterlyAnalysis]);\n\n    useEffect(() => {\n        if (sortedQuarterKeys.length > 0 && !selectedView) {\n            setSelectedView(`quarter-${sortedQuarterKeys[0]}`);\n        } else if (sortedQuarterKeys.length === 0 && !selectedView && therapySessions.length > 0) {\n             setSelectedView(`session-${therapySessions[0].id}`);\n        }\n    }, [sortedQuarterKeys, selectedView]);\n\n    const therapySessions = useMemo(() => {\n        return (patient.sessions || [])\n            .filter(s => s.structuredNotes && s.structuredNotes.sitzungsnummer)\n            .sort((a, b) => new Date(b.date) - new Date(a.date));\n    }, [patient.sessions]);\n    \n    const { isAddDisabled, disabledReason } = useMemo(() => {\n        if (!patient) return { isAddDisabled: true, disabledReason: '' };\n        const nonProbatorikPeriods = patient.billingPeriods?.filter(p => p.type !== 'probatorik').length || 0;\n        const isKZT = patient.approvedHours <= 24;\n        const isLZT = patient.approvedHours > 24;\n        if (isKZT && nonProbatorikPeriods >= 3) {\n            return { isAddDisabled: true, disabledReason: \"Maximal 3 Zeiträume (Verlauf/Abschluss) für KZT erreicht.\" };\n        }\n        if (isLZT && nonProbatorikPeriods >= 7) {\n            return { isAddDisabled: true, disabledReason: \"Maximal 7 Zeiträume (Verlauf/Abschluss) für LZT erreicht.\" };\n        }\n        return { isAddDisabled: false, disabledReason: '' };\n    }, [patient]);\n\n\n    const handleCopySession = (notes) => {\n        const keysToCopy = Object.keys(notes).sort((a, b) => (fieldConfig[a]?.order || 99) - (fieldConfig[b]?.order || 99));\n\n        const textToCopy = keysToCopy.map(key => {\n            const value = notes[key];\n            if (!value) return null;\n            const label = fieldConfig[key]?.label || key;\n            let formattedValue;\n            if (Array.isArray(value)) {\n                formattedValue = value.map(item => `- ${item}`).join('\\n');\n            } else {\n                formattedValue = String(value);\n            }\n            return `${label}:\\n${formattedValue}`;\n        }).filter(Boolean).join('\\n\\n');\n\n        navigator.clipboard.writeText(textToCopy).then(() => alert('Sitzungsdoku in die Zwischenablage kopiert!'))\n            .catch(err => alert('Kopieren fehlgeschlagen.'));\n    };\n\n    const selectedQuarterKey = selectedView?.startsWith('quarter-') ? selectedView.substring(8) : null;\n    const selectedSessionId = selectedView?.startsWith('session-') ? selectedView.substring(8) : null;\n    const selectedQuarterDetails = quarterlyAnalysis ? quarterlyAnalysis[selectedQuarterKey] : null;\n    const selectedTherapySession = therapySessions.find(s => s.id === selectedSessionId);\n\n    return (\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            <div className=\"md:col-span-1 space-y-6\">\n                <div>\n                    <h4 className=\"text-lg font-bold text-gray-800 mb-2\">Diagnostik nach Quartal</h4>\n                    <div className=\"space-y-1 max-h-[25vh] overflow-y-auto pr-2\">\n                        {sortedQuarterKeys.length > 0 ? sortedQuarterKeys.map((key) => (\n                            <div\n                                key={key}\n                                onClick={() => setSelectedView(`quarter-${key}`)}\n                                className={`p-2 rounded-md cursor-pointer text-xs transition-colors flex justify-between items-center ${selectedQuarterKey === key ? 'bg-teal-600 text-white' : 'bg-gray-100 hover:bg-teal-50 text-gray-800'}`}\n                            >\n                                <p className=\"font-semibold\">{key}</p>\n                                <span className={`font-mono text-xs px-2 py-0.5 rounded-full ${selectedQuarterKey === key ? 'bg-white/20' : 'bg-gray-200'}`}>\n                                    {quarterlyAnalysis[key].pointsUsed} / {quarterlyAnalysis[key].pointsLimit} P.\n                                </span>\n                            </div>\n                        )) : <p className=\"text-xs text-gray-500 p-3 bg-gray-50 rounded-md\">Keine Diagnostik-Daten vorhanden.</p>}\n                    </div>\n                </div>\n\n                <div>\n                    <h4 className=\"text-lg font-bold text-gray-800 mb-2\">Verwaltete Abrechnungszeiträume</h4>\n                    <div className=\"space-y-1 max-h-[25vh] overflow-y-auto pr-2\">\n                         {(patient.billingPeriods || []).map((period) => (\n                            <div key={period.id} className=\"p-2 rounded-md bg-gray-100 text-gray-800 text-xs flex justify-between items-center\">\n                                <div>\n                                    <p className=\"font-semibold\">{period.name}</p>\n                                    <p className=\"text-gray-500\">Datum: {new Date(period.date).toLocaleDateString('de-DE')}</p>\n                                </div>\n                                <button\n                                    onClick={() => onDeleteBillingPeriod(period.id)}\n                                    className=\"p-1.5 text-gray-400 hover:bg-red-100 hover:text-red-600 rounded-full\"\n                                    title=\"Diesen Zeitraum löschen\"\n                                >\n                                    <TrashIcon className=\"w-4 h-4\"/>\n                                </button>\n                            </div>\n                        ))}\n                    </div>\n                    <button\n                        onClick={onAddBillingPeriod}\n                        disabled={isAddDisabled}\n                        title={disabledReason}\n                        className=\"mt-3 w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-3 rounded-md text-sm flex items-center justify-center transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed\"\n                    >\n                        Neuen Abrechnungszeitraum anlegen\n                    </button>\n                    {isAddDisabled && <p className=\"text-xs text-red-600 text-center mt-1\">{disabledReason}</p>}\n                </div>\n                \n                 <div>\n                    <h4 className=\"text-lg font-bold text-gray-800 mb-2\">Therapiesitzungen</h4>\n                     <div className=\"space-y-1 max-h-[25vh] overflow-y-auto pr-2\">\n                         {therapySessions.map(session => (\n                             <div key={session.id} onClick={() => setSelectedView(`session-${session.id}`)}\n                                 className={`p-2 rounded-md cursor-pointer text-xs transition-colors flex justify-between items-center ${selectedSessionId === session.id ? 'bg-teal-600 text-white' : 'bg-gray-100 hover:bg-teal-50 text-gray-800'}`}>\n                                 <p className=\"font-semibold\">Sitzung {session.structuredNotes.sitzungsnummer} - {new Date(session.date).toLocaleDateString('de-DE')}</p>\n                                  <div className=\"flex items-center flex-shrink-0\">\n                                    <button onClick={(e) => { e.stopPropagation(); onEditSession(session); }} className=\"p-1 hover:bg-white/20 rounded-full\"><EditIcon className=\"w-4 h-4\"/></button>\n                                    <button onClick={(e) => { e.stopPropagation(); onDeleteSession(session.id); }} className=\"p-1 hover:bg-white/20 rounded-full\"><TrashIcon className=\"w-4 h-4\"/></button>\n                                </div>\n                             </div>\n                         ))}\n                     </div>\n                </div>\n            </div>\n\n            <div className=\"md:col-span-2\">\n                {selectedQuarterDetails ? (\n                    <div className=\"bg-white p-4 rounded-lg shadow-sm border space-y-4\">\n                        <h4 className=\"text-lg font-semibold text-gray-700\">Details für Quartal: {selectedQuarterKey}</h4>\n                        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n                            <h5 className=\"font-semibold text-blue-800 mb-2\">Durchgeführte Tests in diesem Quartal</h5>\n                            {(selectedQuarterDetails.tests && selectedQuarterDetails.tests.length > 0) ? (\n                                <table className=\"w-full text-sm\">\n                                    <thead>\n                                        <tr className=\"border-b border-blue-200\"><th className=\"py-1 text-left font-semibold\">Test</th><th className=\"py-1 text-left font-semibold\">Datum</th><th className=\"py-1 text-right font-semibold\">Punkte</th></tr>\n                                    </thead>\n                                    <tbody>\n                                        {selectedQuarterDetails.tests.map((test, i) => (\n                                            <tr key={test.testInstanceId || i} className=\"border-b last:border-b-0 border-blue-100\">\n                                                <td className=\"py-2\">{test.name}</td>\n                                                <td className=\"py-2\">{new Date(test.date).toLocaleDateString('de-DE')}</td>\n                                                <td className=\"py-2 text-right font-mono\">{DIAGNOSTIK_PUNKTE[test.ebm] || 0}</td>\n                                            </tr>\n                                        ))}\n                                    </tbody>\n                                    <tfoot>\n                                        <tr className=\"font-bold border-t-2 border-blue-300\"><td colSpan=\"2\" className=\"pt-2 text-right\">Gesamt verbraucht:</td><td className=\"pt-2 text-right font-mono\">{selectedQuarterDetails.pointsUsed}</td></tr>\n                                        <tr className=\"font-bold\"><td colSpan=\"2\" className=\"pt-1 text-right text-gray-600\">Limit:</td><td className=\"pt-1 text-right font-mono text-gray-600\">{selectedQuarterDetails.pointsLimit}</td></tr>\n                                         <tr className=\"font-bold text-blue-800\"><td colSpan=\"2\" className=\"pt-1 text-right\">Verbleibend:</td><td className=\"pt-1 text-right font-mono\">{selectedQuarterDetails.pointsLimit - selectedQuarterDetails.pointsUsed}</td></tr>\n                                    </tfoot>\n                                </table>\n                            ) : <p className=\"text-sm text-gray-500\">In diesem Quartal wurden keine Tests durchgeführt.</p>}\n                        </div>\n                    </div>\n                ) : selectedTherapySession ? (\n                     <div className=\"bg-white p-4 rounded-lg shadow-sm border space-y-4\">\n                         <div className=\"flex justify-between items-start\">\n                            <h4 className=\"text-lg font-semibold text-gray-700\">Details für Sitzung {selectedTherapySession.structuredNotes.sitzungsnummer} vom {new Date(selectedTherapySession.date).toLocaleDateString('de-DE')}</h4>\n                            <button\n                                onClick={() => handleCopySession(selectedTherapySession.structuredNotes)}\n                                className=\"p-2 text-gray-500 hover:bg-gray-100 hover:text-teal-600 rounded-full transition-colors\"\n                                title=\"Sitzungsdokumentation in die Zwischenablage kopieren\"\n                            >\n                                <CopyIcon className=\"w-5 h-5\" />\n                            </button>\n                         </div>\n                         {(Object.keys(selectedTherapySession.structuredNotes || {}).sort((a, b) => (fieldConfig[a]?.order || 99) - (fieldConfig[b]?.order || 99))).map((key) => {\n                             const value = selectedTherapySession.structuredNotes[key];\n                             if (!value && value !== 0) return null;\n                             const config = fieldConfig[key] || {};\n                             const label = config.label || key.replace(/([A-Z])/g, ' $1').trim();\n                             const isList = config.isList || false;\n                             return (\n                                 <div key={key}>\n                                     <h6 className=\"font-semibold text-sm text-gray-600 capitalize\">{label}</h6>\n                                     {isList ? (\n                                        <div className=\"text-sm text-gray-800 bg-gray-50 p-3 rounded-md mt-1\">\n                                             <ul className=\"list-disc list-inside space-y-1\">\n                                                 {Array.isArray(value) ? value.map((item, index) => <li key={index}>{item}</li>) : String(value).split('\\n').map((item, index) => item.trim() && <li key={index}>{item.trim().replace(/^- /, '')}</li>)}\n                                             </ul>\n                                        </div>\n                                     ) : (\n                                         <p className=\"text-sm text-gray-800 bg-gray-50 p-2 rounded-md mt-1 whitespace-pre-wrap\">{String(value)}</p>\n                                     )}\n                                 </div>\n                             );\n                         })}\n                    </div>\n                ) : (\n                    <div className=\"flex items-center justify-center h-full bg-gray-50 rounded-lg border\">\n                        <p className=\"text-gray-500\">Wählen Sie links einen Eintrag aus, um die Details anzuzeigen.</p>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default AbrechnungsUebersicht;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,OAAO,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5D,KAAM,CAAAC,QAAQ,CAAGC,IAAA,MAAC,CAAEC,SAAS,CAAG,SAAU,CAAC,CAAAD,IAAA,oBAAKF,KAAA,QAAKI,KAAK,CAAC,4BAA4B,CAACC,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACP,SAAS,CAAEA,SAAU,CAAAQ,QAAA,eAACb,IAAA,SAAMc,CAAC,CAAC,4DAA4D,CAAO,CAAC,cAAAd,IAAA,SAAMc,CAAC,CAAC,yDAAyD,CAAO,CAAC,EAAK,CAAC,GAC5X,KAAM,CAAAC,SAAS,CAAGC,KAAA,MAAC,CAAEX,SAAS,CAAG,SAAU,CAAC,CAAAW,KAAA,oBAAKd,KAAA,QAAKI,KAAK,CAAC,4BAA4B,CAACC,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACP,SAAS,CAAEA,SAAU,CAAAQ,QAAA,eAACb,IAAA,aAAUiB,MAAM,CAAC,cAAc,CAAW,CAAC,cAAAjB,IAAA,SAAMc,CAAC,CAAC,gFAAgF,CAAO,CAAC,EAAK,CAAC,GACnX,KAAM,CAAAI,QAAQ,CAAGC,KAAA,MAAC,CAAEd,SAAS,CAAG,SAAU,CAAC,CAAAc,KAAA,oBAAKjB,KAAA,QAAKI,KAAK,CAAC,4BAA4B,CAACC,OAAO,CAAC,WAAW,CAACC,IAAI,CAAC,MAAM,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAACC,aAAa,CAAC,OAAO,CAACC,cAAc,CAAC,OAAO,CAACP,SAAS,CAAEA,SAAU,CAAAQ,QAAA,eAACb,IAAA,SAAMoB,CAAC,CAAC,GAAG,CAACC,CAAC,CAAC,GAAG,CAACC,KAAK,CAAC,IAAI,CAACC,MAAM,CAAC,IAAI,CAACC,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,GAAG,CAAO,CAAC,cAAAzB,IAAA,SAAMc,CAAC,CAAC,yDAAyD,CAAO,CAAC,EAAK,CAAC,GAE9W,KAAM,CAAAY,iBAAiB,CAAG,CAAE,OAAO,CAAE,EAAE,CAAE,OAAO,CAAE,EAAE,CAAE,OAAO,CAAE,EAAG,CAAC,CAEnE,KAAM,CAAAC,WAAW,CAAG,CAChBC,cAAc,CAAE,CAAEC,KAAK,CAAE,gBAAgB,CAAEC,KAAK,CAAE,CAAE,CAAC,CACrDC,KAAK,CAAE,CAAEF,KAAK,CAAE,mBAAmB,CAAEC,KAAK,CAAE,CAAE,CAAC,CAC/CE,gBAAgB,CAAE,CAAEH,KAAK,CAAE,kBAAkB,CAAEC,KAAK,CAAE,CAAE,CAAC,CACzDG,gCAAgC,CAAE,CAAEJ,KAAK,CAAE,oDAAoD,CAAEC,KAAK,CAAE,CAAE,CAAC,CAC3GI,4BAA4B,CAAE,CAAEL,KAAK,CAAE,+BAA+B,CAAEC,KAAK,CAAE,CAAC,CAAEK,MAAM,CAAE,IAAK,CAAC,CAChGC,cAAc,CAAE,CAAEP,KAAK,CAAE,gBAAgB,CAAEC,KAAK,CAAE,CAAE,CAAC,CACrDO,kBAAkB,CAAE,CAAER,KAAK,CAAE,kCAAkC,CAAEC,KAAK,CAAE,CAAE,CAAC,CAC3EQ,YAAY,CAAE,CAAET,KAAK,CAAE,cAAc,CAAEC,KAAK,CAAE,CAAC,CAAEK,MAAM,CAAE,IAAK,CAClE,CAAC,CAED,KAAM,CAAAI,qBAAqB,CAAGC,KAAA,EAA+H,IAA9H,CAAEC,OAAO,CAAEC,cAAc,CAAEC,kBAAkB,CAAEC,iBAAiB,CAAEC,aAAa,CAAEC,eAAe,CAAEC,qBAAsB,CAAC,CAAAP,KAAA,CACpJ,KAAM,CAACQ,YAAY,CAAEC,eAAe,CAAC,CAAGrD,QAAQ,CAAC,IAAI,CAAC,CAAE;AAExD,KAAM,CAAAsD,iBAAiB,CAAGrD,OAAO,CAAC,IAAM,CACpC,GAAI,CAAC+C,iBAAiB,CAAE,MAAO,EAAE,CACjC,MAAO,CAAAO,MAAM,CAACC,IAAI,CAACR,iBAAiB,CAAC,CAACS,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,CACjD,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGH,CAAC,CAACI,KAAK,CAAC,IAAI,CAAC,CACvC,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGL,CAAC,CAACG,KAAK,CAAC,IAAI,CAAC,CACvC,GAAIF,KAAK,GAAKG,KAAK,CAAE,MAAO,CAAAA,KAAK,CAAGH,KAAK,CACzC,MAAO,CAAAI,QAAQ,CAAGH,QAAQ,CAC9B,CAAC,CAAC,CACN,CAAC,CAAE,CAACb,iBAAiB,CAAC,CAAC,CAEvB9C,SAAS,CAAC,IAAM,CACZ,GAAIoD,iBAAiB,CAACW,MAAM,CAAG,CAAC,EAAI,CAACb,YAAY,CAAE,CAC/CC,eAAe,YAAAa,MAAA,CAAYZ,iBAAiB,CAAC,CAAC,CAAC,CAAE,CAAC,CACtD,CAAC,IAAM,IAAIA,iBAAiB,CAACW,MAAM,GAAK,CAAC,EAAI,CAACb,YAAY,EAAIe,eAAe,CAACF,MAAM,CAAG,CAAC,CAAE,CACrFZ,eAAe,YAAAa,MAAA,CAAYC,eAAe,CAAC,CAAC,CAAC,CAACC,EAAE,CAAE,CAAC,CACxD,CACJ,CAAC,CAAE,CAACd,iBAAiB,CAAEF,YAAY,CAAC,CAAC,CAErC,KAAM,CAAAe,eAAe,CAAGlE,OAAO,CAAC,IAAM,CAClC,MAAO,CAAC4C,OAAO,CAACwB,QAAQ,EAAI,EAAE,EACzBC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACC,eAAe,EAAID,CAAC,CAACC,eAAe,CAACxC,cAAc,CAAC,CAClEyB,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,GAAI,CAAAc,IAAI,CAACd,CAAC,CAACe,IAAI,CAAC,CAAG,GAAI,CAAAD,IAAI,CAACf,CAAC,CAACgB,IAAI,CAAC,CAAC,CAC5D,CAAC,CAAE,CAAC7B,OAAO,CAACwB,QAAQ,CAAC,CAAC,CAEtB,KAAM,CAAEM,aAAa,CAAEC,cAAe,CAAC,CAAG3E,OAAO,CAAC,IAAM,KAAA4E,qBAAA,CACpD,GAAI,CAAChC,OAAO,CAAE,MAAO,CAAE8B,aAAa,CAAE,IAAI,CAAEC,cAAc,CAAE,EAAG,CAAC,CAChE,KAAM,CAAAE,oBAAoB,CAAG,EAAAD,qBAAA,CAAAhC,OAAO,CAACkC,cAAc,UAAAF,qBAAA,iBAAtBA,qBAAA,CAAwBP,MAAM,CAACU,CAAC,EAAIA,CAAC,CAACC,IAAI,GAAK,YAAY,CAAC,CAAChB,MAAM,GAAI,CAAC,CACrG,KAAM,CAAAiB,KAAK,CAAGrC,OAAO,CAACsC,aAAa,EAAI,EAAE,CACzC,KAAM,CAAAC,KAAK,CAAGvC,OAAO,CAACsC,aAAa,CAAG,EAAE,CACxC,GAAID,KAAK,EAAIJ,oBAAoB,EAAI,CAAC,CAAE,CACpC,MAAO,CAAEH,aAAa,CAAE,IAAI,CAAEC,cAAc,CAAE,2DAA4D,CAAC,CAC/G,CACA,GAAIQ,KAAK,EAAIN,oBAAoB,EAAI,CAAC,CAAE,CACpC,MAAO,CAAEH,aAAa,CAAE,IAAI,CAAEC,cAAc,CAAE,2DAA4D,CAAC,CAC/G,CACA,MAAO,CAAED,aAAa,CAAE,KAAK,CAAEC,cAAc,CAAE,EAAG,CAAC,CACvD,CAAC,CAAE,CAAC/B,OAAO,CAAC,CAAC,CAGb,KAAM,CAAAwC,iBAAiB,CAAIC,KAAK,EAAK,CACjC,KAAM,CAAAC,UAAU,CAAGhC,MAAM,CAACC,IAAI,CAAC8B,KAAK,CAAC,CAAC7B,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,QAAA6B,cAAA,CAAAC,cAAA,OAAK,CAAC,EAAAD,cAAA,CAAAzD,WAAW,CAAC2B,CAAC,CAAC,UAAA8B,cAAA,iBAAdA,cAAA,CAAgBtD,KAAK,GAAI,EAAE,GAAK,EAAAuD,cAAA,CAAA1D,WAAW,CAAC4B,CAAC,CAAC,UAAA8B,cAAA,iBAAdA,cAAA,CAAgBvD,KAAK,GAAI,EAAE,CAAC,GAAC,CAEnH,KAAM,CAAAwD,UAAU,CAAGH,UAAU,CAACI,GAAG,CAACC,GAAG,EAAI,KAAAC,gBAAA,CACrC,KAAM,CAAAC,KAAK,CAAGR,KAAK,CAACM,GAAG,CAAC,CACxB,GAAI,CAACE,KAAK,CAAE,MAAO,KAAI,CACvB,KAAM,CAAA7D,KAAK,CAAG,EAAA4D,gBAAA,CAAA9D,WAAW,CAAC6D,GAAG,CAAC,UAAAC,gBAAA,iBAAhBA,gBAAA,CAAkB5D,KAAK,GAAI2D,GAAG,CAC5C,GAAI,CAAAG,cAAc,CAClB,GAAIC,KAAK,CAACC,OAAO,CAACH,KAAK,CAAC,CAAE,CACtBC,cAAc,CAAGD,KAAK,CAACH,GAAG,CAACO,IAAI,OAAAhC,MAAA,CAASgC,IAAI,CAAE,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,CAC9D,CAAC,IAAM,CACHJ,cAAc,CAAGK,MAAM,CAACN,KAAK,CAAC,CAClC,CACA,SAAA5B,MAAA,CAAUjC,KAAK,QAAAiC,MAAA,CAAM6B,cAAc,EACvC,CAAC,CAAC,CAACzB,MAAM,CAAC+B,OAAO,CAAC,CAACF,IAAI,CAAC,MAAM,CAAC,CAE/BG,SAAS,CAACC,SAAS,CAACC,SAAS,CAACd,UAAU,CAAC,CAACe,IAAI,CAAC,IAAMC,KAAK,CAAC,6CAA6C,CAAC,CAAC,CACrGC,KAAK,CAACC,GAAG,EAAIF,KAAK,CAAC,0BAA0B,CAAC,CAAC,CACxD,CAAC,CAED,KAAM,CAAAG,kBAAkB,CAAGzD,YAAY,SAAZA,YAAY,WAAZA,YAAY,CAAE0D,UAAU,CAAC,UAAU,CAAC,CAAG1D,YAAY,CAAC2D,SAAS,CAAC,CAAC,CAAC,CAAG,IAAI,CAClG,KAAM,CAAAC,iBAAiB,CAAG5D,YAAY,SAAZA,YAAY,WAAZA,YAAY,CAAE0D,UAAU,CAAC,UAAU,CAAC,CAAG1D,YAAY,CAAC2D,SAAS,CAAC,CAAC,CAAC,CAAG,IAAI,CACjG,KAAM,CAAAE,sBAAsB,CAAGjE,iBAAiB,CAAGA,iBAAiB,CAAC6D,kBAAkB,CAAC,CAAG,IAAI,CAC/F,KAAM,CAAAK,sBAAsB,CAAG/C,eAAe,CAACgD,IAAI,CAAC5C,CAAC,EAAIA,CAAC,CAACH,EAAE,GAAK4C,iBAAiB,CAAC,CAEpF,mBACI1G,KAAA,QAAKG,SAAS,CAAC,uCAAuC,CAAAQ,QAAA,eAClDX,KAAA,QAAKG,SAAS,CAAC,yBAAyB,CAAAQ,QAAA,eACpCX,KAAA,QAAAW,QAAA,eACIb,IAAA,OAAIK,SAAS,CAAC,sCAAsC,CAAAQ,QAAA,CAAC,yBAAuB,CAAI,CAAC,cACjFb,IAAA,QAAKK,SAAS,CAAC,6CAA6C,CAAAQ,QAAA,CACvDqC,iBAAiB,CAACW,MAAM,CAAG,CAAC,CAAGX,iBAAiB,CAACqC,GAAG,CAAEC,GAAG,eACtDtF,KAAA,QAEI8G,OAAO,CAAEA,CAAA,GAAM/D,eAAe,YAAAa,MAAA,CAAY0B,GAAG,CAAE,CAAE,CACjDnF,SAAS,8FAAAyD,MAAA,CAA+F2C,kBAAkB,GAAKjB,GAAG,CAAG,wBAAwB,CAAG,4CAA4C,CAAG,CAAA3E,QAAA,eAE/Mb,IAAA,MAAGK,SAAS,CAAC,eAAe,CAAAQ,QAAA,CAAE2E,GAAG,CAAI,CAAC,cACtCtF,KAAA,SAAMG,SAAS,+CAAAyD,MAAA,CAAgD2C,kBAAkB,GAAKjB,GAAG,CAAG,aAAa,CAAG,aAAa,CAAG,CAAA3E,QAAA,EACvH+B,iBAAiB,CAAC4C,GAAG,CAAC,CAACyB,UAAU,CAAC,KAAG,CAACrE,iBAAiB,CAAC4C,GAAG,CAAC,CAAC0B,WAAW,CAAC,KAC9E,EAAM,CAAC,GAPF1B,GAQJ,CACR,CAAC,cAAGxF,IAAA,MAAGK,SAAS,CAAC,iDAAiD,CAAAQ,QAAA,CAAC,mCAAiC,CAAG,CAAC,CACxG,CAAC,EACL,CAAC,cAENX,KAAA,QAAAW,QAAA,eACIb,IAAA,OAAIK,SAAS,CAAC,sCAAsC,CAAAQ,QAAA,CAAC,oCAA+B,CAAI,CAAC,cACzFb,IAAA,QAAKK,SAAS,CAAC,6CAA6C,CAAAQ,QAAA,CACtD,CAAC4B,OAAO,CAACkC,cAAc,EAAI,EAAE,EAAEY,GAAG,CAAE4B,MAAM,eACxCjH,KAAA,QAAqBG,SAAS,CAAC,oFAAoF,CAAAQ,QAAA,eAC/GX,KAAA,QAAAW,QAAA,eACIb,IAAA,MAAGK,SAAS,CAAC,eAAe,CAAAQ,QAAA,CAAEsG,MAAM,CAACC,IAAI,CAAI,CAAC,cAC9ClH,KAAA,MAAGG,SAAS,CAAC,eAAe,CAAAQ,QAAA,EAAC,SAAO,CAAC,GAAI,CAAAwD,IAAI,CAAC8C,MAAM,CAAC7C,IAAI,CAAC,CAAC+C,kBAAkB,CAAC,OAAO,CAAC,EAAI,CAAC,EAC1F,CAAC,cACNrH,IAAA,WACIgH,OAAO,CAAEA,CAAA,GAAMjE,qBAAqB,CAACoE,MAAM,CAACnD,EAAE,CAAE,CAChD3D,SAAS,CAAC,sEAAsE,CAChFiH,KAAK,CAAC,4BAAyB,CAAAzG,QAAA,cAE/Bb,IAAA,CAACe,SAAS,EAACV,SAAS,CAAC,SAAS,CAAC,CAAC,CAC5B,CAAC,GAXH8G,MAAM,CAACnD,EAYZ,CACR,CAAC,CACD,CAAC,cACNhE,IAAA,WACIgH,OAAO,CAAErE,kBAAmB,CAC5B4E,QAAQ,CAAEhD,aAAc,CACxB+C,KAAK,CAAE9C,cAAe,CACtBnE,SAAS,CAAC,qMAAqM,CAAAQ,QAAA,CAClN,mCAED,CAAQ,CAAC,CACR0D,aAAa,eAAIvE,IAAA,MAAGK,SAAS,CAAC,uCAAuC,CAAAQ,QAAA,CAAE2D,cAAc,CAAI,CAAC,EAC1F,CAAC,cAELtE,KAAA,QAAAW,QAAA,eACGb,IAAA,OAAIK,SAAS,CAAC,sCAAsC,CAAAQ,QAAA,CAAC,mBAAiB,CAAI,CAAC,cAC1Eb,IAAA,QAAKK,SAAS,CAAC,6CAA6C,CAAAQ,QAAA,CACvDkD,eAAe,CAACwB,GAAG,CAACiC,OAAO,eACxBtH,KAAA,QAAsB8G,OAAO,CAAEA,CAAA,GAAM/D,eAAe,YAAAa,MAAA,CAAY0D,OAAO,CAACxD,EAAE,CAAE,CAAE,CAC1E3D,SAAS,8FAAAyD,MAAA,CAA+F8C,iBAAiB,GAAKY,OAAO,CAACxD,EAAE,CAAG,wBAAwB,CAAG,4CAA4C,CAAG,CAAAnD,QAAA,eACrNX,KAAA,MAAGG,SAAS,CAAC,eAAe,CAAAQ,QAAA,EAAC,UAAQ,CAAC2G,OAAO,CAACpD,eAAe,CAACxC,cAAc,CAAC,KAAG,CAAC,GAAI,CAAAyC,IAAI,CAACmD,OAAO,CAAClD,IAAI,CAAC,CAAC+C,kBAAkB,CAAC,OAAO,CAAC,EAAI,CAAC,cACvInH,KAAA,QAAKG,SAAS,CAAC,iCAAiC,CAAAQ,QAAA,eAC9Cb,IAAA,WAAQgH,OAAO,CAAGS,CAAC,EAAK,CAAEA,CAAC,CAACC,eAAe,CAAC,CAAC,CAAE7E,aAAa,CAAC2E,OAAO,CAAC,CAAE,CAAE,CAACnH,SAAS,CAAC,oCAAoC,CAAAQ,QAAA,cAACb,IAAA,CAACG,QAAQ,EAACE,SAAS,CAAC,SAAS,CAAC,CAAC,CAAQ,CAAC,cACjKL,IAAA,WAAQgH,OAAO,CAAGS,CAAC,EAAK,CAAEA,CAAC,CAACC,eAAe,CAAC,CAAC,CAAE5E,eAAe,CAAC0E,OAAO,CAACxD,EAAE,CAAC,CAAE,CAAE,CAAC3D,SAAS,CAAC,oCAAoC,CAAAQ,QAAA,cAACb,IAAA,CAACe,SAAS,EAACV,SAAS,CAAC,SAAS,CAAC,CAAC,CAAQ,CAAC,EACtK,CAAC,GANCmH,OAAO,CAACxD,EAOb,CACR,CAAC,CACD,CAAC,EACN,CAAC,EACL,CAAC,cAENhE,IAAA,QAAKK,SAAS,CAAC,eAAe,CAAAQ,QAAA,CACzBgG,sBAAsB,cACnB3G,KAAA,QAAKG,SAAS,CAAC,oDAAoD,CAAAQ,QAAA,eAC/DX,KAAA,OAAIG,SAAS,CAAC,qCAAqC,CAAAQ,QAAA,EAAC,0BAAqB,CAAC4F,kBAAkB,EAAK,CAAC,cAClGvG,KAAA,QAAKG,SAAS,CAAC,kDAAkD,CAAAQ,QAAA,eAC7Db,IAAA,OAAIK,SAAS,CAAC,kCAAkC,CAAAQ,QAAA,CAAC,0CAAqC,CAAI,CAAC,CACzFgG,sBAAsB,CAACc,KAAK,EAAId,sBAAsB,CAACc,KAAK,CAAC9D,MAAM,CAAG,CAAC,cACrE3D,KAAA,UAAOG,SAAS,CAAC,gBAAgB,CAAAQ,QAAA,eAC7Bb,IAAA,UAAAa,QAAA,cACIX,KAAA,OAAIG,SAAS,CAAC,0BAA0B,CAAAQ,QAAA,eAACb,IAAA,OAAIK,SAAS,CAAC,8BAA8B,CAAAQ,QAAA,CAAC,MAAI,CAAI,CAAC,cAAAb,IAAA,OAAIK,SAAS,CAAC,8BAA8B,CAAAQ,QAAA,CAAC,OAAK,CAAI,CAAC,cAAAb,IAAA,OAAIK,SAAS,CAAC,+BAA+B,CAAAQ,QAAA,CAAC,QAAM,CAAI,CAAC,EAAI,CAAC,CACjN,CAAC,cACRb,IAAA,UAAAa,QAAA,CACKgG,sBAAsB,CAACc,KAAK,CAACpC,GAAG,CAAC,CAACqC,IAAI,CAAEC,CAAC,gBACtC3H,KAAA,OAAmCG,SAAS,CAAC,0CAA0C,CAAAQ,QAAA,eACnFb,IAAA,OAAIK,SAAS,CAAC,MAAM,CAAAQ,QAAA,CAAE+G,IAAI,CAACR,IAAI,CAAK,CAAC,cACrCpH,IAAA,OAAIK,SAAS,CAAC,MAAM,CAAAQ,QAAA,CAAE,GAAI,CAAAwD,IAAI,CAACuD,IAAI,CAACtD,IAAI,CAAC,CAAC+C,kBAAkB,CAAC,OAAO,CAAC,CAAK,CAAC,cAC3ErH,IAAA,OAAIK,SAAS,CAAC,2BAA2B,CAAAQ,QAAA,CAAEa,iBAAiB,CAACkG,IAAI,CAACE,GAAG,CAAC,EAAI,CAAC,CAAK,CAAC,GAH5EF,IAAI,CAACG,cAAc,EAAIF,CAI5B,CACP,CAAC,CACC,CAAC,cACR3H,KAAA,UAAAW,QAAA,eACIX,KAAA,OAAIG,SAAS,CAAC,sCAAsC,CAAAQ,QAAA,eAACb,IAAA,OAAIgI,OAAO,CAAC,GAAG,CAAC3H,SAAS,CAAC,iBAAiB,CAAAQ,QAAA,CAAC,oBAAkB,CAAI,CAAC,cAAAb,IAAA,OAAIK,SAAS,CAAC,2BAA2B,CAAAQ,QAAA,CAAEgG,sBAAsB,CAACI,UAAU,CAAK,CAAC,EAAI,CAAC,cAC/M/G,KAAA,OAAIG,SAAS,CAAC,WAAW,CAAAQ,QAAA,eAACb,IAAA,OAAIgI,OAAO,CAAC,GAAG,CAAC3H,SAAS,CAAC,+BAA+B,CAAAQ,QAAA,CAAC,QAAM,CAAI,CAAC,cAAAb,IAAA,OAAIK,SAAS,CAAC,yCAAyC,CAAAQ,QAAA,CAAEgG,sBAAsB,CAACK,WAAW,CAAK,CAAC,EAAI,CAAC,cACpMhH,KAAA,OAAIG,SAAS,CAAC,yBAAyB,CAAAQ,QAAA,eAACb,IAAA,OAAIgI,OAAO,CAAC,GAAG,CAAC3H,SAAS,CAAC,iBAAiB,CAAAQ,QAAA,CAAC,cAAY,CAAI,CAAC,cAAAb,IAAA,OAAIK,SAAS,CAAC,2BAA2B,CAAAQ,QAAA,CAAEgG,sBAAsB,CAACK,WAAW,CAAGL,sBAAsB,CAACI,UAAU,CAAK,CAAC,EAAI,CAAC,EAC/N,CAAC,EACL,CAAC,cACRjH,IAAA,MAAGK,SAAS,CAAC,uBAAuB,CAAAQ,QAAA,CAAC,uDAAkD,CAAG,CAAC,EAC9F,CAAC,EACL,CAAC,CACNiG,sBAAsB,cACrB5G,KAAA,QAAKG,SAAS,CAAC,oDAAoD,CAAAQ,QAAA,eAC/DX,KAAA,QAAKG,SAAS,CAAC,kCAAkC,CAAAQ,QAAA,eAC9CX,KAAA,OAAIG,SAAS,CAAC,qCAAqC,CAAAQ,QAAA,EAAC,yBAAoB,CAACiG,sBAAsB,CAAC1C,eAAe,CAACxC,cAAc,CAAC,OAAK,CAAC,GAAI,CAAAyC,IAAI,CAACyC,sBAAsB,CAACxC,IAAI,CAAC,CAAC+C,kBAAkB,CAAC,OAAO,CAAC,EAAK,CAAC,cAC5MrH,IAAA,WACIgH,OAAO,CAAEA,CAAA,GAAM/B,iBAAiB,CAAC6B,sBAAsB,CAAC1C,eAAe,CAAE,CACzE/D,SAAS,CAAC,wFAAwF,CAClGiH,KAAK,CAAC,sDAAsD,CAAAzG,QAAA,cAE5Db,IAAA,CAACkB,QAAQ,EAACb,SAAS,CAAC,SAAS,CAAE,CAAC,CAC5B,CAAC,EACP,CAAC,CACJ8C,MAAM,CAACC,IAAI,CAAC0D,sBAAsB,CAAC1C,eAAe,EAAI,CAAC,CAAC,CAAC,CAACf,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,QAAA0E,eAAA,CAAAC,eAAA,OAAK,CAAC,EAAAD,eAAA,CAAAtG,WAAW,CAAC2B,CAAC,CAAC,UAAA2E,eAAA,iBAAdA,eAAA,CAAgBnG,KAAK,GAAI,EAAE,GAAK,EAAAoG,eAAA,CAAAvG,WAAW,CAAC4B,CAAC,CAAC,UAAA2E,eAAA,iBAAdA,eAAA,CAAgBpG,KAAK,GAAI,EAAE,CAAC,GAAC,CAAEyD,GAAG,CAAEC,GAAG,EAAK,CACpJ,KAAM,CAAAE,KAAK,CAAGoB,sBAAsB,CAAC1C,eAAe,CAACoB,GAAG,CAAC,CACzD,GAAI,CAACE,KAAK,EAAIA,KAAK,GAAK,CAAC,CAAE,MAAO,KAAI,CACtC,KAAM,CAAAyC,MAAM,CAAGxG,WAAW,CAAC6D,GAAG,CAAC,EAAI,CAAC,CAAC,CACrC,KAAM,CAAA3D,KAAK,CAAGsG,MAAM,CAACtG,KAAK,EAAI2D,GAAG,CAAC4C,OAAO,CAAC,UAAU,CAAE,KAAK,CAAC,CAACC,IAAI,CAAC,CAAC,CACnE,KAAM,CAAAlG,MAAM,CAAGgG,MAAM,CAAChG,MAAM,EAAI,KAAK,CACrC,mBACIjC,KAAA,QAAAW,QAAA,eACIb,IAAA,OAAIK,SAAS,CAAC,gDAAgD,CAAAQ,QAAA,CAAEgB,KAAK,CAAK,CAAC,CAC1EM,MAAM,cACJnC,IAAA,QAAKK,SAAS,CAAC,sDAAsD,CAAAQ,QAAA,cAChEb,IAAA,OAAIK,SAAS,CAAC,iCAAiC,CAAAQ,QAAA,CAC1C+E,KAAK,CAACC,OAAO,CAACH,KAAK,CAAC,CAAGA,KAAK,CAACH,GAAG,CAAC,CAACO,IAAI,CAAEwC,KAAK,gBAAKtI,IAAA,OAAAa,QAAA,CAAiBiF,IAAI,EAAZwC,KAAiB,CAAC,CAAC,CAAGtC,MAAM,CAACN,KAAK,CAAC,CAAChC,KAAK,CAAC,IAAI,CAAC,CAAC6B,GAAG,CAAC,CAACO,IAAI,CAAEwC,KAAK,GAAKxC,IAAI,CAACuC,IAAI,CAAC,CAAC,eAAIrI,IAAA,OAAAa,QAAA,CAAiBiF,IAAI,CAACuC,IAAI,CAAC,CAAC,CAACD,OAAO,CAAC,KAAK,CAAE,EAAE,CAAC,EAAtCE,KAA2C,CAAC,CAAC,CACtM,CAAC,CACL,CAAC,cAELtI,IAAA,MAAGK,SAAS,CAAC,0EAA0E,CAAAQ,QAAA,CAAEmF,MAAM,CAACN,KAAK,CAAC,CAAI,CAC7G,GAVKF,GAWL,CAAC,CAEd,CAAC,CAAC,EACF,CAAC,cAENxF,IAAA,QAAKK,SAAS,CAAC,sEAAsE,CAAAQ,QAAA,cACjFb,IAAA,MAAGK,SAAS,CAAC,eAAe,CAAAQ,QAAA,CAAC,mEAA8D,CAAG,CAAC,CAC9F,CACR,CACA,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAA0B,qBAAqB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}