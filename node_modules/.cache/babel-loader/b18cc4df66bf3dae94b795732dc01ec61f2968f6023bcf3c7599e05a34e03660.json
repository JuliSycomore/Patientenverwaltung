{"ast":null,"code":"var _jsxFileName = \"/Users/julianrogowski/Desktop/patientenverwaltung-app/src/App.js\",\n  _s = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useRef, useMemo } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from 'firebase/auth';\nimport { getFirestore, collection, doc, addDoc, getDocs, setDoc, deleteDoc, onSnapshot, query, writeBatch } from 'firebase/firestore';\n\n// --- PLACEHOLDER COMPONENTS (da der Code nicht bereitgestellt wurde) ---\nconst SCL90RComponent = ({\n  patient,\n  onAddResult,\n  onDeleteResult\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"p-4 bg-gray-100 rounded-lg\",\n  children: [\"SCL-90-R Component Placeholder for patient \", patient === null || patient === void 0 ? void 0 : patient.name]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 13,\n  columnNumber: 71\n}, this);\n_c = SCL90RComponent;\nconst FEP2Component = ({\n  patient,\n  onAddResult,\n  onDeleteResult\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"p-4 bg-gray-100 rounded-lg\",\n  children: [\"FEP-2 Component Placeholder for patient \", patient === null || patient === void 0 ? void 0 : patient.name]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 14,\n  columnNumber: 69\n}, this);\n_c2 = FEP2Component;\nconst BDI2Component = ({\n  patient,\n  onAddResult,\n  onDeleteResult,\n  bdiCutoffs,\n  bdiAxisTicks,\n  CustomBdiLabel\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"p-4 bg-gray-100 rounded-lg\",\n  children: [\"BDI-II Component Placeholder for patient \", patient === null || patient === void 0 ? void 0 : patient.name]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 15,\n  columnNumber: 111\n}, this);\n_c3 = BDI2Component;\nconst HSCL11Component = ({\n  patient,\n  onAddResult,\n  onDeleteResult\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"p-4 bg-gray-100 rounded-lg\",\n  children: [\"HSCL-11 Component Placeholder for patient \", patient === null || patient === void 0 ? void 0 : patient.name]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 16,\n  columnNumber: 71\n}, this);\n_c4 = HSCL11Component;\nconst ICD11ECTBrowser = ({\n  patients,\n  selectedPatient,\n  onAssignDiagnosis\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"p-4 bg-white rounded-lg shadow-sm border\",\n  children: \"ICD-11 Browser Placeholder\"\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 17,\n  columnNumber: 79\n}, this);\n_c5 = ICD11ECTBrowser;\nconst EBMBrowser = () => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"p-4 bg-white rounded-lg shadow-sm border\",\n  children: \"EBM Browser Placeholder\"\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 18,\n  columnNumber: 26\n}, this);\n_c6 = EBMBrowser;\nconst BillTestModal = ({\n  isOpen,\n  onClose,\n  onSave,\n  testToBill,\n  patientSessions\n}) => {\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen,\n    onClose: onClose,\n    title: \"Test abrechnen\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"BillTestModal Placeholder\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 76\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 12\n  }, this);\n};\n_c7 = BillTestModal;\nconst AddTestFlowModal = ({\n  isOpen,\n  onClose,\n  onSave,\n  testInfo,\n  patient\n}) => {\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen,\n    onClose: onClose,\n    title: \"Test hinzuf\\xFCgen\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"AddTestFlowModal Placeholder\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 77\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 12\n  }, this);\n};\n_c8 = AddTestFlowModal;\nconst ManualBillingSetupModal = ({\n  isOpen,\n  onClose,\n  patients,\n  onStart\n}) => {\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen,\n    onClose: onClose,\n    title: \"Sitzung manuell anlegen\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"ManualBillingSetupModal Placeholder\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 85\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 12\n  }, this);\n};\n_c9 = ManualBillingSetupModal;\nimport AbrechnungsUebersicht from './components/AbrechnungsUebersicht.js';\nimport BillingModal from './components/BillingModal.js';\nimport DiagnostikUebersicht from './components/DiagnostikUebersicht.js';\n\n// --- ICONS ---\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UserPlus = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 227\n  }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"9\",\n    cy: \"7\",\n    r: \"4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 281\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"19\",\n    x2: \"19\",\n    y1: \"8\",\n    y2: \"14\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 311\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"22\",\n    x2: \"16\",\n    y1: \"11\",\n    y2: \"11\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 350\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 37,\n  columnNumber: 50\n}, this);\n_c0 = UserPlus;\nconst Edit3 = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 20h9\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 224\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 245\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 38,\n  columnNumber: 47\n}, this);\n_c1 = Edit3;\nconst Trash2 = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"3 6 5 6 21 6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 225\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 259\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"10\",\n    y1: \"11\",\n    x2: \"10\",\n    y2: \"17\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 350\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"14\",\n    y1: \"11\",\n    x2: \"14\",\n    y2: \"17\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 390\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 39,\n  columnNumber: 48\n}, this);\n_c10 = Trash2;\nconst PlusCircleIcon = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"10\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 233\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"12\",\n    y1: \"8\",\n    x2: \"12\",\n    y2: \"16\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 266\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"8\",\n    y1: \"12\",\n    x2: \"16\",\n    y2: \"12\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 305\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 40,\n  columnNumber: 56\n}, this);\n_c11 = PlusCircleIcon;\nconst XCircle = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"10\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 226\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"15\",\n    y1: \"9\",\n    x2: \"9\",\n    y2: \"15\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 266\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"9\",\n    y1: \"9\",\n    x2: \"15\",\n    y2: \"15\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 309\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 41,\n  columnNumber: 49\n}, this);\n_c12 = XCircle;\nconst Save = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 223\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"17 21 17 13 7 13 7 21\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 299\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"7 3 7 8 15 8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 342\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 42,\n  columnNumber: 46\n}, this);\n_c13 = Save;\nconst AlertTriangle = ({\n  className = \"w-12 h-12\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 234\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"12\",\n    y1: \"9\",\n    x2: \"12\",\n    y2: \"13\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 340\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"12\",\n    y1: \"17\",\n    x2: \"12.01\",\n    y2: \"17\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 384\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 43,\n  columnNumber: 57\n}, this);\n_c14 = AlertTriangle;\nconst InfoIcon = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"10\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 227\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"12\",\n    y1: \"16\",\n    x2: \"12\",\n    y2: \"12\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 267\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"12\",\n    y1: \"8\",\n    x2: \"12.01\",\n    y2: \"8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 312\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 44,\n  columnNumber: 50\n}, this);\n_c15 = InfoIcon;\nconst FileJson2 = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 228\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M14 2v6h6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 292\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4 12h1.6a2 2 0 0 0 1.9-3.4L6 6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 314\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4 18h1.6a2 2 0 0 1 1.9 3.4L6 24\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 358\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 12h1.6a2 2 0 0 1 1.9-3.4L14 6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 403\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 18h1.6a2 2 0 0 0 1.9 3.4L14 24\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 449\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 45,\n  columnNumber: 51\n}, this);\n_c16 = FileJson2;\nconst WandSparkles = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"m9.5 2.55 1.294 1.294a1 1 0 0 0 1.414 0L13.5 2.55\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 231\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4.94 4.94 6.22 6.22a1 1 0 0 0 1.41 0l1.29-1.29\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 293\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M2.55 9.51 3.84 10.8a1 1 0 0 0 1.41 0l1.3-1.29\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 353\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"m19.07 4.93-1.29 1.29a1 1 0 0 1-1.41 0l-1.29-1.29\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 412\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M21.45 9.51l-1.29 1.29a1 1 0 0 1-1.41 0l-1.3-1.29\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 474\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M14.5 12.94a1 1 0 0 0 0 1.41l1.29 1.29\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 536\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M10.8 17.78a1 1 0 0 0 0 1.41l1.29 1.29\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 587\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M17.78 10.8a1 1 0 0 0 0 1.41l1.29 1.29\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 638\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 10.5V4.5\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 689\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 10.5C7 11 4 15 4 20\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 714\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 10.5c5 .5 8 4.5 8 9.5\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 750\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 46,\n  columnNumber: 54\n}, this);\n_c17 = WandSparkles;\nconst LogOut = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 225\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"16 17 21 12 16 7\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 277\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"21\",\n    y1: \"12\",\n    x2: \"9\",\n    y2: \"12\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 315\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 47,\n  columnNumber: 48\n}, this);\n_c18 = LogOut;\nconst BookOpen = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 227\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 279\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 48,\n  columnNumber: 50\n}, this);\n_c19 = BookOpen;\nconst Users = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 224\n  }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"9\",\n    cy: \"7\",\n    r: \"4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 277\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M22 21v-2a4 4 0 0 0-3-3.87\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 306\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M16 3.13a4 4 0 0 1 0 7.75\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 344\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 49,\n  columnNumber: 47\n}, this);\n_c20 = Users;\nconst FileText = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 227\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"14 2 14 8 20 8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 308\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"16\",\n    y1: \"13\",\n    x2: \"8\",\n    y2: \"13\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 343\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"16\",\n    y1: \"17\",\n    x2: \"8\",\n    y2: \"17\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 381\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"10\",\n    y1: \"9\",\n    x2: \"8\",\n    y2: \"9\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 419\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 50,\n  columnNumber: 50\n}, this);\n_c21 = FileText;\nconst List = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"8\",\n    x2: \"21\",\n    y1: \"6\",\n    y2: \"6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 223\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"8\",\n    x2: \"21\",\n    y1: \"12\",\n    y2: \"12\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 259\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"8\",\n    x2: \"21\",\n    y1: \"18\",\n    y2: \"18\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 297\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"3\",\n    x2: \"3.01\",\n    y1: \"6\",\n    y2: \"6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 335\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"3\",\n    x2: \"3.01\",\n    y1: \"12\",\n    y2: \"12\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 373\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"3\",\n    x2: \"3.01\",\n    y1: \"18\",\n    y2: \"18\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 413\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 51,\n  columnNumber: 46\n}, this);\n_c22 = List;\nconst CalendarIcon = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n    x: \"3\",\n    y: \"4\",\n    width: \"18\",\n    height: \"18\",\n    rx: \"2\",\n    ry: \"2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 231\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"16\",\n    y1: \"2\",\n    x2: \"16\",\n    y2: \"6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 293\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"8\",\n    y1: \"2\",\n    x2: \"8\",\n    y2: \"6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 336\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"3\",\n    y1: \"10\",\n    x2: \"21\",\n    y2: \"10\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 377\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 52,\n  columnNumber: 54\n}, this);\n_c23 = CalendarIcon;\nconst UploadCloudIcon = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 234\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 12v9\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 302\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"m16 16-4-4-4 4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 322\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 53,\n  columnNumber: 57\n}, this);\n_c24 = UploadCloudIcon;\nconst FileIcon = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 227\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"14 2 14 8 20 8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 308\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 54,\n  columnNumber: 50\n}, this);\n_c25 = FileIcon;\nconst PaperclipIcon = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.59a2 2 0 0 1-2.83-2.83l8.49-8.48\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 232\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 55,\n  columnNumber: 55\n}, this);\n\n// Firebase Konfiguration\n_c26 = PaperclipIcon;\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDZ_qqqKW7WDCZ9botek2VBwXNMQO3JYwU\",\n  authDomain: \"psychotherapie0512.firebaseapp.com\",\n  projectId: \"psychotherapie0512\",\n  storageBucket: \"psychotherapie0512.firebasestorage.app\",\n  messagingSenderId: \"131279046361\",\n  appId: \"1:131279046361:web:e5dd2d18b206fb820b60c8\"\n};\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst firestoreAppId = 'default-patient-app-v5';\n\n// Konstanten\nconst homeworkFailureReasons = {\n  \"Motivational\": [\"Geringe Motivation\", \"Zweifel am Nutzen der Hausaufgabe\", \"Keine Einsicht in die Relevanz\"],\n  \"Emotional\": [\"Angst vor Versagen\", \"Scham oder Schuldgefühle\", \"Vermeidung unangenehmer Gefühle\"],\n  \"Kognitive\": [\"Negative automatische Gedanken\", \"Perfektionismus\"],\n  \"Organisatorisch/Praktisch\": [\"Zeitmangel\", \"Vergessen\", \"Keine klaren Anweisungen oder Verständnisprobleme\"],\n  \"Interaktion mit Therapeut\": [\"Widerstand gegen den Therapeuten\", \"Beziehungskonflikte\", \"Mangel an Vertrauen\"],\n  \"Psychopathologisch\": [\"Konzentrationsprobleme\", \"Antriebslosigkeit\", \"Überwältigende Symptome\"]\n};\nconst availableTests = [{\n  id: 'scl90r',\n  name: 'SCL-90-R - Symptom-Checklist-90-R',\n  ebm: '35601',\n  recommendation: 10\n}, {\n  id: 'fep2',\n  name: 'FEP-2 - Fragebogen zur Erfassung von Persönlichkeitsstörungen',\n  ebm: '35601',\n  recommendation: 12\n}, {\n  id: 'bdi2',\n  name: 'BDI-II - Beck-Depressions-Inventar II',\n  ebm: '35600',\n  recommendation: 2\n}, {\n  id: 'hscl11',\n  name: 'HSCL-11 - Hopkins Symptom Checklist-11',\n  ebm: '35600',\n  recommendation: 1\n}];\nconst availableTherapeuticMethods = [\"Kognitive Verhaltenstherapie (KVT)\", \"Schematherapie\", \"Acceptance and Commitment Therapy (ACT)\", \"Dialektisch-Behaviorale Therapie (DBT)\", \"Eye Movement Desensitization and Reprocessing (EMDR)\", \"Tiefenpsychologisch fundierte Psychotherapie\", \"Systemische Therapie\"];\n\n// Hilfskomponenten\nconst Modal = ({\n  isOpen,\n  onClose,\n  title,\n  children,\n  size = \"lg\"\n}) => {\n  if (!isOpen) return null;\n  const sizeClasses = {\n    sm: 'max-w-sm',\n    md: 'max-w-md',\n    lg: 'max-w-lg',\n    xl: 'max-w-xl',\n    '2xl': 'max-w-2xl',\n    '3xl': 'max-w-3xl',\n    '4xl': 'max-w-4xl',\n    '5xl': 'max-w-5xl'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `bg-white p-6 rounded-lg shadow-xl w-full ${sizeClasses[size]} max-h-[90vh] overflow-y-auto`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold text-gray-800\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 553\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"text-gray-400 hover:text-gray-600\",\n          children: /*#__PURE__*/_jsxDEV(XCircle, {\n            className: \"w-7 h-7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 689\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 617\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 497\n      }, this), children]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 387\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 274\n  }, this);\n};\n_c27 = Modal;\nconst ConfirmationModal = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  message\n}) => {\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen,\n    onClose: onClose,\n    title: title,\n    size: \"md\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n        className: \"mx-auto mb-4 w-12 h-12 text-red-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 209\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-6\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 274\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none\",\n          children: \"Abbrechen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 368\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onConfirm,\n          className: \"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none\",\n          children: \"Best\\xE4tigen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 528\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 321\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 180\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 115\n  }, this);\n};\n_c28 = ConfirmationModal;\nconst PatientForm = ({\n  patient,\n  onSave,\n  onCancel\n}) => {\n  _s();\n  const initialFormData = {\n    name: '',\n    vorname: '',\n    chiffre: '',\n    geburtsdatum: '',\n    adresse: '',\n    email: '',\n    telefon: '',\n    krankenkasse: '',\n    versichertennummer: '',\n    therapeuticMethods: [],\n    approvedHours: 0,\n    diagnoses: [],\n    sessions: [],\n    hscl11Results: [],\n    bdi2Results: [],\n    fep2Results: [],\n    scl90rResults: [],\n    krankheitsanamnese: \"\",\n    lebensgeschichte: \"\",\n    problemanalyseMakro: \"\",\n    therapieplan: \"\"\n  };\n  const [formData, setFormData] = useState(patient ? {\n    ...initialFormData,\n    ...patient\n  } : initialFormData);\n  const [newMethod, setNewMethod] = useState(\"\");\n  useEffect(() => {\n    setFormData(patient ? {\n      ...initialFormData,\n      ...patient\n    } : initialFormData);\n  }, [patient]);\n  useEffect(() => {\n    const {\n      name,\n      geburtsdatum\n    } = formData;\n    if (name && geburtsdatum) {\n      try {\n        const firstLetter = name.charAt(0).toUpperCase();\n        const [year, month, day] = geburtsdatum.split('-');\n        if (year && month && day) {\n          const yy = year.slice(-2);\n          const newChiffre = `${firstLetter}${day}${month}${yy}`;\n          setFormData(prev => ({\n            ...prev,\n            chiffre: newChiffre\n          }));\n        }\n      } catch (e) {\n        console.error(\"Fehler bei der Chiffre-Generierung\", e);\n        setFormData(prev => ({\n          ...prev,\n          chiffre: ''\n        }));\n      }\n    } else {\n      if (formData.chiffre !== '') {\n        setFormData(prev => ({\n          ...prev,\n          chiffre: ''\n        }));\n      }\n    }\n  }, [formData.name, formData.geburtsdatum]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'number' ? parseInt(value, 10) || 0 : value\n    }));\n  };\n  const handleAddMethod = () => {\n    const currentMethods = formData.therapeuticMethods || [];\n    if (newMethod && !currentMethods.includes(newMethod)) {\n      setFormData(prev => ({\n        ...prev,\n        therapeuticMethods: [...currentMethods, newMethod]\n      }));\n      setNewMethod(\"\");\n    }\n  };\n  const handleRemoveMethod = methodToRemove => {\n    setFormData(prev => ({\n      ...prev,\n      therapeuticMethods: (prev.therapeuticMethods || []).filter(m => m !== methodToRemove)\n    }));\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    onSave(formData);\n  };\n  const inputStd = \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm\";\n  const btnPrimary = \"px-4 py-2 text-sm font-medium text-white bg-teal-600 rounded-md hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 flex items-center\";\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"space-y-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"vorname\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Vorname\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"vorname\",\n          id: \"vorname\",\n          value: formData.vorname,\n          onChange: handleChange,\n          required: true,\n          className: inputStd\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 114\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"name\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Nachname\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"name\",\n          id: \"name\",\n          value: formData.name,\n          onChange: handleChange,\n          required: true,\n          className: inputStd\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 112\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"geburtsdatum\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Geburtsdatum\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"date\",\n          name: \"geburtsdatum\",\n          id: \"geburtsdatum\",\n          value: formData.geburtsdatum,\n          onChange: handleChange,\n          required: true,\n          className: inputStd\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 124\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"chiffre\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Chiffre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"chiffre\",\n          id: \"chiffre\",\n          value: formData.chiffre,\n          readOnly: true,\n          className: \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100 sm:text-sm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 114\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"adresse\",\n        className: \"block text-sm font-medium text-gray-700\",\n        children: \"Adresse\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"adresse\",\n        id: \"adresse\",\n        value: formData.adresse,\n        onChange: handleChange,\n        className: inputStd\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 110\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"email\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"E-Mail\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          id: \"email\",\n          value: formData.email,\n          onChange: handleChange,\n          className: inputStd\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 111\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"telefon\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Telefon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"tel\",\n          name: \"telefon\",\n          id: \"telefon\",\n          value: formData.telefon,\n          onChange: handleChange,\n          className: inputStd\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 114\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"krankenkasse\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Krankenkasse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"krankenkasse\",\n          id: \"krankenkasse\",\n          value: formData.krankenkasse,\n          onChange: handleChange,\n          className: inputStd\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 124\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"versichertennummer\",\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Versichertennummer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"versichertennummer\",\n          id: \"versichertennummer\",\n          value: formData.versichertennummer,\n          onChange: handleChange,\n          className: inputStd\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 136\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-sm font-medium text-gray-700\",\n        children: \"Therapieverfahren\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-1 flex flex-wrap gap-2\",\n        children: (formData.therapeuticMethods || []).map(method => /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"flex items-center bg-teal-100 text-teal-800 text-xs font-medium px-2.5 py-0.5 rounded-full\",\n          children: [method, /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => handleRemoveMethod(method),\n            className: \"ml-1.5 text-teal-500 hover:text-teal-700\",\n            children: /*#__PURE__*/_jsxDEV(XCircle, {\n              className: \"h-3 w-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 29\n          }, this)]\n        }, method, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-2 flex items-center gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"select\", {\n          value: newMethod,\n          onChange: e => setNewMethod(e.target.value),\n          className: inputStd,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Verfahren ausw\\xE4hlen...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 25\n          }, this), availableTherapeuticMethods.filter(m => !(formData.therapeuticMethods || []).includes(m)).map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: m,\n            children: m\n          }, m, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 125\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleAddMethod,\n          className: \"bg-gray-200 p-2 rounded-md hover:bg-gray-300\",\n          children: /*#__PURE__*/_jsxDEV(PlusCircleIcon, {\n            className: \"h-5 w-5 text-gray-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"approvedHours\",\n        className: \"block text-sm font-medium text-gray-700\",\n        children: \"Genehmigte Stunden\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        name: \"approvedHours\",\n        id: \"approvedHours\",\n        value: formData.approvedHours,\n        onChange: handleChange,\n        min: \"0\",\n        className: inputStd\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 127\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-end space-x-3 pt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: onCancel,\n        className: \"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500\",\n        children: \"Abbrechen\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: btnPrimary,\n        children: [/*#__PURE__*/_jsxDEV(Save, {\n          className: \"w-4 h-4 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 62\n        }, this), \" Speichern\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 9\n  }, this);\n};\n_s(PatientForm, \"5rk14xd6daTVp5oeK2d0gbtgfzI=\");\n_c29 = PatientForm;\nasync function generateGeminiText(prompt) {\n  let chatHistory = [{\n    role: \"user\",\n    parts: [{\n      text: prompt\n    }]\n  }];\n  const payload = {\n    contents: chatHistory\n  };\n  const GEMINI_API_KEY = \"AIzaSyCWQFze_8cKDZ6W2DTqfqIcvhcsKWfuZLw\";\n  const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${GEMINI_API_KEY}`;\n  try {\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(payload)\n    });\n    if (!response.ok) {\n      var _errorData$error;\n      const errorData = await response.json();\n      console.error(\"Gemini API error details:\", errorData);\n      const errorMessage = ((_errorData$error = errorData.error) === null || _errorData$error === void 0 ? void 0 : _errorData$error.message) || `API request failed with status ${response.status}`;\n      throw new Error(errorMessage);\n    }\n    const result = await response.json();\n    if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {\n      return result.candidates[0].content.parts[0].text;\n    } else if (result.candidates && result.candidates.length > 0 && result.candidates[0].finishReason === \"SAFETY\") {\n      console.warn(\"Gemini API response blocked due to safety reasons.\");\n      return \"Die Antwort wurde aufgrund von Sicherheitsrichtlinien blockiert.\";\n    } else {\n      console.error(\"Unexpected Gemini API response structure:\", result);\n      throw new Error(\"Unerwartete Antwortstruktur von der API.\");\n    }\n  } catch (error) {\n    console.error(\"Error calling Gemini API:\", error);\n    throw error;\n  }\n}\nfunction App() {\n  _s4();\n  var _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _selectedPatient$sess,\n    _selectedPatient$sess2,\n    _diagnosisInfo$inkl,\n    _diagnosisInfo$exkl,\n    _diagnosisInfo$inclus,\n    _diagnosisInfo$exclus;\n  // --- States ---\n  const [mainView, setMainView] = useState('patients');\n  const [patients, setPatients] = useState([]);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [authError, setAuthError] = useState(null);\n  const [appError, setAppError] = useState(null);\n  const [userId, setUserId] = useState(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoginView, setIsLoginView] = useState(true);\n  const [isAuthLoading, setIsAuthLoading] = useState(false);\n  const [isPatientModalOpen, setIsPatientModalOpen] = useState(false);\n  const [editingPatient, setEditingPatient] = useState(null);\n  const [newDiagnosis, setNewDiagnosis] = useState('');\n  const [newDiagnosisCode, setNewDiagnosisCode] = useState('');\n  const [newDiagnosisSicherheit, setNewDiagnosisSicherheit] = useState('G');\n  const [lookedUpDiagnosisName, setLookedUpDiagnosisName] = useState('');\n  const [activeDetailTab, setActiveDetailTab] = useState('übersicht');\n  const [activeDiagnostikSubTab, setActiveDiagnostikSubTab] = useState('overview');\n  const [diagnosisInfo, setDiagnosisInfo] = useState({\n    code: '',\n    name: '',\n    beschreibung: '',\n    inkl: [],\n    exkl: [],\n    hinweise: [],\n    zusatz_info_code: '',\n    sicherheit: '',\n    isLoading: false,\n    error: null,\n    isOpen: false,\n    source: ''\n  });\n  const [localIcd10Data, setLocalIcd10Data] = useState({});\n  const [editableKrankheitsanamnese, setEditableKrankheitsanamnese] = useState(\"\");\n  const [editableLebensgeschichte, setEditableLebensgeschichte] = useState(\"\");\n  const [editableProblemanalyseMakro, setEditableProblemanalyseMakro] = useState(\"\");\n  const [editableTherapieplan, setEditableTherapieplan] = useState(\"\");\n  const [therapeutischeAssistenzOutput, setTherapeutischeAssistenzOutput] = useState(\"\");\n  const [isLoadingTherapeutischeAssistenz, setIsLoadingTherapeutischeAssistenz] = useState(false);\n  const [assistenzError, setAssistenzError] = useState(null);\n  const detailViewRef = useRef(null);\n  const overviewRef = useRef(null);\n  const [improvementState, setImprovementState] = useState({\n    isOpen: false,\n    isLoading: false,\n    originalText: '',\n    improvedText: '',\n    sessionIndex: null,\n    error: null\n  });\n  const [sortConfig, setSortConfig] = useState({\n    key: 'name',\n    direction: 'ascending'\n  });\n  const [nextAppointment, setNextAppointment] = useState({\n    isLoading: false,\n    text: null,\n    error: null\n  });\n  const [unbilledAppointments, setUnbilledAppointments] = useState([]);\n  const [isLoadingAppointments, setIsLoadingAppointments] = useState(false);\n  const [billingModalState, setBillingModalState] = useState({\n    isOpen: false,\n    event: null,\n    isEditing: false\n  });\n  const [ebmData, setEbmData] = useState([]);\n  const [isManualBillingSetupOpen, setIsManualBillingSetupOpen] = useState(false);\n  const [confirmDeleteState, setConfirmDeleteState] = useState({\n    isOpen: false,\n    onConfirm: null,\n    message: '',\n    title: ''\n  });\n  const [retroBillingState, setRetroBillingState] = useState({\n    isOpen: false,\n    test: null\n  });\n  const [isAddTestModalOpen, setIsAddTestModalOpen] = useState(false);\n  const [currentTestToAdd, setCurrentTestToAdd] = useState(null);\n  const [uploadedFiles, setUploadedFiles] = useState([]); // For new forms tab\n\n  const handleStartRetroBilling = testToBill => {\n    setRetroBillingState({\n      isOpen: true,\n      test: testToBill\n    });\n  };\n  const handleSaveRetroactiveBilling = async (testToBill, billingData) => {\n    const {\n      sessionId,\n      multiplier,\n      date,\n      phase\n    } = billingData;\n    if (!selectedPatient || !testToBill) return;\n    const patientRef = doc(db, getPatientsCollectionPath(), selectedPatient.id);\n    const newTestEbmEntry = {\n      nummer: testToBill.ebm,\n      anzahl: multiplier || 1,\n      faktor: 1,\n      testInstanceId: testToBill.testInstanceId // Wichtig, um die Verbindung herzustellen\n    };\n    let finalPatientData = {};\n    const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions || []));\n    try {\n      if (sessionId && sessionId !== 'new') {\n        const sessionIndex = updatedSessions.findIndex(s => s.id === sessionId);\n        if (sessionIndex === -1) throw new Error(\"Ausgewählte Sitzung nicht gefunden.\");\n        const sessionToUpdate = updatedSessions[sessionIndex];\n        sessionToUpdate.ebmEntries = [...(sessionToUpdate.ebmEntries || []), newTestEbmEntry];\n      } else {\n        const testBillingSession = {\n          id: `sess_${Date.now()}`,\n          date: new Date(date).toISOString(),\n          eventId: `retro_bill_${testToBill.testInstanceId}`,\n          ebmEntries: [newTestEbmEntry],\n          structuredNotes: {\n            thema: `Testdiagnostik (nachtr.): ${testToBill.name}`,\n            Phase: phase\n          }\n        };\n        updatedSessions.push(testBillingSession);\n      }\n      updatedSessions.sort((a, b) => new Date(b.date) - new Date(a.date));\n      finalPatientData.sessions = updatedSessions;\n      await setDoc(patientRef, finalPatientData, {\n        merge: true\n      });\n      alert(`Test \"${testToBill.name}\" wurde erfolgreich abgerechnet.`);\n    } catch (err) {\n      setAppError(`Fehler bei der nachträglichen Abrechnung: ${err.message}`);\n      console.error(\"Error during retroactive billing:\", err);\n    }\n  };\n  const handleDeleteEbmEntry = async (sessionDate, ebmIndexToDelete) => {\n    if (!selectedPatient || !userId) return;\n    const patientRef = doc(db, getPatientsCollectionPath(), selectedPatient.id);\n    const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n    const sessionIndex = updatedSessions.findIndex(s => s.date === sessionDate);\n    if (sessionIndex === -1) {\n      setAppError(\"Sitzung zum Löschen des Eintrags nicht gefunden.\");\n      return;\n    }\n    const sessionToUpdate = updatedSessions[sessionIndex];\n    const entryToDelete = sessionToUpdate.ebmEntries[ebmIndexToDelete];\n    const linkedTest = availableTests.find(t => t.ebm === entryToDelete.nummer);\n    const performDelete = async () => {\n      sessionToUpdate.ebmEntries.splice(ebmIndexToDelete, 1);\n      let finalPatientData = {\n        sessions: updatedSessions\n      };\n      if (linkedTest && entryToDelete.testInstanceId) {\n        const resultKey = `${linkedTest.id}Results`;\n        const oldResults = selectedPatient[resultKey] || [];\n        const newResults = oldResults.filter(r => r.testInstanceId !== entryToDelete.testInstanceId);\n        finalPatientData[resultKey] = newResults;\n      }\n      try {\n        await setDoc(patientRef, finalPatientData, {\n          merge: true\n        });\n        setConfirmDeleteState({\n          isOpen: false\n        });\n      } catch (err) {\n        setAppError(`Fehler beim Löschen: ${err.message}`);\n      }\n    };\n    if (linkedTest) {\n      setConfirmDeleteState({\n        isOpen: true,\n        title: \"Eintrag wirklich löschen?\",\n        message: `Dieser Abrechnungseintrag ist mit dem Diagnostiktest \"${linkedTest.name}\" verknüpft. Wenn Sie ihn löschen, wird auch das zugehörige Testergebnis unwiderruflich entfernt. Fortfahren?`,\n        onConfirm: performDelete\n      });\n    } else {\n      await performDelete();\n    }\n  };\n  const handleStartManualBilling = (patientId, date) => {\n    const patient = patients.find(p => p.id === patientId);\n    if (!patient) {\n      setAppError(\"Patient für manuelle Abrechnung nicht gefunden.\");\n      return;\n    }\n    let nextSessionNumber = 1;\n    if (patient.sessions && patient.sessions.length > 0) {\n      const sessionNumbers = patient.sessions.map(s => {\n        var _s$structuredNotes;\n        return (_s$structuredNotes = s.structuredNotes) === null || _s$structuredNotes === void 0 ? void 0 : _s$structuredNotes.sitzungsnummer;\n      }).filter(n => typeof n === 'number' && !isNaN(n));\n      if (sessionNumbers.length > 0) {\n        nextSessionNumber = Math.max(...sessionNumbers) + 1;\n      }\n    }\n    const syntheticEvent = {\n      id: `manual_${Date.now()}`,\n      summary: `Manuelle Sitzung (${patient.chiffre})`,\n      start: {\n        dateTime: new Date(date).toISOString()\n      },\n      sitzungsnummer: nextSessionNumber,\n      // Use the calculated number\n      isManual: true\n    };\n    handleStartBilling(syntheticEvent);\n  };\n  const sortedPatients = useMemo(() => {\n    let sortablePatients = [...patients];\n    if (sortConfig !== null) {\n      sortablePatients.sort((a, b) => {\n        const valA = a[sortConfig.key] || '';\n        const valB = b[sortConfig.key] || '';\n        if (valA < valB) {\n          return sortConfig.direction === 'ascending' ? -1 : 1;\n        }\n        if (valA > valB) {\n          return sortConfig.direction === 'ascending' ? 1 : -1;\n        }\n        return 0;\n      });\n    }\n    return sortablePatients;\n  }, [patients, sortConfig]);\n  const fetchNextAppointment = useCallback(async chiffre => {\n    if (!chiffre) return;\n    setNextAppointment({\n      isLoading: true,\n      text: null,\n      error: null\n    });\n    try {\n      const response = await fetch(`http://localhost:3001/api/calendar/nextevent?chiffre=${chiffre}`);\n      if (response.status === 404) {\n        setNextAppointment({\n          isLoading: false,\n          text: 'Kein zukünftiger Termin gefunden.',\n          error: null\n        });\n        return;\n      }\n      if (!response.ok) {\n        throw new Error('Kalender-API-Anfrage fehlgeschlagen.');\n      }\n      const event = await response.json();\n      const startDate = new Date(event.start);\n      const endDate = new Date(event.end);\n      const dateOptions = {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric'\n      };\n      const timeOptions = {\n        hour: '2-digit',\n        minute: '2-digit'\n      };\n      const formattedDate = startDate.toLocaleDateString('de-DE', dateOptions);\n      const formattedStartTime = startDate.toLocaleTimeString('de-DE', timeOptions);\n      const formattedEndTime = endDate.toLocaleTimeString('de-DE', timeOptions);\n      setNextAppointment({\n        isLoading: false,\n        text: `Nächster Termin: ${formattedDate} um ${formattedStartTime} bis ${formattedEndTime} Uhr`,\n        error: null\n      });\n    } catch (error) {\n      console.error('Fehler beim Abrufen des Termins:', error);\n      setNextAppointment({\n        isLoading: false,\n        text: null,\n        error: 'Termin konnte nicht geladen werden.'\n      });\n    }\n  }, []);\n  const getPatientsCollectionPath = useCallback(() => {\n    if (!userId) return null;\n    return `/artifacts/${firestoreAppId}/users/${userId}/patients`;\n  }, [userId]);\n  const findIcd10CodeLocal = useCallback(codeToFind => {\n    const upperCodeToFind = codeToFind.toUpperCase();\n    let found = localIcd10Data[upperCodeToFind];\n    if (found) return found;\n    const baseCode = upperCodeToFind.replace(/(\\.-[*]|\\.\\*|[*]|-)$/, '');\n    found = localIcd10Data[`${baseCode}.-*`] || localIcd10Data[`${baseCode}.*`] || localIcd10Data[baseCode];\n    if (found) return found;\n    const possibleCategoryCode = Object.keys(localIcd10Data).find(key => key.startsWith(upperCodeToFind) && (localIcd10Data[key].code_kategorie || localIcd10Data[key].code));\n    if (possibleCategoryCode) return localIcd10Data[possibleCategoryCode];\n    return null;\n  }, [localIcd10Data]);\n  const handleStartBilling = event => {\n    var _event$summary;\n    const chiffreMatch = (_event$summary = event.summary) === null || _event$summary === void 0 ? void 0 : _event$summary.match(/[A-Z][0-9]{6}/);\n    const chiffre = chiffreMatch ? chiffreMatch[0] : null;\n    const targetPatient = patients.find(p => p.chiffre === chiffre);\n    let nextSessionNumber = 1;\n    if (targetPatient && targetPatient.sessions && targetPatient.sessions.length > 0) {\n      const sessionNumbers = targetPatient.sessions.map(s => {\n        var _s$structuredNotes2;\n        return (_s$structuredNotes2 = s.structuredNotes) === null || _s$structuredNotes2 === void 0 ? void 0 : _s$structuredNotes2.sitzungsnummer;\n      }).filter(n => typeof n === 'number' && !isNaN(n));\n      if (sessionNumbers.length > 0) {\n        nextSessionNumber = Math.max(...sessionNumbers) + 1;\n      }\n    }\n    const eventWithSessionNumber = {\n      ...event,\n      sitzungsnummer: event.sitzungsnummer || nextSessionNumber\n    };\n    setBillingModalState({\n      isOpen: true,\n      event: eventWithSessionNumber,\n      isEditing: false\n    });\n  };\n  const handleEditSession = session => {\n    var _session$structuredNo, _session$structuredNo2;\n    const event = {\n      id: session.id,\n      // Use the unique session ID\n      summary: `${((_session$structuredNo = session.structuredNotes) === null || _session$structuredNo === void 0 ? void 0 : _session$structuredNo.thema) || 'Sitzung'} (${selectedPatient.chiffre})`,\n      start: {\n        dateTime: session.date\n      },\n      sitzungsnummer: (_session$structuredNo2 = session.structuredNotes) === null || _session$structuredNo2 === void 0 ? void 0 : _session$structuredNo2.sitzungsnummer,\n      initialNotes: session.structuredNotes,\n      initialEbm: session.ebmEntries\n    };\n    setBillingModalState({\n      isOpen: true,\n      event,\n      isEditing: true\n    });\n  };\n  const handleDeleteSession = sessionId => {\n    if (!selectedPatient) return;\n    const performDelete = async () => {\n      const updatedSessions = selectedPatient.sessions.filter(s => s.id !== sessionId);\n      const patientRef = doc(db, getPatientsCollectionPath(), selectedPatient.id);\n      try {\n        await setDoc(patientRef, {\n          sessions: updatedSessions\n        }, {\n          merge: true\n        });\n        setConfirmDeleteState({\n          isOpen: false\n        });\n      } catch (error) {\n        console.error(\"Error deleting session: \", error);\n        setAppError(\"Fehler beim Löschen der Sitzung.\");\n      }\n    };\n    setConfirmDeleteState({\n      isOpen: true,\n      title: \"Sitzung löschen?\",\n      message: \"Möchten Sie diese Sitzung und alle zugehörigen Abrechnungsdaten wirklich löschen?\",\n      onConfirm: performDelete\n    });\n  };\n  const handleSaveBilling = async (billingData, isEditing) => {\n    const {\n      chiffre,\n      eventId,\n      eventStart,\n      notes,\n      ebmEntries\n    } = billingData;\n    const targetPatient = patients.find(p => p.chiffre === chiffre);\n    if (!targetPatient) {\n      setAppError(`Patient mit Chiffre ${chiffre} nicht gefunden.`);\n      return;\n    }\n    const patientRef = doc(db, getPatientsCollectionPath(), targetPatient.id);\n    let updatedSessions;\n    if (isEditing) {\n      // Update existing session\n      updatedSessions = targetPatient.sessions.map(session => {\n        // eventId is the unique session.id in edit mode\n        if (session.id === eventId) {\n          return {\n            ...session,\n            structuredNotes: notes,\n            ebmEntries: ebmEntries\n          };\n        }\n        return session;\n      });\n    } else {\n      // Add new session\n      const newSession = {\n        id: `sess_${Date.now()}`,\n        // Ensure a unique ID\n        date: new Date(eventStart).toISOString(),\n        structuredNotes: notes,\n        ebmEntries: ebmEntries,\n        eventId: eventId,\n        homeworkStatus: (notes.hausaufgaben || []).filter(task => task.trim() !== '').map(taskText => ({\n          text: taskText,\n          done: false,\n          reason: ''\n        }))\n      };\n      updatedSessions = [...(targetPatient.sessions || []), newSession];\n    }\n    updatedSessions.sort((a, b) => new Date(b.date) - new Date(a.date));\n    try {\n      await setDoc(patientRef, {\n        sessions: updatedSessions\n      }, {\n        merge: true\n      });\n      setBillingModalState({\n        isOpen: false,\n        event: null,\n        isEditing: false\n      });\n      if (!isEditing) {\n        setActiveDetailTab('abrechnung');\n      }\n    } catch (err) {\n      setAppError(\"Fehler beim Speichern der Abrechnung.\");\n      console.error(\"Error saving billing:\", err);\n    }\n  };\n  const handleSaveTestAndResults = async testData => {\n    const {\n      testId,\n      sessionId,\n      multiplier,\n      phase,\n      date,\n      results\n    } = testData;\n    if (!selectedPatient || !testId) {\n      setAppError(\"Fehler: Patient oder Test nicht spezifiziert.\");\n      return;\n    }\n    const testInfo = availableTests.find(t => t.id === testId);\n    if (!testInfo) {\n      setAppError(\"Testkonfiguration nicht gefunden.\");\n      return;\n    }\n    const patientRef = doc(db, getPatientsCollectionPath(), selectedPatient.id);\n    const testInstanceId = `test_${testId}_${Date.now()}`;\n    const newTestEbmEntry = {\n      nummer: testInfo.ebm,\n      anzahl: multiplier || 1,\n      faktor: 1,\n      testInstanceId\n    };\n    const resultKey = `${testId}Results`;\n    const newTestResult = {\n      date: new Date().toISOString(),\n      ...results,\n      testInstanceId\n    };\n    const updatedTestResults = [...(selectedPatient[resultKey] || []), newTestResult];\n    let finalPatientData = {\n      [resultKey]: updatedTestResults\n    };\n    try {\n      if (sessionId && sessionId !== 'new') {\n        const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n        const sessionIndex = updatedSessions.findIndex(s => s.id === sessionId);\n        if (sessionIndex === -1) {\n          throw new Error(\"Die ausgewählte Sitzung zum Hinzufügen wurde nicht gefunden.\");\n        }\n        const sessionToUpdate = updatedSessions[sessionIndex];\n        sessionToUpdate.ebmEntries = [...(sessionToUpdate.ebmEntries || []), newTestEbmEntry];\n        finalPatientData.sessions = updatedSessions;\n      } else {\n        const testBillingSession = {\n          id: `sess_${Date.now()}`,\n          date: new Date(date).toISOString(),\n          eventId: `test_${testId}_${Date.now()}`,\n          ebmEntries: [newTestEbmEntry],\n          structuredNotes: {\n            thema: `Testdiagnostik: ${testInfo.name}`,\n            Phase: phase\n          }\n        };\n        const updatedSessions = [...(selectedPatient.sessions || []), testBillingSession];\n        updatedSessions.sort((a, b) => new Date(b.date) - new Date(a.date));\n        finalPatientData.sessions = updatedSessions;\n      }\n      await setDoc(patientRef, finalPatientData, {\n        merge: true\n      });\n      alert(`Test \"${testInfo.name}\" wurde gespeichert und abgerechnet.`);\n      setActiveDiagnostikSubTab(testId);\n    } catch (err) {\n      setAppError(`Fehler beim Speichern der Testdaten: ${err.message}`);\n      console.error(\"Error saving test data:\", err);\n    }\n  };\n  const handleUpdateHomeworkStatus = async (sessionDate, homeworkIndex, newStatus) => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n    const sessionToUpdate = updatedSessions.find(s => s.date === sessionDate);\n    if (sessionToUpdate && sessionToUpdate.homeworkStatus && sessionToUpdate.homeworkStatus[homeworkIndex]) {\n      Object.assign(sessionToUpdate.homeworkStatus[homeworkIndex], newStatus);\n    }\n    try {\n      await setDoc(patientRef, {\n        sessions: updatedSessions\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error updating homework status:\", err);\n      setAppError(\"Fehler beim Aktualisieren des Hausaufgabenstatus.\");\n    }\n  };\n\n  // --- useEffects ---\n  useEffect(() => {\n    if (ebmData.length === 0) {\n      fetch('/ebm_data_full.json').then(res => res.json()).then(setEbmData).catch(err => console.error(\"Failed to load EBM data\", err));\n    }\n  }, [ebmData.length]);\n  useEffect(() => {\n    if (mainView === 'patientenakte' || mainView === 'abrechnung' || mainView === 'kalender') {\n      setIsLoadingAppointments(true);\n      fetch('http://localhost:3001/api/calendar/past-events').then(res => {\n        if (!res.ok) {\n          return res.json().then(errorData => {\n            throw new Error(errorData.message || `Serverfehler: ${res.status}`);\n          });\n        }\n        return res.json();\n      }).then(calendarEvents => {\n        if (!Array.isArray(calendarEvents)) {\n          throw new Error(\"Unerwartetes Datenformat vom Server erhalten.\");\n        }\n        ;\n        const billedEventIds = new Set();\n        patients.forEach(p => {\n          (p.sessions || []).forEach(s => {\n            if (s.eventId) billedEventIds.add(s.eventId);\n          });\n        });\n        const unbilled = calendarEvents.filter(event => {\n          var _event$summary2;\n          return !billedEventIds.has(event.id) && ((_event$summary2 = event.summary) === null || _event$summary2 === void 0 ? void 0 : _event$summary2.match(/[A-Z][0-9]{6}/));\n        });\n        setUnbilledAppointments(unbilled);\n      }).catch(err => {\n        if (err.message && err.message.includes('Nicht bei Google authentifiziert')) {\n          setAppError(`Kalender-Fehler: Sie müssen sich erneut bei Google authentifizieren. Rufen Sie dazu im Browser auf: http://localhost:3001/auth/google`);\n        } else {\n          setAppError(`Offene Abrechnungen konnten nicht geladen werden: ${err.message}`);\n        }\n      }).finally(() => setIsLoadingAppointments(false));\n    }\n  }, [mainView, patients]);\n  useEffect(() => {\n    if (selectedPatient) {\n      fetchNextAppointment(selectedPatient.chiffre);\n    } else {\n      setNextAppointment({\n        isLoading: false,\n        text: null,\n        error: null\n      });\n    }\n  }, [selectedPatient, fetchNextAppointment]);\n  useEffect(() => {\n    fetch('/icd10f_data.json').then(response => {\n      if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);\n      return response.json();\n    }).then(data => {\n      const indexedData = {};\n      data.forEach(item => {\n        if (item.code) {\n          indexedData[item.code.toUpperCase()] = item;\n        }\n      });\n      setLocalIcd10Data(indexedData);\n    }).catch(error => {\n      console.error(\"Fehler beim Laden der lokalen ICD-10 Daten:\", error);\n      setAppError(\"Lokale ICD-10 Daten konnten nicht geladen werden. \" + error.message);\n    });\n  }, []);\n  useEffect(() => {\n    if (selectedPatient) {\n      setEditableKrankheitsanamnese(selectedPatient.krankheitsanamnese || \"\");\n      setEditableLebensgeschichte(selectedPatient.lebensgeschichte || \"\");\n      setEditableProblemanalyseMakro(selectedPatient.problemanalyseMakro || \"\");\n      setEditableTherapieplan(selectedPatient.therapieplan || \"\");\n      if (detailViewRef.current) {\n        setTimeout(() => {\n          detailViewRef.current.scrollIntoView({\n            behavior: 'smooth',\n            block: 'start'\n          });\n        }, 100);\n      }\n    } else {\n      setEditableKrankheitsanamnese(\"\");\n      setEditableLebensgeschichte(\"\");\n      setEditableProblemanalyseMakro(\"\");\n      setEditableTherapieplan(\"\");\n    }\n  }, [selectedPatient]);\n  useEffect(() => {\n    if (newDiagnosisCode.trim() !== '') {\n      const found = findIcd10CodeLocal(newDiagnosisCode.trim().toUpperCase());\n      if (found && found.name) {\n        setLookedUpDiagnosisName(found.name);\n      } else {\n        setLookedUpDiagnosisName('');\n      }\n    } else {\n      setLookedUpDiagnosisName('');\n    }\n  }, [newDiagnosisCode, findIcd10CodeLocal]);\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, user => {\n      if (user) {\n        setUserId(user.uid);\n      } else {\n        setUserId(null);\n      }\n      setIsAuthReady(true);\n      setIsLoading(false);\n    });\n    return () => unsubscribe();\n  }, []);\n  const seedInitialData = useCallback(async () => {\n    if (!userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    try {\n      const patientsCollection = collection(db, collectionPath);\n      const querySnapshot = await getDocs(patientsCollection);\n      if (querySnapshot.empty) {\n        const batch = writeBatch(db);\n        initialPatientsData.forEach(patientData => {\n          const newPatientRef = doc(patientsCollection);\n          batch.set(newPatientRef, {\n            ...patientData,\n            hscl11Results: patientData.hscl11Results || [],\n            bdi2Results: patientData.bdi2Results || [],\n            fep2Results: patientData.fep2Results || [],\n            scl90rResults: patientData.scl90rResults || [],\n            diagnoses_icd11: patientData.diagnoses_icd11 || [],\n            krankheitsanamnese: patientData.krankheitsanamnese || \"\",\n            lebensgeschichte: patientData.lebensgeschichte || \"\",\n            problemanalyseMakro: patientData.problemanalyseMakro || \"\",\n            therapieplan: patientData.therapieplan || \"\"\n          });\n        });\n        await batch.commit();\n      }\n    } catch (err) {\n      console.error(\"Error seeding initial data:\", err);\n      setAppError(\"Fehler beim Laden der initialen Daten.\");\n    }\n  }, [userId, getPatientsCollectionPath]);\n  useEffect(() => {\n    if (!isAuthReady || !userId) {\n      setPatients([]);\n      return;\n    }\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    setIsLoading(true);\n    seedInitialData();\n    const patientsQuery = query(collection(db, collectionPath));\n    const unsubscribe = onSnapshot(patientsQuery, snapshot => {\n      let patientsData = snapshot.docs.map(docSnap => ({\n        id: docSnap.id,\n        ...docSnap.data(),\n        diagnoses_icd11: docSnap.data().diagnoses_icd11 || []\n      }));\n      patientsData.sort((a, b) => (a.name || \"\").localeCompare(b.name || \"\"));\n      setPatients(patientsData);\n      setIsLoading(false);\n    }, err => {\n      console.error(\"Error fetching patients:\", err);\n      setAppError(\"Fehler beim Laden der Patientendaten.\");\n      setIsLoading(false);\n    });\n    return () => unsubscribe();\n  }, [isAuthReady, userId, getPatientsCollectionPath, seedInitialData]);\n  useEffect(() => {\n    if (selectedPatient && selectedPatient.id && patients.length > 0) {\n      const currentPatientDataFromList = patients.find(p => p.id === selectedPatient.id);\n      if (currentPatientDataFromList) {\n        if (JSON.stringify(currentPatientDataFromList) !== JSON.stringify(selectedPatient)) {\n          setSelectedPatient(currentPatientDataFromList);\n        }\n      } else {\n        setSelectedPatient(null);\n      }\n    }\n  }, [patients, selectedPatient]);\n  useEffect(() => {\n    const loadIcd10Data = async () => {\n      try {\n        const response = await fetch('/icd10f_data.json');\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        const data = await response.json();\n        const indexedData = {};\n        data.forEach(item => {\n          if (item.code) {\n            indexedData[item.code.toUpperCase()] = item;\n            const baseCode = item.code.replace(/[*†]/, '').toUpperCase();\n            if (baseCode !== item.code.toUpperCase()) {\n              indexedData[baseCode] = item;\n            }\n          }\n        });\n        setLocalIcd10Data(indexedData);\n      } catch (error) {\n        console.error(\"Fehler beim Laden der lokalen ICD-10 Daten:\", error);\n        setAppError(\"Lokale ICD-10 Daten konnten nicht geladen werden. \" + error.message);\n      }\n    };\n    loadIcd10Data();\n  }, []);\n  const bdiCutoffs = [{\n    y1: 0,\n    y2: 8,\n    label: \"Keine Depression\",\n    color: \"rgba(75, 192, 192, 0.2)\"\n  }, {\n    y1: 9,\n    y2: 13,\n    label: \"Minimale Depression\",\n    color: \"rgba(54, 162, 235, 0.2)\"\n  }, {\n    y1: 14,\n    y2: 19,\n    label: \"Leichte Depression\",\n    color: \"rgba(255, 206, 86, 0.2)\"\n  }, {\n    y1: 20,\n    y2: 28,\n    label: \"Mittelschwere Depression\",\n    color: \"rgba(255, 159, 64, 0.2)\"\n  }, {\n    y1: 29,\n    y2: 63,\n    label: \"Schwere Depression\",\n    color: \"rgba(255, 99, 132, 0.2)\"\n  }];\n  const bdiAxisTicks = [0, 8, 13, 19, 28, 63];\n  const handleAuthAction = async isRegistering => {\n    setIsAuthLoading(true);\n    setAuthError(null);\n    try {\n      if (isRegistering) {\n        await createUserWithEmailAndPassword(auth, email, password);\n      } else {\n        await signInWithEmailAndPassword(auth, email, password);\n      }\n      setEmail(\"\");\n      setPassword(\"\");\n    } catch (error) {\n      console.error(\"Authentication error:\", error);\n      setAuthError(error.message);\n    } finally {\n      setIsAuthLoading(false);\n    }\n  };\n  const handleLogout = async () => {\n    try {\n      await signOut(auth);\n      setSelectedPatient(null);\n      setPatients([]);\n    } catch (error) {\n      console.error(\"Error signing out: \", error);\n      setAppError(\"Fehler beim Abmelden.\");\n    }\n  };\n  const handleSavePatient = async patientData => {\n    if (!userId) {\n      setAppError(\"Benutzer nicht authentifiziert.\");\n      return;\n    }\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const dataToSave = {\n      ...patientData,\n      hscl11Results: patientData.hscl11Results || [],\n      bdi2Results: patientData.bdi2Results || [],\n      fep2Results: patientData.fep2Results || [],\n      scl90rResults: patientData.scl90rResults || [],\n      krankheitsanamnese: patientData.krankheitsanamnese || \"\",\n      lebensgeschichte: patientData.lebensgeschichte || \"\",\n      problemanalyseMakro: patientData.problemanalyseMakro || \"\",\n      therapieplan: patientData.therapieplan || \"\"\n    };\n    try {\n      if (editingPatient && editingPatient.id) {\n        const patientRef = doc(db, collectionPath, editingPatient.id);\n        await setDoc(patientRef, dataToSave, {\n          merge: true\n        });\n      } else {\n        await addDoc(collection(db, collectionPath), dataToSave);\n      }\n      setIsPatientModalOpen(false);\n      setEditingPatient(null);\n    } catch (err) {\n      console.error(\"Error saving patient:\", err);\n      setAppError(\"Fehler beim Speichern des Patienten.\");\n    }\n  };\n  const confirmDeletePatient = async patientId => {\n    if (!patientId || !userId) {\n      setAppError(\"Löschvorgang fehlgeschlagen.\");\n      return;\n    }\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    try {\n      const patientRef = doc(db, collectionPath, patientId);\n      await deleteDoc(patientRef);\n      if (selectedPatient && selectedPatient.id === patientId) {\n        setSelectedPatient(null);\n      }\n      setConfirmDeleteState({\n        isOpen: false\n      });\n    } catch (err) {\n      console.error(\"Error deleting patient:\", err);\n      setAppError(\"Fehler beim Löschen des Patienten.\");\n      setConfirmDeleteState({\n        isOpen: false\n      });\n    }\n  };\n  const openDeleteConfirmation = patientId => {\n    setConfirmDeleteState({\n      isOpen: true,\n      title: \"Patient wirklich löschen?\",\n      message: \"Möchten Sie diesen Patienten und alle zugehörigen Daten unwiderruflich löschen?\",\n      onConfirm: () => confirmDeletePatient(patientId)\n    });\n  };\n  const handleAddDiagnosis = async () => {\n    const codeToAdd = newDiagnosisCode.trim().toUpperCase();\n    if (!selectedPatient || !codeToAdd || !userId) {\n      setAppError(\"Bitte füllen Sie alle erforderlichen Felder aus.\");\n      return;\n    }\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const sicherheitPrefix = newDiagnosisSicherheit ? `[${newDiagnosisSicherheit}] ` : \"\";\n    const beschreibung = newDiagnosis.trim() ? `: ${newDiagnosis.trim()}` : lookedUpDiagnosisName ? `: ${lookedUpDiagnosisName}` : \"\";\n    const diagnosisString = `${sicherheitPrefix}${codeToAdd}${beschreibung}`;\n    const updatedDiagnoses = [...(selectedPatient.diagnoses || []), diagnosisString];\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      console.log(\"Speichere neue Diagnose:\", diagnosisString);\n      await setDoc(patientRef, {\n        diagnoses: updatedDiagnoses\n      }, {\n        merge: true\n      });\n      setNewDiagnosisCode('');\n      setNewDiagnosis('');\n      setLookedUpDiagnosisName('');\n      setNewDiagnosisSicherheit('G');\n    } catch (err) {\n      console.error(\"Error adding diagnosis:\", err);\n      setAppError(\"Fehler beim Hinzufügen der Diagnose.\");\n    }\n  };\n  const handleRemoveDiagnosis = async diagnosisStringToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedDiagnoses = selectedPatient.diagnoses.filter(d => d !== diagnosisStringToRemove);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        diagnoses: updatedDiagnoses\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing diagnosis:\", err);\n      setAppError(\"Fehler beim Entfernen der Diagnose.\");\n    }\n  };\n  const handleAddBdiResult = async newResult => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedBdiResults = [...(selectedPatient.bdi2Results || []), newResult];\n    updatedBdiResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        bdi2Results: updatedBdiResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error adding BDI-II result:\", err);\n      setAppError(\"Fehler beim Hinzufügen des BDI-II Ergebnisses.\");\n    }\n  };\n  const handleAddHsclResult = async newResult => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedHsclResults = [...(selectedPatient.hscl11Results || []), newResult];\n    updatedHsclResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        hscl11Results: updatedHsclResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error adding HSCL result:\", err);\n      setAppError(\"Fehler beim Hinzufügen des HSCL-Ergebnisses.\");\n    }\n  };\n  const handleRemoveHsclResult = async dateToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedHsclResults = selectedPatient.hscl11Results.filter(r => r.date !== dateToRemove);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        hscl11Results: updatedHsclResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing HSCL result:\", err);\n      setAppError(\"Fehler beim Entfernen des HSCL-Ergebnisses.\");\n    }\n  };\n  const handleRemoveBdiResult = async dateToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedBdiResults = selectedPatient.bdi2Results.filter(r => r.date !== dateToRemove);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        bdi2Results: updatedBdiResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing BDI-II result:\", err);\n      setAppError(\"Fehler beim Entfernen des BDI-II Ergebnisses.\");\n    }\n  };\n  const handleAddFepResult = async result => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedFepResults = [...(selectedPatient.fep2Results || []), result];\n    updatedFepResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        fep2Results: updatedFepResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error adding FEP-2 result:\", err);\n      setAppError(\"Fehler beim Hinzufügen des FEP-2 Ergebnisses.\");\n    }\n  };\n  const handleRemoveFepResult = async dateToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedFepResults = selectedPatient.fep2Results.filter(r => r.date !== dateToRemove);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        fep2Results: updatedFepResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing FEP-2 result:\", err);\n      setAppError(\"Fehler beim Entfernen des FEP-2 Ergebnisses.\");\n    }\n  };\n  const handleAddScl90rResult = async result => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const newResultToSave = {\n      rawScores: result.rawScores,\n      tScores: result.tScores,\n      globalScores: result.globalScores,\n      itemScores: result.itemScores,\n      date: result.date\n    };\n    const updatedScl90rResults = [...(selectedPatient.scl90rResults || []), newResultToSave];\n    updatedScl90rResults.sort((a, b) => new Date(b.date) - new Date(a.date));\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        scl90rResults: updatedScl90rResults\n      }, {\n        merge: true\n      });\n      console.log(\"SCL-90-R-Ergebnis erfolgreich gespeichert mit itemScores.\");\n    } catch (err) {\n      console.error(\"Error adding SCL-90-R result:\", err);\n      setAppError(\"Fehler beim Speichern des SCL-90-R Ergebnisses.\");\n    }\n  };\n  const handleRemoveScl90rResult = async dateToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedScl90rResults = selectedPatient.scl90rResults.filter(r => r.date !== dateToRemove);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        scl90rResults: updatedScl90rResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing SCL-90-R result:\", err);\n      setAppError(\"Fehler beim Entfernen des SCL-90-R Ergebnisses.\");\n    }\n  };\n  const handleKrankheitsmodellChange = async (fieldName, value) => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        [fieldName]: value\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(`Error updating ${fieldName}:`, err);\n      setAppError(`Fehler beim Speichern von ${fieldName}.`);\n    }\n  };\n  const handleTherapeutischeAssistenzAnfordern = async () => {\n    if (!selectedPatient) {\n      setAssistenzError(\"Bitte wählen Sie zuerst einen Patienten aus.\");\n      return;\n    }\n    setIsLoadingTherapeutischeAssistenz(true);\n    setTherapeutischeAssistenzOutput(\"\");\n    setAssistenzError(null);\n    const patientenDatenText = `\nHier sind die relevanten Patientendaten:\n\n**Krankheitsanamnese:**\n${selectedPatient.krankheitsanamnese || \"Keine Angaben.\"}\n\n**Lebensgeschichte/Biografie:**\n${selectedPatient.lebensgeschichte || \"Keine Angaben.\"}\n\n**Problemanalyse auf Makroebene:**\n${selectedPatient.problemanalyseMakro || \"Keine Angaben.\"}\n\n**Therapieplanung (bisherig):**\n${selectedPatient.therapieplan || \"Keine Angaben.\"}\n\n**Verlaufsdokumentation (Sitzungsnotizen):**\n${(selectedPatient.sessions || []).map((s, i) => {\n      var _s$structuredNotes3, _s$structuredNotes4;\n      return `Sitzung ${((_s$structuredNotes3 = s.structuredNotes) === null || _s$structuredNotes3 === void 0 ? void 0 : _s$structuredNotes3.sitzungsnummer) || i + 1} (${new Date(s.date).toLocaleDateString('de-DE')}): ${((_s$structuredNotes4 = s.structuredNotes) === null || _s$structuredNotes4 === void 0 ? void 0 : _s$structuredNotes4.patientenbericht) || s.notes}`;\n    }).join(\"\\n\\n\") || \"Keine Sitzungsnotizen vorhanden.\"}\n\n**Diagnosen:**\n${(selectedPatient.diagnoses || []).join(\", \") || \"Keine Diagnosen erfasst.\"}\n\n**Genehmigte Stunden:** ${selectedPatient.approvedHours}\n**Durchgeführte Stunden:** ${(selectedPatient.sessions || []).filter(s => {\n      var _s$structuredNotes5;\n      return (_s$structuredNotes5 = s.structuredNotes) === null || _s$structuredNotes5 === void 0 ? void 0 : _s$structuredNotes5.sitzungsnummer;\n    }).length}\n    `;\n    const systemPrompt = `Du bist ein interdisziplinäres Expertenteam, bestehend aus erfahrenen Verhaltenstherapeuten wie Jürgen Margraf, Dr. Stavemann, Aaron T. Beck, Judith Beck und Jonathan S. Abramowitz sowie aus leitenden Chefärzten und Psychiatern wie Prof. Dr. Mathias Berger. Das Team verfügt über exzellente Fachkompetenz in der evidenzbasierten psychotherapeutischen Praxis und legt besonderen Wert auf präzise medizinische Dokumentation sowie therapeutische Qualität. Darüber hinaus gehören auch international anerkannte Experten wie David H. Barlow, Stefan G. Hofmann und Steven Hayes zum Team. Du verfügst über tiefgehendes Wissen in Ansätzen der sogenannten „dritten Welle“ der Verhaltenstherapie, insbesondere in ACT, Schematherapie und DBT.\n\nDeine Aufgabe ist es, auf Grundlage folgender Elemente, welche du aus den bereitgestellten Patientendaten entnimmst:\n- Krankheitsanamnese\n- Lebensgeschichte/Biografie\n- Problemanalyse auf Makroebene\n- Therapieplanung (bisherig)\n- Verlaufsdokumentation (Sitzungsnotizen)\n\neine strukturierte Rückmeldung zu geben mit dem Ziel:\n1. Wesentliche Schwerpunkte in der weiteren Therapieplanung zu identifizieren.\n2. Konkrete Interventionsideen zu formulieren, orientiert an den zugelassenen Stunden.\n3. Hinweise zu geben, worauf in der Strukturierung der Sitzungen geachtet werden sollte (z.B. Themenfokus, Symptomschwere, Therapiezielorientierung).\n\nBerücksichtige dabei:\n• Die begrenzte Anzahl genehmigter Stunden.\n• Dass Themen nicht zu häufig gewechselt werden sollen.\n• Die Konsistenz und Nachvollziehbarkeit im Verlauf.\n\nBitte plane deine Analyse gründlich und reflektiert. Handle in Etappen:\n1. Diagnostische Schwerpunkte benennen\n2. Therapieziele definieren\n3. Interventionsvorschläge machen\n4. Hinweise zur Dokumentation geben\n\nAtme einmal tief ein und aus und nehme dir Zeit für die Aufgabe. Mache bitte weiter, bis das Problem vollständig gelöst ist. Planen bitte ausführlich vor jeder Aktion.\n\nHier sind die Daten des aktuellen Falls:\n${patientenDatenText}\n\nBitte gib deine strukturierte Rückmeldung.`;\n    try {\n      const assistenz = await generateGeminiText(systemPrompt);\n      setTherapeutischeAssistenzOutput(assistenz);\n    } catch (e) {\n      setAssistenzError(`Fehler bei der Anforderung der therapeutischen Assistenz: ${e.message}`);\n    } finally {\n      setIsLoadingTherapeutischeAssistenz(false);\n    }\n  };\n  const showDiagnosisInfo = diagnosisString => {\n    const sicherheitMatch = diagnosisString.match(/^\\[([AVGZN]+)\\]\\s*/i);\n    const sicherheit = sicherheitMatch ? sicherheitMatch[1].toUpperCase() : '';\n    const codeAndName = sicherheitMatch ? diagnosisString.substring(sicherheitMatch[0].length) : diagnosisString;\n    const codeMatch = codeAndName.match(/^([A-Z][0-9]{1,2}(\\.[0-9A-Z]{1,2})?[*†]?)/i);\n    const code = codeMatch ? codeMatch[0].toUpperCase() : codeAndName.split(':')[0].trim().toUpperCase();\n    const localData = findIcd10CodeLocal(code);\n    if (localData) {\n      setDiagnosisInfo({\n        code: localData.code || code,\n        name: localData.name || '',\n        beschreibung: localData.beschreibung || localData.beschreibung_kategorie || '',\n        inkl: localData.inkl || [],\n        exkl: localData.exkl || [],\n        hinweise: localData.hinweise || [],\n        zusatz_info_code: localData.zusatz_info_code || '',\n        sicherheit: sicherheit,\n        isLoading: false,\n        error: null,\n        isOpen: true,\n        source: 'local'\n      });\n    } else {\n      setDiagnosisInfo({\n        code: code,\n        name: \"Unbekannter ICD-10 Code\",\n        isLoading: false,\n        error: `Für den ICD-10 Code \"${code}\" wurden keine Informationen in der lokalen Datenbank gefunden.`,\n        isOpen: true,\n        source: 'error'\n      });\n    }\n  };\n  const fetchIcd11Details = async diagnosis => {\n    if (!diagnosis || !diagnosis.uri) {\n      setAppError(\"Keine gültige URI für die ICD-11 Diagnose vorhanden.\");\n      return;\n    }\n    const {\n      code,\n      title,\n      uri\n    } = diagnosis;\n    setDiagnosisInfo({\n      code: code,\n      name: title,\n      isLoading: true,\n      error: null,\n      isOpen: true,\n      source: 'api'\n    });\n    try {\n      var _fullData$title, _fullData$definition;\n      const response = await fetch(`http://localhost:3001/api/icd11-info?uri=${encodeURIComponent(uri)}`);\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'API-Anfrage fehlgeschlagen');\n      }\n      const fullData = await response.json();\n      setDiagnosisInfo({\n        code: fullData.code || code,\n        name: ((_fullData$title = fullData.title) === null || _fullData$title === void 0 ? void 0 : _fullData$title['@value']) || title,\n        beschreibung: ((_fullData$definition = fullData.definition) === null || _fullData$definition === void 0 ? void 0 : _fullData$definition['@value']) || '',\n        diagnosticCriteria: fullData.diagnosticCriteria,\n        inclusions: fullData.inclusion,\n        exclusions: fullData.exclusion,\n        isLoading: false,\n        error: null,\n        isOpen: true,\n        source: 'api_detail'\n      });\n    } catch (error) {\n      console.error('Fehler beim Abrufen der ICD-11 Details:', error);\n      setDiagnosisInfo({\n        code: code,\n        isLoading: false,\n        error: `Konnte Informationen für ${code} nicht laden: ${error.message}`,\n        isOpen: true,\n        source: 'api'\n      });\n    }\n  };\n  const handleAssignIcd11Diagnosis = async (patientId, icd11Entity) => {\n    if (!patientId || !icd11Entity || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const patientRef = doc(db, collectionPath, patientId);\n    const targetPatient = patients.find(p => p.id === patientId);\n    if (!targetPatient) {\n      setAppError(\"Ziel-Patient konnte nicht gefunden werden.\");\n      return;\n    }\n    const newDiagnosis = {\n      code: icd11Entity.code,\n      title: icd11Entity.selectedText,\n      uri: icd11Entity.linearizationUri || icd11Entity.foundationUri,\n      date: new Date().toISOString()\n    };\n    const updatedDiagnoses = [...(targetPatient.diagnoses_icd11 || []), newDiagnosis];\n    try {\n      await setDoc(patientRef, {\n        diagnoses_icd11: updatedDiagnoses\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error assigning ICD-11 diagnosis:\", err);\n      setAppError(\"Fehler beim Zuweisen der ICD-11 Diagnose.\");\n    }\n  };\n  const handleRemoveIcd11Diagnosis = async diagnosisToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedDiagnoses = selectedPatient.diagnoses_icd11.filter(d => d.date !== diagnosisToRemove.date);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        diagnoses_icd11: updatedDiagnoses\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing ICD-11 diagnosis:\", err);\n      setAppError(\"Fehler beim Entfernen der ICD-11 Diagnose.\");\n    }\n  };\n  const handleAcceptImprovement = async () => {\n    if (improvementState.sessionIndex === null || !selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n    updatedSessions[improvementState.sessionIndex].notes = improvementState.improvedText;\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        sessions: updatedSessions\n      }, {\n        merge: true\n      });\n      setImprovementState({\n        isOpen: false,\n        isLoading: false,\n        originalText: '',\n        improvedText: '',\n        sessionIndex: null,\n        error: null\n      });\n    } catch (err) {\n      console.error(\"Error updating session note:\", err);\n      setAppError(\"Fehler beim Aktualisieren der Sitzungsnotiz.\");\n    }\n  };\n  const handleFileUpload = event => {\n    const files = Array.from(event.target.files);\n    const newFiles = files.map(file => ({\n      name: file.name,\n      size: file.size,\n      type: file.type,\n      lastModified: file.lastModifiedDate.toLocaleDateString('de-DE')\n    }));\n    setUploadedFiles(prev => [...prev, ...newFiles]);\n    console.log(\"Dateien zum Hochladen ausgewählt:\", newFiles);\n    setAppError(\"Datei-Upload ist nur eine Demo. Die Dateien werden nicht permanent gespeichert.\");\n  };\n  const handleRemoveFile = fileName => {\n    setUploadedFiles(prev => prev.filter(f => f.name !== fileName));\n  };\n  const ConductedHours = ({\n    patient\n  }) => {\n    _s2();\n    const count = useMemo(() => {\n      if (!patient || !patient.sessions) return 0;\n      return patient.sessions.filter(s => s.structuredNotes && typeof s.structuredNotes.sitzungsnummer === 'number').length;\n    }, [patient]);\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      children: count\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1305,\n      columnNumber: 16\n    }, this);\n  };\n  _s2(ConductedHours, \"U1svz8FkAcrI/Cm78gLA45oPFiY=\");\n  const totalConductedHours = useMemo(() => patients.reduce((sum, p) => {\n    const sessionCount = (p.sessions || []).filter(s => s.structuredNotes && typeof s.structuredNotes.sitzungsnummer === 'number').length;\n    return sum + sessionCount;\n  }, 0), [patients]);\n  const totalApprovedHours = patients.reduce((sum, p) => sum + (p.approvedHours || 0), 0);\n  const overallProgressTarget = 600;\n  const overallProgress = overallProgressTarget > 0 ? totalConductedHours / overallProgressTarget * 100 : 0;\n\n  // --- STYLING CONSTANTS ---\n  const inputStd = \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm\";\n  const btnPrimary = \"bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2 px-4 rounded-md shadow-sm flex items-center justify-center transition-colors\";\n  const btnDanger = \"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-3 rounded-md flex items-center transition-colors\";\n  const btnInfo = \"bg-sky-500 hover:bg-sky-600 text-white font-semibold py-1 px-2 text-xs rounded-md flex items-center transition-colors\";\n  const textareaStd = \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm min-h-[150px]\";\n  if (!isAuthReady) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-center items-center h-screen text-xl font-semibold text-gray-600 bg-slate-100\",\n    children: \"Authentifizierung wird initialisiert...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1324,\n    columnNumber: 30\n  }, this);\n  if (!userId) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-slate-100 flex flex-col justify-center items-center p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-8 rounded-lg shadow-md w-full max-w-md border border-gray-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-center text-gray-800 mb-8\",\n          children: isLoginView ? \"Login Patientenverwaltung\" : \"Registrierung\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1330,\n          columnNumber: 21\n        }, this), authError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"bg-red-100 text-red-700 p-3 rounded-md mb-4 text-sm\",\n          children: authError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1331,\n          columnNumber: 35\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: e => {\n            e.preventDefault();\n            handleAuthAction(!isLoginView);\n          },\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"email\",\n              className: \"block text-sm font-medium text-gray-700\",\n              children: \"E-Mail Adresse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1334,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              name: \"email\",\n              id: \"email\",\n              required: true,\n              value: email,\n              onChange: e => setEmail(e.target.value),\n              className: inputStd\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1335,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1333,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"password\",\n              className: \"block text-sm font-medium text-gray-700\",\n              children: \"Passwort\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1338,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              name: \"password\",\n              id: \"password\",\n              required: true,\n              value: password,\n              onChange: e => setPassword(e.target.value),\n              className: inputStd\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1339,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1337,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: isAuthLoading,\n            className: `${btnPrimary} w-full py-2.5 text-base ${isAuthLoading ? 'opacity-50 cursor-not-allowed' : ''}`,\n            children: isAuthLoading ? isLoginView ? \"Anmelden...\" : \"Registrieren...\" : isLoginView ? \"Anmelden\" : \"Registrieren\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1341,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1332,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setIsLoginView(!isLoginView);\n            setAuthError(null);\n          },\n          className: \"mt-6 text-sm text-teal-600 hover:text-teal-500 text-center w-full\",\n          children: isLoginView ? \"Noch kein Konto? Jetzt registrieren.\" : \"Bereits registriert? Zum Login.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1345,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1329,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1328,\n      columnNumber: 13\n    }, this);\n  }\n  const Sidebar = ({\n    currentView,\n    setView\n  }) => {\n    const navItems = [{\n      id: 'patients',\n      label: 'Patientenübersicht',\n      icon: /*#__PURE__*/_jsxDEV(Users, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1355,\n        columnNumber: 66\n      }, this)\n    }, {\n      id: 'patientenakte',\n      label: 'Patientenakte',\n      icon: /*#__PURE__*/_jsxDEV(FileText, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1356,\n        columnNumber: 66\n      }, this)\n    }, {\n      id: 'kalender',\n      label: 'Kalender & Abrechnung',\n      icon: /*#__PURE__*/_jsxDEV(CalendarIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1357,\n        columnNumber: 69\n      }, this)\n    }, {\n      id: 'formulare',\n      label: 'Formulare',\n      icon: /*#__PURE__*/_jsxDEV(PaperclipIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1358,\n        columnNumber: 58\n      }, this)\n    }, {\n      id: 'ebm',\n      label: 'EBM',\n      icon: /*#__PURE__*/_jsxDEV(List, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1359,\n        columnNumber: 46\n      }, this)\n    }, {\n      id: 'icd11',\n      label: 'ICD-11',\n      icon: /*#__PURE__*/_jsxDEV(BookOpen, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1360,\n        columnNumber: 51\n      }, this)\n    }];\n    return /*#__PURE__*/_jsxDEV(\"aside\", {\n      className: \"w-64 bg-slate-100 border-r border-slate-200 flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 border-b border-slate-200\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-bold text-teal-700 tracking-tight\",\n          children: \"Therapie-Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1366,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1365,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"flex-1 p-4 space-y-2\",\n        children: navItems.map(item => /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setView(item.id),\n          className: `w-full flex items-center space-x-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${currentView === item.id ? 'bg-teal-100 text-teal-800' : 'text-slate-700 hover:bg-slate-200'}`,\n          children: [item.icon, /*#__PURE__*/_jsxDEV(\"span\", {\n            children: item.label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1380,\n            columnNumber: 29\n          }, this)]\n        }, item.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1370,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1368,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 border-t border-slate-200\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs text-slate-500 truncate\",\n          children: [\"UserID: \", userId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1385,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1384,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1364,\n      columnNumber: 13\n    }, this);\n  };\n  const PatientDetailHeader = ({\n    patient,\n    onDeselect\n  }) => {\n    _s3();\n    const therapyStartDate = useMemo(() => {\n      if (!patient || !patient.sessions) return \"-\";\n      const firstSession = patient.sessions.filter(s => {\n        var _s$structuredNotes6;\n        return ((_s$structuredNotes6 = s.structuredNotes) === null || _s$structuredNotes6 === void 0 ? void 0 : _s$structuredNotes6.sitzungsnummer) === 1;\n      }).sort((a, b) => new Date(a.date) - new Date(b.date))[0];\n      return firstSession ? new Date(firstSession.date).toLocaleDateString('de-DE') : '-';\n    }, [patient]);\n    const conductedHours = useMemo(() => {\n      if (!patient || !patient.sessions) return 0;\n      return patient.sessions.filter(s => s.structuredNotes && typeof s.structuredNotes.sitzungsnummer === 'number').length;\n    }, [patient]);\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-start mb-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-2xl font-semibold text-gray-800\",\n          children: [patient.vorname, \" \", patient.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1408,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onDeselect,\n          className: \"text-gray-400 hover:text-gray-600\",\n          children: /*#__PURE__*/_jsxDEV(XCircle, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1409,\n            columnNumber: 96\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1409,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1407,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 text-sm text-gray-500 grid grid-cols-2 md:grid-cols-4 gap-x-4 gap-y-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-semibold\",\n            children: \"Kasse:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1412,\n            columnNumber: 27\n          }, this), \" \", patient.krankenkasse || '-']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1412,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-semibold\",\n            children: \"Vers.-Nr.:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1413,\n            columnNumber: 27\n          }, this), \" \", patient.versichertennummer || '-']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1413,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-semibold\",\n            children: \"Therapiebeginn:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1414,\n            columnNumber: 27\n          }, this), \" \", therapyStartDate]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1414,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-semibold\",\n            children: \"Stunden:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1415,\n            columnNumber: 27\n          }, this), \" \", conductedHours, \" / \", patient.approvedHours]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1415,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1411,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  };\n  _s3(PatientDetailHeader, \"sZ392WPNluoTXDhZX3asjt0EIrI=\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-screen w-full bg-slate-50 font-sans flex\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      currentView: mainView,\n      setView: setMainView\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1423,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"bg-white border-b border-slate-200\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mx-auto px-6 py-3 flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold text-gray-800 capitalize\",\n            children: mainView.replace('patientenakte', 'Patientenakte').replace('kalender', 'Kalender & Abrechnung')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1428,\n            columnNumber: 26\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLogout,\n            className: \"text-gray-500 hover:text-red-600 hover:bg-red-50 p-2 rounded-md text-sm flex items-center transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(LogOut, {\n              className: \"mr-2 h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1432,\n              columnNumber: 29\n            }, this), \" Logout\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1431,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1427,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1426,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"flex-1 overflow-y-auto p-6\",\n        children: [/*#__PURE__*/_jsxDEV(ConfirmationModal, {\n          isOpen: confirmDeleteState.isOpen,\n          onClose: () => setConfirmDeleteState({\n            isOpen: false\n          }),\n          onConfirm: confirmDeleteState.onConfirm,\n          title: confirmDeleteState.title,\n          message: confirmDeleteState.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1438,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          isOpen: isPatientModalOpen,\n          onClose: () => setIsPatientModalOpen(false),\n          title: editingPatient ? \"Patient bearbeiten\" : \"Neuen Patienten anlegen\",\n          children: /*#__PURE__*/_jsxDEV(PatientForm, {\n            patient: editingPatient,\n            onSave: handleSavePatient,\n            onCancel: () => setIsPatientModalOpen(false)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1451,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1446,\n          columnNumber: 21\n        }, this), mainView === 'patients' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            ref: overviewRef,\n            className: \"mb-6 flex justify-between items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-2xl font-semibold text-gray-800\",\n              children: \"Alle Patienten\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1461,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setEditingPatient(null);\n                setIsPatientModalOpen(true);\n              },\n              className: btnPrimary,\n              children: [/*#__PURE__*/_jsxDEV(UserPlus, {\n                className: \"w-5 h-5 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1463,\n                columnNumber: 37\n              }, this), \" Patient hinzuf\\xFCgen\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1462,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1460,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden mb-8\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overflow-x-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"w-full min-w-max table-auto text-left\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    className: \"bg-slate-50 border-b border-slate-200\",\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider cursor-pointer\",\n                      onClick: () => setSortConfig(prev => ({\n                        key: 'name',\n                        direction: prev.key === 'name' && prev.direction === 'ascending' ? 'descending' : 'ascending'\n                      })),\n                      children: [\"Name \", sortConfig.key === 'name' && (sortConfig.direction === 'ascending' ? '▲' : '▼')]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1472,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider\",\n                      children: \"Chiffre\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1481,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider\",\n                      children: \"Diagnosen\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1482,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider\",\n                      children: \"Therapieverfahren\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1483,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider text-center\",\n                      children: \"Stunden\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1484,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider\",\n                      children: \"Fortschritt\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1485,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      className: \"py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider\",\n                      children: \"Aktionen\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1486,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1471,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1470,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: [isLoading && /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: /*#__PURE__*/_jsxDEV(\"td\", {\n                      colSpan: \"7\",\n                      className: \"text-center py-10 text-gray-500\",\n                      children: \"Lade Patienten...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1490,\n                      columnNumber: 64\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1490,\n                    columnNumber: 60\n                  }, this), !isLoading && sortedPatients.length === 0 && /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: /*#__PURE__*/_jsxDEV(\"td\", {\n                      colSpan: \"7\",\n                      className: \"text-center py-10 text-gray-500\",\n                      children: \"Keine Patienten gefunden.\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1491,\n                      columnNumber: 96\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1491,\n                    columnNumber: 92\n                  }, this), !isLoading && sortedPatients.map(patient => {\n                    const conductedHours = (patient.sessions || []).filter(s => s.structuredNotes && typeof s.structuredNotes.sitzungsnummer === 'number').length;\n                    const progress = patient.approvedHours > 0 ? conductedHours / patient.approvedHours * 100 : 0;\n                    return /*#__PURE__*/_jsxDEV(\"tr\", {\n                      className: `hover:bg-slate-50 cursor-pointer border-t border-slate-200 ${(selectedPatient === null || selectedPatient === void 0 ? void 0 : selectedPatient.id) === patient.id ? 'bg-teal-50' : ''}`,\n                      onClick: () => {\n                        setSelectedPatient(patient);\n                        setMainView('patientenakte');\n                        setActiveDetailTab('übersicht');\n                        setTherapeutischeAssistenzOutput('');\n                        setAssistenzError(null);\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"py-3 px-4 whitespace-nowrap text-sm font-medium text-gray-800\",\n                        children: [patient.name, \", \", patient.vorname]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1497,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"py-3 px-4 whitespace-nowrap text-sm text-gray-600 font-mono\",\n                        children: patient.chiffre\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1498,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"py-3 px-4 text-sm text-gray-600 max-w-xs\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex flex-col space-y-1\",\n                          children: [(patient.diagnoses || []).slice(0, 2).map((diag, idx) => {\n                            const sicherheitMatch = diag.match(/^\\[([AVGZN]+)\\]/i);\n                            const sicherheit = sicherheitMatch ? sicherheitMatch[1].toUpperCase() : '';\n                            const colorClasses = {\n                              'G': 'bg-green-100 text-green-800 hover:bg-green-200',\n                              'V': 'bg-yellow-100 text-yellow-800 hover:bg-yellow-200',\n                              'A': 'bg-red-100 text-red-800 hover:bg-red-200',\n                              'ZN': 'bg-blue-100 text-blue-800 hover:bg-blue-200'\n                            }[sicherheit] || 'bg-gray-100 text-gray-800 hover:bg-gray-200';\n                            return /*#__PURE__*/_jsxDEV(\"span\", {\n                              className: `px-2 py-0.5 text-xs rounded-full truncate inline-block cursor-pointer ${colorClasses}`,\n                              onClick: e => {\n                                e.stopPropagation();\n                                showDiagnosisInfo(diag);\n                              },\n                              title: `Info zu ${diag} anzeigen`,\n                              children: [\" \", diag, \" \"]\n                            }, idx, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 1499,\n                              columnNumber: 656\n                            }, this);\n                          }), (patient.diagnoses || []).length > 2 && /*#__PURE__*/_jsxDEV(\"span\", {\n                            className: \"text-xs text-gray-500 mt-1\",\n                            children: \"...\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1499,\n                            columnNumber: 937\n                          }, this), (patient.diagnoses || []).length === 0 && \"-\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1499,\n                          columnNumber: 114\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1499,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"py-3 px-4 text-sm text-gray-600 max-w-xs\",\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"flex flex-wrap gap-1\",\n                          children: (patient.therapeuticMethods || []).map(method => /*#__PURE__*/_jsxDEV(\"span\", {\n                            className: \"bg-gray-200 text-gray-800 text-xs px-2 py-0.5 rounded-full\",\n                            children: method\n                          }, method, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1502,\n                            columnNumber: 115\n                          }, this))\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1501,\n                          columnNumber: 61\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1500,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"py-3 px-4 whitespace-nowrap text-sm text-gray-600 text-center\",\n                        children: [/*#__PURE__*/_jsxDEV(ConductedHours, {\n                          patient: patient\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1506,\n                          columnNumber: 61\n                        }, this), \" / \", patient.approvedHours]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1505,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"py-3 px-4 whitespace-nowrap\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-full bg-gray-200 rounded-full h-2.5\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: `h-2.5 rounded-full ${progress > 80 ? 'bg-red-500' : progress > 50 ? 'bg-yellow-400' : 'bg-green-500'}`,\n                            style: {\n                              width: `${Math.min(progress, 100)}%`\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1508,\n                            columnNumber: 156\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1508,\n                          columnNumber: 101\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-xs text-gray-500 block text-center mt-1\",\n                          children: [Math.round(progress), \"%\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1508,\n                          columnNumber: 338\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1508,\n                        columnNumber: 57\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"py-3 px-4 whitespace-nowrap text-sm space-x-2\",\n                        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: e => {\n                            e.stopPropagation();\n                            setEditingPatient(patient);\n                            setIsPatientModalOpen(true);\n                          },\n                          className: \"text-gray-500 hover:text-teal-600 transition duration-150 p-1 rounded hover:bg-teal-50\",\n                          title: \"Bearbeiten\",\n                          children: /*#__PURE__*/_jsxDEV(Edit3, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1509,\n                            columnNumber: 344\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1509,\n                          columnNumber: 119\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: e => {\n                            e.stopPropagation();\n                            openDeleteConfirmation(patient.id);\n                          },\n                          className: \"text-gray-500 hover:text-red-600 transition duration-150 p-1 rounded hover:bg-red-50\",\n                          title: \"L\\xF6schen\",\n                          children: /*#__PURE__*/_jsxDEV(Trash2, {}, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1509,\n                            columnNumber: 561\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1509,\n                          columnNumber: 362\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1509,\n                        columnNumber: 57\n                      }, this)]\n                    }, patient.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1496,\n                      columnNumber: 53\n                    }, this);\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1489,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {\n                  className: \"bg-slate-50 border-t-2 border-slate-200\",\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      colSpan: \"4\",\n                      className: \"py-3 px-4 text-sm font-semibold text-gray-700 text-right\",\n                      children: \"Gesamt:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1514,\n                      columnNumber: 104\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3 px-4 text-sm font-semibold text-gray-700 text-center\",\n                      children: `${totalConductedHours} / ${totalApprovedHours}`\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1514,\n                      columnNumber: 201\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"py-3 px-4 whitespace-nowrap\",\n                      colSpan: \"2\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"flex items-center\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-xs text-gray-600 mr-3 w-auto\",\n                          children: \"Fortschritt (600 Std.):\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1514,\n                          columnNumber: 421\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"w-full bg-gray-200 rounded-full h-2.5 flex-grow\",\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"bg-teal-500 h-2.5 rounded-full\",\n                            style: {\n                              width: `${Math.min(overallProgress, 100)}%`\n                            }\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 1514,\n                            columnNumber: 568\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1514,\n                          columnNumber: 503\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"text-xs text-gray-600 ml-2\",\n                          children: [Math.round(overallProgress), \"%\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1514,\n                          columnNumber: 684\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1514,\n                        columnNumber: 386\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1514,\n                      columnNumber: 330\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1514,\n                    columnNumber: 100\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1514,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1469,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1468,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1467,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true), mainView === 'patientenakte' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full max-w-5xl mx-auto\",\n          children: !selectedPatient ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center py-20 bg-white border border-dashed border-gray-300 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(Users, {\n              className: \"mx-auto h-12 w-12 text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1525,\n              columnNumber: 38\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"mt-2 text-lg font-medium text-gray-900\",\n              children: \"Patientenakte ansehen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1526,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-1 text-sm text-gray-500\",\n              children: \"W\\xE4hlen Sie einen Patienten aus der Liste aus, um dessen Akte hier anzuzeigen.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1527,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-6\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => setMainView('patients'),\n                className: btnPrimary,\n                children: [/*#__PURE__*/_jsxDEV(Users, {\n                  className: \"w-5 h-5 mr-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1534,\n                  columnNumber: 45\n                }, this), \"Zur Patienten\\xFCbersicht\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1529,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1528,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1524,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: detailViewRef,\n            className: \"bg-white border border-gray-200 shadow-sm rounded-lg p-6\",\n            children: [/*#__PURE__*/_jsxDEV(PatientDetailHeader, {\n              patient: selectedPatient,\n              onDeselect: () => setSelectedPatient(null)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1541,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border-b border-gray-200 mb-6\",\n              children: /*#__PURE__*/_jsxDEV(\"nav\", {\n                className: \"-mb-px flex space-x-4 sm:space-x-8 overflow-x-auto\",\n                \"aria-label\": \"Tabs\",\n                children: ['Übersicht', 'Diagnosen', 'Abrechnung', 'Krankheitsmodell', 'Diagnostik', 'Assistenz'].map(tab => /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => setActiveDetailTab(tab.toLowerCase()),\n                  className: `capitalize whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${activeDetailTab === tab.toLowerCase() ? 'border-teal-500 text-teal-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`,\n                  children: tab\n                }, tab, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1546,\n                  columnNumber: 49\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1544,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1543,\n              columnNumber: 37\n            }, this), activeDetailTab === 'übersicht' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-span-1 md:col-span-2 p-3 bg-teal-50 border border-teal-200 rounded-lg\",\n                children: [nextAppointment.isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-teal-700\",\n                  children: \"Lade n\\xE4chsten Termin...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1556,\n                  columnNumber: 79\n                }, this), nextAppointment.error && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-red-600\",\n                  children: nextAppointment.error\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1557,\n                  columnNumber: 75\n                }, this), nextAppointment.text && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm font-semibold text-teal-800\",\n                  children: nextAppointment.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1558,\n                  columnNumber: 74\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1555,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-lg font-semibold text-gray-700 mb-3 border-b pb-2\",\n                  children: \"Stammdaten\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1562,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"grid grid-cols-2 md:grid-cols-3 gap-4 mt-3 text-sm\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"Nachname\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1564,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: selectedPatient.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1564,\n                      columnNumber: 113\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1564,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"Vorname\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1565,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: selectedPatient.vorname\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1565,\n                      columnNumber: 112\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1565,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"Geburtsdatum\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1566,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: new Date(selectedPatient.geburtsdatum).toLocaleDateString('de-DE')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1566,\n                      columnNumber: 117\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1566,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"Alter\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1567,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: calculateAge(selectedPatient.geburtsdatum)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1567,\n                      columnNumber: 110\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1567,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"E-Mail\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1568,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: selectedPatient.email || '-'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1568,\n                      columnNumber: 111\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1568,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"Telefon\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1569,\n                      columnNumber: 58\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: selectedPatient.telefon || '-'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1569,\n                      columnNumber: 112\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1569,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-span-2 md:col-span-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"font-semibold text-gray-500\",\n                      children: \"Adresse\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1570,\n                      columnNumber: 95\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: selectedPatient.adresse || '-'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1570,\n                      columnNumber: 149\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1570,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1563,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1561,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-lg font-semibold text-gray-700 mb-3 border-b pb-2\",\n                  children: \"Letzte Hausaufgabe\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1575,\n                  columnNumber: 49\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-3 bg-gray-50 rounded-lg text-sm space-y-3\",\n                  children: (_selectedPatient$sess = selectedPatient.sessions) !== null && _selectedPatient$sess !== void 0 && (_selectedPatient$sess2 = _selectedPatient$sess[0]) !== null && _selectedPatient$sess2 !== void 0 && _selectedPatient$sess2.homeworkStatus && selectedPatient.sessions[0].homeworkStatus.length > 0 ? selectedPatient.sessions[0].homeworkStatus.map((task, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center gap-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      className: \"h-5 w-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500\",\n                      checked: task.done,\n                      onChange: e => handleUpdateHomeworkStatus(selectedPatient.sessions[0].date, index, {\n                        done: e.target.checked\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1580,\n                      columnNumber: 65\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `flex-grow ${task.done ? 'text-gray-500 line-through' : 'text-gray-800'}`,\n                      children: task.text\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1586,\n                      columnNumber: 65\n                    }, this), !task.done && /*#__PURE__*/_jsxDEV(\"select\", {\n                      className: \"text-xs border-gray-300 rounded-md shadow-sm focus:border-teal-300 focus:ring focus:ring-teal-200 focus:ring-opacity-50\",\n                      value: task.reason || '',\n                      onChange: e => handleUpdateHomeworkStatus(selectedPatient.sessions[0].date, index, {\n                        reason: e.target.value\n                      }),\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"\",\n                        children: \"Grund w\\xE4hlen...\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1595,\n                        columnNumber: 73\n                      }, this), Object.entries(homeworkFailureReasons).map(([category, reasons]) => /*#__PURE__*/_jsxDEV(\"optgroup\", {\n                        label: category,\n                        children: reasons.map(reason => /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: reason,\n                          children: reason\n                        }, reason, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1598,\n                          columnNumber: 104\n                        }, this))\n                      }, category, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1597,\n                        columnNumber: 77\n                      }, this))]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1590,\n                      columnNumber: 69\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1579,\n                    columnNumber: 61\n                  }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-gray-500\",\n                    children: \"Keine Hausaufgabe f\\xFCr die letzte Sitzung erfasst.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1606,\n                    columnNumber: 57\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1576,\n                  columnNumber: 49\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1574,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1554,\n              columnNumber: 41\n            }, this), activeDetailTab === 'diagnosen' && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-xl font-semibold text-gray-700 mb-3\",\n                  children: \"ICD-10 F-Diagnosen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1615,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mb-3 p-4 bg-gray-50 rounded-md border\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"grid grid-cols-1 md:grid-cols-3 gap-4 items-end\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"newDiagnosisCode\",\n                        className: \"block text-xs font-medium text-gray-700\",\n                        children: \"Code (z.B. F32.2)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1616,\n                        columnNumber: 170\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        id: \"newDiagnosisCode\",\n                        value: newDiagnosisCode,\n                        onChange: e => setNewDiagnosisCode(e.target.value.toUpperCase()),\n                        placeholder: \"F-Code\",\n                        className: `${inputStd} mt-1`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1616,\n                        columnNumber: 281\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1616,\n                      columnNumber: 165\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"newDiagnosisSicherheit\",\n                        className: \"block text-xs font-medium text-gray-700\",\n                        children: \"Sicherheit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1616,\n                        columnNumber: 480\n                      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                        id: \"newDiagnosisSicherheit\",\n                        value: newDiagnosisSicherheit,\n                        onChange: e => setNewDiagnosisSicherheit(e.target.value),\n                        className: `${inputStd} mt-1`,\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"G\",\n                          children: \"G (Gesichert)\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1616,\n                          columnNumber: 748\n                        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"V\",\n                          children: \"V (Verdacht auf)\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1616,\n                          columnNumber: 788\n                        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"A\",\n                          children: \"A (Ausschluss)\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1616,\n                          columnNumber: 831\n                        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"ZN\",\n                          children: \"ZN (Zustand nach)\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1616,\n                          columnNumber: 872\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1616,\n                        columnNumber: 590\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1616,\n                      columnNumber: 475\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"md:col-span-1\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"newDiagnosisName\",\n                        className: \"block text-xs font-medium text-gray-700\",\n                        children: \"Manuelle Beschreibung (optional)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1616,\n                        columnNumber: 963\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        id: \"newDiagnosisName\",\n                        value: newDiagnosis,\n                        onChange: e => setNewDiagnosis(e.target.value),\n                        placeholder: \"Eigene Beschreibung\",\n                        className: `${inputStd} mt-1`\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1616,\n                        columnNumber: 1089\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1616,\n                      columnNumber: 932\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: handleAddDiagnosis,\n                      className: `${btnPrimary} bg-green-500 hover:bg-green-600 py-2 px-3 h-10 md:self-end`,\n                      children: [/*#__PURE__*/_jsxDEV(PlusCircleIcon, {\n                        className: \"w-5 h-5 mr-1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1616,\n                        columnNumber: 1398\n                      }, this), \" Hinzuf\\xFCgen\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1616,\n                      columnNumber: 1274\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1616,\n                    columnNumber: 100\n                  }, this), lookedUpDiagnosisName && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-teal-600 mt-1\",\n                    children: [\"Gefunden: \", lookedUpDiagnosisName]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1616,\n                    columnNumber: 1493\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1616,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"space-y-1 mb-3\",\n                  children: [(selectedPatient.diagnoses || []).map((diagString, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"flex justify-between items-center bg-gray-50 p-2 rounded-md\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm text-gray-700\",\n                      children: diagString\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1618,\n                      columnNumber: 200\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => showDiagnosisInfo(diagString),\n                        className: `${btnInfo} p-1`,\n                        title: \"Info zu dieser Diagnose abrufen\",\n                        children: [/*#__PURE__*/_jsxDEV(FileJson2, {\n                          className: \"w-4 h-4 mr-1\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1618,\n                          columnNumber: 427\n                        }, this), \" Info\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1618,\n                        columnNumber: 304\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => handleRemoveDiagnosis(diagString),\n                        className: `${btnDanger} p-1 text-xs`,\n                        children: /*#__PURE__*/_jsxDEV(Trash2, {\n                          className: \"w-4 h-4\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 1618,\n                          columnNumber: 576\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1618,\n                        columnNumber: 479\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1618,\n                      columnNumber: 259\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1618,\n                    columnNumber: 112\n                  }, this)), (selectedPatient.diagnoses || []).length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500\",\n                    children: \"Keine Diagnosen erfasst.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1619,\n                    columnNumber: 100\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1617,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1614,\n                columnNumber: 42\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-xl font-semibold text-gray-700 mb-3\",\n                  children: \"ICD-11 Diagnosen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1623,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"space-y-1\",\n                  children: [(selectedPatient.diagnoses_icd11 || []).map((diag, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: \"flex justify-between items-center bg-purple-50 p-2 rounded-md hover:bg-purple-100 cursor-pointer\",\n                    onClick: () => fetchIcd11Details(diag),\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-sm text-purple-800\",\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        className: \"font-mono\",\n                        children: diag.code\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1625,\n                        columnNumber: 319\n                      }, this), \" - \", diag.title]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1625,\n                      columnNumber: 277\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: e => {\n                        e.stopPropagation();\n                        handleRemoveIcd11Diagnosis(diag);\n                      },\n                      className: \"text-red-500 hover:text-red-700 p-1 text-xs\",\n                      title: \"ICD-11 Diagnose entfernen\",\n                      children: /*#__PURE__*/_jsxDEV(Trash2, {\n                        className: \"w-4 h-4\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1625,\n                        columnNumber: 565\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1625,\n                      columnNumber: 391\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1625,\n                    columnNumber: 112\n                  }, this)), (selectedPatient.diagnoses_icd11 || []).length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-500\",\n                    children: \"Keine ICD-11 Diagnosen erfasst.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1626,\n                    columnNumber: 106\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1624,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1622,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1613,\n              columnNumber: 74\n            }, this), activeDetailTab === 'abrechnung' && /*#__PURE__*/_jsxDEV(AbrechnungsUebersicht, {\n              patient: selectedPatient,\n              ebmData: ebmData,\n              unbilledAppointments: unbilledAppointments,\n              onStartBilling: handleStartBilling,\n              onDeleteEbmEntry: handleDeleteEbmEntry,\n              onEditSession: handleEditSession,\n              onDeleteSession: handleDeleteSession\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1632,\n              columnNumber: 41\n            }, this), activeDetailTab === 'krankheitsmodell' && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"krankheitsanamnese\",\n                  className: \"block text-lg font-semibold text-gray-700 mb-1\",\n                  children: \"Krankheitsanamnese\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1644,\n                  columnNumber: 69\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  id: \"krankheitsanamnese\",\n                  name: \"krankheitsanamnese\",\n                  rows: \"6\",\n                  className: textareaStd,\n                  value: editableKrankheitsanamnese,\n                  onChange: e => setEditableKrankheitsanamnese(e.target.value),\n                  onBlur: e => handleKrankheitsmodellChange('krankheitsanamnese', e.target.value),\n                  placeholder: \"Hier die Krankheitsanamnese eintragen...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1644,\n                  columnNumber: 190\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1644,\n                columnNumber: 64\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"lebensgeschichte\",\n                  className: \"block text-lg font-semibold text-gray-700 mb-1\",\n                  children: \"Lebensgeschichte / Biographie\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1644,\n                  columnNumber: 542\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  id: \"lebensgeschichte\",\n                  name: \"lebensgeschichte\",\n                  rows: \"6\",\n                  className: textareaStd,\n                  value: editableLebensgeschichte,\n                  onChange: e => setEditableLebensgeschichte(e.target.value),\n                  onBlur: e => handleKrankheitsmodellChange('lebensgeschichte', e.target.value),\n                  placeholder: \"Wichtige Aspekte der Lebensgeschichte...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1644,\n                  columnNumber: 672\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1644,\n                columnNumber: 537\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"problemanalyseMakro\",\n                  className: \"block text-lg font-semibold text-gray-700 mb-1\",\n                  children: \"Problemanalyse auf Makroebene\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1644,\n                  columnNumber: 1014\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  id: \"problemanalyseMakro\",\n                  name: \"problemanalyseMakro\",\n                  rows: \"6\",\n                  className: textareaStd,\n                  value: editableProblemanalyseMakro,\n                  onChange: e => setEditableProblemanalyseMakro(e.target.value),\n                  onBlur: e => handleKrankheitsmodellChange('problemanalyseMakro', e.target.value),\n                  placeholder: \"Analyse der \\xFCbergeordneten Problembereiche...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1644,\n                  columnNumber: 1147\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1644,\n                columnNumber: 1009\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"therapieplan\",\n                  className: \"block text-lg font-semibold text-gray-700 mb-1\",\n                  children: \"Therapieplan\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1644,\n                  columnNumber: 1509\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  id: \"therapieplan\",\n                  name: \"therapieplan\",\n                  rows: \"6\",\n                  className: textareaStd,\n                  value: editableTherapieplan,\n                  onChange: e => setEditableTherapieplan(e.target.value),\n                  onBlur: e => handleKrankheitsmodellChange('therapieplan', e.target.value),\n                  placeholder: \"Therapieziele und -ma\\xDFnahmen...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1644,\n                  columnNumber: 1618\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1644,\n                columnNumber: 1504\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1644,\n              columnNumber: 37\n            }, this), activeDetailTab === 'diagnostik' && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border-b border-gray-200 mb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"nav\", {\n                  className: \"-mb-px flex space-x-6\",\n                  \"aria-label\": \"Diagnostik Sub-Tabs\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => setActiveDiagnostikSubTab('overview'),\n                    className: `whitespace-nowrap pb-2 px-1 border-b-2 font-medium text-sm ${activeDiagnostikSubTab === 'overview' ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`,\n                    children: \"\\xDCbersicht\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1650,\n                    columnNumber: 53\n                  }, this), availableTests.map(test => {\n                    var _selectedPatient;\n                    return ((_selectedPatient = selectedPatient[`${test.id}Results`]) === null || _selectedPatient === void 0 ? void 0 : _selectedPatient.length) > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => setActiveDiagnostikSubTab(test.id),\n                      className: `whitespace-nowrap pb-2 px-1 border-b-2 font-medium text-sm ${activeDiagnostikSubTab === test.id ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`,\n                      children: test.id.toUpperCase()\n                    }, test.id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1655,\n                      columnNumber: 57\n                    }, this);\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1649,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1648,\n                columnNumber: 45\n              }, this), activeDiagnostikSubTab === 'overview' && /*#__PURE__*/_jsxDEV(DiagnostikUebersicht, {\n                patient: selectedPatient,\n                availableTests: availableTests,\n                onAddTest: test => {\n                  setCurrentTestToAdd(test);\n                  setIsAddTestModalOpen(true);\n                },\n                onShowTestDetails: testId => setActiveDiagnostikSubTab(testId),\n                onStartRetroBilling: handleStartRetroBilling\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1663,\n                columnNumber: 49\n              }, this), activeDiagnostikSubTab === 'scl90r' && /*#__PURE__*/_jsxDEV(SCL90RComponent, {\n                patient: selectedPatient,\n                onAddResult: handleAddScl90rResult,\n                onDeleteResult: handleRemoveScl90rResult\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1672,\n                columnNumber: 85\n              }, this), activeDiagnostikSubTab === 'fep2' && /*#__PURE__*/_jsxDEV(FEP2Component, {\n                patient: selectedPatient,\n                onAddResult: handleAddFepResult,\n                onDeleteResult: handleRemoveFepResult\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1673,\n                columnNumber: 83\n              }, this), activeDiagnostikSubTab === 'bdi2' && /*#__PURE__*/_jsxDEV(BDI2Component, {\n                patient: selectedPatient,\n                onAddResult: handleAddBdiResult,\n                onDeleteResult: handleRemoveBdiResult,\n                bdiCutoffs: bdiCutoffs,\n                bdiAxisTicks: bdiAxisTicks,\n                CustomBdiLabel: CustomBdiLabel\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1674,\n                columnNumber: 83\n              }, this), activeDiagnostikSubTab === 'hscl11' && /*#__PURE__*/_jsxDEV(HSCL11Component, {\n                patient: selectedPatient,\n                onAddResult: handleAddHsclResult,\n                onDeleteResult: handleRemoveHsclResult\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1675,\n                columnNumber: 85\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1647,\n              columnNumber: 41\n            }, this), activeDetailTab === 'assistenz' && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-xl font-semibold text-gray-700 mb-4\",\n                children: \"Therapeutische Assistenz\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1681,\n                columnNumber: 45\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleTherapeutischeAssistenzAnfordern,\n                disabled: isLoadingTherapeutischeAssistenz,\n                className: `${btnPrimary} bg-purple-600 hover:bg-purple-700 mb-4 flex items-center`,\n                children: [/*#__PURE__*/_jsxDEV(WandSparkles, {\n                  className: \"mr-2 h-5 w-5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1683,\n                  columnNumber: 49\n                }, this), isLoadingTherapeutischeAssistenz ? \"Analysiere Daten...\" : \"Expertenfeedback anfordern\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1682,\n                columnNumber: 45\n              }, this), isLoadingTherapeutischeAssistenz && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center py-10\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-700 mx-auto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1686,\n                  columnNumber: 118\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-3 text-gray-600\",\n                  children: \"Bitte warten, die KI analysiert die Patientendaten...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1686,\n                  columnNumber: 214\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1686,\n                columnNumber: 83\n              }, this), assistenzError && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-red-100 border-l-4 border-red-500 text-red-700 p-4\",\n                role: \"alert\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-bold\",\n                  children: \"Fehler bei der Assistenz\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1687,\n                  columnNumber: 149\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: assistenzError\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1687,\n                  columnNumber: 202\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1687,\n                columnNumber: 65\n              }, this), therapeutischeAssistenzOutput && !isLoadingTherapeutischeAssistenz && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-4 p-4 bg-gray-50 rounded-md border\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"text-lg font-semibold text-gray-800 mb-2\",\n                  children: \"Vorschl\\xE4ge des Expertenteams:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1688,\n                  columnNumber: 172\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"whitespace-pre-wrap text-sm text-gray-700 leading-relaxed\",\n                  children: therapeutischeAssistenzOutput\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1688,\n                  columnNumber: 263\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1688,\n                columnNumber: 117\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1680,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1540,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1522,\n          columnNumber: 26\n        }, this), mainView === 'kalender' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-xl font-semibold text-gray-800\",\n                children: \"Offene Abrechnungen\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1700,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => setIsManualBillingSetupOpen(true),\n                className: `${btnPrimary} text-sm`,\n                children: \"Sitzung manuell abrechnen\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1701,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1699,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white rounded-lg shadow-sm border border-gray-200 p-4\",\n              children: [isLoadingAppointments && /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Lade offene Termine...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1709,\n                columnNumber: 63\n              }, this), !isLoadingAppointments && unbilledAppointments.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500\",\n                children: \"Keine offenen Abrechnungen gefunden.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1710,\n                columnNumber: 101\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"space-y-2\",\n                children: unbilledAppointments.map(event => /*#__PURE__*/_jsxDEV(\"li\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleStartBilling(event),\n                    className: \"w-full text-left p-3 bg-yellow-100 hover:bg-yellow-200 rounded-md text-sm text-yellow-800 font-medium\",\n                    children: [new Date(event.start.dateTime).toLocaleDateString('de-DE'), \" - \", event.summary]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1714,\n                    columnNumber: 49\n                  }, this)\n                }, event.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1713,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1711,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1708,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1698,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold text-gray-800 mb-4\",\n              children: \"Terminkalender\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1724,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white rounded-lg shadow-sm border border-gray-200 p-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4 text-sm text-blue-700\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"font-bold\",\n                  children: \"Anleitung zum Einbetten Ihres Google Kalenders:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1727,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n                  className: \"list-decimal list-inside mt-2 space-y-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [\"\\xD6ffnen Sie Ihren \", /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: \"https://calendar.google.com/\",\n                      target: \"_blank\",\n                      rel: \"noopener noreferrer\",\n                      className: \"text-blue-600 underline\",\n                      children: \"Google Kalender\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1729,\n                      columnNumber: 66\n                    }, this), \" im Browser.\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1729,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"Gehen Sie zu \\\"Einstellungen\\\" (Zahnrad-Symbol) \\u2192 \\\"Einstellungen\\\".\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1730,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: \"W\\xE4hlen Sie links unter \\\"Einstellungen f\\xFCr meine Kalender\\\" den Kalender aus, den Sie einbetten m\\xF6chten.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1731,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [\"Scrollen Sie zu \\\"Kalender integrieren\\\" und kopieren Sie den Link aus dem Feld \", /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"\\\"\\xD6ffentlich freigegebener Link zu diesem Kalender\\\"\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1732,\n                      columnNumber: 127\n                    }, this), \" oder den HTML-Code aus \", /*#__PURE__*/_jsxDEV(\"b\", {\n                      children: \"\\\"Einbettungscode\\\"\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1732,\n                      columnNumber: 208\n                    }, this), \".\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1732,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [\"Ersetzen Sie den \", /*#__PURE__*/_jsxDEV(\"code\", {\n                      children: \"src\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1733,\n                      columnNumber: 66\n                    }, this), \"-Link im \", /*#__PURE__*/_jsxDEV(\"code\", {\n                      children: \"iframe\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1733,\n                      columnNumber: 91\n                    }, this), \" unten im Code durch den Link aus Ihrem Kalender.\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1733,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1728,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1726,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n                title: \"Google Calendar\",\n                src: \"https://calendar.google.com/calendar/embed?src=julisycomorepsy%40gmail.com&ctz=Europe%2FBerlin\",\n                style: {\n                  border: 0\n                },\n                width: \"100%\",\n                height: \"600\",\n                frameBorder: \"0\",\n                scrolling: \"no\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1736,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1725,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1723,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1697,\n          columnNumber: 26\n        }, this), mainView === 'formulare' && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-2xl font-semibold text-gray-800 mb-4\",\n            children: \"Formular- & Dokumentenverwaltung\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1752,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white p-6 border border-gray-200 rounded-lg shadow-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"file-upload\",\n              className: \"mb-4 block w-full cursor-pointer\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-teal-400 transition-colors\",\n                children: [/*#__PURE__*/_jsxDEV(UploadCloudIcon, {\n                  className: \"mx-auto h-12 w-12 text-gray-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1756,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"mt-2 block text-sm font-medium text-gray-900\",\n                  children: \"Dateien zum Hochladen ausw\\xE4hlen\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1757,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"mt-1 block text-xs text-gray-500\",\n                  children: \"PDF, DOCX, etc.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1760,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1755,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"file-upload\",\n                name: \"file-upload\",\n                type: \"file\",\n                className: \"sr-only\",\n                multiple: true,\n                onChange: handleFileUpload\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1764,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1754,\n              columnNumber: 33\n            }, this), uploadedFiles.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                className: \"text-lg font-medium text-gray-900 mb-2\",\n                children: \"Hochgeladene Dateien\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1769,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"divide-y divide-gray-200 border rounded-lg\",\n                children: uploadedFiles.map((file, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"flex items-center justify-between p-3 hover:bg-gray-50\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex items-center\",\n                    children: [/*#__PURE__*/_jsxDEV(FileIcon, {\n                      className: \"h-6 w-6 text-gray-400 mr-3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1774,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-sm font-medium text-gray-900\",\n                        children: file.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1776,\n                        columnNumber: 61\n                      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                        className: \"text-xs text-gray-500\",\n                        children: [(file.size / 1024).toFixed(2), \" KB - Zuletzt ge\\xE4ndert: \", file.lastModified]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 1777,\n                        columnNumber: 61\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1775,\n                      columnNumber: 57\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1773,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleRemoveFile(file.name),\n                    className: \"text-gray-400 hover:text-red-600\",\n                    children: /*#__PURE__*/_jsxDEV(Trash2, {\n                      className: \"h-5 w-5\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1781,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1780,\n                    columnNumber: 53\n                  }, this)]\n                }, index, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1772,\n                  columnNumber: 49\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1770,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1768,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1753,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1751,\n          columnNumber: 25\n        }, this), mainView === 'ebm' && /*#__PURE__*/_jsxDEV(EBMBrowser, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1792,\n          columnNumber: 45\n        }, this), mainView === 'icd11' && /*#__PURE__*/_jsxDEV(ICD11ECTBrowser, {\n          patients: patients,\n          selectedPatient: selectedPatient,\n          onAssignDiagnosis: handleAssignIcd11Diagnosis\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1795,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1437,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1425,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: diagnosisInfo.isOpen,\n      onClose: () => setDiagnosisInfo(prev => ({\n        ...prev,\n        isOpen: false\n      })),\n      title: `Diagnose-Info: ${diagnosisInfo.code || ''}`,\n      size: \"3xl\",\n      children: [diagnosisInfo.isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center py-4\",\n        children: \"Informationen werden geladen...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1812,\n        columnNumber: 46\n      }, this), diagnosisInfo.error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-600 bg-red-100 p-3 rounded-md\",\n        children: [\"Fehler: \", diagnosisInfo.error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1813,\n        columnNumber: 42\n      }, this), !diagnosisInfo.isLoading && diagnosisInfo.source === 'local' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-700 leading-relaxed p-2 space-y-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-teal-700\",\n          children: [diagnosisInfo.name, /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-500 text-base ml-2\",\n            children: [\"(\", diagnosisInfo.code, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1816,\n            columnNumber: 97\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1816,\n          columnNumber: 25\n        }, this), diagnosisInfo.beschreibung && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-medium text-gray-800 block mb-1\",\n            children: \"Beschreibung:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1817,\n            columnNumber: 62\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"whitespace-pre-wrap\",\n            children: diagnosisInfo.beschreibung\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1817,\n            columnNumber: 141\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1817,\n          columnNumber: 57\n        }, this), ((_diagnosisInfo$inkl = diagnosisInfo.inkl) === null || _diagnosisInfo$inkl === void 0 ? void 0 : _diagnosisInfo$inkl.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-medium text-gray-800 block mb-1\",\n            children: \"Inklusive:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1818,\n            columnNumber: 66\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-disc list-inside\",\n            children: diagnosisInfo.inkl.map((item, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: item\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1818,\n              columnNumber: 220\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1818,\n            columnNumber: 142\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1818,\n          columnNumber: 61\n        }, this), ((_diagnosisInfo$exkl = diagnosisInfo.exkl) === null || _diagnosisInfo$exkl === void 0 ? void 0 : _diagnosisInfo$exkl.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-medium text-gray-800 block mb-1\",\n            children: \"Exklusive:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1819,\n            columnNumber: 66\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-disc list-inside\",\n            children: diagnosisInfo.exkl.map((item, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: item\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1819,\n              columnNumber: 220\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1819,\n            columnNumber: 142\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1819,\n          columnNumber: 61\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1815,\n        columnNumber: 21\n      }, this), !diagnosisInfo.isLoading && diagnosisInfo.source === 'api_detail' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm text-gray-700 leading-relaxed p-2 space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-purple-700\",\n          children: [diagnosisInfo.name, /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-500 text-base ml-2 font-mono\",\n            children: [\"(\", diagnosisInfo.code, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1824,\n            columnNumber: 99\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1824,\n          columnNumber: 25\n        }, this), diagnosisInfo.beschreibung && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-medium text-gray-800 block mb-1\",\n            children: \"Beschreibung (Definition):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1825,\n            columnNumber: 62\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"whitespace-pre-wrap bg-gray-50 p-2 rounded-md\",\n            children: diagnosisInfo.beschreibung\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1825,\n            columnNumber: 154\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1825,\n          columnNumber: 57\n        }, this), ((_diagnosisInfo$inclus = diagnosisInfo.inclusions) === null || _diagnosisInfo$inclus === void 0 ? void 0 : _diagnosisInfo$inclus.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-medium text-gray-800 block mb-1\",\n            children: \"Inklusive:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1826,\n            columnNumber: 72\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-disc list-inside pl-2 space-y-1\",\n            children: diagnosisInfo.inclusions.map((item, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: item.label['@value']\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1826,\n              columnNumber: 247\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1826,\n            columnNumber: 148\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1826,\n          columnNumber: 67\n        }, this), ((_diagnosisInfo$exclus = diagnosisInfo.exclusions) === null || _diagnosisInfo$exclus === void 0 ? void 0 : _diagnosisInfo$exclus.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-medium text-gray-800 block mb-1\",\n            children: \"Exklusive:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1827,\n            columnNumber: 72\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"list-disc list-inside pl-2 space-y-1\",\n            children: diagnosisInfo.exclusions.map((item, idx) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [item.label['@value'], item.foundationReference && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-400 ml-2\",\n                children: [\"(\", item.linearizationReference.split('/').pop(), \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1827,\n                columnNumber: 311\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1827,\n              columnNumber: 247\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1827,\n            columnNumber: 148\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1827,\n          columnNumber: 67\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1823,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1806,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: improvementState.isOpen,\n      onClose: () => setImprovementState({\n        ...improvementState,\n        isOpen: false\n      }),\n      title: \"Sitzungsdokumentation verbessern\",\n      size: \"5xl\",\n      children: [improvementState.error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500 bg-red-100 p-3 rounded-md mb-4\",\n        children: improvementState.error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1838,\n        columnNumber: 44\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold text-lg text-gray-700 mb-2\",\n            children: \"Original\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1841,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n            className: \"text-sm bg-gray-100 p-3 rounded-md whitespace-pre-wrap font-sans h-96 overflow-y-auto border\",\n            children: improvementState.originalText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1842,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1840,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold text-lg text-gray-700 mb-2\",\n            children: \"Vorschlag\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1845,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n            className: \"text-sm bg-gray-800 text-green-300 font-mono p-3 rounded-md whitespace-pre-wrap h-96 overflow-y-auto\",\n            children: improvementState.improvedText\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1846,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1844,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1839,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end space-x-4 mt-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => setImprovementState({\n            ...improvementState,\n            isOpen: false\n          }),\n          className: \"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300\",\n          children: \"Abbrechen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1850,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAcceptImprovement,\n          className: `${btnPrimary} flex items-center`,\n          children: [/*#__PURE__*/_jsxDEV(Save, {\n            className: \"w-4 h-4 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1852,\n            columnNumber: 25\n          }, this), \" Original ersetzen\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1851,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1849,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1832,\n      columnNumber: 13\n    }, this), appError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed bottom-4 right-4 p-4 max-w-sm text-sm text-red-700 bg-red-100 border border-red-400 rounded-md shadow-lg z-[100]\",\n      children: [appError, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setAppError(null),\n        className: \"ml-4 mt-2 sm:mt-0 sm:ml-2 px-2 py-1 text-red-900 underline rounded-md hover:bg-red-200 text-xs\",\n        children: \"Ok\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1857,\n        columnNumber: 173\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1857,\n      columnNumber: 27\n    }, this), /*#__PURE__*/_jsxDEV(AddTestFlowModal, {\n      isOpen: isAddTestModalOpen,\n      onClose: () => setIsAddTestModalOpen(false),\n      onSave: handleSaveTestAndResults,\n      testInfo: currentTestToAdd,\n      patient: selectedPatient\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1859,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ManualBillingSetupModal, {\n      isOpen: isManualBillingSetupOpen,\n      onClose: () => setIsManualBillingSetupOpen(false),\n      patients: sortedPatients,\n      onStart: handleStartManualBilling\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1867,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(BillTestModal, {\n      isOpen: retroBillingState.isOpen,\n      onClose: () => setRetroBillingState({\n        isOpen: false,\n        test: null\n      }),\n      onSave: handleSaveRetroactiveBilling,\n      testToBill: retroBillingState.test,\n      patientSessions: (selectedPatient === null || selectedPatient === void 0 ? void 0 : selectedPatient.sessions) || []\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1874,\n      columnNumber: 13\n    }, this), billingModalState.isOpen && /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: billingModalState.isOpen,\n      onClose: () => setBillingModalState({\n        isOpen: false,\n        event: null,\n        isEditing: false\n      }),\n      title: billingModalState.isEditing ? \"Sitzung bearbeiten\" : `Termin abrechnen: ${billingModalState.event.summary}`,\n      size: \"4xl\",\n      children: /*#__PURE__*/_jsxDEV(BillingModal, {\n        event: billingModalState.event,\n        ebmData: ebmData,\n        onSave: data => handleSaveBilling(data, billingModalState.isEditing),\n        onClose: () => setBillingModalState({\n          isOpen: false,\n          event: null,\n          isEditing: false\n        }),\n        generateGeminiText: generateGeminiText,\n        isEditing: billingModalState.isEditing\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1889,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1883,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1422,\n    columnNumber: 9\n  }, this);\n}\n_s4(App, \"dudr0Fove+0MHtOZ6DB0DnFRY9g=\");\n_c30 = App;\nconst CustomBdiLabel = props => {\n  const {\n    x,\n    y,\n    width,\n    text\n  } = props;\n  if (typeof x !== 'number' || isNaN(x) || typeof y !== 'number' || isNaN(y) || typeof width !== 'number' || isNaN(width) || width <= 0) {\n    return null;\n  }\n  const labelX = x + width / 2;\n  return /*#__PURE__*/_jsxDEV(\"text\", {\n    x: labelX,\n    y: y,\n    fill: \"#666\",\n    textAnchor: \"middle\",\n    dy: -4,\n    fontSize: \"10\",\n    children: text\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1912,\n    columnNumber: 13\n  }, this);\n};\n_c31 = CustomBdiLabel;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16, _c17, _c18, _c19, _c20, _c21, _c22, _c23, _c24, _c25, _c26, _c27, _c28, _c29, _c30, _c31;\n$RefreshReg$(_c, \"SCL90RComponent\");\n$RefreshReg$(_c2, \"FEP2Component\");\n$RefreshReg$(_c3, \"BDI2Component\");\n$RefreshReg$(_c4, \"HSCL11Component\");\n$RefreshReg$(_c5, \"ICD11ECTBrowser\");\n$RefreshReg$(_c6, \"EBMBrowser\");\n$RefreshReg$(_c7, \"BillTestModal\");\n$RefreshReg$(_c8, \"AddTestFlowModal\");\n$RefreshReg$(_c9, \"ManualBillingSetupModal\");\n$RefreshReg$(_c0, \"UserPlus\");\n$RefreshReg$(_c1, \"Edit3\");\n$RefreshReg$(_c10, \"Trash2\");\n$RefreshReg$(_c11, \"PlusCircleIcon\");\n$RefreshReg$(_c12, \"XCircle\");\n$RefreshReg$(_c13, \"Save\");\n$RefreshReg$(_c14, \"AlertTriangle\");\n$RefreshReg$(_c15, \"InfoIcon\");\n$RefreshReg$(_c16, \"FileJson2\");\n$RefreshReg$(_c17, \"WandSparkles\");\n$RefreshReg$(_c18, \"LogOut\");\n$RefreshReg$(_c19, \"BookOpen\");\n$RefreshReg$(_c20, \"Users\");\n$RefreshReg$(_c21, \"FileText\");\n$RefreshReg$(_c22, \"List\");\n$RefreshReg$(_c23, \"CalendarIcon\");\n$RefreshReg$(_c24, \"UploadCloudIcon\");\n$RefreshReg$(_c25, \"FileIcon\");\n$RefreshReg$(_c26, \"PaperclipIcon\");\n$RefreshReg$(_c27, \"Modal\");\n$RefreshReg$(_c28, \"ConfirmationModal\");\n$RefreshReg$(_c29, \"PatientForm\");\n$RefreshReg$(_c30, \"App\");\n$RefreshReg$(_c31, \"CustomBdiLabel\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","useMemo","initializeApp","getAuth","onAuthStateChanged","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","getFirestore","collection","doc","addDoc","getDocs","setDoc","deleteDoc","onSnapshot","query","writeBatch","SCL90RComponent","patient","onAddResult","onDeleteResult","_jsxDEV","className","children","name","fileName","_jsxFileName","lineNumber","columnNumber","_c","FEP2Component","_c2","BDI2Component","bdiCutoffs","bdiAxisTicks","CustomBdiLabel","_c3","HSCL11Component","_c4","ICD11ECTBrowser","patients","selectedPatient","onAssignDiagnosis","_c5","EBMBrowser","_c6","BillTestModal","isOpen","onClose","onSave","testToBill","patientSessions","Modal","title","_c7","AddTestFlowModal","testInfo","_c8","ManualBillingSetupModal","onStart","_c9","AbrechnungsUebersicht","BillingModal","DiagnostikUebersicht","jsxDEV","Fragment","_Fragment","UserPlus","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","cx","cy","r","x1","x2","y1","y2","_c0","Edit3","_c1","Trash2","points","_c10","PlusCircleIcon","_c11","XCircle","_c12","Save","_c13","AlertTriangle","_c14","InfoIcon","_c15","FileJson2","_c16","WandSparkles","_c17","LogOut","_c18","BookOpen","_c19","Users","_c20","FileText","_c21","List","_c22","CalendarIcon","x","y","width","height","rx","ry","_c23","UploadCloudIcon","_c24","FileIcon","_c25","PaperclipIcon","_c26","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","auth","db","firestoreAppId","homeworkFailureReasons","availableTests","id","ebm","recommendation","availableTherapeuticMethods","size","sizeClasses","sm","md","lg","xl","onClick","_c27","ConfirmationModal","onConfirm","message","_c28","PatientForm","onCancel","_s","initialFormData","vorname","chiffre","geburtsdatum","adresse","email","telefon","krankenkasse","versichertennummer","therapeuticMethods","approvedHours","diagnoses","sessions","hscl11Results","bdi2Results","fep2Results","scl90rResults","krankheitsanamnese","lebensgeschichte","problemanalyseMakro","therapieplan","formData","setFormData","newMethod","setNewMethod","firstLetter","charAt","toUpperCase","year","month","day","split","yy","slice","newChiffre","prev","e","console","error","handleChange","value","type","target","parseInt","handleAddMethod","currentMethods","includes","handleRemoveMethod","methodToRemove","filter","m","handleSubmit","preventDefault","inputStd","btnPrimary","onSubmit","htmlFor","onChange","required","readOnly","map","method","min","_c29","generateGeminiText","prompt","chatHistory","role","parts","text","payload","contents","GEMINI_API_KEY","apiUrl","response","fetch","headers","body","JSON","stringify","ok","_errorData$error","errorData","json","errorMessage","status","Error","result","candidates","length","content","finishReason","warn","App","_s4","_s2","$RefreshSig$","_s3","_selectedPatient$sess","_selectedPatient$sess2","_diagnosisInfo$inkl","_diagnosisInfo$exkl","_diagnosisInfo$inclus","_diagnosisInfo$exclus","mainView","setMainView","setPatients","setSelectedPatient","isLoading","setIsLoading","authError","setAuthError","appError","setAppError","userId","setUserId","isAuthReady","setIsAuthReady","setEmail","password","setPassword","isLoginView","setIsLoginView","isAuthLoading","setIsAuthLoading","isPatientModalOpen","setIsPatientModalOpen","editingPatient","setEditingPatient","newDiagnosis","setNewDiagnosis","newDiagnosisCode","setNewDiagnosisCode","newDiagnosisSicherheit","setNewDiagnosisSicherheit","lookedUpDiagnosisName","setLookedUpDiagnosisName","activeDetailTab","setActiveDetailTab","activeDiagnostikSubTab","setActiveDiagnostikSubTab","diagnosisInfo","setDiagnosisInfo","code","beschreibung","inkl","exkl","hinweise","zusatz_info_code","sicherheit","source","localIcd10Data","setLocalIcd10Data","editableKrankheitsanamnese","setEditableKrankheitsanamnese","editableLebensgeschichte","setEditableLebensgeschichte","editableProblemanalyseMakro","setEditableProblemanalyseMakro","editableTherapieplan","setEditableTherapieplan","therapeutischeAssistenzOutput","setTherapeutischeAssistenzOutput","isLoadingTherapeutischeAssistenz","setIsLoadingTherapeutischeAssistenz","assistenzError","setAssistenzError","detailViewRef","overviewRef","improvementState","setImprovementState","originalText","improvedText","sessionIndex","sortConfig","setSortConfig","key","direction","nextAppointment","setNextAppointment","unbilledAppointments","setUnbilledAppointments","isLoadingAppointments","setIsLoadingAppointments","billingModalState","setBillingModalState","event","isEditing","ebmData","setEbmData","isManualBillingSetupOpen","setIsManualBillingSetupOpen","confirmDeleteState","setConfirmDeleteState","retroBillingState","setRetroBillingState","test","isAddTestModalOpen","setIsAddTestModalOpen","currentTestToAdd","setCurrentTestToAdd","uploadedFiles","setUploadedFiles","handleStartRetroBilling","handleSaveRetroactiveBilling","billingData","sessionId","multiplier","date","phase","patientRef","getPatientsCollectionPath","newTestEbmEntry","nummer","anzahl","faktor","testInstanceId","finalPatientData","updatedSessions","parse","findIndex","s","sessionToUpdate","ebmEntries","testBillingSession","Date","now","toISOString","eventId","structuredNotes","thema","Phase","push","sort","a","b","merge","alert","err","handleDeleteEbmEntry","sessionDate","ebmIndexToDelete","entryToDelete","linkedTest","find","t","performDelete","splice","resultKey","oldResults","newResults","handleStartManualBilling","patientId","p","nextSessionNumber","sessionNumbers","_s$structuredNotes","sitzungsnummer","n","isNaN","Math","max","syntheticEvent","summary","start","dateTime","isManual","handleStartBilling","sortedPatients","sortablePatients","valA","valB","fetchNextAppointment","startDate","endDate","end","dateOptions","timeOptions","hour","minute","formattedDate","toLocaleDateString","formattedStartTime","toLocaleTimeString","formattedEndTime","findIcd10CodeLocal","codeToFind","upperCodeToFind","found","baseCode","replace","possibleCategoryCode","Object","keys","startsWith","code_kategorie","_event$summary","chiffreMatch","match","targetPatient","_s$structuredNotes2","eventWithSessionNumber","handleEditSession","session","_session$structuredNo","_session$structuredNo2","initialNotes","initialEbm","handleDeleteSession","handleSaveBilling","eventStart","notes","newSession","homeworkStatus","hausaufgaben","task","trim","taskText","done","reason","handleSaveTestAndResults","testData","testId","results","newTestResult","updatedTestResults","handleUpdateHomeworkStatus","homeworkIndex","newStatus","collectionPath","assign","then","res","catch","calendarEvents","Array","isArray","billedEventIds","Set","forEach","add","unbilled","_event$summary2","has","finally","data","indexedData","item","current","setTimeout","scrollIntoView","behavior","block","unsubscribe","user","uid","seedInitialData","patientsCollection","querySnapshot","empty","batch","initialPatientsData","patientData","newPatientRef","set","diagnoses_icd11","commit","patientsQuery","snapshot","patientsData","docs","docSnap","localeCompare","currentPatientDataFromList","loadIcd10Data","label","color","handleAuthAction","isRegistering","handleLogout","handleSavePatient","dataToSave","confirmDeletePatient","openDeleteConfirmation","handleAddDiagnosis","codeToAdd","sicherheitPrefix","diagnosisString","updatedDiagnoses","log","handleRemoveDiagnosis","diagnosisStringToRemove","handleAddBdiResult","newResult","updatedBdiResults","handleAddHsclResult","updatedHsclResults","handleRemoveHsclResult","dateToRemove","handleRemoveBdiResult","handleAddFepResult","updatedFepResults","handleRemoveFepResult","handleAddScl90rResult","newResultToSave","rawScores","tScores","globalScores","itemScores","updatedScl90rResults","handleRemoveScl90rResult","handleKrankheitsmodellChange","fieldName","handleTherapeutischeAssistenzAnfordern","patientenDatenText","i","_s$structuredNotes3","_s$structuredNotes4","patientenbericht","join","_s$structuredNotes5","systemPrompt","assistenz","showDiagnosisInfo","sicherheitMatch","codeAndName","substring","codeMatch","localData","beschreibung_kategorie","fetchIcd11Details","diagnosis","uri","_fullData$title","_fullData$definition","encodeURIComponent","fullData","definition","diagnosticCriteria","inclusions","inclusion","exclusions","exclusion","handleAssignIcd11Diagnosis","icd11Entity","selectedText","linearizationUri","foundationUri","handleRemoveIcd11Diagnosis","diagnosisToRemove","handleAcceptImprovement","handleFileUpload","files","from","newFiles","file","lastModified","lastModifiedDate","handleRemoveFile","f","ConductedHours","count","totalConductedHours","reduce","sum","sessionCount","totalApprovedHours","overallProgressTarget","overallProgress","btnDanger","btnInfo","textareaStd","disabled","Sidebar","currentView","setView","navItems","icon","PatientDetailHeader","onDeselect","therapyStartDate","firstSession","_s$structuredNotes6","conductedHours","ref","colSpan","progress","diag","idx","colorClasses","stopPropagation","style","round","tab","toLowerCase","calculateAge","index","checked","entries","category","reasons","placeholder","diagString","onStartBilling","onDeleteEbmEntry","onEditSession","onDeleteSession","rows","onBlur","_selectedPatient","onAddTest","onShowTestDetails","onStartRetroBilling","href","rel","src","border","frameBorder","scrolling","multiple","toFixed","foundationReference","linearizationReference","pop","_c30","props","labelX","textAnchor","dy","fontSize","_c31","$RefreshReg$"],"sources":["/Users/julianrogowski/Desktop/patientenverwaltung-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef, useMemo } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport {\n    getAuth,\n    onAuthStateChanged,\n    createUserWithEmailAndPassword,\n    signInWithEmailAndPassword,\n    signOut\n} from 'firebase/auth';\nimport { getFirestore, collection, doc, addDoc, getDocs, setDoc, deleteDoc, onSnapshot, query, writeBatch } from 'firebase/firestore';\n\n// --- PLACEHOLDER COMPONENTS (da der Code nicht bereitgestellt wurde) ---\nconst SCL90RComponent = ({ patient, onAddResult, onDeleteResult }) => <div className=\"p-4 bg-gray-100 rounded-lg\">SCL-90-R Component Placeholder for patient {patient?.name}</div>;\nconst FEP2Component = ({ patient, onAddResult, onDeleteResult }) => <div className=\"p-4 bg-gray-100 rounded-lg\">FEP-2 Component Placeholder for patient {patient?.name}</div>;\nconst BDI2Component = ({ patient, onAddResult, onDeleteResult, bdiCutoffs, bdiAxisTicks, CustomBdiLabel }) => <div className=\"p-4 bg-gray-100 rounded-lg\">BDI-II Component Placeholder for patient {patient?.name}</div>;\nconst HSCL11Component = ({ patient, onAddResult, onDeleteResult }) => <div className=\"p-4 bg-gray-100 rounded-lg\">HSCL-11 Component Placeholder for patient {patient?.name}</div>;\nconst ICD11ECTBrowser = ({ patients, selectedPatient, onAssignDiagnosis }) => <div className=\"p-4 bg-white rounded-lg shadow-sm border\">ICD-11 Browser Placeholder</div>;\nconst EBMBrowser = () => <div className=\"p-4 bg-white rounded-lg shadow-sm border\">EBM Browser Placeholder</div>;\nconst BillTestModal = ({ isOpen, onClose, onSave, testToBill, patientSessions }) => {\n    if (!isOpen) return null;\n    return <Modal isOpen={isOpen} onClose={onClose} title=\"Test abrechnen\"><div>BillTestModal Placeholder</div></Modal>;\n};\nconst AddTestFlowModal = ({ isOpen, onClose, onSave, testInfo, patient }) => {\n     if (!isOpen) return null;\n    return <Modal isOpen={isOpen} onClose={onClose} title=\"Test hinzufügen\"><div>AddTestFlowModal Placeholder</div></Modal>;\n};\nconst ManualBillingSetupModal = ({ isOpen, onClose, patients, onStart }) => {\n    if (!isOpen) return null;\n    return <Modal isOpen={isOpen} onClose={onClose} title=\"Sitzung manuell anlegen\"><div>ManualBillingSetupModal Placeholder</div></Modal>;\n};\nimport AbrechnungsUebersicht from './components/AbrechnungsUebersicht.js';\nimport BillingModal from './components/BillingModal.js';\nimport DiagnostikUebersicht from './components/DiagnostikUebersicht.js';\n\n\n// --- ICONS ---\nconst UserPlus = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\" /><circle cx=\"9\" cy=\"7\" r=\"4\" /><line x1=\"19\" x2=\"19\" y1=\"8\" y2=\"14\" /><line x1=\"22\" x2=\"16\" y1=\"11\" y2=\"11\" /></svg>);\nconst Edit3 = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M12 20h9\" /><path d=\"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z\" /></svg>);\nconst Trash2 = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><polyline points=\"3 6 5 6 21 6\" /><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" /><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" /><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" /></svg>);\nconst PlusCircleIcon = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><circle cx=\"12\" cy=\"12\" r=\"10\" /><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\" /><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\" /></svg>);\nconst XCircle = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line><line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line></svg>);\nconst Save = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\" /><polyline points=\"17 21 17 13 7 13 7 21\" /><polyline points=\"7 3 7 8 15 8\" /></svg>);\nconst AlertTriangle = ({ className = \"w-12 h-12\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path><line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line><line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line></svg>);\nconst InfoIcon = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"></line><line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"></line></svg>);\nconst FileJson2 = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4\" /><path d=\"M14 2v6h6\" /><path d=\"M4 12h1.6a2 2 0 0 0 1.9-3.4L6 6\" /><path d=\"M4 18h1.6a2 2 0 0 1 1.9 3.4L6 24\" /><path d=\"M12 12h1.6a2 2 0 0 1 1.9-3.4L14 6\" /><path d=\"M12 18h1.6a2 2 0 0 0 1.9 3.4L14 24\" /></svg>);\nconst WandSparkles = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"m9.5 2.55 1.294 1.294a1 1 0 0 0 1.414 0L13.5 2.55\" /><path d=\"M4.94 4.94 6.22 6.22a1 1 0 0 0 1.41 0l1.29-1.29\" /><path d=\"M2.55 9.51 3.84 10.8a1 1 0 0 0 1.41 0l1.3-1.29\" /><path d=\"m19.07 4.93-1.29 1.29a1 1 0 0 1-1.41 0l-1.29-1.29\" /><path d=\"M21.45 9.51l-1.29 1.29a1 1 0 0 1-1.41 0l-1.3-1.29\" /><path d=\"M14.5 12.94a1 1 0 0 0 0 1.41l1.29 1.29\" /><path d=\"M10.8 17.78a1 1 0 0 0 0 1.41l1.29 1.29\" /><path d=\"M17.78 10.8a1 1 0 0 0 0 1.41l1.29 1.29\" /><path d=\"M12 10.5V4.5\" /><path d=\"M12 10.5C7 11 4 15 4 20\" /><path d=\"M12 10.5c5 .5 8 4.5 8 9.5\" /></svg>);\nconst LogOut = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\" /><polyline points=\"16 17 21 12 16 7\" /><line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\" /></svg>);\nconst BookOpen = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\"/><path d=\"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\"/></svg>);\nconst Users = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\"/><circle cx=\"9\" cy=\"7\" r=\"4\"/><path d=\"M22 21v-2a4 4 0 0 0-3-3.87\"/><path d=\"M16 3.13a4 4 0 0 1 0 7.75\"/></svg>);\nconst FileText = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\"/><polyline points=\"14 2 14 8 20 8\"/><line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\"/><line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\"/><line x1=\"10\" y1=\"9\" x2=\"8\" y2=\"9\"/></svg>);\nconst List = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><line x1=\"8\" x2=\"21\" y1=\"6\" y2=\"6\"/><line x1=\"8\" x2=\"21\" y1=\"12\" y2=\"12\"/><line x1=\"8\" x2=\"21\" y1=\"18\" y2=\"18\"/><line x1=\"3\" x2=\"3.01\" y1=\"6\" y2=\"6\"/><line x1=\"3\" x2=\"3.01\" y1=\"12\" y2=\"12\"/><line x1=\"3\" x2=\"3.01\" y1=\"18\" y2=\"18\"/></svg>);\nconst CalendarIcon = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect><line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\"></line><line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\"></line><line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\"></line></svg>);\nconst UploadCloudIcon = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242\"/><path d=\"M12 12v9\"/><path d=\"m16 16-4-4-4 4\"/></svg>);\nconst FileIcon = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\"/><polyline points=\"14 2 14 8 20 8\"/></svg>);\nconst PaperclipIcon = ({ className = \"w-5 h-5\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.59a2 2 0 0 1-2.83-2.83l8.49-8.48\"/></svg>);\n\n\n// Firebase Konfiguration\nconst firebaseConfig = {\n    apiKey: \"AIzaSyDZ_qqqKW7WDCZ9botek2VBwXNMQO3JYwU\",\n    authDomain: \"psychotherapie0512.firebaseapp.com\",\n    projectId: \"psychotherapie0512\",\n    storageBucket: \"psychotherapie0512.firebasestorage.app\",\n    messagingSenderId: \"131279046361\",\n    appId: \"1:131279046361:web:e5dd2d18b206fb820b60c8\"\n};\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst firestoreAppId = 'default-patient-app-v5';\n\n// Konstanten\nconst homeworkFailureReasons = {\n    \"Motivational\": [\"Geringe Motivation\", \"Zweifel am Nutzen der Hausaufgabe\", \"Keine Einsicht in die Relevanz\"],\n    \"Emotional\": [\"Angst vor Versagen\", \"Scham oder Schuldgefühle\", \"Vermeidung unangenehmer Gefühle\"],\n    \"Kognitive\": [\"Negative automatische Gedanken\", \"Perfektionismus\"],\n    \"Organisatorisch/Praktisch\": [\"Zeitmangel\", \"Vergessen\", \"Keine klaren Anweisungen oder Verständnisprobleme\"],\n    \"Interaktion mit Therapeut\": [\"Widerstand gegen den Therapeuten\", \"Beziehungskonflikte\", \"Mangel an Vertrauen\"],\n    \"Psychopathologisch\": [\"Konzentrationsprobleme\", \"Antriebslosigkeit\", \"Überwältigende Symptome\"]\n};\nconst availableTests = [\n    { id: 'scl90r', name: 'SCL-90-R - Symptom-Checklist-90-R', ebm: '35601', recommendation: 10 },\n    { id: 'fep2', name: 'FEP-2 - Fragebogen zur Erfassung von Persönlichkeitsstörungen', ebm: '35601', recommendation: 12 },\n    { id: 'bdi2', name: 'BDI-II - Beck-Depressions-Inventar II', ebm: '35600', recommendation: 2 },\n    { id: 'hscl11', name: 'HSCL-11 - Hopkins Symptom Checklist-11', ebm: '35600', recommendation: 1 },\n];\nconst availableTherapeuticMethods = [\n    \"Kognitive Verhaltenstherapie (KVT)\",\n    \"Schematherapie\",\n    \"Acceptance and Commitment Therapy (ACT)\",\n    \"Dialektisch-Behaviorale Therapie (DBT)\",\n    \"Eye Movement Desensitization and Reprocessing (EMDR)\",\n    \"Tiefenpsychologisch fundierte Psychotherapie\",\n    \"Systemische Therapie\"\n];\n\n// Hilfskomponenten\nconst Modal = ({ isOpen, onClose, title, children, size = \"lg\" }) => { if (!isOpen) return null; const sizeClasses = { sm: 'max-w-sm', md: 'max-w-md', lg: 'max-w-lg', xl: 'max-w-xl', '2xl': 'max-w-2xl', '3xl': 'max-w-3xl', '4xl': 'max-w-4xl', '5xl': 'max-w-5xl' }; return (<div className=\"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50 p-4\"><div className={`bg-white p-6 rounded-lg shadow-xl w-full ${sizeClasses[size]} max-h-[90vh] overflow-y-auto`}><div className=\"flex justify-between items-center mb-4\"><h2 className=\"text-xl font-semibold text-gray-800\">{title}</h2><button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\"><XCircle className=\"w-7 h-7\" /></button></div>{children}</div></div>); };\nconst ConfirmationModal = ({ isOpen, onClose, onConfirm, title, message }) => { if (!isOpen) return null; return (<Modal isOpen={isOpen} onClose={onClose} title={title} size=\"md\"><div className=\"text-center\"><AlertTriangle className=\"mx-auto mb-4 w-12 h-12 text-red-500\" /><p className=\"text-gray-600 mb-6\">{message}</p><div className=\"flex justify-center space-x-4\"><button onClick={onClose} className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none\">Abbrechen</button><button onClick={onConfirm} className=\"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none\">Bestätigen</button></div></div></Modal>); }; \n\nconst PatientForm = ({ patient, onSave, onCancel }) => {\n    const initialFormData = {\n        name: '', vorname: '', chiffre: '', geburtsdatum: '', adresse: '', email: '', telefon: '',\n        krankenkasse: '', versichertennummer: '', therapeuticMethods: [], approvedHours: 0,\n        diagnoses: [], sessions: [], hscl11Results: [], bdi2Results: [], fep2Results: [], scl90rResults: [],\n        krankheitsanamnese: \"\", lebensgeschichte: \"\", problemanalyseMakro: \"\", therapieplan: \"\"\n    };\n\n    const [formData, setFormData] = useState(patient ? { ...initialFormData, ...patient } : initialFormData);\n    const [newMethod, setNewMethod] = useState(\"\");\n\n    useEffect(() => {\n        setFormData(patient ? { ...initialFormData, ...patient } : initialFormData);\n    }, [patient]);\n    \n    useEffect(() => {\n        const { name, geburtsdatum } = formData;\n        if (name && geburtsdatum) {\n            try {\n                const firstLetter = name.charAt(0).toUpperCase();\n                const [year, month, day] = geburtsdatum.split('-');\n\n                if (year && month && day) {\n                    const yy = year.slice(-2);\n                    const newChiffre = `${firstLetter}${day}${month}${yy}`;\n                    setFormData(prev => ({ ...prev, chiffre: newChiffre }));\n                }\n            } catch (e) {\n                console.error(\"Fehler bei der Chiffre-Generierung\", e);\n                setFormData(prev => ({ ...prev, chiffre: '' }));\n            }\n        } else {\n            if (formData.chiffre !== '') {\n                setFormData(prev => ({ ...prev, chiffre: '' }));\n            }\n        }\n    }, [formData.name, formData.geburtsdatum]); \n\n    const handleChange = (e) => { const { name, value, type } = e.target; setFormData((prev) => ({ ...prev, [name]: type === 'number' ? parseInt(value, 10) || 0 : value })); };\n    \n    const handleAddMethod = () => {\n        const currentMethods = formData.therapeuticMethods || [];\n        if (newMethod && !currentMethods.includes(newMethod)) {\n            setFormData(prev => ({ ...prev, therapeuticMethods: [...currentMethods, newMethod] }));\n            setNewMethod(\"\");\n        }\n    };\n    \n    const handleRemoveMethod = (methodToRemove) => {\n        setFormData(prev => ({ ...prev, therapeuticMethods: (prev.therapeuticMethods || []).filter(m => m !== methodToRemove) }));\n    };\n\n    const handleSubmit = (e) => { e.preventDefault(); onSave(formData); };\n\n    const inputStd = \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm\";\n    const btnPrimary = \"px-4 py-2 text-sm font-medium text-white bg-teal-600 rounded-md hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 flex items-center\";\n\n    return (\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div><label htmlFor=\"vorname\" className=\"block text-sm font-medium text-gray-700\">Vorname</label><input type=\"text\" name=\"vorname\" id=\"vorname\" value={formData.vorname} onChange={handleChange} required className={inputStd} /></div>\n                <div><label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700\">Nachname</label><input type=\"text\" name=\"name\" id=\"name\" value={formData.name} onChange={handleChange} required className={inputStd} /></div>\n                <div><label htmlFor=\"geburtsdatum\" className=\"block text-sm font-medium text-gray-700\">Geburtsdatum</label><input type=\"date\" name=\"geburtsdatum\" id=\"geburtsdatum\" value={formData.geburtsdatum} onChange={handleChange} required className={inputStd} /></div>\n                <div><label htmlFor=\"chiffre\" className=\"block text-sm font-medium text-gray-700\">Chiffre</label><input type=\"text\" name=\"chiffre\" id=\"chiffre\" value={formData.chiffre} readOnly className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100 sm:text-sm\" /></div>\n            </div>\n            <div><label htmlFor=\"adresse\" className=\"block text-sm font-medium text-gray-700\">Adresse</label><input type=\"text\" name=\"adresse\" id=\"adresse\" value={formData.adresse} onChange={handleChange} className={inputStd} /></div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div><label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">E-Mail</label><input type=\"email\" name=\"email\" id=\"email\" value={formData.email} onChange={handleChange} className={inputStd} /></div>\n                <div><label htmlFor=\"telefon\" className=\"block text-sm font-medium text-gray-700\">Telefon</label><input type=\"tel\" name=\"telefon\" id=\"telefon\" value={formData.telefon} onChange={handleChange} className={inputStd} /></div>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div><label htmlFor=\"krankenkasse\" className=\"block text-sm font-medium text-gray-700\">Krankenkasse</label><input type=\"text\" name=\"krankenkasse\" id=\"krankenkasse\" value={formData.krankenkasse} onChange={handleChange} className={inputStd} /></div>\n                <div><label htmlFor=\"versichertennummer\" className=\"block text-sm font-medium text-gray-700\">Versichertennummer</label><input type=\"text\" name=\"versichertennummer\" id=\"versichertennummer\" value={formData.versichertennummer} onChange={handleChange} className={inputStd} /></div>\n            </div>\n             <div>\n                <label className=\"block text-sm font-medium text-gray-700\">Therapieverfahren</label>\n                <div className=\"mt-1 flex flex-wrap gap-2\">\n                    {(formData.therapeuticMethods || []).map(method => (\n                        <span key={method} className=\"flex items-center bg-teal-100 text-teal-800 text-xs font-medium px-2.5 py-0.5 rounded-full\">\n                            {method}\n                            <button type=\"button\" onClick={() => handleRemoveMethod(method)} className=\"ml-1.5 text-teal-500 hover:text-teal-700\">\n                                <XCircle className=\"h-3 w-3\" />\n                            </button>\n                        </span>\n                    ))}\n                </div>\n                <div className=\"mt-2 flex items-center gap-2\">\n                    <select value={newMethod} onChange={(e) => setNewMethod(e.target.value)} className={inputStd}>\n                        <option value=\"\">Verfahren auswählen...</option>\n                        {availableTherapeuticMethods.filter(m => !(formData.therapeuticMethods || []).includes(m)).map(m => <option key={m} value={m}>{m}</option>)}\n                    </select>\n                    <button type=\"button\" onClick={handleAddMethod} className=\"bg-gray-200 p-2 rounded-md hover:bg-gray-300\">\n                        <PlusCircleIcon className=\"h-5 w-5 text-gray-600\"/>\n                    </button>\n                </div>\n            </div>\n            <div><label htmlFor=\"approvedHours\" className=\"block text-sm font-medium text-gray-700\">Genehmigte Stunden</label><input type=\"number\" name=\"approvedHours\" id=\"approvedHours\" value={formData.approvedHours} onChange={handleChange} min=\"0\" className={inputStd} /></div>\n            <div className=\"flex justify-end space-x-3 pt-4\">\n                <button type=\"button\" onClick={onCancel} className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500\">Abbrechen</button>\n                <button type=\"submit\" className={btnPrimary}><Save className=\"w-4 h-4 mr-2\" /> Speichern</button>\n            </div>\n        </form>\n    );\n};\n\nasync function generateGeminiText(prompt) {\n    let chatHistory = [{ role: \"user\", parts: [{ text: prompt }] }];\n    const payload = { contents: chatHistory };\n    const GEMINI_API_KEY = \"AIzaSyCWQFze_8cKDZ6W2DTqfqIcvhcsKWfuZLw\"; \n    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${GEMINI_API_KEY}`;\n    try {\n        const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });\n        if (!response.ok) { const errorData = await response.json(); console.error(\"Gemini API error details:\", errorData); const errorMessage = errorData.error?.message || `API request failed with status ${response.status}`; throw new Error(errorMessage); }\n        const result = await response.json();\n        if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) { return result.candidates[0].content.parts[0].text; }\n        else if (result.candidates && result.candidates.length > 0 && result.candidates[0].finishReason === \"SAFETY\") { console.warn(\"Gemini API response blocked due to safety reasons.\"); return \"Die Antwort wurde aufgrund von Sicherheitsrichtlinien blockiert.\"; }\n        else { console.error(\"Unexpected Gemini API response structure:\", result); throw new Error(\"Unerwartete Antwortstruktur von der API.\"); }\n    } catch (error) { console.error(\"Error calling Gemini API:\", error); throw error; }\n}\n\nfunction App() {\n    // --- States ---\n    const [mainView, setMainView] = useState('patients');\n    const [patients, setPatients] = useState([]);\n    const [selectedPatient, setSelectedPatient] = useState(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [authError, setAuthError] = useState(null);\n    const [appError, setAppError] = useState(null);\n    const [userId, setUserId] = useState(null);\n    const [isAuthReady, setIsAuthReady] = useState(false);\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [isLoginView, setIsLoginView] = useState(true);\n    const [isAuthLoading, setIsAuthLoading] = useState(false);\n    const [isPatientModalOpen, setIsPatientModalOpen] = useState(false);\n    const [editingPatient, setEditingPatient] = useState(null);\n    const [newDiagnosis, setNewDiagnosis] = useState('');\n    const [newDiagnosisCode, setNewDiagnosisCode] = useState('');\n    const [newDiagnosisSicherheit, setNewDiagnosisSicherheit] = useState('G');\n    const [lookedUpDiagnosisName, setLookedUpDiagnosisName] = useState('');\n    const [activeDetailTab, setActiveDetailTab] = useState('übersicht');\n    const [activeDiagnostikSubTab, setActiveDiagnostikSubTab] = useState('overview');\n    const [diagnosisInfo, setDiagnosisInfo] = useState({ code: '', name: '', beschreibung: '', inkl: [], exkl: [], hinweise: [], zusatz_info_code: '', sicherheit: '', isLoading: false, error: null, isOpen: false, source: '' });\n    const [localIcd10Data, setLocalIcd10Data] = useState({});\n    const [editableKrankheitsanamnese, setEditableKrankheitsanamnese] = useState(\"\");\n    const [editableLebensgeschichte, setEditableLebensgeschichte] = useState(\"\");\n    const [editableProblemanalyseMakro, setEditableProblemanalyseMakro] = useState(\"\");\n    const [editableTherapieplan, setEditableTherapieplan] = useState(\"\");\n    const [therapeutischeAssistenzOutput, setTherapeutischeAssistenzOutput] = useState(\"\");\n    const [isLoadingTherapeutischeAssistenz, setIsLoadingTherapeutischeAssistenz] = useState(false);\n    const [assistenzError, setAssistenzError] = useState(null);\n    const detailViewRef = useRef(null);\n    const overviewRef = useRef(null);\n    const [improvementState, setImprovementState] = useState({ isOpen: false, isLoading: false, originalText: '', improvedText: '', sessionIndex: null, error: null });\n    const [sortConfig, setSortConfig] = useState({ key: 'name', direction: 'ascending' });\n    const [nextAppointment, setNextAppointment] = useState({ isLoading: false, text: null, error: null });\n    const [unbilledAppointments, setUnbilledAppointments] = useState([]);\n    const [isLoadingAppointments, setIsLoadingAppointments] = useState(false);\n    const [billingModalState, setBillingModalState] = useState({ isOpen: false, event: null, isEditing: false });\n    const [ebmData, setEbmData] = useState([]);\n    const [isManualBillingSetupOpen, setIsManualBillingSetupOpen] = useState(false);\n    const [confirmDeleteState, setConfirmDeleteState] = useState({ isOpen: false, onConfirm: null, message: '', title: '' });\n    const [retroBillingState, setRetroBillingState] = useState({ isOpen: false, test: null });\n    const [isAddTestModalOpen, setIsAddTestModalOpen] = useState(false);\n    const [currentTestToAdd, setCurrentTestToAdd] = useState(null);\n    const [uploadedFiles, setUploadedFiles] = useState([]); // For new forms tab\n\n    const handleStartRetroBilling = (testToBill) => {\n        setRetroBillingState({ isOpen: true, test: testToBill });\n    };\n\n    const handleSaveRetroactiveBilling = async (testToBill, billingData) => {\n        const { sessionId, multiplier, date, phase } = billingData;\n        if (!selectedPatient || !testToBill) return;\n\n        const patientRef = doc(db, getPatientsCollectionPath(), selectedPatient.id);\n        const newTestEbmEntry = {\n            nummer: testToBill.ebm,\n            anzahl: multiplier || 1,\n            faktor: 1,\n            testInstanceId: testToBill.testInstanceId // Wichtig, um die Verbindung herzustellen\n        };\n\n        let finalPatientData = {};\n        const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions || []));\n\n        try {\n            if (sessionId && sessionId !== 'new') {\n                const sessionIndex = updatedSessions.findIndex(s => s.id === sessionId);\n                if (sessionIndex === -1) throw new Error(\"Ausgewählte Sitzung nicht gefunden.\");\n\n                const sessionToUpdate = updatedSessions[sessionIndex];\n                sessionToUpdate.ebmEntries = [...(sessionToUpdate.ebmEntries || []), newTestEbmEntry];\n            } else {\n                const testBillingSession = {\n                    id: `sess_${Date.now()}`,\n                    date: new Date(date).toISOString(),\n                    eventId: `retro_bill_${testToBill.testInstanceId}`,\n                    ebmEntries: [newTestEbmEntry],\n                    structuredNotes: {\n                        thema: `Testdiagnostik (nachtr.): ${testToBill.name}`,\n                        Phase: phase,\n                    }\n                };\n                updatedSessions.push(testBillingSession);\n            }\n\n            updatedSessions.sort((a, b) => new Date(b.date) - new Date(a.date));\n            finalPatientData.sessions = updatedSessions;\n\n            await setDoc(patientRef, finalPatientData, { merge: true });\n            alert(`Test \"${testToBill.name}\" wurde erfolgreich abgerechnet.`);\n\n        } catch (err) {\n            setAppError(`Fehler bei der nachträglichen Abrechnung: ${err.message}`);\n            console.error(\"Error during retroactive billing:\", err);\n        }\n    };\n\n    const handleDeleteEbmEntry = async (sessionDate, ebmIndexToDelete) => {\n        if (!selectedPatient || !userId) return;\n\n        const patientRef = doc(db, getPatientsCollectionPath(), selectedPatient.id);\n        const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n        const sessionIndex = updatedSessions.findIndex(s => s.date === sessionDate);\n\n        if (sessionIndex === -1) {\n            setAppError(\"Sitzung zum Löschen des Eintrags nicht gefunden.\");\n            return;\n        }\n\n        const sessionToUpdate = updatedSessions[sessionIndex];\n        const entryToDelete = sessionToUpdate.ebmEntries[ebmIndexToDelete];\n\n        const linkedTest = availableTests.find(t => t.ebm === entryToDelete.nummer);\n\n        const performDelete = async () => {\n            sessionToUpdate.ebmEntries.splice(ebmIndexToDelete, 1);\n            let finalPatientData = { sessions: updatedSessions };\n\n            if (linkedTest && entryToDelete.testInstanceId) {\n                const resultKey = `${linkedTest.id}Results`;\n                const oldResults = selectedPatient[resultKey] || [];\n                const newResults = oldResults.filter(r => r.testInstanceId !== entryToDelete.testInstanceId);\n                finalPatientData[resultKey] = newResults;\n            }\n\n            try {\n                await setDoc(patientRef, finalPatientData, { merge: true });\n                setConfirmDeleteState({ isOpen: false }); \n            } catch (err) {\n                setAppError(`Fehler beim Löschen: ${err.message}`);\n            }\n        };\n\n        if (linkedTest) {\n            setConfirmDeleteState({\n                isOpen: true,\n                title: \"Eintrag wirklich löschen?\",\n                message: `Dieser Abrechnungseintrag ist mit dem Diagnostiktest \"${linkedTest.name}\" verknüpft. Wenn Sie ihn löschen, wird auch das zugehörige Testergebnis unwiderruflich entfernt. Fortfahren?`,\n                onConfirm: performDelete\n            });\n        } else {\n            await performDelete();\n        }\n    };\n\n    const handleStartManualBilling = (patientId, date) => {\n        const patient = patients.find(p => p.id === patientId);\n        if (!patient) {\n            setAppError(\"Patient für manuelle Abrechnung nicht gefunden.\");\n            return;\n        }\n\n        let nextSessionNumber = 1;\n        if (patient.sessions && patient.sessions.length > 0) {\n            const sessionNumbers = patient.sessions\n                .map(s => s.structuredNotes?.sitzungsnummer)\n                .filter(n => typeof n === 'number' && !isNaN(n));\n            if (sessionNumbers.length > 0) {\n                nextSessionNumber = Math.max(...sessionNumbers) + 1;\n            }\n        }\n\n        const syntheticEvent = {\n            id: `manual_${Date.now()}`,\n            summary: `Manuelle Sitzung (${patient.chiffre})`,\n            start: {\n                dateTime: new Date(date).toISOString()\n            },\n            sitzungsnummer: nextSessionNumber, // Use the calculated number\n            isManual: true\n        };\n\n        handleStartBilling(syntheticEvent);\n    };\n\n    const sortedPatients = useMemo(() => {\n        let sortablePatients = [...patients];\n        if (sortConfig !== null) {\n            sortablePatients.sort((a, b) => {\n                const valA = a[sortConfig.key] || '';\n                const valB = b[sortConfig.key] || '';\n                if (valA < valB) {\n                    return sortConfig.direction === 'ascending' ? -1 : 1;\n                }\n                if (valA > valB) {\n                    return sortConfig.direction === 'ascending' ? 1 : -1;\n                }\n                return 0;\n            });\n        }\n        return sortablePatients;\n    }, [patients, sortConfig]);\n\n    \n    const fetchNextAppointment = useCallback(async (chiffre) => {\n        if (!chiffre) return;\n        setNextAppointment({ isLoading: true, text: null, error: null });\n        try {\n            const response = await fetch(`http://localhost:3001/api/calendar/nextevent?chiffre=${chiffre}`);\n            if (response.status === 404) {\n                setNextAppointment({ isLoading: false, text: 'Kein zukünftiger Termin gefunden.', error: null });\n                return;\n            }\n            if (!response.ok) {\n                throw new Error('Kalender-API-Anfrage fehlgeschlagen.');\n            }\n            const event = await response.json();\n\n            const startDate = new Date(event.start);\n            const endDate = new Date(event.end);\n            const dateOptions = { day: '2-digit', month: '2-digit', year: 'numeric' };\n            const timeOptions = { hour: '2-digit', minute: '2-digit' };\n\n            const formattedDate = startDate.toLocaleDateString('de-DE', dateOptions);\n            const formattedStartTime = startDate.toLocaleTimeString('de-DE', timeOptions);\n            const formattedEndTime = endDate.toLocaleTimeString('de-DE', timeOptions);\n\n            setNextAppointment({\n                isLoading: false,\n                text: `Nächster Termin: ${formattedDate} um ${formattedStartTime} bis ${formattedEndTime} Uhr`,\n                error: null\n            });\n\n        } catch (error) {\n            console.error('Fehler beim Abrufen des Termins:', error);\n            setNextAppointment({ isLoading: false, text: null, error: 'Termin konnte nicht geladen werden.' });\n        }\n    }, []);\n    \n    const getPatientsCollectionPath = useCallback(() => { if (!userId) return null; return `/artifacts/${firestoreAppId}/users/${userId}/patients`; }, [userId]);\n    \n    const findIcd10CodeLocal = useCallback((codeToFind) => {\n        const upperCodeToFind = codeToFind.toUpperCase();\n        let found = localIcd10Data[upperCodeToFind];\n        if (found) return found;\n        const baseCode = upperCodeToFind.replace(/(\\.-[*]|\\.\\*|[*]|-)$/, '');\n        found = localIcd10Data[`${baseCode}.-*`] || localIcd10Data[`${baseCode}.*`] || localIcd10Data[baseCode];\n        if (found) return found;\n        const possibleCategoryCode = Object.keys(localIcd10Data).find(key => key.startsWith(upperCodeToFind) && (localIcd10Data[key].code_kategorie || localIcd10Data[key].code));\n        if (possibleCategoryCode) return localIcd10Data[possibleCategoryCode];\n        return null;\n    }, [localIcd10Data]);\n\n    const handleStartBilling = (event) => {\n        const chiffreMatch = event.summary?.match(/[A-Z][0-9]{6}/);\n        const chiffre = chiffreMatch ? chiffreMatch[0] : null;\n        const targetPatient = patients.find(p => p.chiffre === chiffre);\n\n        let nextSessionNumber = 1;\n        if (targetPatient && targetPatient.sessions && targetPatient.sessions.length > 0) {\n            const sessionNumbers = targetPatient.sessions\n                .map(s => s.structuredNotes?.sitzungsnummer)\n                .filter(n => typeof n === 'number' && !isNaN(n));\n\n            if (sessionNumbers.length > 0) {\n                nextSessionNumber = Math.max(...sessionNumbers) + 1;\n            }\n        }\n        \n        const eventWithSessionNumber = { ...event, sitzungsnummer: event.sitzungsnummer || nextSessionNumber };\n\n        setBillingModalState({ isOpen: true, event: eventWithSessionNumber, isEditing: false });\n    };\n    \n    const handleEditSession = (session) => {\n        const event = {\n            id: session.id, // Use the unique session ID\n            summary: `${session.structuredNotes?.thema || 'Sitzung'} (${selectedPatient.chiffre})`,\n            start: { dateTime: session.date },\n            sitzungsnummer: session.structuredNotes?.sitzungsnummer,\n            initialNotes: session.structuredNotes,\n            initialEbm: session.ebmEntries,\n        };\n        setBillingModalState({ isOpen: true, event, isEditing: true });\n    };\n\n    const handleDeleteSession = (sessionId) => {\n        if (!selectedPatient) return;\n        \n        const performDelete = async () => {\n            const updatedSessions = selectedPatient.sessions.filter(s => s.id !== sessionId);\n            const patientRef = doc(db, getPatientsCollectionPath(), selectedPatient.id);\n            try {\n                await setDoc(patientRef, { sessions: updatedSessions }, { merge: true });\n                setConfirmDeleteState({ isOpen: false });\n            } catch (error) {\n                console.error(\"Error deleting session: \", error);\n                setAppError(\"Fehler beim Löschen der Sitzung.\");\n            }\n        };\n\n        setConfirmDeleteState({\n            isOpen: true,\n            title: \"Sitzung löschen?\",\n            message: \"Möchten Sie diese Sitzung und alle zugehörigen Abrechnungsdaten wirklich löschen?\",\n            onConfirm: performDelete,\n        });\n    };\n\n    const handleSaveBilling = async (billingData, isEditing) => {\n        const { chiffre, eventId, eventStart, notes, ebmEntries } = billingData;\n    \n        const targetPatient = patients.find(p => p.chiffre === chiffre);\n        if (!targetPatient) {\n            setAppError(`Patient mit Chiffre ${chiffre} nicht gefunden.`);\n            return;\n        }\n    \n        const patientRef = doc(db, getPatientsCollectionPath(), targetPatient.id);\n        let updatedSessions;\n    \n        if (isEditing) {\n            // Update existing session\n            updatedSessions = targetPatient.sessions.map(session => {\n                // eventId is the unique session.id in edit mode\n                if (session.id === eventId) { \n                    return { ...session, structuredNotes: notes, ebmEntries: ebmEntries };\n                }\n                return session;\n            });\n        } else {\n            // Add new session\n            const newSession = {\n                id: `sess_${Date.now()}`, // Ensure a unique ID\n                date: new Date(eventStart).toISOString(),\n                structuredNotes: notes,\n                ebmEntries: ebmEntries,\n                eventId: eventId,\n                homeworkStatus: (notes.hausaufgaben || [])\n                    .filter(task => task.trim() !== '')\n                    .map(taskText => ({ text: taskText, done: false, reason: '' }))\n            };\n            updatedSessions = [...(targetPatient.sessions || []), newSession];\n        }\n    \n        updatedSessions.sort((a, b) => new Date(b.date) - new Date(a.date));\n    \n        try {\n            await setDoc(patientRef, { sessions: updatedSessions }, { merge: true });\n            setBillingModalState({ isOpen: false, event: null, isEditing: false });\n            if (!isEditing) {\n              setActiveDetailTab('abrechnung');\n            }\n        } catch (err) {\n            setAppError(\"Fehler beim Speichern der Abrechnung.\");\n            console.error(\"Error saving billing:\", err);\n        }\n    };\n\n    const handleSaveTestAndResults = async (testData) => {\n        const { testId, sessionId, multiplier, phase, date, results } = testData; if (!selectedPatient || !testId) {\n            setAppError(\"Fehler: Patient oder Test nicht spezifiziert.\");\n            return;\n        }\n\n        const testInfo = availableTests.find(t => t.id === testId);\n        if (!testInfo) {\n            setAppError(\"Testkonfiguration nicht gefunden.\");\n            return;\n        }\n\n        const patientRef = doc(db, getPatientsCollectionPath(), selectedPatient.id);\n        const testInstanceId = `test_${testId}_${Date.now()}`;\n        const newTestEbmEntry = { nummer: testInfo.ebm, anzahl: multiplier || 1, faktor: 1, testInstanceId };\n\n        const resultKey = `${testId}Results`;\n        const newTestResult = { date: new Date().toISOString(), ...results, testInstanceId };\n        const updatedTestResults = [...(selectedPatient[resultKey] || []), newTestResult];\n\n        let finalPatientData = {\n            [resultKey]: updatedTestResults\n        };\n\n        try {\n            if (sessionId && sessionId !== 'new') {\n                const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n                const sessionIndex = updatedSessions.findIndex(s => s.id === sessionId);\n\n                if (sessionIndex === -1) {\n                    throw new Error(\"Die ausgewählte Sitzung zum Hinzufügen wurde nicht gefunden.\");\n                }\n\n                const sessionToUpdate = updatedSessions[sessionIndex];\n                sessionToUpdate.ebmEntries = [...(sessionToUpdate.ebmEntries || []), newTestEbmEntry];\n                finalPatientData.sessions = updatedSessions;\n\n            } else {\n                const testBillingSession = {\n                    id: `sess_${Date.now()}`,\n                    date: new Date(date).toISOString(),\n                    eventId: `test_${testId}_${Date.now()}`,\n                    ebmEntries: [newTestEbmEntry],\n                    structuredNotes: {\n                        thema: `Testdiagnostik: ${testInfo.name}`,\n                        Phase: phase,\n                    }\n                };\n                const updatedSessions = [...(selectedPatient.sessions || []), testBillingSession];\n                updatedSessions.sort((a, b) => new Date(b.date) - new Date(a.date));\n                finalPatientData.sessions = updatedSessions;\n            }\n            await setDoc(patientRef, finalPatientData, { merge: true });\n\n            alert(`Test \"${testInfo.name}\" wurde gespeichert und abgerechnet.`);\n            setActiveDiagnostikSubTab(testId);\n        } catch (err) {\n            setAppError(`Fehler beim Speichern der Testdaten: ${err.message}`);\n            console.error(\"Error saving test data:\", err);\n        }\n    };\n\n    const handleUpdateHomeworkStatus = async (sessionDate, homeworkIndex, newStatus) => {\n        if (!selectedPatient || !userId) return;\n\n        const collectionPath = getPatientsCollectionPath();\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n\n        const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n\n        const sessionToUpdate = updatedSessions.find(s => s.date === sessionDate);\n        if (sessionToUpdate && sessionToUpdate.homeworkStatus && sessionToUpdate.homeworkStatus[homeworkIndex]) {\n            Object.assign(sessionToUpdate.homeworkStatus[homeworkIndex], newStatus);\n        }\n\n        try {\n            await setDoc(patientRef, { sessions: updatedSessions }, { merge: true });\n        } catch (err) {\n            console.error(\"Error updating homework status:\", err);\n            setAppError(\"Fehler beim Aktualisieren des Hausaufgabenstatus.\");\n        }\n    };\n\n\n    // --- useEffects ---\n    useEffect(() => {\n        if (ebmData.length === 0) {\n            fetch('/ebm_data_full.json')\n                .then(res => res.json())\n                .then(setEbmData)\n                .catch(err => console.error(\"Failed to load EBM data\", err));\n        }\n    }, [ebmData.length]);\n\n    useEffect(() => {\n        if (mainView === 'patientenakte' || mainView === 'abrechnung' || mainView === 'kalender') {\n            setIsLoadingAppointments(true);\n            fetch('http://localhost:3001/api/calendar/past-events')\n                .then(res => {\n                    if (!res.ok) {\n                        return res.json().then(errorData => {\n                            throw new Error(errorData.message || `Serverfehler: ${res.status}`);\n                        });\n                    }\n                    return res.json();\n                })\n                .then(calendarEvents => {\n                    if (!Array.isArray(calendarEvents)) {\n                        throw new Error(\"Unerwartetes Datenformat vom Server erhalten.\");\n                    };\n                    const billedEventIds = new Set();\n                    patients.forEach(p => {\n                        (p.sessions || []).forEach(s => {\n                            if (s.eventId) billedEventIds.add(s.eventId);\n                        });\n                    });\n                    const unbilled = calendarEvents.filter(event =>\n                        !billedEventIds.has(event.id) &&\n                        event.summary?.match(/[A-Z][0-9]{6}/)\n                    );\n                    setUnbilledAppointments(unbilled);\n                })\n                .catch(err => {\n                    if (err.message && err.message.includes('Nicht bei Google authentifiziert')) {\n                        setAppError(`Kalender-Fehler: Sie müssen sich erneut bei Google authentifizieren. Rufen Sie dazu im Browser auf: http://localhost:3001/auth/google`);\n                    } else {\n                        setAppError(`Offene Abrechnungen konnten nicht geladen werden: ${err.message}`);\n                    }\n                })\n                .finally(() => setIsLoadingAppointments(false));\n        }\n    }, [mainView, patients]);\n\n    useEffect(() => {\n        if (selectedPatient) {\n            fetchNextAppointment(selectedPatient.chiffre);\n        } else {\n            setNextAppointment({ isLoading: false, text: null, error: null });\n        }\n    }, [selectedPatient, fetchNextAppointment]);\n\n    useEffect(() => {\n        fetch('/icd10f_data.json')\n            .then(response => { if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`); return response.json(); })\n            .then(data => {\n                const indexedData = {};\n                data.forEach(item => { if (item.code) { indexedData[item.code.toUpperCase()] = item; } });\n                setLocalIcd10Data(indexedData);\n            })\n            .catch(error => { console.error(\"Fehler beim Laden der lokalen ICD-10 Daten:\", error); setAppError(\"Lokale ICD-10 Daten konnten nicht geladen werden. \" + error.message); });\n    }, []);\n\n    useEffect(() => {\n        if (selectedPatient) {\n            setEditableKrankheitsanamnese(selectedPatient.krankheitsanamnese || \"\");\n            setEditableLebensgeschichte(selectedPatient.lebensgeschichte || \"\");\n            setEditableProblemanalyseMakro(selectedPatient.problemanalyseMakro || \"\");\n            setEditableTherapieplan(selectedPatient.therapieplan || \"\");\n            if (detailViewRef.current) { setTimeout(() => { detailViewRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' }); }, 100); }\n        } else {\n            setEditableKrankheitsanamnese(\"\");\n            setEditableLebensgeschichte(\"\");\n            setEditableProblemanalyseMakro(\"\");\n            setEditableTherapieplan(\"\");\n        }\n    }, [selectedPatient]);\n\n    useEffect(() => {\n        if (newDiagnosisCode.trim() !== '') {\n            const found = findIcd10CodeLocal(newDiagnosisCode.trim().toUpperCase());\n            if (found && found.name) {\n                setLookedUpDiagnosisName(found.name);\n            } else {\n                setLookedUpDiagnosisName('');\n            }\n        } else {\n            setLookedUpDiagnosisName('');\n        }\n    }, [newDiagnosisCode, findIcd10CodeLocal]);\n\n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, (user) => {\n            if (user) { setUserId(user.uid); } else { setUserId(null); }\n            setIsAuthReady(true); setIsLoading(false);\n        });\n        return () => unsubscribe();\n    }, []);\n\n    const seedInitialData = useCallback(async () => {\n        if (!userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        try {\n            const patientsCollection = collection(db, collectionPath);\n            const querySnapshot = await getDocs(patientsCollection);\n            if (querySnapshot.empty) {\n                const batch = writeBatch(db);\n                initialPatientsData.forEach(patientData => {\n                    const newPatientRef = doc(patientsCollection);\n                    batch.set(newPatientRef, { ...patientData, hscl11Results: patientData.hscl11Results || [], bdi2Results: patientData.bdi2Results || [], fep2Results: patientData.fep2Results || [], scl90rResults: patientData.scl90rResults || [], diagnoses_icd11: patientData.diagnoses_icd11 || [], krankheitsanamnese: patientData.krankheitsanamnese || \"\", lebensgeschichte: patientData.lebensgeschichte || \"\", problemanalyseMakro: patientData.problemanalyseMakro || \"\", therapieplan: patientData.therapieplan || \"\" });\n                });\n                await batch.commit();\n            }\n        } catch (err) {\n            console.error(\"Error seeding initial data:\", err);\n            setAppError(\"Fehler beim Laden der initialen Daten.\");\n        }\n    }, [userId, getPatientsCollectionPath]);\n\n\n    useEffect(() => {\n        if (!isAuthReady || !userId) { setPatients([]); return; }\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        setIsLoading(true);\n        seedInitialData();\n        const patientsQuery = query(collection(db, collectionPath));\n        const unsubscribe = onSnapshot(patientsQuery, (snapshot) => {\n            let patientsData = snapshot.docs.map(docSnap => ({ id: docSnap.id, ...docSnap.data(), diagnoses_icd11: docSnap.data().diagnoses_icd11 || [] }));\n            patientsData.sort((a, b) => (a.name || \"\").localeCompare(b.name || \"\"));\n            setPatients(patientsData);\n            setIsLoading(false);\n        }, (err) => {\n            console.error(\"Error fetching patients:\", err);\n            setAppError(\"Fehler beim Laden der Patientendaten.\");\n            setIsLoading(false);\n        });\n        return () => unsubscribe();\n    }, [isAuthReady, userId, getPatientsCollectionPath, seedInitialData]);\n\n    useEffect(() => {\n        if (selectedPatient && selectedPatient.id && patients.length > 0) {\n            const currentPatientDataFromList = patients.find(p => p.id === selectedPatient.id);\n            if (currentPatientDataFromList) {\n                if (JSON.stringify(currentPatientDataFromList) !== JSON.stringify(selectedPatient)) {\n                    setSelectedPatient(currentPatientDataFromList);\n                }\n            } else { setSelectedPatient(null); }\n        }\n    }, [patients, selectedPatient]);\n\n    useEffect(() => {\n        const loadIcd10Data = async () => {\n            try {\n                const response = await fetch('/icd10f_data.json');\n                if (!response.ok) {\n                    throw new Error(`HTTP error! status: ${response.status}`);\n                }\n                const data = await response.json();\n                const indexedData = {};\n                data.forEach(item => {\n                    if (item.code) {\n                        indexedData[item.code.toUpperCase()] = item;\n                        const baseCode = item.code.replace(/[*†]/, '').toUpperCase();\n                        if (baseCode !== item.code.toUpperCase()) {\n                            indexedData[baseCode] = item;\n                        }\n                    }\n                });\n                setLocalIcd10Data(indexedData);\n            } catch (error) {\n                console.error(\"Fehler beim Laden der lokalen ICD-10 Daten:\", error);\n                setAppError(\"Lokale ICD-10 Daten konnten nicht geladen werden. \" + error.message);\n            }\n        };\n\n        loadIcd10Data();\n    }, []);\n\n    const bdiCutoffs = [\n        { y1: 0, y2: 8, label: \"Keine Depression\", color: \"rgba(75, 192, 192, 0.2)\" },\n        { y1: 9, y2: 13, label: \"Minimale Depression\", color: \"rgba(54, 162, 235, 0.2)\" },\n        { y1: 14, y2: 19, label: \"Leichte Depression\", color: \"rgba(255, 206, 86, 0.2)\" },\n        { y1: 20, y2: 28, label: \"Mittelschwere Depression\", color: \"rgba(255, 159, 64, 0.2)\" },\n        { y1: 29, y2: 63, label: \"Schwere Depression\", color: \"rgba(255, 99, 132, 0.2)\" }\n    ];\n\n    const bdiAxisTicks = [0, 8, 13, 19, 28, 63];\n\n    const handleAuthAction = async (isRegistering) => {\n        setIsAuthLoading(true);\n        setAuthError(null);\n        try {\n            if (isRegistering) {\n                await createUserWithEmailAndPassword(auth, email, password);\n            } else {\n                await signInWithEmailAndPassword(auth, email, password);\n            }\n            setEmail(\"\");\n            setPassword(\"\");\n        } catch (error) {\n            console.error(\"Authentication error:\", error);\n            setAuthError(error.message);\n        } finally {\n            setIsAuthLoading(false);\n        }\n    };\n    const handleLogout = async () => {\n        try {\n            await signOut(auth);\n            setSelectedPatient(null);\n            setPatients([]);\n        } catch (error) {\n            console.error(\"Error signing out: \", error);\n            setAppError(\"Fehler beim Abmelden.\");\n        }\n    };\n    const handleSavePatient = async (patientData) => {\n        if (!userId) { setAppError(\"Benutzer nicht authentifiziert.\"); return; }\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        const dataToSave = {\n            ...patientData,\n            hscl11Results: patientData.hscl11Results || [],\n            bdi2Results: patientData.bdi2Results || [],\n            fep2Results: patientData.fep2Results || [],\n            scl90rResults: patientData.scl90rResults || [],\n            krankheitsanamnese: patientData.krankheitsanamnese || \"\",\n            lebensgeschichte: patientData.lebensgeschichte || \"\",\n            problemanalyseMakro: patientData.problemanalyseMakro || \"\",\n            therapieplan: patientData.therapieplan || \"\"\n        };\n        try {\n            if (editingPatient && editingPatient.id) {\n                const patientRef = doc(db, collectionPath, editingPatient.id);\n                await setDoc(patientRef, dataToSave, { merge: true });\n            } else {\n                await addDoc(collection(db, collectionPath), dataToSave);\n            }\n            setIsPatientModalOpen(false);\n            setEditingPatient(null);\n        } catch (err) {\n            console.error(\"Error saving patient:\", err);\n            setAppError(\"Fehler beim Speichern des Patienten.\");\n        }\n    };\n    \n    const confirmDeletePatient = async (patientId) => {\n        if (!patientId || !userId) { setAppError(\"Löschvorgang fehlgeschlagen.\"); return; }\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        try {\n            const patientRef = doc(db, collectionPath, patientId);\n            await deleteDoc(patientRef);\n            if (selectedPatient && selectedPatient.id === patientId) {\n                setSelectedPatient(null);\n            }\n            setConfirmDeleteState({ isOpen: false });\n        } catch (err) {\n            console.error(\"Error deleting patient:\", err);\n            setAppError(\"Fehler beim Löschen des Patienten.\");\n            setConfirmDeleteState({ isOpen: false });\n        }\n    };\n\n    const openDeleteConfirmation = (patientId) => {\n        setConfirmDeleteState({\n            isOpen: true,\n            title: \"Patient wirklich löschen?\",\n            message: \"Möchten Sie diesen Patienten und alle zugehörigen Daten unwiderruflich löschen?\",\n            onConfirm: () => confirmDeletePatient(patientId)\n        });\n    };\n\n    const handleAddDiagnosis = async () => {\n        const codeToAdd = newDiagnosisCode.trim().toUpperCase();\n        if (!selectedPatient || !codeToAdd || !userId) {\n            setAppError(\"Bitte füllen Sie alle erforderlichen Felder aus.\");\n            return;\n        }\n\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const sicherheitPrefix = newDiagnosisSicherheit ? `[${newDiagnosisSicherheit}] ` : \"\";\n        const beschreibung = newDiagnosis.trim()\n            ? `: ${newDiagnosis.trim()}`\n            : (lookedUpDiagnosisName ? `: ${lookedUpDiagnosisName}` : \"\");\n        const diagnosisString = `${sicherheitPrefix}${codeToAdd}${beschreibung}`;\n\n        const updatedDiagnoses = [...(selectedPatient.diagnoses || []), diagnosisString];\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n\n        try {\n            console.log(\"Speichere neue Diagnose:\", diagnosisString);\n            await setDoc(patientRef, { diagnoses: updatedDiagnoses }, { merge: true });\n            setNewDiagnosisCode('');\n            setNewDiagnosis('');\n            setLookedUpDiagnosisName('');\n            setNewDiagnosisSicherheit('G');\n        } catch (err) {\n            console.error(\"Error adding diagnosis:\", err);\n            setAppError(\"Fehler beim Hinzufügen der Diagnose.\");\n        }\n    };\n    const handleRemoveDiagnosis = async (diagnosisStringToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const updatedDiagnoses = selectedPatient.diagnoses.filter(d => d !== diagnosisStringToRemove);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { diagnoses: updatedDiagnoses }, { merge: true }); }\n        catch (err) { console.error(\"Error removing diagnosis:\", err); setAppError(\"Fehler beim Entfernen der Diagnose.\"); }\n    };\n    \n    const handleAddBdiResult = async (newResult) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const updatedBdiResults = [...(selectedPatient.bdi2Results || []), newResult];\n        updatedBdiResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { bdi2Results: updatedBdiResults }, { merge: true });\n        } catch (err) {\n            console.error(\"Error adding BDI-II result:\", err);\n            setAppError(\"Fehler beim Hinzufügen des BDI-II Ergebnisses.\");\n        }\n    };\n    const handleAddHsclResult = async (newResult) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const updatedHsclResults = [...(selectedPatient.hscl11Results || []), newResult];\n        updatedHsclResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { hscl11Results: updatedHsclResults }, { merge: true });\n        } catch (err) {\n            console.error(\"Error adding HSCL result:\", err);\n            setAppError(\"Fehler beim Hinzufügen des HSCL-Ergebnisses.\");\n        }\n    };\n    const handleRemoveHsclResult = async (dateToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const updatedHsclResults = selectedPatient.hscl11Results.filter(r => r.date !== dateToRemove);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { hscl11Results: updatedHsclResults }, { merge: true }); }\n        catch (err) { console.error(\"Error removing HSCL result:\", err); setAppError(\"Fehler beim Entfernen des HSCL-Ergebnisses.\"); }\n    };\n    const handleRemoveBdiResult = async (dateToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const updatedBdiResults = selectedPatient.bdi2Results.filter(r => r.date !== dateToRemove);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { bdi2Results: updatedBdiResults }, { merge: true }); }\n        catch (err) { console.error(\"Error removing BDI-II result:\", err); setAppError(\"Fehler beim Entfernen des BDI-II Ergebnisses.\"); }\n    };\n    const handleAddFepResult = async (result) => { \n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const updatedFepResults = [...(selectedPatient.fep2Results || []), result];\n        updatedFepResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { fep2Results: updatedFepResults }, { merge: true });\n        } catch (err) {\n            console.error(\"Error adding FEP-2 result:\", err);\n            setAppError(\"Fehler beim Hinzufügen des FEP-2 Ergebnisses.\");\n        }\n    };\n    const handleRemoveFepResult = async (dateToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const updatedFepResults = selectedPatient.fep2Results.filter(r => r.date !== dateToRemove);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { fep2Results: updatedFepResults }, { merge: true }); }\n        catch (err) { console.error(\"Error removing FEP-2 result:\", err); setAppError(\"Fehler beim Entfernen des FEP-2 Ergebnisses.\"); }\n    };\n    const handleAddScl90rResult = async (result) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const newResultToSave = {\n            rawScores: result.rawScores,\n            tScores: result.tScores,\n            globalScores: result.globalScores,\n            itemScores: result.itemScores, \n            date: result.date \n        };\n        const updatedScl90rResults = [...(selectedPatient.scl90rResults || []), newResultToSave];\n        updatedScl90rResults.sort((a, b) => new Date(b.date) - new Date(a.date));\n\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { scl90rResults: updatedScl90rResults }, { merge: true });\n            console.log(\"SCL-90-R-Ergebnis erfolgreich gespeichert mit itemScores.\");\n        } catch (err) {\n            console.error(\"Error adding SCL-90-R result:\", err);\n            setAppError(\"Fehler beim Speichern des SCL-90-R Ergebnisses.\");\n        }\n    };\n    const handleRemoveScl90rResult = async (dateToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const updatedScl90rResults = selectedPatient.scl90rResults.filter(r => r.date !== dateToRemove);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { scl90rResults: updatedScl90rResults }, { merge: true });\n        } catch (err) {\n            console.error(\"Error removing SCL-90-R result:\", err);\n            setAppError(\"Fehler beim Entfernen des SCL-90-R Ergebnisses.\");\n        }\n    };\n    const handleKrankheitsmodellChange = async (fieldName, value) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { [fieldName]: value }, { merge: true });\n        } catch (err) {\n            console.error(`Error updating ${fieldName}:`, err);\n            setAppError(`Fehler beim Speichern von ${fieldName}.`);\n        }\n    };\n    const handleTherapeutischeAssistenzAnfordern = async () => {\n        if (!selectedPatient) {\n            setAssistenzError(\"Bitte wählen Sie zuerst einen Patienten aus.\");\n            return;\n        }\n        setIsLoadingTherapeutischeAssistenz(true);\n        setTherapeutischeAssistenzOutput(\"\");\n        setAssistenzError(null);\n\n        const patientenDatenText = `\nHier sind die relevanten Patientendaten:\n\n**Krankheitsanamnese:**\n${selectedPatient.krankheitsanamnese || \"Keine Angaben.\"}\n\n**Lebensgeschichte/Biografie:**\n${selectedPatient.lebensgeschichte || \"Keine Angaben.\"}\n\n**Problemanalyse auf Makroebene:**\n${selectedPatient.problemanalyseMakro || \"Keine Angaben.\"}\n\n**Therapieplanung (bisherig):**\n${selectedPatient.therapieplan || \"Keine Angaben.\"}\n\n**Verlaufsdokumentation (Sitzungsnotizen):**\n${(selectedPatient.sessions || []).map((s, i) => `Sitzung ${s.structuredNotes?.sitzungsnummer || i + 1} (${new Date(s.date).toLocaleDateString('de-DE')}): ${s.structuredNotes?.patientenbericht || s.notes}`).join(\"\\n\\n\") || \"Keine Sitzungsnotizen vorhanden.\"}\n\n**Diagnosen:**\n${(selectedPatient.diagnoses || []).join(\", \") || \"Keine Diagnosen erfasst.\"}\n\n**Genehmigte Stunden:** ${selectedPatient.approvedHours}\n**Durchgeführte Stunden:** ${(selectedPatient.sessions || []).filter(s => s.structuredNotes?.sitzungsnummer).length}\n    `;\n\n        const systemPrompt = `Du bist ein interdisziplinäres Expertenteam, bestehend aus erfahrenen Verhaltenstherapeuten wie Jürgen Margraf, Dr. Stavemann, Aaron T. Beck, Judith Beck und Jonathan S. Abramowitz sowie aus leitenden Chefärzten und Psychiatern wie Prof. Dr. Mathias Berger. Das Team verfügt über exzellente Fachkompetenz in der evidenzbasierten psychotherapeutischen Praxis und legt besonderen Wert auf präzise medizinische Dokumentation sowie therapeutische Qualität. Darüber hinaus gehören auch international anerkannte Experten wie David H. Barlow, Stefan G. Hofmann und Steven Hayes zum Team. Du verfügst über tiefgehendes Wissen in Ansätzen der sogenannten „dritten Welle“ der Verhaltenstherapie, insbesondere in ACT, Schematherapie und DBT.\n\nDeine Aufgabe ist es, auf Grundlage folgender Elemente, welche du aus den bereitgestellten Patientendaten entnimmst:\n- Krankheitsanamnese\n- Lebensgeschichte/Biografie\n- Problemanalyse auf Makroebene\n- Therapieplanung (bisherig)\n- Verlaufsdokumentation (Sitzungsnotizen)\n\neine strukturierte Rückmeldung zu geben mit dem Ziel:\n1. Wesentliche Schwerpunkte in der weiteren Therapieplanung zu identifizieren.\n2. Konkrete Interventionsideen zu formulieren, orientiert an den zugelassenen Stunden.\n3. Hinweise zu geben, worauf in der Strukturierung der Sitzungen geachtet werden sollte (z.B. Themenfokus, Symptomschwere, Therapiezielorientierung).\n\nBerücksichtige dabei:\n• Die begrenzte Anzahl genehmigter Stunden.\n• Dass Themen nicht zu häufig gewechselt werden sollen.\n• Die Konsistenz und Nachvollziehbarkeit im Verlauf.\n\nBitte plane deine Analyse gründlich und reflektiert. Handle in Etappen:\n1. Diagnostische Schwerpunkte benennen\n2. Therapieziele definieren\n3. Interventionsvorschläge machen\n4. Hinweise zur Dokumentation geben\n\nAtme einmal tief ein und aus und nehme dir Zeit für die Aufgabe. Mache bitte weiter, bis das Problem vollständig gelöst ist. Planen bitte ausführlich vor jeder Aktion.\n\nHier sind die Daten des aktuellen Falls:\n${patientenDatenText}\n\nBitte gib deine strukturierte Rückmeldung.`;\n\n        try {\n            const assistenz = await generateGeminiText(systemPrompt);\n            setTherapeutischeAssistenzOutput(assistenz);\n        } catch (e) {\n            setAssistenzError(`Fehler bei der Anforderung der therapeutischen Assistenz: ${e.message}`);\n        } finally {\n            setIsLoadingTherapeutischeAssistenz(false);\n        }\n    };\n    const showDiagnosisInfo = (diagnosisString) => {\n        const sicherheitMatch = diagnosisString.match(/^\\[([AVGZN]+)\\]\\s*/i);\n        const sicherheit = sicherheitMatch ? sicherheitMatch[1].toUpperCase() : '';\n\n        const codeAndName = sicherheitMatch\n            ? diagnosisString.substring(sicherheitMatch[0].length)\n            : diagnosisString;\n\n        const codeMatch = codeAndName.match(/^([A-Z][0-9]{1,2}(\\.[0-9A-Z]{1,2})?[*†]?)/i);\n        const code = codeMatch\n            ? codeMatch[0].toUpperCase()\n            : codeAndName.split(':')[0].trim().toUpperCase();\n\n        const localData = findIcd10CodeLocal(code);\n\n        if (localData) {\n            setDiagnosisInfo({\n                code: localData.code || code,\n                name: localData.name || '',\n                beschreibung: localData.beschreibung || localData.beschreibung_kategorie || '',\n                inkl: localData.inkl || [],\n                exkl: localData.exkl || [],\n                hinweise: localData.hinweise || [],\n                zusatz_info_code: localData.zusatz_info_code || '',\n                sicherheit: sicherheit,\n                isLoading: false,\n                error: null,\n                isOpen: true,\n                source: 'local'\n            });\n        } else {\n            setDiagnosisInfo({\n                code: code,\n                name: \"Unbekannter ICD-10 Code\",\n                isLoading: false,\n                error: `Für den ICD-10 Code \"${code}\" wurden keine Informationen in der lokalen Datenbank gefunden.`,\n                isOpen: true,\n                source: 'error'\n            });\n        }\n    };\n    const fetchIcd11Details = async (diagnosis) => {\n        if (!diagnosis || !diagnosis.uri) {\n            setAppError(\"Keine gültige URI für die ICD-11 Diagnose vorhanden.\");\n            return;\n        }\n        const { code, title, uri } = diagnosis;\n        setDiagnosisInfo({ code: code, name: title, isLoading: true, error: null, isOpen: true, source: 'api' });\n        try {\n            const response = await fetch(`http://localhost:3001/api/icd11-info?uri=${encodeURIComponent(uri)}`);\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw new Error(errorData.message || 'API-Anfrage fehlgeschlagen');\n            }\n            const fullData = await response.json();\n            setDiagnosisInfo({\n                code: fullData.code || code,\n                name: fullData.title?.['@value'] || title,\n                beschreibung: fullData.definition?.['@value'] || '',\n                diagnosticCriteria: fullData.diagnosticCriteria,\n                inclusions: fullData.inclusion,\n                exclusions: fullData.exclusion,\n                isLoading: false, error: null, isOpen: true,\n                source: 'api_detail'\n            });\n        } catch (error) {\n            console.error('Fehler beim Abrufen der ICD-11 Details:', error);\n            setDiagnosisInfo({ code: code, isLoading: false, error: `Konnte Informationen für ${code} nicht laden: ${error.message}`, isOpen: true, source: 'api' });\n        }\n    };\n    const handleAssignIcd11Diagnosis = async (patientId, icd11Entity) => {\n        if (!patientId || !icd11Entity || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        const patientRef = doc(db, collectionPath, patientId);\n        const targetPatient = patients.find(p => p.id === patientId);\n        if (!targetPatient) { setAppError(\"Ziel-Patient konnte nicht gefunden werden.\"); return; }\n        const newDiagnosis = { code: icd11Entity.code, title: icd11Entity.selectedText, uri: icd11Entity.linearizationUri || icd11Entity.foundationUri, date: new Date().toISOString() };\n        const updatedDiagnoses = [...(targetPatient.diagnoses_icd11 || []), newDiagnosis];\n        try { await setDoc(patientRef, { diagnoses_icd11: updatedDiagnoses }, { merge: true }); }\n        catch (err) { console.error(\"Error assigning ICD-11 diagnosis:\", err); setAppError(\"Fehler beim Zuweisen der ICD-11 Diagnose.\"); }\n    };\n    const handleRemoveIcd11Diagnosis = async (diagnosisToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        const updatedDiagnoses = selectedPatient.diagnoses_icd11.filter(d => d.date !== diagnosisToRemove.date);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { diagnoses_icd11: updatedDiagnoses }, { merge: true }); }\n        catch (err) { console.error(\"Error removing ICD-11 diagnosis:\", err); setAppError(\"Fehler beim Entfernen der ICD-11 Diagnose.\"); }\n    };\n    \n    const handleAcceptImprovement = async () => {\n        if (improvementState.sessionIndex === null || !selectedPatient || !userId) return;\n\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n        updatedSessions[improvementState.sessionIndex].notes = improvementState.improvedText;\n\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { sessions: updatedSessions }, { merge: true });\n            setImprovementState({ isOpen: false, isLoading: false, originalText: '', improvedText: '', sessionIndex: null, error: null });\n        } catch (err) {\n            console.error(\"Error updating session note:\", err);\n            setAppError(\"Fehler beim Aktualisieren der Sitzungsnotiz.\");\n        }\n    };\n\n    const handleFileUpload = (event) => {\n        const files = Array.from(event.target.files);\n        const newFiles = files.map(file => ({\n            name: file.name,\n            size: file.size,\n            type: file.type,\n            lastModified: file.lastModifiedDate.toLocaleDateString('de-DE')\n        }));\n        setUploadedFiles(prev => [...prev, ...newFiles]);\n        console.log(\"Dateien zum Hochladen ausgewählt:\", newFiles);\n        setAppError(\"Datei-Upload ist nur eine Demo. Die Dateien werden nicht permanent gespeichert.\");\n    };\n\n    const handleRemoveFile = (fileName) => {\n        setUploadedFiles(prev => prev.filter(f => f.name !== fileName));\n    };\n\n    const ConductedHours = ({ patient }) => {\n        const count = useMemo(() => {\n            if (!patient || !patient.sessions) return 0;\n            return patient.sessions.filter(s => s.structuredNotes && typeof s.structuredNotes.sitzungsnummer === 'number').length;\n        }, [patient]);\n        return <span>{count}</span>;\n    };\n    \n    const totalConductedHours = useMemo(() => patients.reduce((sum, p) => {\n        const sessionCount = (p.sessions || []).filter(s => s.structuredNotes && typeof s.structuredNotes.sitzungsnummer === 'number').length;\n        return sum + sessionCount;\n    }, 0), [patients]);\n\n    const totalApprovedHours = patients.reduce((sum, p) => sum + (p.approvedHours || 0), 0);\n    const overallProgressTarget = 600;\n    const overallProgress = overallProgressTarget > 0 ? (totalConductedHours / overallProgressTarget) * 100 : 0;\n    \n    // --- STYLING CONSTANTS ---\n    const inputStd = \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm\";\n    const btnPrimary = \"bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2 px-4 rounded-md shadow-sm flex items-center justify-center transition-colors\";\n    const btnDanger = \"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-3 rounded-md flex items-center transition-colors\";\n    const btnInfo = \"bg-sky-500 hover:bg-sky-600 text-white font-semibold py-1 px-2 text-xs rounded-md flex items-center transition-colors\";\n    const textareaStd = \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-teal-500 focus:border-teal-500 sm:text-sm min-h-[150px]\";\n\n    if (!isAuthReady) return <div className=\"flex justify-center items-center h-screen text-xl font-semibold text-gray-600 bg-slate-100\">Authentifizierung wird initialisiert...</div>;\n\n    if (!userId) {\n        return (\n            <div className=\"min-h-screen bg-slate-100 flex flex-col justify-center items-center p-4\">\n                <div className=\"bg-white p-8 rounded-lg shadow-md w-full max-w-md border border-gray-200\">\n                    <h1 className=\"text-2xl font-bold text-center text-gray-800 mb-8\">{isLoginView ? \"Login Patientenverwaltung\" : \"Registrierung\"}</h1>\n                    {authError && <p className=\"bg-red-100 text-red-700 p-3 rounded-md mb-4 text-sm\">{authError}</p>}\n                    <form onSubmit={(e) => { e.preventDefault(); handleAuthAction(!isLoginView); }} className=\"space-y-6\">\n                        <div>\n                            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">E-Mail Adresse</label>\n                            <input type=\"email\" name=\"email\" id=\"email\" required value={email} onChange={(e) => setEmail(e.target.value)} className={inputStd} />\n                        </div>\n                        <div>\n                            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">Passwort</label>\n                            <input type=\"password\" name=\"password\" id=\"password\" required value={password} onChange={(e) => setPassword(e.target.value)} className={inputStd} />\n                        </div>\n                        <button type=\"submit\" disabled={isAuthLoading} className={`${btnPrimary} w-full py-2.5 text-base ${isAuthLoading ? 'opacity-50 cursor-not-allowed' : ''}`}>\n                            {isAuthLoading ? (isLoginView ? \"Anmelden...\" : \"Registrieren...\") : (isLoginView ? \"Anmelden\" : \"Registrieren\")}\n                        </button>\n                    </form>\n                    <button onClick={() => { setIsLoginView(!isLoginView); setAuthError(null); }} className=\"mt-6 text-sm text-teal-600 hover:text-teal-500 text-center w-full\">\n                        {isLoginView ? \"Noch kein Konto? Jetzt registrieren.\" : \"Bereits registriert? Zum Login.\"}\n                    </button>\n                </div>\n            </div>\n        );\n    }\n    \n    const Sidebar = ({ currentView, setView }) => {\n        const navItems = [\n            { id: 'patients', label: 'Patientenübersicht', icon: <Users /> },\n            { id: 'patientenakte', label: 'Patientenakte', icon: <FileText /> },\n            { id: 'kalender', label: 'Kalender & Abrechnung', icon: <CalendarIcon /> },\n            { id: 'formulare', label: 'Formulare', icon: <PaperclipIcon /> },\n            { id: 'ebm', label: 'EBM', icon: <List /> },\n            { id: 'icd11', label: 'ICD-11', icon: <BookOpen /> },\n        ];\n        \n        return (\n            <aside className=\"w-64 bg-slate-100 border-r border-slate-200 flex flex-col\">\n                <div className=\"p-4 border-b border-slate-200\">\n                     <h1 className=\"text-xl font-bold text-teal-700 tracking-tight\">Therapie-Dashboard</h1>\n                </div>\n                <nav className=\"flex-1 p-4 space-y-2\">\n                    {navItems.map(item => (\n                        <button \n                            key={item.id} \n                            onClick={() => setView(item.id)}\n                            className={`w-full flex items-center space-x-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${\n                                currentView === item.id \n                                ? 'bg-teal-100 text-teal-800' \n                                : 'text-slate-700 hover:bg-slate-200'\n                            }`}\n                        >\n                            {item.icon}\n                            <span>{item.label}</span>\n                        </button>\n                    ))}\n                </nav>\n                 <div className=\"p-4 border-t border-slate-200\">\n                    <p className=\"text-xs text-slate-500 truncate\">UserID: {userId}</p>\n                 </div>\n            </aside>\n        );\n    };\n\n    const PatientDetailHeader = ({ patient, onDeselect }) => {\n        const therapyStartDate = useMemo(() => {\n            if (!patient || !patient.sessions) return \"-\";\n            const firstSession = patient.sessions\n                .filter(s => s.structuredNotes?.sitzungsnummer === 1)\n                .sort((a,b) => new Date(a.date) - new Date(b.date))[0];\n            return firstSession ? new Date(firstSession.date).toLocaleDateString('de-DE') : '-';\n        }, [patient]);\n\n        const conductedHours = useMemo(() => {\n            if (!patient || !patient.sessions) return 0;\n            return patient.sessions.filter(s => s.structuredNotes && typeof s.structuredNotes.sitzungsnummer === 'number').length;\n        }, [patient]);\n\n        return (\n            <>\n                <div className=\"flex justify-between items-start mb-1\">\n                    <h3 className=\"text-2xl font-semibold text-gray-800\">{patient.vorname} {patient.name}</h3>\n                    <button onClick={onDeselect} className=\"text-gray-400 hover:text-gray-600\"><XCircle /></button>\n                </div>\n                <div className=\"mb-4 text-sm text-gray-500 grid grid-cols-2 md:grid-cols-4 gap-x-4 gap-y-1\">\n                    <span><strong className=\"font-semibold\">Kasse:</strong> {patient.krankenkasse || '-'}</span>\n                    <span><strong className=\"font-semibold\">Vers.-Nr.:</strong> {patient.versichertennummer || '-'}</span>\n                    <span><strong className=\"font-semibold\">Therapiebeginn:</strong> {therapyStartDate}</span>\n                    <span><strong className=\"font-semibold\">Stunden:</strong> {conductedHours} / {patient.approvedHours}</span>\n                </div>\n            </>\n        );\n    };\n\n    return (\n        <div className=\"h-screen w-full bg-slate-50 font-sans flex\">\n            <Sidebar currentView={mainView} setView={setMainView} />\n            \n            <div className=\"flex-1 flex flex-col\">\n                <header className=\"bg-white border-b border-slate-200\">\n                    <div className=\"mx-auto px-6 py-3 flex justify-between items-center\">\n                         <h2 className=\"text-xl font-semibold text-gray-800 capitalize\">\n                            {mainView.replace('patientenakte', 'Patientenakte').replace('kalender', 'Kalender & Abrechnung')}\n                         </h2>\n                        <button onClick={handleLogout} className=\"text-gray-500 hover:text-red-600 hover:bg-red-50 p-2 rounded-md text-sm flex items-center transition-colors\">\n                            <LogOut className=\"mr-2 h-4 w-4\" /> Logout\n                        </button>\n                    </div>\n                </header>\n\n                <main className=\"flex-1 overflow-y-auto p-6\">\n                    <ConfirmationModal\n                        isOpen={confirmDeleteState.isOpen}\n                        onClose={() => setConfirmDeleteState({ isOpen: false })}\n                        onConfirm={confirmDeleteState.onConfirm}\n                        title={confirmDeleteState.title}\n                        message={confirmDeleteState.message}\n                    />\n\n                    <Modal\n                        isOpen={isPatientModalOpen}\n                        onClose={() => setIsPatientModalOpen(false)}\n                        title={editingPatient ? \"Patient bearbeiten\" : \"Neuen Patienten anlegen\"}\n                    >\n                        <PatientForm\n                            patient={editingPatient}\n                            onSave={handleSavePatient}\n                            onCancel={() => setIsPatientModalOpen(false)}\n                        />\n                    </Modal>\n\n                    {mainView === 'patients' && (\n                        <>\n                            <div ref={overviewRef} className=\"mb-6 flex justify-between items-center\">\n                                <h3 className=\"text-2xl font-semibold text-gray-800\">Alle Patienten</h3>\n                                <button onClick={() => { setEditingPatient(null); setIsPatientModalOpen(true); }} className={btnPrimary}>\n                                    <UserPlus className=\"w-5 h-5 mr-2\" /> Patient hinzufügen\n                                </button>\n                            </div>\n\n                            <div className=\"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden mb-8\">\n                                <div className=\"overflow-x-auto\">\n                                    <table className=\"w-full min-w-max table-auto text-left\">\n                                        <thead>\n                                            <tr className=\"bg-slate-50 border-b border-slate-200\">\n                                                <th\n                                                    className=\"py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider cursor-pointer\"\n                                                    onClick={() => setSortConfig(prev => ({\n                                                        key: 'name',\n                                                        direction: prev.key === 'name' && prev.direction === 'ascending' ? 'descending' : 'ascending'\n                                                    }))}\n                                                >\n                                                    Name {sortConfig.key === 'name' && (sortConfig.direction === 'ascending' ? '▲' : '▼')}\n                                                </th>\n                                                <th className=\"py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider\">Chiffre</th>\n                                                <th className=\"py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider\">Diagnosen</th>\n                                                <th className=\"py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider\">Therapieverfahren</th>\n                                                <th className=\"py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider text-center\">Stunden</th>\n                                                <th className=\"py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider\">Fortschritt</th>\n                                                <th className=\"py-3 px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider\">Aktionen</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            {isLoading && (<tr><td colSpan=\"7\" className=\"text-center py-10 text-gray-500\">Lade Patienten...</td></tr>)}\n                                            {!isLoading && sortedPatients.length === 0 && (<tr><td colSpan=\"7\" className=\"text-center py-10 text-gray-500\">Keine Patienten gefunden.</td></tr>)}\n                                            {!isLoading && sortedPatients.map((patient) => {\n                                                const conductedHours = (patient.sessions || []).filter(s => s.structuredNotes && typeof s.structuredNotes.sitzungsnummer === 'number').length;\n                                                const progress = patient.approvedHours > 0 ? (conductedHours / patient.approvedHours) * 100 : 0;\n                                                return (\n                                                    <tr key={patient.id} className={`hover:bg-slate-50 cursor-pointer border-t border-slate-200 ${selectedPatient?.id === patient.id ? 'bg-teal-50' : ''}`} onClick={() => { setSelectedPatient(patient); setMainView('patientenakte'); setActiveDetailTab('übersicht'); setTherapeutischeAssistenzOutput(''); setAssistenzError(null); }}>\n                                                        <td className=\"py-3 px-4 whitespace-nowrap text-sm font-medium text-gray-800\">{patient.name}, {patient.vorname}</td>\n                                                        <td className=\"py-3 px-4 whitespace-nowrap text-sm text-gray-600 font-mono\">{patient.chiffre}</td>\n                                                        <td className=\"py-3 px-4 text-sm text-gray-600 max-w-xs\"><div className=\"flex flex-col space-y-1\">{(patient.diagnoses || []).slice(0, 2).map((diag, idx) => { const sicherheitMatch = diag.match(/^\\[([AVGZN]+)\\]/i); const sicherheit = sicherheitMatch ? sicherheitMatch[1].toUpperCase() : ''; const colorClasses = { 'G': 'bg-green-100 text-green-800 hover:bg-green-200', 'V': 'bg-yellow-100 text-yellow-800 hover:bg-yellow-200', 'A': 'bg-red-100 text-red-800 hover:bg-red-200', 'ZN': 'bg-blue-100 text-blue-800 hover:bg-blue-200' }[sicherheit] || 'bg-gray-100 text-gray-800 hover:bg-gray-200'; return (<span key={idx} className={`px-2 py-0.5 text-xs rounded-full truncate inline-block cursor-pointer ${colorClasses}`} onClick={(e) => { e.stopPropagation(); showDiagnosisInfo(diag); }} title={`Info zu ${diag} anzeigen`}> {diag} </span>); })}{(patient.diagnoses || []).length > 2 && (<span className=\"text-xs text-gray-500 mt-1\">...</span>)}{(patient.diagnoses || []).length === 0 && \"-\"}</div></td>\n                                                        <td className=\"py-3 px-4 text-sm text-gray-600 max-w-xs\">\n                                                            <div className=\"flex flex-wrap gap-1\">\n                                                                {(patient.therapeuticMethods || []).map(method => <span key={method} className=\"bg-gray-200 text-gray-800 text-xs px-2 py-0.5 rounded-full\">{method}</span>)}\n                                                            </div>\n                                                        </td>\n                                                        <td className=\"py-3 px-4 whitespace-nowrap text-sm text-gray-600 text-center\">\n                                                            <ConductedHours patient={patient} /> / {patient.approvedHours}\n                                                        </td>\n                                                        <td className=\"py-3 px-4 whitespace-nowrap\"><div className=\"w-full bg-gray-200 rounded-full h-2.5\"><div className={`h-2.5 rounded-full ${progress > 80 ? 'bg-red-500' : progress > 50 ? 'bg-yellow-400' : 'bg-green-500'}`} style={{ width: `${Math.min(progress, 100)}%` }}></div></div><span className=\"text-xs text-gray-500 block text-center mt-1\">{Math.round(progress)}%</span></td>\n                                                        <td className=\"py-3 px-4 whitespace-nowrap text-sm space-x-2\"><button onClick={(e) => { e.stopPropagation(); setEditingPatient(patient); setIsPatientModalOpen(true); }} className=\"text-gray-500 hover:text-teal-600 transition duration-150 p-1 rounded hover:bg-teal-50\" title=\"Bearbeiten\"><Edit3 /></button><button onClick={(e) => { e.stopPropagation(); openDeleteConfirmation(patient.id); }} className=\"text-gray-500 hover:text-red-600 transition duration-150 p-1 rounded hover:bg-red-50\" title=\"Löschen\"><Trash2 /></button></td>\n                                                    </tr>\n                                                );\n                                            })}\n                                        </tbody>\n                                        <tfoot className=\"bg-slate-50 border-t-2 border-slate-200\"><tr><td colSpan=\"4\" className=\"py-3 px-4 text-sm font-semibold text-gray-700 text-right\">Gesamt:</td><td className=\"py-3 px-4 text-sm font-semibold text-gray-700 text-center\">{`${totalConductedHours} / ${totalApprovedHours}`}</td><td className=\"py-3 px-4 whitespace-nowrap\" colSpan=\"2\"><div className=\"flex items-center\"><span className=\"text-xs text-gray-600 mr-3 w-auto\">Fortschritt (600 Std.):</span><div className=\"w-full bg-gray-200 rounded-full h-2.5 flex-grow\"><div className=\"bg-teal-500 h-2.5 rounded-full\" style={{ width: `${Math.min(overallProgress, 100)}%` }}></div></div><span className=\"text-xs text-gray-600 ml-2\">{Math.round(overallProgress)}%</span></div></td></tr></tfoot>\n                                    </table>\n                                </div>\n                            </div>\n                        </>\n                    )}\n\n                    {mainView === 'patientenakte' && (\n                         <div className=\"w-full max-w-5xl mx-auto\">\n                            {!selectedPatient ? (\n                                <div className=\"text-center py-20 bg-white border border-dashed border-gray-300 rounded-lg\">\n                                     <Users className=\"mx-auto h-12 w-12 text-gray-400\" />\n                                    <h3 className=\"mt-2 text-lg font-medium text-gray-900\">Patientenakte ansehen</h3>\n                                    <p className=\"mt-1 text-sm text-gray-500\">Wählen Sie einen Patienten aus der Liste aus, um dessen Akte hier anzuzeigen.</p>\n                                    <div className=\"mt-6\">\n                                        <button\n                                            type=\"button\"\n                                            onClick={() => setMainView('patients')}\n                                            className={btnPrimary}\n                                        >\n                                            <Users className=\"w-5 h-5 mr-2\"/>\n                                            Zur Patientenübersicht\n                                        </button>\n                                    </div>\n                                </div>\n                            ) : (\n                                <div ref={detailViewRef} className=\"bg-white border border-gray-200 shadow-sm rounded-lg p-6\">\n                                    <PatientDetailHeader patient={selectedPatient} onDeselect={() => setSelectedPatient(null)} />\n\n                                    <div className=\"border-b border-gray-200 mb-6\">\n                                        <nav className=\"-mb-px flex space-x-4 sm:space-x-8 overflow-x-auto\" aria-label=\"Tabs\">\n                                            {['Übersicht', 'Diagnosen', 'Abrechnung', 'Krankheitsmodell', 'Diagnostik', 'Assistenz'].map(tab => (\n                                                <button key={tab} onClick={() => setActiveDetailTab(tab.toLowerCase())} className={`capitalize whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${activeDetailTab === tab.toLowerCase() ? 'border-teal-500 text-teal-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`}>\n                                                    {tab}\n                                                </button>\n                                            ))}\n                                        </nav>\n                                    </div>\n                                    \n                                    {activeDetailTab === 'übersicht' && (\n                                        <div className=\"space-y-6\">\n                                            <div className=\"col-span-1 md:col-span-2 p-3 bg-teal-50 border border-teal-200 rounded-lg\">\n                                                {nextAppointment.isLoading && <p className=\"text-sm text-teal-700\">Lade nächsten Termin...</p>}\n                                                {nextAppointment.error && <p className=\"text-sm text-red-600\">{nextAppointment.error}</p>}\n                                                {nextAppointment.text && <p className=\"text-sm font-semibold text-teal-800\">{nextAppointment.text}</p>}\n                                            </div>\n\n                                            <div>\n                                                <h4 className=\"text-lg font-semibold text-gray-700 mb-3 border-b pb-2\">Stammdaten</h4>\n                                                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4 mt-3 text-sm\">\n                                                    <div><p className=\"font-semibold text-gray-500\">Nachname</p><p>{selectedPatient.name}</p></div>\n                                                    <div><p className=\"font-semibold text-gray-500\">Vorname</p><p>{selectedPatient.vorname}</p></div>\n                                                    <div><p className=\"font-semibold text-gray-500\">Geburtsdatum</p><p>{new Date(selectedPatient.geburtsdatum).toLocaleDateString('de-DE')}</p></div>\n                                                    <div><p className=\"font-semibold text-gray-500\">Alter</p><p>{calculateAge(selectedPatient.geburtsdatum)}</p></div>\n                                                    <div><p className=\"font-semibold text-gray-500\">E-Mail</p><p>{selectedPatient.email || '-'}</p></div>\n                                                    <div><p className=\"font-semibold text-gray-500\">Telefon</p><p>{selectedPatient.telefon || '-'}</p></div>\n                                                    <div className=\"col-span-2 md:col-span-3\"><p className=\"font-semibold text-gray-500\">Adresse</p><p>{selectedPatient.adresse || '-'}</p></div>\n                                                </div>\n                                            </div>\n\n                                            <div>\n                                                <h4 className=\"text-lg font-semibold text-gray-700 mb-3 border-b pb-2\">Letzte Hausaufgabe</h4>\n                                                <div className=\"p-3 bg-gray-50 rounded-lg text-sm space-y-3\">\n                                                    {(selectedPatient.sessions?.[0]?.homeworkStatus && selectedPatient.sessions[0].homeworkStatus.length > 0) ? (\n                                                        selectedPatient.sessions[0].homeworkStatus.map((task, index) => (\n                                                            <div key={index} className=\"flex items-center gap-4\">\n                                                                <input\n                                                                    type=\"checkbox\"\n                                                                    className=\"h-5 w-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500\"\n                                                                    checked={task.done}\n                                                                    onChange={(e) => handleUpdateHomeworkStatus(selectedPatient.sessions[0].date, index, { done: e.target.checked })}\n                                                                />\n                                                                <span className={`flex-grow ${task.done ? 'text-gray-500 line-through' : 'text-gray-800'}`}>\n                                                                    {task.text}\n                                                                </span>\n                                                                {!task.done && (\n                                                                    <select\n                                                                        className=\"text-xs border-gray-300 rounded-md shadow-sm focus:border-teal-300 focus:ring focus:ring-teal-200 focus:ring-opacity-50\"\n                                                                        value={task.reason || ''}\n                                                                        onChange={(e) => handleUpdateHomeworkStatus(selectedPatient.sessions[0].date, index, { reason: e.target.value })}\n                                                                    >\n                                                                        <option value=\"\">Grund wählen...</option>\n                                                                        {Object.entries(homeworkFailureReasons).map(([category, reasons]) => (\n                                                                            <optgroup label={category} key={category}>\n                                                                                {reasons.map(reason => <option key={reason} value={reason}>{reason}</option>)}\n                                                                            </optgroup>\n                                                                        ))}\n                                                                    </select>\n                                                                )}\n                                                            </div>\n                                                        ))\n                                                    ) : (\n                                                        <p className=\"text-gray-500\">Keine Hausaufgabe für die letzte Sitzung erfasst.</p>\n                                                    )}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    )}\n\n                                    {activeDetailTab === 'diagnosen' && (<div>\n                                         <div className=\"mb-6\">\n                                            <h4 className=\"text-xl font-semibold text-gray-700 mb-3\">ICD-10 F-Diagnosen</h4>\n                                            <div className=\"mb-3 p-4 bg-gray-50 rounded-md border\"><div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 items-end\"><div><label htmlFor=\"newDiagnosisCode\" className=\"block text-xs font-medium text-gray-700\">Code (z.B. F32.2)</label><input type=\"text\" id=\"newDiagnosisCode\" value={newDiagnosisCode} onChange={(e) => setNewDiagnosisCode(e.target.value.toUpperCase())} placeholder=\"F-Code\" className={`${inputStd} mt-1`} /></div><div><label htmlFor=\"newDiagnosisSicherheit\" className=\"block text-xs font-medium text-gray-700\">Sicherheit</label><select id=\"newDiagnosisSicherheit\" value={newDiagnosisSicherheit} onChange={(e) => setNewDiagnosisSicherheit(e.target.value)} className={`${inputStd} mt-1`}><option value=\"G\">G (Gesichert)</option><option value=\"V\">V (Verdacht auf)</option><option value=\"A\">A (Ausschluss)</option><option value=\"ZN\">ZN (Zustand nach)</option></select></div><div className=\"md:col-span-1\"><label htmlFor=\"newDiagnosisName\" className=\"block text-xs font-medium text-gray-700\">Manuelle Beschreibung (optional)</label><input type=\"text\" id=\"newDiagnosisName\" value={newDiagnosis} onChange={(e) => setNewDiagnosis(e.target.value)} placeholder=\"Eigene Beschreibung\" className={`${inputStd} mt-1`} /></div><button onClick={handleAddDiagnosis} className={`${btnPrimary} bg-green-500 hover:bg-green-600 py-2 px-3 h-10 md:self-end`}><PlusCircleIcon className=\"w-5 h-5 mr-1\" /> Hinzufügen</button></div>{lookedUpDiagnosisName && <p className=\"text-xs text-teal-600 mt-1\">Gefunden: {lookedUpDiagnosisName}</p>}</div>\n                                            <ul className=\"space-y-1 mb-3\">\n                                                {(selectedPatient.diagnoses || []).map((diagString, index) => (<li key={index} className=\"flex justify-between items-center bg-gray-50 p-2 rounded-md\"><span className=\"text-sm text-gray-700\">{diagString}</span><div className=\"flex items-center space-x-2\"><button onClick={() => showDiagnosisInfo(diagString)} className={`${btnInfo} p-1`} title=\"Info zu dieser Diagnose abrufen\"><FileJson2 className=\"w-4 h-4 mr-1\" /> Info</button><button onClick={() => handleRemoveDiagnosis(diagString)} className={`${btnDanger} p-1 text-xs`}><Trash2 className=\"w-4 h-4\" /></button></div></li>))}\n                                                {(selectedPatient.diagnoses || []).length === 0 && <p className=\"text-sm text-gray-500\">Keine Diagnosen erfasst.</p>}\n                                            </ul>\n                                        </div>\n                                        <div className=\"mb-6\">\n                                            <h4 className=\"text-xl font-semibold text-gray-700 mb-3\">ICD-11 Diagnosen</h4>\n                                            <ul className=\"space-y-1\">\n                                                {(selectedPatient.diagnoses_icd11 || []).map((diag, index) => (<li key={index} className=\"flex justify-between items-center bg-purple-50 p-2 rounded-md hover:bg-purple-100 cursor-pointer\" onClick={() => fetchIcd11Details(diag)}><span className=\"text-sm text-purple-800\"><strong className=\"font-mono\">{diag.code}</strong> - {diag.title}</span><button onClick={(e) => { e.stopPropagation(); handleRemoveIcd11Diagnosis(diag); }} className=\"text-red-500 hover:text-red-700 p-1 text-xs\" title=\"ICD-11 Diagnose entfernen\"><Trash2 className=\"w-4 h-4\" /></button></li>))}\n                                                {(selectedPatient.diagnoses_icd11 || []).length === 0 && <p className=\"text-sm text-gray-500\">Keine ICD-11 Diagnosen erfasst.</p>}\n                                            </ul>\n                                        </div>\n                                    </div>)}\n\n                                    {activeDetailTab === 'abrechnung' && (\n                                        <AbrechnungsUebersicht\n                                            patient={selectedPatient}\n                                            ebmData={ebmData}\n                                            unbilledAppointments={unbilledAppointments}\n                                            onStartBilling={handleStartBilling}\n                                            onDeleteEbmEntry={handleDeleteEbmEntry}\n                                            onEditSession={handleEditSession}\n                                            onDeleteSession={handleDeleteSession}\n                                        />\n                                    )}\n\n                                    {activeDetailTab === 'krankheitsmodell' && (\n                                    <div className=\"space-y-6\"><div><label htmlFor=\"krankheitsanamnese\" className=\"block text-lg font-semibold text-gray-700 mb-1\">Krankheitsanamnese</label><textarea id=\"krankheitsanamnese\" name=\"krankheitsanamnese\" rows=\"6\" className={textareaStd} value={editableKrankheitsanamnese} onChange={(e) => setEditableKrankheitsanamnese(e.target.value)} onBlur={(e) => handleKrankheitsmodellChange('krankheitsanamnese', e.target.value)} placeholder=\"Hier die Krankheitsanamnese eintragen...\"></textarea></div><div><label htmlFor=\"lebensgeschichte\" className=\"block text-lg font-semibold text-gray-700 mb-1\">Lebensgeschichte / Biographie</label><textarea id=\"lebensgeschichte\" name=\"lebensgeschichte\" rows=\"6\" className={textareaStd} value={editableLebensgeschichte} onChange={(e) => setEditableLebensgeschichte(e.target.value)} onBlur={(e) => handleKrankheitsmodellChange('lebensgeschichte', e.target.value)} placeholder=\"Wichtige Aspekte der Lebensgeschichte...\"></textarea></div><div><label htmlFor=\"problemanalyseMakro\" className=\"block text-lg font-semibold text-gray-700 mb-1\">Problemanalyse auf Makroebene</label><textarea id=\"problemanalyseMakro\" name=\"problemanalyseMakro\" rows=\"6\" className={textareaStd} value={editableProblemanalyseMakro} onChange={(e) => setEditableProblemanalyseMakro(e.target.value)} onBlur={(e) => handleKrankheitsmodellChange('problemanalyseMakro', e.target.value)} placeholder=\"Analyse der übergeordneten Problembereiche...\"></textarea></div><div><label htmlFor=\"therapieplan\" className=\"block text-lg font-semibold text-gray-700 mb-1\">Therapieplan</label><textarea id=\"therapieplan\" name=\"therapieplan\" rows=\"6\" className={textareaStd} value={editableTherapieplan} onChange={(e) => setEditableTherapieplan(e.target.value)} onBlur={(e) => handleKrankheitsmodellChange('therapieplan', e.target.value)} placeholder=\"Therapieziele und -maßnahmen...\"></textarea></div></div>)}\n                                    \n                                    {activeDetailTab === 'diagnostik' && (\n                                        <div>\n                                            <div className=\"border-b border-gray-200 mb-4\">\n                                                <nav className=\"-mb-px flex space-x-6\" aria-label=\"Diagnostik Sub-Tabs\">\n                                                    <button onClick={() => setActiveDiagnostikSubTab('overview')} className={`whitespace-nowrap pb-2 px-1 border-b-2 font-medium text-sm ${activeDiagnostikSubTab === 'overview' ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`}>\n                                                        Übersicht\n                                                    </button>\n                                                    {availableTests.map(test => (\n                                                        (selectedPatient[`${test.id}Results`]?.length > 0) &&\n                                                        <button key={test.id} onClick={() => setActiveDiagnostikSubTab(test.id)} className={`whitespace-nowrap pb-2 px-1 border-b-2 font-medium text-sm ${activeDiagnostikSubTab === test.id ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`}>\n                                                            {test.id.toUpperCase()}\n                                                        </button>\n                                                    ))}\n                                                </nav>\n                                            </div>\n\n                                            {activeDiagnostikSubTab === 'overview' && (\n                                                <DiagnostikUebersicht\n                                                    patient={selectedPatient}\n                                                    availableTests={availableTests}\n                                                    onAddTest={(test) => { setCurrentTestToAdd(test); setIsAddTestModalOpen(true); }}\n                                                    onShowTestDetails={(testId) => setActiveDiagnostikSubTab(testId)}\n                                                    onStartRetroBilling={handleStartRetroBilling}\n                                                />\n                                            )}\n\n                                            {activeDiagnostikSubTab === 'scl90r' && <SCL90RComponent patient={selectedPatient} onAddResult={handleAddScl90rResult} onDeleteResult={handleRemoveScl90rResult} />}\n                                            {activeDiagnostikSubTab === 'fep2' && <FEP2Component patient={selectedPatient} onAddResult={handleAddFepResult} onDeleteResult={handleRemoveFepResult} />}\n                                            {activeDiagnostikSubTab === 'bdi2' && <BDI2Component patient={selectedPatient} onAddResult={handleAddBdiResult} onDeleteResult={handleRemoveBdiResult} bdiCutoffs={bdiCutoffs} bdiAxisTicks={bdiAxisTicks} CustomBdiLabel={CustomBdiLabel} />}\n                                            {activeDiagnostikSubTab === 'hscl11' && <HSCL11Component patient={selectedPatient} onAddResult={handleAddHsclResult} onDeleteResult={handleRemoveHsclResult} />}\n                                        </div>\n                                    )}\n\n                                    {activeDetailTab === 'assistenz' && (\n                                        <div>\n                                            <h3 className=\"text-xl font-semibold text-gray-700 mb-4\">Therapeutische Assistenz</h3>\n                                            <button onClick={handleTherapeutischeAssistenzAnfordern} disabled={isLoadingTherapeutischeAssistenz} className={`${btnPrimary} bg-purple-600 hover:bg-purple-700 mb-4 flex items-center`}>\n                                                <WandSparkles className=\"mr-2 h-5 w-5\" />\n                                                {isLoadingTherapeutischeAssistenz ? \"Analysiere Daten...\" : \"Expertenfeedback anfordern\"}\n                                            </button>\n                                            {isLoadingTherapeutischeAssistenz && (<div className=\"text-center py-10\"><div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-700 mx-auto\"></div><p className=\"mt-3 text-gray-600\">Bitte warten, die KI analysiert die Patientendaten...</p></div>)}\n                                            {assistenzError && (<div className=\"bg-red-100 border-l-4 border-red-500 text-red-700 p-4\" role=\"alert\"><p className=\"font-bold\">Fehler bei der Assistenz</p><p>{assistenzError}</p></div>)}\n                                            {therapeutischeAssistenzOutput && !isLoadingTherapeutischeAssistenz && (<div className=\"mt-4 p-4 bg-gray-50 rounded-md border\"><h4 className=\"text-lg font-semibold text-gray-800 mb-2\">Vorschläge des Expertenteams:</h4><div className=\"whitespace-pre-wrap text-sm text-gray-700 leading-relaxed\">{therapeutischeAssistenzOutput}</div></div>)}\n                                        </div>\n                                    )}\n                                </div>\n                            )}\n                        </div>\n                    )}\n                    \n                    {mainView === 'kalender' && (\n                         <div className=\"space-y-6\">\n                            <div>\n                                <div className=\"flex justify-between items-center mb-4\">\n                                    <h3 className=\"text-xl font-semibold text-gray-800\">Offene Abrechnungen</h3>\n                                    <button\n                                        onClick={() => setIsManualBillingSetupOpen(true)}\n                                        className={`${btnPrimary} text-sm`}\n                                    >\n                                        Sitzung manuell abrechnen\n                                    </button>\n                                </div>\n                                <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4\">\n                                    {isLoadingAppointments && <p>Lade offene Termine...</p>}\n                                    {!isLoadingAppointments && unbilledAppointments.length === 0 && <p className=\"text-sm text-gray-500\">Keine offenen Abrechnungen gefunden.</p>}\n                                    <ul className=\"space-y-2\">\n                                        {unbilledAppointments.map(event => (\n                                            <li key={event.id}>\n                                                <button onClick={() => handleStartBilling(event)} className=\"w-full text-left p-3 bg-yellow-100 hover:bg-yellow-200 rounded-md text-sm text-yellow-800 font-medium\">\n                                                    {new Date(event.start.dateTime).toLocaleDateString('de-DE')} - {event.summary}\n                                                </button>\n                                            </li>\n                                        ))}\n                                    </ul>\n                                </div>\n                            </div>\n\n                            <div>\n                                <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Terminkalender</h3>\n                                <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-4\">\n                                    <div className=\"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4 text-sm text-blue-700\">\n                                        <p className=\"font-bold\">Anleitung zum Einbetten Ihres Google Kalenders:</p>\n                                        <ol className=\"list-decimal list-inside mt-2 space-y-1\">\n                                            <li>Öffnen Sie Ihren <a href=\"https://calendar.google.com/\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 underline\">Google Kalender</a> im Browser.</li>\n                                            <li>Gehen Sie zu \"Einstellungen\" (Zahnrad-Symbol) &rarr; \"Einstellungen\".</li>\n                                            <li>Wählen Sie links unter \"Einstellungen für meine Kalender\" den Kalender aus, den Sie einbetten möchten.</li>\n                                            <li>Scrollen Sie zu \"Kalender integrieren\" und kopieren Sie den Link aus dem Feld <b>\"Öffentlich freigegebener Link zu diesem Kalender\"</b> oder den HTML-Code aus <b>\"Einbettungscode\"</b>.</li>\n                                            <li>Ersetzen Sie den <code>src</code>-Link im <code>iframe</code> unten im Code durch den Link aus Ihrem Kalender.</li>\n                                        </ol>\n                                    </div>\n                                    <iframe\n                                        title=\"Google Calendar\"\n                                        src=\"https://calendar.google.com/calendar/embed?src=julisycomorepsy%40gmail.com&ctz=Europe%2FBerlin\"\n                                        style={{ border: 0 }}\n                                        width=\"100%\"\n                                        height=\"600\"\n                                        frameBorder=\"0\"\n                                        scrolling=\"no\"\n                                    ></iframe>\n                                </div>\n                            </div>\n                        </div>\n                    )}\n\n                    {mainView === 'formulare' && (\n                        <div>\n                            <h3 className=\"text-2xl font-semibold text-gray-800 mb-4\">Formular- & Dokumentenverwaltung</h3>\n                            <div className=\"bg-white p-6 border border-gray-200 rounded-lg shadow-sm\">\n                                <label htmlFor=\"file-upload\" className=\"mb-4 block w-full cursor-pointer\">\n                                    <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-teal-400 transition-colors\">\n                                        <UploadCloudIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\n                                        <span className=\"mt-2 block text-sm font-medium text-gray-900\">\n                                            Dateien zum Hochladen auswählen\n                                        </span>\n                                        <span className=\"mt-1 block text-xs text-gray-500\">\n                                            PDF, DOCX, etc.\n                                        </span>\n                                    </div>\n                                    <input id=\"file-upload\" name=\"file-upload\" type=\"file\" className=\"sr-only\" multiple onChange={handleFileUpload} />\n                                </label>\n                                \n                                {uploadedFiles.length > 0 && (\n                                    <div>\n                                        <h4 className=\"text-lg font-medium text-gray-900 mb-2\">Hochgeladene Dateien</h4>\n                                        <ul className=\"divide-y divide-gray-200 border rounded-lg\">\n                                            {uploadedFiles.map((file, index) => (\n                                                <li key={index} className=\"flex items-center justify-between p-3 hover:bg-gray-50\">\n                                                    <div className=\"flex items-center\">\n                                                        <FileIcon className=\"h-6 w-6 text-gray-400 mr-3\"/>\n                                                        <div>\n                                                            <p className=\"text-sm font-medium text-gray-900\">{file.name}</p>\n                                                            <p className=\"text-xs text-gray-500\">{(file.size / 1024).toFixed(2)} KB - Zuletzt geändert: {file.lastModified}</p>\n                                                        </div>\n                                                    </div>\n                                                    <button onClick={() => handleRemoveFile(file.name)} className=\"text-gray-400 hover:text-red-600\">\n                                                        <Trash2 className=\"h-5 w-5\"/>\n                                                    </button>\n                                                </li>\n                                            ))}\n                                        </ul>\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n                    )}\n                    \n                    {mainView === 'ebm' && (<EBMBrowser />)}\n\n                    {mainView === 'icd11' && (\n                        <ICD11ECTBrowser\n                            patients={patients}\n                            selectedPatient={selectedPatient}\n                            onAssignDiagnosis={handleAssignIcd11Diagnosis}\n                        />\n                    )}\n\n                </main>\n            </div>\n\n            {/* MODALS AND GLOBAL ELEMENTS */}\n            <Modal\n                isOpen={diagnosisInfo.isOpen}\n                onClose={() => setDiagnosisInfo(prev => ({ ...prev, isOpen: false }))}\n                title={`Diagnose-Info: ${diagnosisInfo.code || ''}`}\n                size=\"3xl\"\n            >\n                {diagnosisInfo.isLoading && (<p className=\"text-center py-4\">Informationen werden geladen...</p>)}\n                {diagnosisInfo.error && (<p className=\"text-red-600 bg-red-100 p-3 rounded-md\">Fehler: {diagnosisInfo.error}</p>)}\n                {!diagnosisInfo.isLoading && diagnosisInfo.source === 'local' && (\n                    <div className=\"text-sm text-gray-700 leading-relaxed p-2 space-y-3\">\n                        <h3 className=\"text-lg font-semibold text-teal-700\">{diagnosisInfo.name}<span className=\"text-gray-500 text-base ml-2\">({diagnosisInfo.code})</span></h3>\n                        {diagnosisInfo.beschreibung && (<div><strong className=\"font-medium text-gray-800 block mb-1\">Beschreibung:</strong><p className=\"whitespace-pre-wrap\">{diagnosisInfo.beschreibung}</p></div>)}\n                        {diagnosisInfo.inkl?.length > 0 && (<div><strong className=\"font-medium text-gray-800 block mb-1\">Inklusive:</strong><ul className=\"list-disc list-inside\">{diagnosisInfo.inkl.map((item, idx) => (<li key={idx}>{item}</li>))}</ul></div>)}\n                        {diagnosisInfo.exkl?.length > 0 && (<div><strong className=\"font-medium text-gray-800 block mb-1\">Exklusive:</strong><ul className=\"list-disc list-inside\">{diagnosisInfo.exkl.map((item, idx) => (<li key={idx}>{item}</li>))}</ul></div>)}\n                    </div>\n                )}\n                {!diagnosisInfo.isLoading && diagnosisInfo.source === 'api_detail' && (\n                    <div className=\"text-sm text-gray-700 leading-relaxed p-2 space-y-4\">\n                        <h3 className=\"text-lg font-semibold text-purple-700\">{diagnosisInfo.name}<span className=\"text-gray-500 text-base ml-2 font-mono\">({diagnosisInfo.code})</span></h3>\n                        {diagnosisInfo.beschreibung && (<div><strong className=\"font-medium text-gray-800 block mb-1\">Beschreibung (Definition):</strong><p className=\"whitespace-pre-wrap bg-gray-50 p-2 rounded-md\">{diagnosisInfo.beschreibung}</p></div>)}\n                        {diagnosisInfo.inclusions?.length > 0 && (<div><strong className=\"font-medium text-gray-800 block mb-1\">Inklusive:</strong><ul className=\"list-disc list-inside pl-2 space-y-1\">{diagnosisInfo.inclusions.map((item, idx) => (<li key={idx}>{item.label['@value']}</li>))}</ul></div>)}\n                        {diagnosisInfo.exclusions?.length > 0 && (<div><strong className=\"font-medium text-gray-800 block mb-1\">Exklusive:</strong><ul className=\"list-disc list-inside pl-2 space-y-1\">{diagnosisInfo.exclusions.map((item, idx) => (<li key={idx}>{item.label['@value']}{item.foundationReference &&<span className=\"text-xs text-gray-400 ml-2\">({item.linearizationReference.split('/').pop()})</span>}</li>))}</ul></div>)}\n                    </div>\n                )}\n            </Modal>\n\n            <Modal\n                isOpen={improvementState.isOpen}\n                onClose={() => setImprovementState({ ...improvementState, isOpen: false })}\n                title=\"Sitzungsdokumentation verbessern\"\n                size=\"5xl\"\n            >\n                {improvementState.error && <p className=\"text-red-500 bg-red-100 p-3 rounded-md mb-4\">{improvementState.error}</p>}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                        <h4 className=\"font-semibold text-lg text-gray-700 mb-2\">Original</h4>\n                        <pre className=\"text-sm bg-gray-100 p-3 rounded-md whitespace-pre-wrap font-sans h-96 overflow-y-auto border\">{improvementState.originalText}</pre>\n                    </div>\n                    <div>\n                        <h4 className=\"font-semibold text-lg text-gray-700 mb-2\">Vorschlag</h4>\n                        <pre className=\"text-sm bg-gray-800 text-green-300 font-mono p-3 rounded-md whitespace-pre-wrap h-96 overflow-y-auto\">{improvementState.improvedText}</pre>\n                    </div>\n                </div>\n                <div className=\"flex justify-end space-x-4 mt-6\">\n                    <button type=\"button\" onClick={() => setImprovementState({ ...improvementState, isOpen: false })} className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300\">Abbrechen</button>\n                    <button onClick={handleAcceptImprovement} className={`${btnPrimary} flex items-center`}>\n                        <Save className=\"w-4 h-4 mr-2\" /> Original ersetzen\n                    </button>\n                </div>\n            </Modal>\n\n            {appError && (<div className=\"fixed bottom-4 right-4 p-4 max-w-sm text-sm text-red-700 bg-red-100 border border-red-400 rounded-md shadow-lg z-[100]\">{appError}<button onClick={() => setAppError(null)} className=\"ml-4 mt-2 sm:mt-0 sm:ml-2 px-2 py-1 text-red-900 underline rounded-md hover:bg-red-200 text-xs\">Ok</button></div>)}\n\n            <AddTestFlowModal\n                isOpen={isAddTestModalOpen}\n                onClose={() => setIsAddTestModalOpen(false)}\n                onSave={handleSaveTestAndResults}\n                testInfo={currentTestToAdd}\n                patient={selectedPatient}\n            />\n\n            <ManualBillingSetupModal\n                isOpen={isManualBillingSetupOpen}\n                onClose={() => setIsManualBillingSetupOpen(false)}\n                patients={sortedPatients}\n                onStart={handleStartManualBilling}\n            />\n\n            <BillTestModal\n                isOpen={retroBillingState.isOpen}\n                onClose={() => setRetroBillingState({ isOpen: false, test: null })}\n                onSave={handleSaveRetroactiveBilling}\n                testToBill={retroBillingState.test}\n                patientSessions={selectedPatient?.sessions || []}\n            />\n\n            {billingModalState.isOpen && (\n                <Modal\n                    isOpen={billingModalState.isOpen}\n                    onClose={() => setBillingModalState({ isOpen: false, event: null, isEditing: false })}\n                    title={billingModalState.isEditing ? \"Sitzung bearbeiten\" : `Termin abrechnen: ${billingModalState.event.summary}`}\n                    size=\"4xl\"\n                >\n                    <BillingModal\n                        event={billingModalState.event}\n                        ebmData={ebmData}\n                        onSave={(data) => handleSaveBilling(data, billingModalState.isEditing)}\n                        onClose={() => setBillingModalState({ isOpen: false, event: null, isEditing: false })}\n                        generateGeminiText={generateGeminiText}\n                        isEditing={billingModalState.isEditing}\n                    />\n                </Modal>\n            )}\n        </div>\n    );\n}\n\n\nconst CustomBdiLabel = (props) => {\n    const { x, y, width, text } = props;\n    if (typeof x !== 'number' || isNaN(x) ||\n        typeof y !== 'number' || isNaN(y) ||\n        typeof width !== 'number' || isNaN(width) || width <= 0) {\n        return null;\n    }\n    const labelX = x + width / 2;\n    return (<text x={labelX} y={y} fill=\"#666\" textAnchor=\"middle\" dy={-4} fontSize=\"10\">{text}</text>);\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}