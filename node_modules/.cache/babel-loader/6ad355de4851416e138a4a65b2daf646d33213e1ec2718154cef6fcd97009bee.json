{"ast":null,"code":"var _jsxFileName = \"/Users/julianrogowski/Desktop/patientenverwaltung-app/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n/* global __GEMINI_API_KEY__ */\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from 'firebase/auth';\nimport { getFirestore, collection, doc, addDoc, getDocs, setDoc, deleteDoc, onSnapshot, query, writeBatch } from 'firebase/firestore';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, ReferenceArea } from 'recharts';\n\n// Component Imports\nimport SCL90RComponent from './components/SCL90R.js';\nimport FEP2Component from './components/FEP2.js';\nimport BDI2Component from './components/BDI2.js';\nimport HSCL11Component from './components/HSCL11.js';\nimport ICD11ECTBrowser from './components/ICD11ECTBrowser.js';\nimport EBMBrowser from './components/EBMBrowser.js';\nimport BillingModal from './components/BillingModal.js';\nimport AbrechnungsUebersicht from './components/AbrechnungsUebersicht.js';\nimport DiagnostikUebersicht from './components/DiagnostikUebersicht.js';\nimport AddTestFlowModal from './components/AddTestFlowModal.js';\nimport ManualBillingSetupModal from './components/ManualBillingSetupModal.js';\nimport BillTestModal from './components/BillTestModal.js';\n\n// --- ICONS ---\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UsersIcon = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 227\n  }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"9\",\n    cy: \"7\",\n    r: \"4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 286\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M23 21v-2a4 4 0 0 0-3-3.87\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 323\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M16 3.13a4 4 0 0 1 0 7.75\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 367\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 30,\n  columnNumber: 50\n}, this);\n_c = UsersIcon;\nconst FileTextIcon = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 230\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"14 2 14 8 20 8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 306\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"16\",\n    y1: \"13\",\n    x2: \"8\",\n    y2: \"13\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 351\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"16\",\n    y1: \"17\",\n    x2: \"8\",\n    y2: \"17\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 395\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"10 9 9 9 8 9\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 439\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 31,\n  columnNumber: 53\n}, this);\n_c2 = FileTextIcon;\nconst BookOpenIcon = ({\n  className = \"w-5 h-5\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 230\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 288\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 32,\n  columnNumber: 53\n}, this);\n_c3 = BookOpenIcon;\nconst UserPlus = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 227\n  }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"9\",\n    cy: \"7\",\n    r: \"4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 281\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"19\",\n    x2: \"19\",\n    y1: \"8\",\n    y2: \"14\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 311\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"22\",\n    x2: \"16\",\n    y1: \"11\",\n    y2: \"11\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 350\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 33,\n  columnNumber: 50\n}, this);\n_c4 = UserPlus;\nconst Edit3 = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M12 20h9\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 224\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 245\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 34,\n  columnNumber: 47\n}, this);\n_c5 = Edit3;\nconst Trash2 = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"3 6 5 6 21 6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 225\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 259\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"10\",\n    y1: \"11\",\n    x2: \"10\",\n    y2: \"17\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 350\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"14\",\n    y1: \"11\",\n    x2: \"14\",\n    y2: \"17\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 390\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 35,\n  columnNumber: 48\n}, this);\n_c6 = Trash2;\nconst PlusCircleIcon = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"10\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 233\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"12\",\n    y1: \"8\",\n    x2: \"12\",\n    y2: \"16\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 266\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"8\",\n    y1: \"12\",\n    x2: \"16\",\n    y2: \"12\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 305\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 36,\n  columnNumber: 56\n}, this);\n_c7 = PlusCircleIcon;\nconst XCircle = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n    cx: \"12\",\n    cy: \"12\",\n    r: \"10\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 226\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"15\",\n    y1: \"9\",\n    x2: \"9\",\n    y2: \"15\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 266\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"9\",\n    y1: \"9\",\n    x2: \"15\",\n    y2: \"15\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 309\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 37,\n  columnNumber: 49\n}, this);\n_c8 = XCircle;\nconst Save = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 223\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"17 21 17 13 7 13 7 21\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 299\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"7 3 7 8 15 8\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 342\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 38,\n  columnNumber: 46\n}, this);\n_c9 = Save;\nconst AlertTriangle = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 232\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"12\",\n    y1: \"9\",\n    x2: \"12\",\n    y2: \"13\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 338\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"12\",\n    y1: \"17\",\n    x2: \"12.01\",\n    y2: \"17\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 382\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 39,\n  columnNumber: 55\n}, this);\n_c0 = AlertTriangle;\nconst LogOut = ({\n  className = \"w-6 h-6\"\n}) => /*#__PURE__*/_jsxDEV(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\",\n  className: className,\n  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 225\n  }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n    points: \"16 17 21 12 16 7\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 277\n  }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n    x1: \"21\",\n    y1: \"12\",\n    x2: \"9\",\n    y2: \"12\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 315\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 40,\n  columnNumber: 48\n}, this);\n\n// --- SIDEBAR COMPONENT (Integriert) ---\n_c1 = LogOut;\nconst NavLink = ({\n  icon,\n  label,\n  isActive,\n  onClick\n}) => {\n  const activeClass = isActive ? 'bg-gray-700 text-white' : 'text-gray-400 hover:bg-gray-700 hover:text-white';\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: onClick,\n    className: `w-full flex items-center px-3 py-2.5 text-sm font-medium rounded-md ${activeClass} transition-colors`,\n    children: [icon, /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"ml-3\",\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n};\n_c10 = NavLink;\nconst Sidebar = ({\n  mainView,\n  setMainView,\n  handleLogout\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col w-64 bg-gray-800 text-white flex-shrink-0\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center h-16 flex-shrink-0 px-4 bg-gray-900 shadow-md\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-xl font-semibold tracking-tight text-white\",\n        children: \"Therapie-Praxis\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col overflow-y-auto p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"flex-1 space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2\",\n            children: \"Ansichten\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-1\",\n            children: [/*#__PURE__*/_jsxDEV(NavLink, {\n              icon: /*#__PURE__*/_jsxDEV(UsersIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 39\n              }, this),\n              label: \"Patienten\\xFCbersicht\",\n              isActive: mainView === 'patients',\n              onClick: () => setMainView('patients')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 30\n            }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n              icon: /*#__PURE__*/_jsxDEV(FileTextIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 39\n              }, this),\n              label: \"Patientenakte\",\n              isActive: mainView === 'patientenakte',\n              onClick: () => {\n                setMainView('patientenakte');\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 30\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2\",\n            children: \"Werkzeuge\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 26\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-1\",\n            children: [/*#__PURE__*/_jsxDEV(NavLink, {\n              icon: /*#__PURE__*/_jsxDEV(BookOpenIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 39\n              }, this),\n              label: \"EBM\",\n              isActive: mainView === 'ebm',\n              onClick: () => setMainView('ebm')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n              icon: /*#__PURE__*/_jsxDEV(BookOpenIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 39\n              }, this),\n              label: \"ICD-11 Nachschlagewerk\",\n              isActive: mainView === 'icd11',\n              onClick: () => setMainView('icd11')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-auto flex-shrink-0\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          className: \"w-full flex items-center px-3 py-2 text-sm font-medium rounded-md text-red-400 hover:bg-red-700 hover:text-white transition-colors\",\n          children: [/*#__PURE__*/_jsxDEV(LogOut, {\n            className: \"mr-3 h-5 w-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this), \" Logout\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n\n// --- FIREBASE CONFIG & CONSTANTS ---\n_c11 = Sidebar;\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDZ_qqqKW7WDCZ9botek2VBwXNMQO3JYwU\",\n  authDomain: \"psychotherapie0512.firebaseapp.com\",\n  projectId: \"psychotherapie0512\",\n  storageBucket: \"psychotherapie0512.firebasestorage.app\",\n  messagingSenderId: \"131279046361\",\n  appId: \"1:131279046361:web:e5dd2d18b206fb820b60c8\"\n};\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst firestoreAppId = 'default-patient-app-v5';\nconst availableTests = [{\n  id: 'scl90r',\n  name: 'SCL-90-R',\n  ebm: '35601',\n  recommendation: 10\n}, {\n  id: 'fep2',\n  name: 'FEP-2',\n  ebm: '35601',\n  recommendation: 12\n}, {\n  id: 'bdi2',\n  name: 'BDI-II',\n  ebm: '35600',\n  recommendation: 2\n}, {\n  id: 'hscl11',\n  name: 'HSCL-11',\n  ebm: '35600',\n  recommendation: 1\n}];\n\n// --- MODALS & FORMS ---\nconst Modal = ({\n  isOpen,\n  onClose,\n  title,\n  children,\n  size = \"lg\"\n}) => {\n  if (!isOpen) return null;\n  const sizeClasses = {\n    sm: 'max-w-sm',\n    md: 'max-w-md',\n    lg: 'max-w-lg',\n    xl: 'max-w-xl',\n    '2xl': 'max-w-2xl',\n    '4xl': 'max-w-4xl',\n    '5xl': 'max-w-5xl'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex justify-center items-center z-50 p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `bg-white p-6 rounded-lg shadow-xl w-full ${sizeClasses[size]} max-h-[90vh] overflow-y-auto`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold text-gray-800\",\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 533\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"text-gray-500 hover:text-gray-700\",\n          children: /*#__PURE__*/_jsxDEV(XCircle, {\n            className: \"w-7 h-7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 670\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 598\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 477\n      }, this), children]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 367\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 254\n  }, this);\n};\n_c12 = Modal;\nconst ConfirmationModal = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  message\n}) => {\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen,\n    onClose: onClose,\n    title: title,\n    size: \"sm\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: [/*#__PURE__*/_jsxDEV(AlertTriangle, {\n        className: \"mx-auto mb-4 w-12 h-12 text-red-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 209\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-700 mb-6\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 274\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center space-x-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none\",\n          children: \"Abbrechen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 368\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onConfirm,\n          className: \"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none\",\n          children: \"Best\\xE4tigen\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 528\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 321\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 180\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 115\n  }, this);\n};\n_c13 = ConfirmationModal;\nconst PatientForm = ({\n  patient,\n  onSave,\n  onCancel\n}) => {\n  _s();\n  // This component's internal logic remains unchanged\n  const [formData, setFormData] = useState(patient || {\n    name: '',\n    vorname: '',\n    chiffre: '',\n    geburtsdatum: '',\n    adresse: '',\n    email: '',\n    telefon: '',\n    therapyType: 'LZT',\n    approvedHours: 0,\n    conductedHours: 0,\n    diagnoses: [],\n    sessions: [],\n    hscl11Results: [],\n    bdi2Results: [],\n    fep2Results: [],\n    scl90rResults: [],\n    krankheitsanamnese: \"\",\n    lebensgeschichte: \"\",\n    problemanalyseMakro: \"\",\n    therapieplan: \"\"\n  });\n  useEffect(() => {\n    if (patient) {\n      setFormData({\n        ...patient,\n        geburtsdatum: patient.geburtsdatum || ''\n      });\n    }\n  }, [patient]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'number' ? parseInt(value, 10) || 0 : value\n    }));\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    onSave(formData);\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"space-y-4\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 162,\n    columnNumber: 9\n  }, this);\n};\n_s(PatientForm, \"pjYx4YxeSSug2Y+SWn17ck+hftE=\");\n_c14 = PatientForm;\nconst CustomBdiLabel = props => {/* ... */};\n_c15 = CustomBdiLabel;\nasync function generateGeminiText(prompt) {/* ... */}\nfunction App() {\n  _s2();\n  // --- STATES ---\n  const [mainView, setMainView] = useState('patients');\n  const [patients, setPatients] = useState([]);\n  const [selectedPatient, setSelectedPatient] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [authError, setAuthError] = useState(null);\n  const [appError, setAppError] = useState(null);\n  const [userId, setUserId] = useState(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [isLoginView, setIsLoginView] = useState(true);\n  const [isAuthLoading, setIsAuthLoading] = useState(false);\n  const [isPatientModalOpen, setIsPatientModalOpen] = useState(false);\n  const [editingPatient, setEditingPatient] = useState(null);\n  const [isConfirmDeleteModalOpen, setIsConfirmDeleteModalOpen] = useState(false);\n  const [patientToDeleteId, setPatientToDeleteId] = useState(null);\n  const [activeDetailTab, setActiveDetailTab] = useState('übersicht');\n  const [activeDiagnostikSubTab, setActiveDiagnostikSubTab] = useState('overview');\n  const [diagnosisInfo, setDiagnosisInfo] = useState({\n    isOpen: false\n  });\n  const [localIcd10Data, setLocalIcd10Data] = useState({});\n  const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\n  const [unbilledAppointments, setUnbilledAppointments] = useState([]);\n  const [isLoadingAppointments, setIsLoadingAppointments] = useState(false);\n  const [billingModalState, setBillingModalState] = useState({\n    isOpen: false,\n    event: null\n  });\n  const [ebmData, setEbmData] = useState([]);\n  const [isAddTestModalOpen, setIsAddTestModalOpen] = useState(false);\n  const [currentTestToAdd, setCurrentTestToAdd] = useState(null);\n  const [isManualBillingSetupOpen, setIsManualBillingSetupOpen] = useState(false);\n  const [retroBillingState, setRetroBillingState] = useState({\n    isOpen: false,\n    test: null\n  });\n  const [confirmDeleteState, setConfirmDeleteState] = useState({\n    isOpen: false,\n    onConfirm: null,\n    message: '',\n    title: ''\n  });\n  const [sortedPatients, setSortedPatients] = useState([]);\n  const [nextAppointment, setNextAppointment] = useState({\n    isLoading: false,\n    text: null,\n    error: null\n  });\n  const [improvementState, setImprovementState] = useState({\n    isOpen: false,\n    isLoading: false,\n    originalText: '',\n    improvedText: '',\n    sessionIndex: null,\n    error: null\n  });\n  const [editingSessionIndex, setEditingSessionIndex] = useState(null);\n  const [editingSessionText, setEditingSessionText] = useState('');\n  const [editingHours, setEditingHours] = useState({});\n  const [sortConfig, setSortConfig] = useState({\n    key: 'name',\n    direction: 'ascending'\n  });\n  const [expandedSessions, setExpandedSessions] = useState({});\n  const [copiedStatus, setCopiedStatus] = useState({});\n  const [editableKrankheitsanamnese, setEditableKrankheitsanamnese] = useState(\"\");\n  const [editableLebensgeschichte, setEditableLebensgeschichte] = useState(\"\");\n  const [editableProblemanalyseMakro, setEditableProblemanalyseMakro] = useState(\"\");\n  const [editableTherapieplan, setEditableTherapieplan] = useState(\"\");\n  const [therapeutischeAssistenzOutput, setTherapeutischeAssistenzOutput] = useState(\"\");\n  const [isLoadingTherapeutischeAssistenz, setIsLoadingTherapeutischeAssistenz] = useState(false);\n  const [assistenzError, setAssistenzError] = useState(null);\n  const [newDiagnosis, setNewDiagnosis] = useState('');\n  const [newDiagnosisCode, setNewDiagnosisCode] = useState('');\n  const [newDiagnosisSicherheit, setNewDiagnosisSicherheit] = useState('G');\n  const [lookedUpDiagnosisName, setLookedUpDiagnosisName] = useState('');\n  const [newSessionDate, setNewSessionDate] = useState(new Date().toISOString().split('T')[0]);\n  const [newSessionNotes, setNewSessionNotes] = useState('');\n  const [sessionSummaries, setSessionSummaries] = useState({});\n  const detailViewRef = useRef(null);\n  const overviewRef = useRef(null);\n\n  // --- FUNCTIONS ---\n  const calculateAge = birthdate => {\n    if (!birthdate) return '';\n    const birthDate = new Date(birthdate);\n    const today = new Date();\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const m = today.getMonth() - birthDate.getMonth();\n    if (m < 0 || m === 0 && today.getDate() < birthDate.getDate()) {\n      age--;\n    }\n    return age;\n  };\n  const getPatientsCollectionPath = useCallback(() => {\n    if (!userId) return null;\n    return `/artifacts/${firestoreAppId}/users/${userId}/patients`;\n  }, [userId]);\n  const handleAuthAction = async isRegistering => {\n    setIsAuthLoading(true);\n    setAuthError(null);\n    try {\n      if (isRegistering) {\n        await createUserWithEmailAndPassword(auth, email, password);\n      } else {\n        await signInWithEmailAndPassword(auth, email, password);\n      }\n      setEmail(\"\");\n      setPassword(\"\");\n    } catch (error) {\n      console.error(\"Authentication error:\", error);\n      setAuthError(error.message);\n    } finally {\n      setIsAuthLoading(false);\n    }\n  };\n  const handleLogout = async () => {\n    try {\n      await signOut(auth);\n      setSelectedPatient(null);\n      setPatients([]);\n    } catch (error) {\n      console.error(\"Error signing out: \", error);\n      setAppError(\"Fehler beim Abmelden.\");\n    }\n  };\n  const handleSavePatient = async patientData => {\n    if (!userId) {\n      setAppError(\"Benutzer nicht authentifiziert.\");\n      return;\n    }\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const dataToSave = {\n      ...patientData,\n      hscl11Results: patientData.hscl11Results || [],\n      bdi2Results: patientData.bdi2Results || [],\n      fep2Results: patientData.fep2Results || [],\n      scl90rResults: patientData.scl90rResults || [],\n      krankheitsanamnese: patientData.krankheitsanamnese || \"\",\n      lebensgeschichte: patientData.lebensgeschichte || \"\",\n      problemanalyseMakro: patientData.problemanalyseMakro || \"\",\n      therapieplan: patientData.therapieplan || \"\"\n    };\n    try {\n      if (editingPatient && editingPatient.id) {\n        const patientRef = doc(db, collectionPath, editingPatient.id);\n        await setDoc(patientRef, dataToSave, {\n          merge: true\n        });\n      } else {\n        await addDoc(collection(db, collectionPath), dataToSave);\n      }\n      setIsPatientModalOpen(false);\n      setEditingPatient(null);\n    } catch (err) {\n      console.error(\"Error saving patient:\", err);\n      setAppError(\"Fehler beim Speichern des Patienten.\");\n    }\n  };\n  const openDeleteConfirmation = patientId => {\n    setPatientToDeleteId(patientId);\n    setIsConfirmDeleteModalOpen(true);\n  };\n  const confirmDeletePatient = async () => {\n    if (!patientToDeleteId || !userId) {\n      setAppError(\"Löschvorgang fehlgeschlagen.\");\n      setIsConfirmDeleteModalOpen(false);\n      return;\n    }\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    try {\n      const patientRef = doc(db, collectionPath, patientToDeleteId);\n      await deleteDoc(patientRef);\n      if (selectedPatient && selectedPatient.id === patientToDeleteId) {\n        setSelectedPatient(null);\n      }\n      setPatientToDeleteId(null);\n      setIsConfirmDeleteModalOpen(false);\n    } catch (err) {\n      console.error(\"Error deleting patient:\", err);\n      setAppError(\"Fehler beim Löschen des Patienten.\");\n      setIsConfirmDeleteModalOpen(false);\n    }\n  };\n  const findIcd10CodeLocal = useCallback(codeToFind => {\n    const upperCodeToFind = codeToFind.toUpperCase();\n    let found = localIcd10Data[upperCodeToFind];\n    if (found) return found;\n    const baseCode = upperCodeToFind.replace(/(\\.-[*]|\\.\\*|[*]|-)$/, '');\n    found = localIcd10Data[`${baseCode}.-*`] || localIcd10Data[`${baseCode}.*`] || localIcd10Data[baseCode];\n    if (found) return found;\n    const possibleCategoryCode = Object.keys(localIcd10Data).find(key => key.startsWith(upperCodeToFind) && (localIcd10Data[key].code_kategorie || localIcd10Data[key].code));\n    if (possibleCategoryCode) return localIcd10Data[possibleCategoryCode];\n    return null;\n  }, [localIcd10Data]);\n  const handleAddDiagnosis = async () => {\n    const codeToAdd = newDiagnosisCode.trim().toUpperCase();\n    if (!selectedPatient || !codeToAdd || !userId) {\n      setAppError(\"Bitte füllen Sie alle erforderlichen Felder aus.\");\n      return;\n    }\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const sicherheitPrefix = newDiagnosisSicherheit ? `[${newDiagnosisSicherheit}] ` : \"\";\n    const beschreibung = newDiagnosis.trim() ? `: ${newDiagnosis.trim()}` : lookedUpDiagnosisName ? `: ${lookedUpDiagnosisName}` : \"\";\n    const diagnosisString = `${sicherheitPrefix}${codeToAdd}${beschreibung}`;\n    const updatedDiagnoses = [...(selectedPatient.diagnoses || []), diagnosisString];\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        diagnoses: updatedDiagnoses\n      }, {\n        merge: true\n      });\n      setNewDiagnosisCode('');\n      setNewDiagnosis('');\n      setLookedUpDiagnosisName('');\n      setNewDiagnosisSicherheit('G');\n    } catch (err) {\n      console.error(\"Error adding diagnosis:\", err);\n      setAppError(\"Fehler beim Hinzufügen der Diagnose.\");\n    }\n  };\n  const handleRemoveDiagnosis = async diagnosisStringToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedDiagnoses = selectedPatient.diagnoses.filter(d => d !== diagnosisStringToRemove);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        diagnoses: updatedDiagnoses\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing diagnosis:\", err);\n      setAppError(\"Fehler beim Entfernen der Diagnose.\");\n    }\n  };\n  const handleAddSession = async () => {\n    if (!selectedPatient || !newSessionNotes.trim() || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const newSession = {\n      date: newSessionDate,\n      notes: newSessionNotes.trim()\n    };\n    const updatedSessions = [...(selectedPatient.sessions || []), newSession];\n    updatedSessions.sort((a, b) => new Date(b.date) - new Date(a.date));\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        sessions: updatedSessions\n      }, {\n        merge: true\n      });\n      setNewSessionNotes('');\n    } catch (err) {\n      console.error(\"Error adding session:\", err);\n      setAppError(\"Fehler beim Hinzufügen der Sitzung.\");\n    }\n  };\n  const handleUpdateConductedHours = async (patientId, hours) => {\n    if (!patientId || !userId) return;\n    if (isNaN(hours) || hours < 0) {\n      console.error(\"Ungültige Stundenzahl für Firestore-Update:\", hours);\n      return;\n    }\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const patientRef = doc(db, collectionPath, patientId);\n    try {\n      await setDoc(patientRef, {\n        conductedHours: hours\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error updating conducted hours:\", err);\n      setAppError(\"Fehler beim Aktualisieren der Stunden.\");\n    }\n  };\n  const handleAddBdiResult = async newResult => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedBdiResults = [...(selectedPatient.bdi2Results || []), newResult];\n    updatedBdiResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        bdi2Results: updatedBdiResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error adding BDI-II result:\", err);\n      setAppError(\"Fehler beim Hinzufügen des BDI-II Ergebnisses.\");\n    }\n  };\n  const handleAddHsclResult = async newResult => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedHsclResults = [...(selectedPatient.hscl11Results || []), newResult];\n    updatedHsclResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        hscl11Results: updatedHsclResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error adding HSCL result:\", err);\n      setAppError(\"Fehler beim Hinzufügen des HSCL-Ergebnisses.\");\n    }\n  };\n  const handleRemoveHsclResult = async dateToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedHsclResults = selectedPatient.hscl11Results.filter(r => r.date !== dateToRemove);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        hscl11Results: updatedHsclResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing HSCL result:\", err);\n      setAppError(\"Fehler beim Entfernen des HSCL-Ergebnisses.\");\n    }\n  };\n  const handleRemoveBdiResult = async dateToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedBdiResults = selectedPatient.bdi2Results.filter(r => r.date !== dateToRemove);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        bdi2Results: updatedBdiResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing BDI-II result:\", err);\n      setAppError(\"Fehler beim Entfernen des BDI-II Ergebnisses.\");\n    }\n  };\n  const handleAddFepResult = async result => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedFepResults = [...(selectedPatient.fep2Results || []), result];\n    updatedFepResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        fep2Results: updatedFepResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error adding FEP-2 result:\", err);\n      setAppError(\"Fehler beim Hinzufügen des FEP-2 Ergebnisses.\");\n    }\n  };\n  const handleRemoveFepResult = async dateToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedFepResults = selectedPatient.fep2Results.filter(r => r.date !== dateToRemove);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        fep2Results: updatedFepResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing FEP-2 result:\", err);\n      setAppError(\"Fehler beim Entfernen des FEP-2 Ergebnisses.\");\n    }\n  };\n  const handleAddScl90rResult = async result => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const newResultToSave = {\n      rawScores: result.rawScores,\n      tScores: result.tScores,\n      globalScores: result.globalScores,\n      itemScores: result.itemScores,\n      date: result.date\n    };\n    const updatedScl90rResults = [...(selectedPatient.scl90rResults || []), newResultToSave];\n    updatedScl90rResults.sort((a, b) => new Date(b.date) - new Date(a.date));\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        scl90rResults: updatedScl90rResults\n      }, {\n        merge: true\n      });\n      console.log(\"SCL-90-R-Ergebnis erfolgreich gespeichert mit itemScores.\");\n    } catch (err) {\n      console.error(\"Error adding SCL-90-R result:\", err);\n      setAppError(\"Fehler beim Speichern des SCL-90-R Ergebnisses.\");\n    }\n  };\n  const handleRemoveScl90rResult = async dateToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedScl90rResults = selectedPatient.scl90rResults.filter(r => r.date !== dateToRemove);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        scl90rResults: updatedScl90rResults\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing SCL-90-R result:\", err);\n      setAppError(\"Fehler beim Entfernen des SCL-90-R Ergebnisses.\");\n    }\n  };\n  const fetchSessionSummary = async (sessionNotes, sessionIndex) => {\n    setSessionSummaries(prev => ({\n      ...prev,\n      [sessionIndex]: {\n        ...prev[sessionIndex],\n        isLoading: true,\n        error: null\n      }\n    }));\n    const prompt = `Fasse die folgenden Therapiesitzungsnotizen prägnant zusammen. Konzentriere dich auf die wichtigsten Themen, Interventionen und den Fortschritt des Patienten:\\n\\n\"${sessionNotes}\"`;\n    try {\n      const summary = await generateGeminiText(prompt);\n      setSessionSummaries(prev => ({\n        ...prev,\n        [sessionIndex]: {\n          summary: summary,\n          isLoading: false,\n          error: null\n        }\n      }));\n    } catch (e) {\n      setSessionSummaries(prev => ({\n        ...prev,\n        [sessionIndex]: {\n          ...prev[sessionIndex],\n          isLoading: false,\n          error: e.message\n        }\n      }));\n      setAppError(`Fehler bei der Zusammenfassung: ${e.message}`);\n    }\n  };\n  const handleKrankheitsmodellChange = async (fieldName, value) => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        [fieldName]: value\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(`Error updating ${fieldName}:`, err);\n      setAppError(`Fehler beim Speichern von ${fieldName}.`);\n    }\n  };\n  const handleTherapeutischeAssistenzAnfordern = async () => {\n    if (!selectedPatient) {\n      setAssistenzError(\"Bitte wählen Sie zuerst einen Patienten aus.\");\n      return;\n    }\n    setIsLoadingTherapeutischeAssistenz(true);\n    setTherapeutischeAssistenzOutput(\"\");\n    setAssistenzError(null);\n    const patientenDatenText = `\nHier sind die relevanten Patientendaten:\n**Krankheitsanamnese:** ${selectedPatient.krankheitsanamnese || \"Keine Angaben.\"}\n**Lebensgeschichte/Biografie:** ${selectedPatient.lebensgeschichte || \"Keine Angaben.\"}\n**Problemanalyse auf Makroebene:** ${selectedPatient.problemanalyseMakro || \"Keine Angaben.\"}\n**Therapieplanung (bisherig):** ${selectedPatient.therapieplan || \"Keine Angaben.\"}\n**Verlaufsdokumentation (Sitzungsnotizen):** ${(selectedPatient.sessions || []).map((s, i) => `Sitzung ${i + 1} (${new Date(s.date).toLocaleDateString('de-DE')}): ${s.notes}`).join(\"\\n\\n\") || \"Keine Sitzungsnotizen vorhanden.\"}\n**Diagnosen:** ${(selectedPatient.diagnoses || []).join(\", \") || \"Keine Diagnosen erfasst.\"}\n**Genehmigte Stunden:** ${selectedPatient.approvedHours}\n**Durchgeführte Stunden:** ${selectedPatient.conductedHours}\n    `;\n    const systemPrompt = `Du bist ein Expertenteam für Psychotherapie. Deine Aufgabe ist es, auf Grundlage der Patientendaten eine strukturierte Rückmeldung zu geben mit dem Ziel: 1. Wesentliche Schwerpunkte für die weitere Therapieplanung zu identifizieren. 2. Konkrete Interventionsideen zu formulieren. 3. Hinweise zur Strukturierung der Sitzungen zu geben. Beachte die begrenzte Stundenzahl. Gib die Antwort als klares, strukturiertes Feedback aus.`;\n    try {\n      const assistenz = await generateGeminiText(systemPrompt);\n      setTherapeutischeAssistenzOutput(assistenz);\n    } catch (e) {\n      setAssistenzError(`Fehler bei der Anforderung der therapeutischen Assistenz: ${e.message}`);\n    } finally {\n      setIsLoadingTherapeutischeAssistenz(false);\n    }\n  };\n  const showDiagnosisInfo = diagnosisString => {\n    const sicherheitMatch = diagnosisString.match(/^\\[([AVGZN]+)\\]\\s*/i);\n    const sicherheit = sicherheitMatch ? sicherheitMatch[1].toUpperCase() : '';\n    const codeAndName = sicherheitMatch ? diagnosisString.substring(sicherheitMatch[0].length) : diagnosisString;\n    const codeMatch = codeAndName.match(/^([A-Z][0-9]{1,2}(\\.[0-9A-Z]{1,2})?[*†]?)/i);\n    const code = codeMatch ? codeMatch[0].toUpperCase() : codeAndName.split(':')[0].trim().toUpperCase();\n    const localData = findIcd10CodeLocal(code);\n    if (localData) {\n      setDiagnosisInfo({\n        code: localData.code || code,\n        name: localData.name || '',\n        beschreibung: localData.beschreibung || localData.beschreibung_kategorie || '',\n        inkl: localData.inkl || [],\n        exkl: localData.exkl || [],\n        hinweise: localData.hinweise || [],\n        zusatz_info_code: localData.zusatz_info_code || '',\n        sicherheit: sicherheit,\n        isLoading: false,\n        error: null,\n        isOpen: true,\n        source: 'local'\n      });\n    } else {\n      setDiagnosisInfo({\n        code: code,\n        name: \"Unbekannter ICD-10 Code\",\n        isLoading: false,\n        error: `Keine Informationen für \"${code}\" gefunden.`,\n        isOpen: true,\n        source: 'error'\n      });\n    }\n  };\n  const handleAssignIcd11Diagnosis = async (patientId, icd11Entity) => {\n    if (!patientId || !icd11Entity || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const patientRef = doc(db, collectionPath, patientId);\n    const targetPatient = patients.find(p => p.id === patientId);\n    if (!targetPatient) {\n      setAppError(\"Ziel-Patient konnte nicht gefunden werden.\");\n      return;\n    }\n    const newDiagnosis = {\n      code: icd11Entity.code,\n      title: icd11Entity.selectedText,\n      uri: icd11Entity.linearizationUri || icd11Entity.foundationUri,\n      date: new Date().toISOString()\n    };\n    const updatedDiagnoses = [...(targetPatient.diagnoses_icd11 || []), newDiagnosis];\n    try {\n      await setDoc(patientRef, {\n        diagnoses_icd11: updatedDiagnoses\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error assigning ICD-11 diagnosis:\", err);\n      setAppError(\"Fehler beim Zuweisen der ICD-11 Diagnose.\");\n    }\n  };\n  const handleRemoveIcd11Diagnosis = async diagnosisToRemove => {\n    if (!selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedDiagnoses = selectedPatient.diagnoses_icd11.filter(d => d.date !== diagnosisToRemove.date);\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        diagnoses_icd11: updatedDiagnoses\n      }, {\n        merge: true\n      });\n    } catch (err) {\n      console.error(\"Error removing ICD-11 diagnosis:\", err);\n      setAppError(\"Fehler beim Entfernen der ICD-11 Diagnose.\");\n    }\n  };\n  const handleImproveSessionNote = async (session, index) => {\n    setImprovementState({\n      ...improvementState,\n      isLoading: true,\n      sessionIndex: index,\n      error: null\n    });\n    const fullPrompt = `Verbessere folgende Therapiedokumentation... --- ${session.notes} ---`;\n    try {\n      const improvedText = await generateGeminiText(fullPrompt);\n      setImprovementState({\n        isOpen: true,\n        isLoading: false,\n        originalText: session.notes,\n        improvedText: improvedText.replace(/^```(json|text)?\\s*|```$/gm, ''),\n        sessionIndex: index,\n        error: null\n      });\n    } catch (e) {\n      setImprovementState({\n        isLoading: false,\n        error: e.message,\n        sessionIndex: null,\n        isOpen: false\n      });\n      setAppError(`Fehler bei der Verbesserung der Notiz: ${e.message}`);\n    }\n  };\n  const handleAcceptImprovement = async () => {\n    if (improvementState.sessionIndex === null || !selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n    updatedSessions[improvementState.sessionIndex].notes = improvementState.improvedText;\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        sessions: updatedSessions\n      }, {\n        merge: true\n      });\n      setImprovementState({\n        isOpen: false,\n        isLoading: false,\n        originalText: '',\n        improvedText: '',\n        sessionIndex: null,\n        error: null\n      });\n    } catch (err) {\n      console.error(\"Error updating session note:\", err);\n      setAppError(\"Fehler beim Aktualisieren der Sitzungsnotiz.\");\n    }\n  };\n  const handleEditSessionStart = (session, index) => {\n    setEditingSessionIndex(index);\n    setEditingSessionText(session.notes);\n    toggleSessionExpansion(index);\n  };\n  const handleEditSessionCancel = () => {\n    setEditingSessionIndex(null);\n    setEditingSessionText('');\n  };\n  const handleEditSessionSave = async () => {\n    if (editingSessionIndex === null || !selectedPatient || !userId) return;\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n    updatedSessions[editingSessionIndex].notes = editingSessionText;\n    const patientRef = doc(db, collectionPath, selectedPatient.id);\n    try {\n      await setDoc(patientRef, {\n        sessions: updatedSessions\n      }, {\n        merge: true\n      });\n      handleEditSessionCancel();\n    } catch (err) {\n      console.error(\"Error updating session note:\", err);\n      setAppError(\"Fehler beim Aktualisieren der Sitzungsnotiz.\");\n    }\n  };\n\n  // --- useEffects ---\n  useEffect(() => {\n    if (ebmData.length === 0) {\n      fetch('/ebm_data_full.json').then(res => res.json()).then(setEbmData);\n    }\n  }, [ebmData]);\n  useEffect(() => {\n    if (mainView === 'patientenakte' && !selectedPatient) {\n      setIsLoadingAppointments(true);\n      fetch('http://localhost:3001/api/calendar/past-events').then(res => res.ok ? res.json() : Promise.reject('Server error')).then(calendarEvents => {\n        const billedEventIds = new Set();\n        patients.forEach(p => {\n          (p.sessions || []).forEach(s => {\n            if (s.eventId) billedEventIds.add(s.eventId);\n          });\n        });\n        const unbilled = calendarEvents.filter(event => {\n          var _event$summary;\n          return !billedEventIds.has(event.id) && ((_event$summary = event.summary) === null || _event$summary === void 0 ? void 0 : _event$summary.match(/[A-Z][0-9]{6}/));\n        });\n        setUnbilledAppointments(unbilled);\n      }).catch(err => setAppError(`Offene Abrechnungen konnten nicht geladen werden: ${err.message}`)).finally(() => setIsLoadingAppointments(false));\n    }\n  }, [mainView, patients, selectedPatient]);\n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, user => {\n      setUserId(user ? user.uid : null);\n      setIsAuthReady(true);\n      setIsLoading(false);\n    });\n    return () => unsubscribe();\n  }, []);\n  useEffect(() => {\n    if (!isAuthReady || !userId) {\n      setPatients([]);\n      return;\n    }\n    const collectionPath = getPatientsCollectionPath();\n    if (!collectionPath) return;\n    setIsLoading(true);\n    const patientsQuery = query(collection(db, collectionPath));\n    const unsubscribe = onSnapshot(patientsQuery, snapshot => {\n      const patientsData = snapshot.docs.map(docSnap => ({\n        id: docSnap.id,\n        ...docSnap.data()\n      }));\n      setPatients(patientsData);\n      setIsLoading(false);\n    }, err => {\n      console.error(\"Error fetching patients:\", err);\n      setAppError(\"Fehler beim Laden der Patientendaten.\");\n      setIsLoading(false);\n    });\n    return () => unsubscribe();\n  }, [isAuthReady, userId, getPatientsCollectionPath]);\n  useEffect(() => {\n    if (selectedPatient && selectedPatient.id && patients.length > 0) {\n      const currentPatientDataFromList = patients.find(p => p.id === selectedPatient.id);\n      if (currentPatientDataFromList && JSON.stringify(currentPatientDataFromList) !== JSON.stringify(selectedPatient)) {\n        setSelectedPatient(currentPatientDataFromList);\n      } else if (!currentPatientDataFromList) {\n        setSelectedPatient(null);\n      }\n    }\n  }, [patients, selectedPatient]);\n\n  // --- RENDER LOGIC ---\n  if (!isAuthReady) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center h-screen\",\n      children: \"Lade...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 738,\n      columnNumber: 16\n    }, this);\n  }\n  if (!userId) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-100 flex flex-col justify-center items-center p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-8 rounded-xl shadow-2xl w-full max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-center text-gray-800 mb-8\",\n          children: isLoginView ? \"Login\" : \"Registrierung\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 745,\n          columnNumber: 21\n        }, this), authError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"bg-red-100 text-red-700 p-3 rounded-md mb-4 text-sm\",\n          children: authError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 746,\n          columnNumber: 35\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: e => {\n            e.preventDefault();\n            handleAuthAction(isLoginView);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 747,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsLoginView(!isLoginView),\n          className: \"mt-6 text-sm text-indigo-600 hover:text-indigo-500 text-center w-full\",\n          children: isLoginView ? \"Noch kein Konto? Jetzt registrieren.\" : \"Bereits registriert? Zum Login.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 750,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 744,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 743,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-screen bg-gray-100 font-sans\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {\n      mainView: mainView,\n      setMainView: setMainView,\n      handleLogout: handleLogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 760,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex-1 flex flex-col overflow-y-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6 lg:p-8\",\n        children: [mainView === 'patients' && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between items-center mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-semibold text-gray-800\",\n              children: \"Patienten\\xFCbersicht\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 774,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                setEditingPatient(null);\n                setIsPatientModalOpen(true);\n              },\n              className: \"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-md shadow-sm flex items-center justify-center\",\n              children: [/*#__PURE__*/_jsxDEV(UserPlus, {\n                className: \"w-5 h-5 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 776,\n                columnNumber: 37\n              }, this), \" Patient hinzuf\\xFCgen\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 775,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 773,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white shadow-md rounded-lg overflow-x-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"w-full min-w-max table-auto text-left\",\n              children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n                className: \"divide-y divide-gray-200\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 782,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 780,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 779,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true), mainView === 'patientenakte' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `grid grid-cols-1 ${isSidebarCollapsed ? 'md:grid-cols-[auto,1fr]' : 'md:grid-cols-4'} gap-6 lg:gap-8`,\n          children: [!isSidebarCollapsed && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"md:col-span-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-xl font-semibold text-gray-800 mb-4\",\n              children: \"Patienten\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 794,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white rounded-lg shadow-md max-h-[75vh] overflow-y-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"divide-y divide-gray-200\",\n                children: sortedPatients.map(patient => /*#__PURE__*/_jsxDEV(\"li\", {\n                  onClick: () => setSelectedPatient(patient),\n                  className: `p-3 cursor-pointer text-sm font-medium transition-colors duration-150 ${(selectedPatient === null || selectedPatient === void 0 ? void 0 : selectedPatient.id) === patient.id ? 'bg-indigo-600 text-white' : 'text-gray-700 hover:bg-indigo-50'}`,\n                  children: [patient.name, \", \", patient.vorname]\n                }, patient.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 798,\n                  columnNumber: 49\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 796,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 795,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 793,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: isSidebarCollapsed ? 'col-span-full' : 'md:col-span-3',\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setIsSidebarCollapsed(!isSidebarCollapsed),\n              className: \"mb-4 text-indigo-600 hover:text-indigo-800 text-sm font-medium\",\n              children: isSidebarCollapsed ? '››' : '‹‹'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 807,\n              columnNumber: 33\n            }, this), selectedPatient ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-white shadow-xl rounded-lg p-6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 811,\n              columnNumber: 37\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center p-10 bg-white rounded-lg shadow-md\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"text-xl font-semibold text-gray-700\",\n                children: \"Bitte einen Patienten ausw\\xE4hlen.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 816,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 815,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 806,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 791,\n          columnNumber: 26\n        }, this), mainView === 'ebm' && /*#__PURE__*/_jsxDEV(EBMBrowser, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 823,\n          columnNumber: 44\n        }, this), mainView === 'icd11' && /*#__PURE__*/_jsxDEV(ICD11ECTBrowser, {\n          patients: patients,\n          selectedPatient: selectedPatient,\n          onAssignDiagnosis: () => {}\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 824,\n          columnNumber: 46\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 767,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        className: \"text-center py-4 text-sm text-gray-500 border-t border-gray-200 mt-auto\",\n        children: [\"Therapie-Dashboard \\xA9 \", new Date().getFullYear()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 827,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 766,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 759,\n    columnNumber: 9\n  }, this);\n}\n_s2(App, \"3FjsQjKVGX3r5AXKZF/hNN52YKg=\");\n_c16 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15, _c16;\n$RefreshReg$(_c, \"UsersIcon\");\n$RefreshReg$(_c2, \"FileTextIcon\");\n$RefreshReg$(_c3, \"BookOpenIcon\");\n$RefreshReg$(_c4, \"UserPlus\");\n$RefreshReg$(_c5, \"Edit3\");\n$RefreshReg$(_c6, \"Trash2\");\n$RefreshReg$(_c7, \"PlusCircleIcon\");\n$RefreshReg$(_c8, \"XCircle\");\n$RefreshReg$(_c9, \"Save\");\n$RefreshReg$(_c0, \"AlertTriangle\");\n$RefreshReg$(_c1, \"LogOut\");\n$RefreshReg$(_c10, \"NavLink\");\n$RefreshReg$(_c11, \"Sidebar\");\n$RefreshReg$(_c12, \"Modal\");\n$RefreshReg$(_c13, \"ConfirmationModal\");\n$RefreshReg$(_c14, \"PatientForm\");\n$RefreshReg$(_c15, \"CustomBdiLabel\");\n$RefreshReg$(_c16, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","initializeApp","getAuth","onAuthStateChanged","createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","getFirestore","collection","doc","addDoc","getDocs","setDoc","deleteDoc","onSnapshot","query","writeBatch","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","ReferenceArea","SCL90RComponent","FEP2Component","BDI2Component","HSCL11Component","ICD11ECTBrowser","EBMBrowser","BillingModal","AbrechnungsUebersicht","DiagnostikUebersicht","AddTestFlowModal","ManualBillingSetupModal","BillTestModal","jsxDEV","_jsxDEV","Fragment","_Fragment","UsersIcon","className","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","children","d","fileName","_jsxFileName","lineNumber","columnNumber","cx","cy","r","_c","FileTextIcon","points","x1","y1","x2","y2","_c2","BookOpenIcon","_c3","UserPlus","_c4","Edit3","_c5","Trash2","_c6","PlusCircleIcon","_c7","XCircle","_c8","Save","_c9","AlertTriangle","_c0","LogOut","_c1","NavLink","icon","label","isActive","onClick","activeClass","_c10","Sidebar","mainView","setMainView","handleLogout","_c11","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","auth","db","firestoreAppId","availableTests","id","name","ebm","recommendation","Modal","isOpen","onClose","title","size","sizeClasses","sm","md","lg","xl","_c12","ConfirmationModal","onConfirm","message","_c13","PatientForm","patient","onSave","onCancel","_s","formData","setFormData","vorname","chiffre","geburtsdatum","adresse","email","telefon","therapyType","approvedHours","conductedHours","diagnoses","sessions","hscl11Results","bdi2Results","fep2Results","scl90rResults","krankheitsanamnese","lebensgeschichte","problemanalyseMakro","therapieplan","handleChange","e","value","type","target","prev","parseInt","handleSubmit","preventDefault","onSubmit","_c14","CustomBdiLabel","props","_c15","generateGeminiText","prompt","App","_s2","patients","setPatients","selectedPatient","setSelectedPatient","isLoading","setIsLoading","authError","setAuthError","appError","setAppError","userId","setUserId","isAuthReady","setIsAuthReady","setEmail","password","setPassword","isLoginView","setIsLoginView","isAuthLoading","setIsAuthLoading","isPatientModalOpen","setIsPatientModalOpen","editingPatient","setEditingPatient","isConfirmDeleteModalOpen","setIsConfirmDeleteModalOpen","patientToDeleteId","setPatientToDeleteId","activeDetailTab","setActiveDetailTab","activeDiagnostikSubTab","setActiveDiagnostikSubTab","diagnosisInfo","setDiagnosisInfo","localIcd10Data","setLocalIcd10Data","isSidebarCollapsed","setIsSidebarCollapsed","unbilledAppointments","setUnbilledAppointments","isLoadingAppointments","setIsLoadingAppointments","billingModalState","setBillingModalState","event","ebmData","setEbmData","isAddTestModalOpen","setIsAddTestModalOpen","currentTestToAdd","setCurrentTestToAdd","isManualBillingSetupOpen","setIsManualBillingSetupOpen","retroBillingState","setRetroBillingState","test","confirmDeleteState","setConfirmDeleteState","sortedPatients","setSortedPatients","nextAppointment","setNextAppointment","text","error","improvementState","setImprovementState","originalText","improvedText","sessionIndex","editingSessionIndex","setEditingSessionIndex","editingSessionText","setEditingSessionText","editingHours","setEditingHours","sortConfig","setSortConfig","key","direction","expandedSessions","setExpandedSessions","copiedStatus","setCopiedStatus","editableKrankheitsanamnese","setEditableKrankheitsanamnese","editableLebensgeschichte","setEditableLebensgeschichte","editableProblemanalyseMakro","setEditableProblemanalyseMakro","editableTherapieplan","setEditableTherapieplan","therapeutischeAssistenzOutput","setTherapeutischeAssistenzOutput","isLoadingTherapeutischeAssistenz","setIsLoadingTherapeutischeAssistenz","assistenzError","setAssistenzError","newDiagnosis","setNewDiagnosis","newDiagnosisCode","setNewDiagnosisCode","newDiagnosisSicherheit","setNewDiagnosisSicherheit","lookedUpDiagnosisName","setLookedUpDiagnosisName","newSessionDate","setNewSessionDate","Date","toISOString","split","newSessionNotes","setNewSessionNotes","sessionSummaries","setSessionSummaries","detailViewRef","overviewRef","calculateAge","birthdate","birthDate","today","age","getFullYear","m","getMonth","getDate","getPatientsCollectionPath","handleAuthAction","isRegistering","console","handleSavePatient","patientData","collectionPath","dataToSave","patientRef","merge","err","openDeleteConfirmation","patientId","confirmDeletePatient","findIcd10CodeLocal","codeToFind","upperCodeToFind","toUpperCase","found","baseCode","replace","possibleCategoryCode","Object","keys","find","startsWith","code_kategorie","code","handleAddDiagnosis","codeToAdd","trim","sicherheitPrefix","beschreibung","diagnosisString","updatedDiagnoses","handleRemoveDiagnosis","diagnosisStringToRemove","filter","handleAddSession","newSession","date","notes","updatedSessions","sort","a","b","handleUpdateConductedHours","hours","isNaN","handleAddBdiResult","newResult","updatedBdiResults","handleAddHsclResult","updatedHsclResults","handleRemoveHsclResult","dateToRemove","handleRemoveBdiResult","handleAddFepResult","result","updatedFepResults","handleRemoveFepResult","handleAddScl90rResult","newResultToSave","rawScores","tScores","globalScores","itemScores","updatedScl90rResults","log","handleRemoveScl90rResult","fetchSessionSummary","sessionNotes","summary","handleKrankheitsmodellChange","fieldName","handleTherapeutischeAssistenzAnfordern","patientenDatenText","map","s","i","toLocaleDateString","join","systemPrompt","assistenz","showDiagnosisInfo","sicherheitMatch","match","sicherheit","codeAndName","substring","length","codeMatch","localData","beschreibung_kategorie","inkl","exkl","hinweise","zusatz_info_code","source","handleAssignIcd11Diagnosis","icd11Entity","targetPatient","p","selectedText","uri","linearizationUri","foundationUri","diagnoses_icd11","handleRemoveIcd11Diagnosis","diagnosisToRemove","handleImproveSessionNote","session","index","fullPrompt","handleAcceptImprovement","JSON","parse","stringify","handleEditSessionStart","toggleSessionExpansion","handleEditSessionCancel","handleEditSessionSave","fetch","then","res","json","ok","Promise","reject","calendarEvents","billedEventIds","Set","forEach","eventId","add","unbilled","_event$summary","has","catch","finally","unsubscribe","user","uid","patientsQuery","snapshot","patientsData","docs","docSnap","data","currentPatientDataFromList","onAssignDiagnosis","_c16","$RefreshReg$"],"sources":["/Users/julianrogowski/Desktop/patientenverwaltung-app/src/App.js"],"sourcesContent":["/* global __GEMINI_API_KEY__ */\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport {\n    getAuth,\n    onAuthStateChanged,\n    createUserWithEmailAndPassword,\n    signInWithEmailAndPassword,\n    signOut\n} from 'firebase/auth';\nimport { getFirestore, collection, doc, addDoc, getDocs, setDoc, deleteDoc, onSnapshot, query, writeBatch } from 'firebase/firestore';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, ReferenceArea } from 'recharts';\n\n// Component Imports\nimport SCL90RComponent from './components/SCL90R.js';\nimport FEP2Component from './components/FEP2.js';\nimport BDI2Component from './components/BDI2.js';\nimport HSCL11Component from './components/HSCL11.js';\nimport ICD11ECTBrowser from './components/ICD11ECTBrowser.js';\nimport EBMBrowser from './components/EBMBrowser.js';\nimport BillingModal from './components/BillingModal.js';\nimport AbrechnungsUebersicht from './components/AbrechnungsUebersicht.js';\nimport DiagnostikUebersicht from './components/DiagnostikUebersicht.js';\nimport AddTestFlowModal from './components/AddTestFlowModal.js';\nimport ManualBillingSetupModal from './components/ManualBillingSetupModal.js';\nimport BillTestModal from './components/BillTestModal.js';\n\n\n// --- ICONS ---\nconst UsersIcon = ({ className = \"w-5 h-5\" }) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"></path><circle cx=\"9\" cy=\"7\" r=\"4\"></circle><path d=\"M23 21v-2a4 4 0 0 0-3-3.87\"></path><path d=\"M16 3.13a4 4 0 0 1 0 7.75\"></path></svg>;\nconst FileTextIcon = ({ className = \"w-5 h-5\" }) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"></path><polyline points=\"14 2 14 8 20 8\"></polyline><line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\"></line><line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\"></line><polyline points=\"10 9 9 9 8 9\"></polyline></svg>;\nconst BookOpenIcon = ({ className = \"w-5 h-5\" }) => <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z\"></path><path d=\"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z\"></path></svg>;\nconst UserPlus = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\" /><circle cx=\"9\" cy=\"7\" r=\"4\" /><line x1=\"19\" x2=\"19\" y1=\"8\" y2=\"14\" /><line x1=\"22\" x2=\"16\" y1=\"11\" y2=\"11\" /></svg>);\nconst Edit3 = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M12 20h9\" /><path d=\"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z\" /></svg>);\nconst Trash2 = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><polyline points=\"3 6 5 6 21 6\" /><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" /><line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" /><line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" /></svg>);\nconst PlusCircleIcon = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><circle cx=\"12\" cy=\"12\" r=\"10\" /><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\" /><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\" /></svg>);\nconst XCircle = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line><line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line></svg>);\nconst Save = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\" /><polyline points=\"17 21 17 13 7 13 7 21\" /><polyline points=\"7 3 7 8 15 8\" /></svg>);\nconst AlertTriangle = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path><line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line><line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line></svg>);\nconst LogOut = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\" /><polyline points=\"16 17 21 12 16 7\" /><line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\" /></svg>);\n\n// --- SIDEBAR COMPONENT (Integriert) ---\nconst NavLink = ({ icon, label, isActive, onClick }) => {\n    const activeClass = isActive ? 'bg-gray-700 text-white' : 'text-gray-400 hover:bg-gray-700 hover:text-white';\n    return (\n        <button onClick={onClick} className={`w-full flex items-center px-3 py-2.5 text-sm font-medium rounded-md ${activeClass} transition-colors`}>\n            {icon}\n            <span className=\"ml-3\">{label}</span>\n        </button>\n    );\n};\n\nconst Sidebar = ({ mainView, setMainView, handleLogout }) => {\n    return (\n        <div className=\"flex flex-col w-64 bg-gray-800 text-white flex-shrink-0\">\n            <div className=\"flex items-center justify-center h-16 flex-shrink-0 px-4 bg-gray-900 shadow-md\">\n                <h1 className=\"text-xl font-semibold tracking-tight text-white\">Therapie-Praxis</h1>\n            </div>\n            <div className=\"flex-1 flex flex-col overflow-y-auto p-4\">\n                <nav className=\"flex-1 space-y-6\">\n                    <div>\n                        <h3 className=\"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2\">Ansichten</h3>\n                        <div className=\"space-y-1\">\n                             <NavLink \n                                icon={<UsersIcon />}\n                                label=\"Patientenübersicht\"\n                                isActive={mainView === 'patients'}\n                                onClick={() => setMainView('patients')}\n                            />\n                             <NavLink \n                                icon={<FileTextIcon />}\n                                label=\"Patientenakte\"\n                                isActive={mainView === 'patientenakte'}\n                                onClick={() => { setMainView('patientenakte');}}\n                            />\n                        </div>\n                    </div>\n                    <div>\n                         <h3 className=\"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2\">Werkzeuge</h3>\n                        <div className=\"space-y-1\">\n                            <NavLink \n                                icon={<BookOpenIcon />}\n                                label=\"EBM\"\n                                isActive={mainView === 'ebm'}\n                                onClick={() => setMainView('ebm')}\n                            />\n                            <NavLink \n                                icon={<BookOpenIcon />}\n                                label=\"ICD-11 Nachschlagewerk\"\n                                isActive={mainView === 'icd11'}\n                                onClick={() => setMainView('icd11')}\n                            />\n                        </div>\n                    </div>\n                </nav>\n                <div className=\"mt-auto flex-shrink-0\">\n                     <button \n                        onClick={handleLogout} \n                        className=\"w-full flex items-center px-3 py-2 text-sm font-medium rounded-md text-red-400 hover:bg-red-700 hover:text-white transition-colors\"\n                    >\n                        <LogOut className=\"mr-3 h-5 w-5\" /> Logout\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// --- FIREBASE CONFIG & CONSTANTS ---\nconst firebaseConfig = {\n    apiKey: \"AIzaSyDZ_qqqKW7WDCZ9botek2VBwXNMQO3JYwU\",\n    authDomain: \"psychotherapie0512.firebaseapp.com\",\n    projectId: \"psychotherapie0512\",\n    storageBucket: \"psychotherapie0512.firebasestorage.app\",\n    messagingSenderId: \"131279046361\",\n    appId: \"1:131279046361:web:e5dd2d18b206fb820b60c8\"\n};\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst firestoreAppId = 'default-patient-app-v5';\n\nconst availableTests = [\n    { id: 'scl90r', name: 'SCL-90-R', ebm: '35601', recommendation: 10 },\n    { id: 'fep2', name: 'FEP-2', ebm: '35601', recommendation: 12 },\n    { id: 'bdi2', name: 'BDI-II', ebm: '35600', recommendation: 2 },\n    { id: 'hscl11', name: 'HSCL-11', ebm: '35600', recommendation: 1 },\n];\n\n// --- MODALS & FORMS ---\nconst Modal = ({ isOpen, onClose, title, children, size = \"lg\" }) => { if (!isOpen) return null; const sizeClasses = { sm: 'max-w-sm', md: 'max-w-md', lg: 'max-w-lg', xl: 'max-w-xl', '2xl': 'max-w-2xl', '4xl': 'max-w-4xl', '5xl': 'max-w-5xl' }; return (<div className=\"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex justify-center items-center z-50 p-4\"><div className={`bg-white p-6 rounded-lg shadow-xl w-full ${sizeClasses[size]} max-h-[90vh] overflow-y-auto`}><div className=\"flex justify-between items-center mb-4\"><h2 className=\"text-2xl font-semibold text-gray-800\">{title}</h2><button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\"><XCircle className=\"w-7 h-7\" /></button></div>{children}</div></div>); };\nconst ConfirmationModal = ({ isOpen, onClose, onConfirm, title, message }) => { if (!isOpen) return null; return (<Modal isOpen={isOpen} onClose={onClose} title={title} size=\"sm\"><div className=\"text-center\"><AlertTriangle className=\"mx-auto mb-4 w-12 h-12 text-red-500\" /><p className=\"text-gray-700 mb-6\">{message}</p><div className=\"flex justify-center space-x-4\"><button onClick={onClose} className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none\">Abbrechen</button><button onClick={onConfirm} className=\"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 focus:outline-none\">Bestätigen</button></div></div></Modal>); };\nconst PatientForm = ({ patient, onSave, onCancel }) => {\n    // This component's internal logic remains unchanged\n    const [formData, setFormData] = useState(\n        patient || {\n            name: '', vorname: '', chiffre: '', geburtsdatum: '', adresse: '', email: '', telefon: '',\n            therapyType: 'LZT', approvedHours: 0, conductedHours: 0, diagnoses: [], sessions: [],\n            hscl11Results: [], bdi2Results: [], fep2Results: [], scl90rResults: [],\n            krankheitsanamnese: \"\", lebensgeschichte: \"\", problemanalyseMakro: \"\", therapieplan: \"\"\n        }\n    );\n\n    useEffect(() => {\n        if (patient) {\n            setFormData({...patient, geburtsdatum: patient.geburtsdatum || ''});\n        }\n    }, [patient]);\n    \n    const handleChange = (e) => {\n        const { name, value, type } = e.target;\n        setFormData(prev => ({...prev, [name]: type === 'number' ? parseInt(value, 10) || 0 : value}));\n    };\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        onSave(formData);\n    };\n\n    return (\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* Form content */}\n        </form>\n    );\n};\nconst CustomBdiLabel = (props) => { /* ... */ };\nasync function generateGeminiText(prompt) { /* ... */ }\n\nfunction App() {\n    // --- STATES ---\n    const [mainView, setMainView] = useState('patients');\n    const [patients, setPatients] = useState([]);\n    const [selectedPatient, setSelectedPatient] = useState(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [authError, setAuthError] = useState(null);\n    const [appError, setAppError] = useState(null);\n    const [userId, setUserId] = useState(null);\n    const [isAuthReady, setIsAuthReady] = useState(false);\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [isLoginView, setIsLoginView] = useState(true);\n    const [isAuthLoading, setIsAuthLoading] = useState(false);\n    const [isPatientModalOpen, setIsPatientModalOpen] = useState(false);\n    const [editingPatient, setEditingPatient] = useState(null);\n    const [isConfirmDeleteModalOpen, setIsConfirmDeleteModalOpen] = useState(false);\n    const [patientToDeleteId, setPatientToDeleteId] = useState(null);\n    const [activeDetailTab, setActiveDetailTab] = useState('übersicht');\n    const [activeDiagnostikSubTab, setActiveDiagnostikSubTab] = useState('overview');\n    const [diagnosisInfo, setDiagnosisInfo] = useState({ isOpen: false });\n    const [localIcd10Data, setLocalIcd10Data] = useState({});\n    const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);\n    const [unbilledAppointments, setUnbilledAppointments] = useState([]);\n    const [isLoadingAppointments, setIsLoadingAppointments] = useState(false);\n    const [billingModalState, setBillingModalState] = useState({ isOpen: false, event: null });\n    const [ebmData, setEbmData] = useState([]);\n    const [isAddTestModalOpen, setIsAddTestModalOpen] = useState(false);\n    const [currentTestToAdd, setCurrentTestToAdd] = useState(null);\n    const [isManualBillingSetupOpen, setIsManualBillingSetupOpen] = useState(false);\n    const [retroBillingState, setRetroBillingState] = useState({ isOpen: false, test: null });\n    const [confirmDeleteState, setConfirmDeleteState] = useState({ isOpen: false, onConfirm: null, message: '', title: '' });\n        const [sortedPatients, setSortedPatients] = useState([]);\n    const [nextAppointment, setNextAppointment] = useState({ isLoading: false, text: null, error: null });\n    const [improvementState, setImprovementState] = useState({ isOpen: false, isLoading: false, originalText: '', improvedText: '', sessionIndex: null, error: null });\n    const [editingSessionIndex, setEditingSessionIndex] = useState(null);\n    const [editingSessionText, setEditingSessionText] = useState('');\n    const [editingHours, setEditingHours] = useState({});\n    const [sortConfig, setSortConfig] = useState({ key: 'name', direction: 'ascending' });\n    const [expandedSessions, setExpandedSessions] = useState({});\n    const [copiedStatus, setCopiedStatus] = useState({});\n\n    const [editableKrankheitsanamnese, setEditableKrankheitsanamnese] = useState(\"\");\n    const [editableLebensgeschichte, setEditableLebensgeschichte] = useState(\"\");\n    const [editableProblemanalyseMakro, setEditableProblemanalyseMakro] = useState(\"\");\n    const [editableTherapieplan, setEditableTherapieplan] = useState(\"\");\n    const [therapeutischeAssistenzOutput, setTherapeutischeAssistenzOutput] = useState(\"\");\n    const [isLoadingTherapeutischeAssistenz, setIsLoadingTherapeutischeAssistenz] = useState(false);\n    const [assistenzError, setAssistenzError] = useState(null);\n    const [newDiagnosis, setNewDiagnosis] = useState('');\n    const [newDiagnosisCode, setNewDiagnosisCode] = useState('');\n    const [newDiagnosisSicherheit, setNewDiagnosisSicherheit] = useState('G');\n    const [lookedUpDiagnosisName, setLookedUpDiagnosisName] = useState('');\n    const [newSessionDate, setNewSessionDate] = useState(new Date().toISOString().split('T')[0]);\n    const [newSessionNotes, setNewSessionNotes] = useState('');\n    const [sessionSummaries, setSessionSummaries] = useState({});\n    \n    const detailViewRef = useRef(null);\n    const overviewRef = useRef(null);\n\n    // --- FUNCTIONS ---\n    const calculateAge = (birthdate) => {\n        if (!birthdate) return '';\n        const birthDate = new Date(birthdate);\n        const today = new Date();\n        let age = today.getFullYear() - birthDate.getFullYear();\n        const m = today.getMonth() - birthDate.getMonth();\n        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n            age--;\n        }\n        return age;\n    };\n\n    const getPatientsCollectionPath = useCallback(() => {\n      if (!userId) return null;\n      return `/artifacts/${firestoreAppId}/users/${userId}/patients`;\n    }, [userId]);\n\n    const handleAuthAction = async (isRegistering) => {\n        setIsAuthLoading(true);\n        setAuthError(null);\n        try {\n            if (isRegistering) {\n                await createUserWithEmailAndPassword(auth, email, password);\n            } else {\n                await signInWithEmailAndPassword(auth, email, password);\n            }\n            setEmail(\"\");\n            setPassword(\"\");\n        } catch (error) {\n            console.error(\"Authentication error:\", error);\n            setAuthError(error.message);\n        } finally {\n            setIsAuthLoading(false);\n        }\n    };\n    \n    const handleLogout = async () => {\n        try {\n            await signOut(auth);\n            setSelectedPatient(null);\n            setPatients([]);\n        } catch (error) {\n            console.error(\"Error signing out: \", error);\n            setAppError(\"Fehler beim Abmelden.\");\n        }\n    };\n\n    const handleSavePatient = async (patientData) => {\n        if (!userId) { setAppError(\"Benutzer nicht authentifiziert.\"); return; }\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        const dataToSave = {\n            ...patientData,\n            hscl11Results: patientData.hscl11Results || [],\n            bdi2Results: patientData.bdi2Results || [],\n            fep2Results: patientData.fep2Results || [],\n            scl90rResults: patientData.scl90rResults || [],\n            krankheitsanamnese: patientData.krankheitsanamnese || \"\",\n            lebensgeschichte: patientData.lebensgeschichte || \"\",\n            problemanalyseMakro: patientData.problemanalyseMakro || \"\",\n            therapieplan: patientData.therapieplan || \"\"\n        };\n        try {\n            if (editingPatient && editingPatient.id) {\n                const patientRef = doc(db, collectionPath, editingPatient.id);\n                await setDoc(patientRef, dataToSave, { merge: true });\n            } else {\n                await addDoc(collection(db, collectionPath), dataToSave);\n            }\n            setIsPatientModalOpen(false);\n            setEditingPatient(null);\n        } catch (err) {\n            console.error(\"Error saving patient:\", err);\n            setAppError(\"Fehler beim Speichern des Patienten.\");\n        }\n    };\n\n    const openDeleteConfirmation = (patientId) => {\n        setPatientToDeleteId(patientId);\n        setIsConfirmDeleteModalOpen(true);\n    };\n\n    const confirmDeletePatient = async () => {\n        if (!patientToDeleteId || !userId) { setAppError(\"Löschvorgang fehlgeschlagen.\"); setIsConfirmDeleteModalOpen(false); return; }\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        try {\n            const patientRef = doc(db, collectionPath, patientToDeleteId);\n            await deleteDoc(patientRef);\n            if (selectedPatient && selectedPatient.id === patientToDeleteId) {\n                setSelectedPatient(null);\n            }\n            setPatientToDeleteId(null);\n            setIsConfirmDeleteModalOpen(false);\n        } catch (err) {\n            console.error(\"Error deleting patient:\", err);\n            setAppError(\"Fehler beim Löschen des Patienten.\");\n            setIsConfirmDeleteModalOpen(false);\n        }\n    };\n    \n    const findIcd10CodeLocal = useCallback((codeToFind) => {\n        const upperCodeToFind = codeToFind.toUpperCase();\n        let found = localIcd10Data[upperCodeToFind];\n        if (found) return found;\n        const baseCode = upperCodeToFind.replace(/(\\.-[*]|\\.\\*|[*]|-)$/, '');\n        found = localIcd10Data[`${baseCode}.-*`] || localIcd10Data[`${baseCode}.*`] || localIcd10Data[baseCode];\n        if (found) return found;\n        const possibleCategoryCode = Object.keys(localIcd10Data).find(key => key.startsWith(upperCodeToFind) && (localIcd10Data[key].code_kategorie || localIcd10Data[key].code));\n        if (possibleCategoryCode) return localIcd10Data[possibleCategoryCode];\n        return null;\n    }, [localIcd10Data]);\n\n    const handleAddDiagnosis = async () => {\n        const codeToAdd = newDiagnosisCode.trim().toUpperCase();\n        if (!selectedPatient || !codeToAdd || !userId) {\n            setAppError(\"Bitte füllen Sie alle erforderlichen Felder aus.\");\n            return;\n        }\n\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const sicherheitPrefix = newDiagnosisSicherheit ? `[${newDiagnosisSicherheit}] ` : \"\";\n        const beschreibung = newDiagnosis.trim() ? `: ${newDiagnosis.trim()}` : (lookedUpDiagnosisName ? `: ${lookedUpDiagnosisName}` : \"\");\n        const diagnosisString = `${sicherheitPrefix}${codeToAdd}${beschreibung}`;\n\n        const updatedDiagnoses = [...(selectedPatient.diagnoses || []), diagnosisString];\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n\n        try {\n            await setDoc(patientRef, { diagnoses: updatedDiagnoses }, { merge: true });\n            setNewDiagnosisCode('');\n            setNewDiagnosis('');\n            setLookedUpDiagnosisName('');\n            setNewDiagnosisSicherheit('G');\n        } catch (err) {\n            console.error(\"Error adding diagnosis:\", err);\n            setAppError(\"Fehler beim Hinzufügen der Diagnose.\");\n        }\n    };\n\n    const handleRemoveDiagnosis = async (diagnosisStringToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const updatedDiagnoses = selectedPatient.diagnoses.filter(d => d !== diagnosisStringToRemove);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { diagnoses: updatedDiagnoses }, { merge: true }); }\n        catch (err) { console.error(\"Error removing diagnosis:\", err); setAppError(\"Fehler beim Entfernen der Diagnose.\"); }\n    };\n    const handleAddSession = async () => {\n        if (!selectedPatient || !newSessionNotes.trim() || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const newSession = { date: newSessionDate, notes: newSessionNotes.trim() };\n        const updatedSessions = [...(selectedPatient.sessions || []), newSession];\n        updatedSessions.sort((a, b) => new Date(b.date) - new Date(a.date));\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { sessions: updatedSessions }, { merge: true }); setNewSessionNotes(''); }\n        catch (err) { console.error(\"Error adding session:\", err); setAppError(\"Fehler beim Hinzufügen der Sitzung.\"); }\n    };\n\n    const handleUpdateConductedHours = async (patientId, hours) => {\n        if (!patientId || !userId) return;\n        if (isNaN(hours) || hours < 0) {\n            console.error(\"Ungültige Stundenzahl für Firestore-Update:\", hours);\n            return;\n        }\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        const patientRef = doc(db, collectionPath, patientId);\n        try {\n            await setDoc(patientRef, { conductedHours: hours }, { merge: true });\n        } catch (err) {\n            console.error(\"Error updating conducted hours:\", err);\n            setAppError(\"Fehler beim Aktualisieren der Stunden.\");\n        }\n    };\n\n    const handleAddBdiResult = async (newResult) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const updatedBdiResults = [...(selectedPatient.bdi2Results || []), newResult];\n        updatedBdiResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { bdi2Results: updatedBdiResults }, { merge: true });\n        } catch (err) {\n            console.error(\"Error adding BDI-II result:\", err);\n            setAppError(\"Fehler beim Hinzufügen des BDI-II Ergebnisses.\");\n        }\n    };\n\n    const handleAddHsclResult = async (newResult) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const updatedHsclResults = [...(selectedPatient.hscl11Results || []), newResult];\n        updatedHsclResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { hscl11Results: updatedHsclResults }, { merge: true });\n        } catch (err) {\n            console.error(\"Error adding HSCL result:\", err);\n            setAppError(\"Fehler beim Hinzufügen des HSCL-Ergebnisses.\");\n        }\n    };\n\n    const handleRemoveHsclResult = async (dateToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const updatedHsclResults = selectedPatient.hscl11Results.filter(r => r.date !== dateToRemove);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { hscl11Results: updatedHsclResults }, { merge: true }); }\n        catch (err) { console.error(\"Error removing HSCL result:\", err); setAppError(\"Fehler beim Entfernen des HSCL-Ergebnisses.\"); }\n    };\n\n    const handleRemoveBdiResult = async (dateToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const updatedBdiResults = selectedPatient.bdi2Results.filter(r => r.date !== dateToRemove);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { bdi2Results: updatedBdiResults }, { merge: true }); }\n        catch (err) { console.error(\"Error removing BDI-II result:\", err); setAppError(\"Fehler beim Entfernen des BDI-II Ergebnisses.\"); }\n    };\n\n    const handleAddFepResult = async (result) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const updatedFepResults = [...(selectedPatient.fep2Results || []), result];\n        updatedFepResults.sort((a, b) => new Date(a.date) - new Date(b.date));\n\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { fep2Results: updatedFepResults }, { merge: true });\n        } catch (err) {\n            console.error(\"Error adding FEP-2 result:\", err);\n            setAppError(\"Fehler beim Hinzufügen des FEP-2 Ergebnisses.\");\n        }\n    };\n\n    const handleRemoveFepResult = async (dateToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const updatedFepResults = selectedPatient.fep2Results.filter(r => r.date !== dateToRemove);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { fep2Results: updatedFepResults }, { merge: true }); }\n        catch (err) { console.error(\"Error removing FEP-2 result:\", err); setAppError(\"Fehler beim Entfernen des FEP-2 Ergebnisses.\"); }\n    };\n\n    const handleAddScl90rResult = async (result) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const newResultToSave = {\n            rawScores: result.rawScores,\n            tScores: result.tScores,\n            globalScores: result.globalScores,\n            itemScores: result.itemScores,\n            date: result.date\n        };\n\n        const updatedScl90rResults = [...(selectedPatient.scl90rResults || []), newResultToSave];\n        updatedScl90rResults.sort((a, b) => new Date(b.date) - new Date(a.date));\n\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { scl90rResults: updatedScl90rResults }, { merge: true });\n            console.log(\"SCL-90-R-Ergebnis erfolgreich gespeichert mit itemScores.\");\n        } catch (err) {\n            console.error(\"Error adding SCL-90-R result:\", err);\n            setAppError(\"Fehler beim Speichern des SCL-90-R Ergebnisses.\");\n        }\n    };\n\n    const handleRemoveScl90rResult = async (dateToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n\n        const updatedScl90rResults = selectedPatient.scl90rResults.filter(r => r.date !== dateToRemove);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { scl90rResults: updatedScl90rResults }, { merge: true });\n        } catch (err) {\n            console.error(\"Error removing SCL-90-R result:\", err);\n            setAppError(\"Fehler beim Entfernen des SCL-90-R Ergebnisses.\");\n        }\n    };\n\n    const fetchSessionSummary = async (sessionNotes, sessionIndex) => {\n        setSessionSummaries(prev => ({ ...prev, [sessionIndex]: { ...prev[sessionIndex], isLoading: true, error: null } }));\n        const prompt = `Fasse die folgenden Therapiesitzungsnotizen prägnant zusammen. Konzentriere dich auf die wichtigsten Themen, Interventionen und den Fortschritt des Patienten:\\n\\n\"${sessionNotes}\"`;\n        try { const summary = await generateGeminiText(prompt); setSessionSummaries(prev => ({ ...prev, [sessionIndex]: { summary: summary, isLoading: false, error: null } })); }\n        catch (e) { setSessionSummaries(prev => ({ ...prev, [sessionIndex]: { ...prev[sessionIndex], isLoading: false, error: e.message } })); setAppError(`Fehler bei der Zusammenfassung: ${e.message}`); }\n    };\n    const handleKrankheitsmodellChange = async (fieldName, value) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { [fieldName]: value }, { merge: true });\n        } catch (err) {\n            console.error(`Error updating ${fieldName}:`, err);\n            setAppError(`Fehler beim Speichern von ${fieldName}.`);\n        }\n    };\n\n    const handleTherapeutischeAssistenzAnfordern = async () => {\n        if (!selectedPatient) {\n            setAssistenzError(\"Bitte wählen Sie zuerst einen Patienten aus.\");\n            return;\n        }\n        setIsLoadingTherapeutischeAssistenz(true);\n        setTherapeutischeAssistenzOutput(\"\");\n        setAssistenzError(null);\n\n        const patientenDatenText = `\nHier sind die relevanten Patientendaten:\n**Krankheitsanamnese:** ${selectedPatient.krankheitsanamnese || \"Keine Angaben.\"}\n**Lebensgeschichte/Biografie:** ${selectedPatient.lebensgeschichte || \"Keine Angaben.\"}\n**Problemanalyse auf Makroebene:** ${selectedPatient.problemanalyseMakro || \"Keine Angaben.\"}\n**Therapieplanung (bisherig):** ${selectedPatient.therapieplan || \"Keine Angaben.\"}\n**Verlaufsdokumentation (Sitzungsnotizen):** ${(selectedPatient.sessions || []).map((s, i) => `Sitzung ${i + 1} (${new Date(s.date).toLocaleDateString('de-DE')}): ${s.notes}`).join(\"\\n\\n\") || \"Keine Sitzungsnotizen vorhanden.\"}\n**Diagnosen:** ${(selectedPatient.diagnoses || []).join(\", \") || \"Keine Diagnosen erfasst.\"}\n**Genehmigte Stunden:** ${selectedPatient.approvedHours}\n**Durchgeführte Stunden:** ${selectedPatient.conductedHours}\n    `;\n\n        const systemPrompt = `Du bist ein Expertenteam für Psychotherapie. Deine Aufgabe ist es, auf Grundlage der Patientendaten eine strukturierte Rückmeldung zu geben mit dem Ziel: 1. Wesentliche Schwerpunkte für die weitere Therapieplanung zu identifizieren. 2. Konkrete Interventionsideen zu formulieren. 3. Hinweise zur Strukturierung der Sitzungen zu geben. Beachte die begrenzte Stundenzahl. Gib die Antwort als klares, strukturiertes Feedback aus.`;\n\n        try {\n            const assistenz = await generateGeminiText(systemPrompt);\n            setTherapeutischeAssistenzOutput(assistenz);\n        } catch (e) {\n            setAssistenzError(`Fehler bei der Anforderung der therapeutischen Assistenz: ${e.message}`);\n        } finally {\n            setIsLoadingTherapeutischeAssistenz(false);\n        }\n    };\n\n    const showDiagnosisInfo = (diagnosisString) => {\n        const sicherheitMatch = diagnosisString.match(/^\\[([AVGZN]+)\\]\\s*/i);\n        const sicherheit = sicherheitMatch ? sicherheitMatch[1].toUpperCase() : '';\n        const codeAndName = sicherheitMatch ? diagnosisString.substring(sicherheitMatch[0].length) : diagnosisString;\n        const codeMatch = codeAndName.match(/^([A-Z][0-9]{1,2}(\\.[0-9A-Z]{1,2})?[*†]?)/i);\n        const code = codeMatch ? codeMatch[0].toUpperCase() : codeAndName.split(':')[0].trim().toUpperCase();\n        const localData = findIcd10CodeLocal(code);\n\n        if (localData) {\n            setDiagnosisInfo({\n                code: localData.code || code, name: localData.name || '', beschreibung: localData.beschreibung || localData.beschreibung_kategorie || '',\n                inkl: localData.inkl || [], exkl: localData.exkl || [], hinweise: localData.hinweise || [],\n                zusatz_info_code: localData.zusatz_info_code || '', sicherheit: sicherheit,\n                isLoading: false, error: null, isOpen: true, source: 'local'\n            });\n        } else {\n            setDiagnosisInfo({ code: code, name: \"Unbekannter ICD-10 Code\", isLoading: false, error: `Keine Informationen für \"${code}\" gefunden.`, isOpen: true, source: 'error' });\n        }\n    };\n\n    const handleAssignIcd11Diagnosis = async (patientId, icd11Entity) => {\n        if (!patientId || !icd11Entity || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const patientRef = doc(db, collectionPath, patientId);\n        const targetPatient = patients.find(p => p.id === patientId);\n        if (!targetPatient) { setAppError(\"Ziel-Patient konnte nicht gefunden werden.\"); return; }\n        const newDiagnosis = { code: icd11Entity.code, title: icd11Entity.selectedText, uri: icd11Entity.linearizationUri || icd11Entity.foundationUri, date: new Date().toISOString() };\n        const updatedDiagnoses = [...(targetPatient.diagnoses_icd11 || []), newDiagnosis];\n        try { await setDoc(patientRef, { diagnoses_icd11: updatedDiagnoses }, { merge: true }); }\n        catch (err) { console.error(\"Error assigning ICD-11 diagnosis:\", err); setAppError(\"Fehler beim Zuweisen der ICD-11 Diagnose.\"); }\n    };\n\n    const handleRemoveIcd11Diagnosis = async (diagnosisToRemove) => {\n        if (!selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const updatedDiagnoses = selectedPatient.diagnoses_icd11.filter(d => d.date !== diagnosisToRemove.date);\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try { await setDoc(patientRef, { diagnoses_icd11: updatedDiagnoses }, { merge: true }); }\n        catch (err) { console.error(\"Error removing ICD-11 diagnosis:\", err); setAppError(\"Fehler beim Entfernen der ICD-11 Diagnose.\"); }\n    };\n    \n    const handleImproveSessionNote = async (session, index) => {\n        setImprovementState({ ...improvementState, isLoading: true, sessionIndex: index, error: null });\n        const fullPrompt = `Verbessere folgende Therapiedokumentation... --- ${session.notes} ---`;\n        try {\n            const improvedText = await generateGeminiText(fullPrompt);\n            setImprovementState({\n                isOpen: true, isLoading: false, originalText: session.notes,\n                improvedText: improvedText.replace(/^```(json|text)?\\s*|```$/gm, ''),\n                sessionIndex: index, error: null\n            });\n        } catch (e) {\n            setImprovementState({ isLoading: false, error: e.message, sessionIndex: null, isOpen: false });\n            setAppError(`Fehler bei der Verbesserung der Notiz: ${e.message}`);\n        }\n    };\n\n    const handleAcceptImprovement = async () => {\n        if (improvementState.sessionIndex === null || !selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n        updatedSessions[improvementState.sessionIndex].notes = improvementState.improvedText;\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { sessions: updatedSessions }, { merge: true });\n            setImprovementState({ isOpen: false, isLoading: false, originalText: '', improvedText: '', sessionIndex: null, error: null });\n        } catch (err) {\n            console.error(\"Error updating session note:\", err);\n            setAppError(\"Fehler beim Aktualisieren der Sitzungsnotiz.\");\n        }\n    };\n\n    const handleEditSessionStart = (session, index) => {\n        setEditingSessionIndex(index);\n        setEditingSessionText(session.notes);\n        toggleSessionExpansion(index);\n    };\n\n    const handleEditSessionCancel = () => {\n        setEditingSessionIndex(null);\n        setEditingSessionText('');\n    };\n\n    const handleEditSessionSave = async () => {\n        if (editingSessionIndex === null || !selectedPatient || !userId) return;\n        const collectionPath = getPatientsCollectionPath(); if (!collectionPath) return;\n        const updatedSessions = JSON.parse(JSON.stringify(selectedPatient.sessions));\n        updatedSessions[editingSessionIndex].notes = editingSessionText;\n        const patientRef = doc(db, collectionPath, selectedPatient.id);\n        try {\n            await setDoc(patientRef, { sessions: updatedSessions }, { merge: true });\n            handleEditSessionCancel();\n        } catch (err) {\n            console.error(\"Error updating session note:\", err);\n            setAppError(\"Fehler beim Aktualisieren der Sitzungsnotiz.\");\n        }\n    };\n    \n    // --- useEffects ---\n    useEffect(() => {\n        if (ebmData.length === 0) {\n            fetch('/ebm_data_full.json').then(res => res.json()).then(setEbmData);\n        }\n    }, [ebmData]);\n\n    useEffect(() => {\n        if (mainView === 'patientenakte' && !selectedPatient) {\n            setIsLoadingAppointments(true);\n            fetch('http://localhost:3001/api/calendar/past-events')\n                .then(res => res.ok ? res.json() : Promise.reject('Server error'))\n                .then(calendarEvents => {\n                    const billedEventIds = new Set();\n                    patients.forEach(p => { (p.sessions || []).forEach(s => { if (s.eventId) billedEventIds.add(s.eventId); }); });\n                    const unbilled = calendarEvents.filter(event => !billedEventIds.has(event.id) && event.summary?.match(/[A-Z][0-9]{6}/));\n                    setUnbilledAppointments(unbilled);\n                })\n                .catch(err => setAppError(`Offene Abrechnungen konnten nicht geladen werden: ${err.message}`))\n                .finally(() => setIsLoadingAppointments(false));\n        }\n    }, [mainView, patients, selectedPatient]);\n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, (user) => {\n            setUserId(user ? user.uid : null);\n            setIsAuthReady(true);\n            setIsLoading(false);\n        });\n        return () => unsubscribe();\n    }, []);\n\n    useEffect(() => {\n        if (!isAuthReady || !userId) { setPatients([]); return; }\n        const collectionPath = getPatientsCollectionPath();\n        if (!collectionPath) return;\n        setIsLoading(true);\n        const patientsQuery = query(collection(db, collectionPath));\n        const unsubscribe = onSnapshot(patientsQuery, (snapshot) => {\n            const patientsData = snapshot.docs.map(docSnap => ({ id: docSnap.id, ...docSnap.data() }));\n            setPatients(patientsData);\n            setIsLoading(false);\n        }, (err) => {\n            console.error(\"Error fetching patients:\", err);\n            setAppError(\"Fehler beim Laden der Patientendaten.\");\n            setIsLoading(false);\n        });\n        return () => unsubscribe();\n    }, [isAuthReady, userId, getPatientsCollectionPath]);\n\n     useEffect(() => {\n        if (selectedPatient && selectedPatient.id && patients.length > 0) {\n            const currentPatientDataFromList = patients.find(p => p.id === selectedPatient.id);\n            if (currentPatientDataFromList && JSON.stringify(currentPatientDataFromList) !== JSON.stringify(selectedPatient)) {\n                setSelectedPatient(currentPatientDataFromList);\n            } else if (!currentPatientDataFromList) {\n                setSelectedPatient(null);\n            }\n        }\n    }, [patients, selectedPatient]);\n\n    // --- RENDER LOGIC ---\n    if (!isAuthReady) {\n        return <div className=\"flex justify-center items-center h-screen\">Lade...</div>;\n    }\n\n    if (!userId) {\n        return (\n            <div className=\"min-h-screen bg-gray-100 flex flex-col justify-center items-center p-4\">\n                <div className=\"bg-white p-8 rounded-xl shadow-2xl w-full max-w-md\">\n                    <h1 className=\"text-3xl font-bold text-center text-gray-800 mb-8\">{isLoginView ? \"Login\" : \"Registrierung\"}</h1>\n                    {authError && <p className=\"bg-red-100 text-red-700 p-3 rounded-md mb-4 text-sm\">{authError}</p>}\n                    <form onSubmit={(e) => { e.preventDefault(); handleAuthAction(isLoginView); }}>\n                        {/* Login Form Fields */}\n                    </form>\n                    <button onClick={() => setIsLoginView(!isLoginView)} className=\"mt-6 text-sm text-indigo-600 hover:text-indigo-500 text-center w-full\">\n                        {isLoginView ? \"Noch kein Konto? Jetzt registrieren.\" : \"Bereits registriert? Zum Login.\"}\n                    </button>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"flex h-screen bg-gray-100 font-sans\">\n            <Sidebar \n                mainView={mainView}\n                setMainView={setMainView}\n                handleLogout={handleLogout}\n            />\n\n            <main className=\"flex-1 flex flex-col overflow-y-auto\">\n                <div className=\"p-6 lg:p-8\">\n                    {/* All Modals */}\n                    {/* ... (Modal components rendering) */}\n\n                    {mainView === 'patients' && (\n                        <>\n                            <div className=\"flex justify-between items-center mb-6\">\n                                <h2 className=\"text-2xl font-semibold text-gray-800\">Patientenübersicht</h2>\n                                <button onClick={() => { setEditingPatient(null); setIsPatientModalOpen(true); }} className=\"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-md shadow-sm flex items-center justify-center\">\n                                    <UserPlus className=\"w-5 h-5 mr-2\" /> Patient hinzufügen\n                                </button>\n                            </div>\n                            <div className=\"bg-white shadow-md rounded-lg overflow-x-auto\">\n                                <table className=\"w-full min-w-max table-auto text-left\">\n                                    {/* Table Head */}\n                                    <tbody className=\"divide-y divide-gray-200\">\n                                        {/* Table Rows */}\n                                    </tbody>\n                                </table>\n                            </div>\n                        </>\n                    )}\n\n                    {mainView === 'patientenakte' && (\n                         <div className={`grid grid-cols-1 ${isSidebarCollapsed ? 'md:grid-cols-[auto,1fr]' : 'md:grid-cols-4'} gap-6 lg:gap-8`}>\n                            {!isSidebarCollapsed && (\n                                <div className=\"md:col-span-1\">\n                                    <h3 className=\"text-xl font-semibold text-gray-800 mb-4\">Patienten</h3>\n                                    <div className=\"bg-white rounded-lg shadow-md max-h-[75vh] overflow-y-auto\">\n                                        <ul className=\"divide-y divide-gray-200\">\n                                            {sortedPatients.map(patient => (\n                                                <li key={patient.id} onClick={() => setSelectedPatient(patient)} className={`p-3 cursor-pointer text-sm font-medium transition-colors duration-150 ${selectedPatient?.id === patient.id ? 'bg-indigo-600 text-white' : 'text-gray-700 hover:bg-indigo-50'}`}>\n                                                    {patient.name}, {patient.vorname}\n                                                </li>\n                                            ))}\n                                        </ul>\n                                    </div>\n                                </div>\n                            )}\n                            <div className={isSidebarCollapsed ? 'col-span-full' : 'md:col-span-3'}>\n                                <button onClick={() => setIsSidebarCollapsed(!isSidebarCollapsed)} className=\"mb-4 text-indigo-600 hover:text-indigo-800 text-sm font-medium\">\n                                    {isSidebarCollapsed ? '››' : '‹‹'}\n                                </button>\n                                {selectedPatient ? (\n                                    <div className=\"bg-white shadow-xl rounded-lg p-6\">\n                                        {/* Patient Details and Tabs */}\n                                    </div>\n                                ) : (\n                                    <div className=\"text-center p-10 bg-white rounded-lg shadow-md\">\n                                        <h3 className=\"text-xl font-semibold text-gray-700\">Bitte einen Patienten auswählen.</h3>\n                                    </div>\n                                )}\n                            </div>\n                         </div>\n                    )}\n\n                    {mainView === 'ebm' && <EBMBrowser />}\n                    {mainView === 'icd11' && <ICD11ECTBrowser patients={patients} selectedPatient={selectedPatient} onAssignDiagnosis={() => {}} />}\n\n                </div>\n                 <footer className=\"text-center py-4 text-sm text-gray-500 border-t border-gray-200 mt-auto\">\n                    Therapie-Dashboard &copy; {new Date().getFullYear()}\n                </footer>\n            </main>\n        </div>\n    );\n}\n\nexport default App;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}