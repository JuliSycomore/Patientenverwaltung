{"ast":null,"code":"import _objectSpread from\"/Users/julianrogowski/Documents/Visual Code/patientenverwaltung-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const XCircle=_ref=>{let{className=\"w-6 h-6\"}=_ref;return/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",fill:\"none\",stroke:\"currentColor\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",className:className,children:[/*#__PURE__*/_jsx(\"circle\",{cx:\"12\",cy:\"12\",r:\"10\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"15\",y1:\"9\",x2:\"9\",y2:\"15\"}),/*#__PURE__*/_jsx(\"line\",{x1:\"9\",y1:\"9\",x2:\"15\",y2:\"15\"})]});};// Helper function to calculate age\nconst calculateAge=birthdate=>{if(!birthdate)return 0;const birthDate=new Date(birthdate);const today=new Date();let age=today.getFullYear()-birthDate.getFullYear();const m=today.getMonth()-birthDate.getMonth();if(m<0||m===0&&today.getDate()<birthDate.getDate()){age--;}return age;};const AddBillingPeriodModal=_ref2=>{let{isOpen,onClose,onSave,patient}=_ref2;const[periodData,setPeriodData]=useState({name:'',date:new Date().toISOString().split('T')[0],// Nur noch ein Datum\npointsLimit:1092,type:'probatorik'});// Automatically set points limit based on patient age when modal opens\nuseEffect(()=>{if(isOpen&&patient){const age=calculateAge(patient.geburtsdatum);const defaultPoints=age<22?1636:1092;setPeriodData(prev=>_objectSpread(_objectSpread({},prev),{},{pointsLimit:defaultPoints}));}},[isOpen,patient]);if(!isOpen)return null;const handleChange=e=>{const{name,value,type}=e.target;setPeriodData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type==='number'?parseInt(value,10):value}));};const handleSubmit=e=>{e.preventDefault();// Add this validation block\nif(!periodData.name||!periodData.date||isNaN(new Date(periodData.date))){alert(\"Bitte f端llen Sie alle Felder korrekt aus. Das Datum scheint ung端ltig zu sein.\");return;}onSave(periodData);};const inputStd=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm\";return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex justify-center items-center z-[99] p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-gray-800\",children:\"Abrechnungszeitraum anlegen\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(XCircle,{className:\"w-7 h-7\"})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"block text-sm font-medium text-gray-700\",children:\"Bezeichnung\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",id:\"name\",value:periodData.name,onChange:handleChange,required:true,className:inputStd,placeholder:\"z.B. Probatorik, 1. KZT-Abschnitt\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"date\",className:\"block text-sm font-medium text-gray-700\",children:\"Datum\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"date\",id:\"date\",value:periodData.date,onChange:handleChange,required:true,className:inputStd})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pointsLimit\",className:\"block text-sm font-medium text-gray-700\",children:\"Punkte-Kontingent (automatisch vorgeschlagen)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"pointsLimit\",id:\"pointsLimit\",value:periodData.pointsLimit,onChange:handleChange,required:true,className:inputStd})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Art des Zeitraums\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"type\",value:periodData.type,onChange:handleChange,className:inputStd,children:[/*#__PURE__*/_jsx(\"option\",{value:\"probatorik\",children:\"Probatorik\"}),/*#__PURE__*/_jsx(\"option\",{value:\"verlauf\",children:\"Verlauf (KZT/LZT)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"abschluss\",children:\"Abschluss\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200\",children:\"Abbrechen\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700\",children:\"Speichern\"})]})]})]})});};export default AddBillingPeriodModal;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","XCircle","_ref","className","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","children","cx","cy","r","x1","y1","x2","y2","calculateAge","birthdate","birthDate","Date","today","age","getFullYear","m","getMonth","getDate","AddBillingPeriodModal","_ref2","isOpen","onClose","onSave","patient","periodData","setPeriodData","name","date","toISOString","split","pointsLimit","type","geburtsdatum","defaultPoints","prev","_objectSpread","handleChange","e","value","target","parseInt","handleSubmit","preventDefault","isNaN","alert","inputStd","onClick","onSubmit","htmlFor","id","onChange","required","placeholder"],"sources":["/Users/julianrogowski/Documents/Visual Code/patientenverwaltung-app/src/components/AddBillingPeriodModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\n\nconst XCircle = ({ className = \"w-6 h-6\" }) => (<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className={className}><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line><line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line></svg>);\n\n// Helper function to calculate age\nconst calculateAge = (birthdate) => {\n    if (!birthdate) return 0;\n    const birthDate = new Date(birthdate);\n    const today = new Date();\n    let age = today.getFullYear() - birthDate.getFullYear();\n    const m = today.getMonth() - birthDate.getMonth();\n    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {\n        age--;\n    }\n    return age;\n};\n\nconst AddBillingPeriodModal = ({ isOpen, onClose, onSave, patient }) => {\n    const [periodData, setPeriodData] = useState({\n        name: '',\n        date: new Date().toISOString().split('T')[0], // Nur noch ein Datum\n        pointsLimit: 1092,\n        type: 'probatorik'\n    });\n\n    // Automatically set points limit based on patient age when modal opens\n    useEffect(() => {\n        if (isOpen && patient) {\n            const age = calculateAge(patient.geburtsdatum);\n            const defaultPoints = age < 22 ? 1636 : 1092;\n            setPeriodData(prev => ({ ...prev, pointsLimit: defaultPoints }));\n        }\n    }, [isOpen, patient]);\n\n\n    if (!isOpen) return null;\n\n    const handleChange = (e) => {\n        const { name, value, type } = e.target;\n        setPeriodData(prev => ({\n            ...prev,\n            [name]: type === 'number' ? parseInt(value, 10) : value\n        }));\n    };\n\nconst handleSubmit = (e) => {\n    e.preventDefault();\n    // Add this validation block\n    if (!periodData.name || !periodData.date || isNaN(new Date(periodData.date))) {\n        alert(\"Bitte f端llen Sie alle Felder korrekt aus. Das Datum scheint ung端ltig zu sein.\");\n        return;\n    }\n    onSave(periodData);\n};\n\n    const inputStd = \"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm\";\n\n    return (\n        <div className=\"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex justify-center items-center z-[99] p-4\">\n            <div className=\"bg-white p-6 rounded-lg shadow-xl w-full max-w-md\">\n                <div className=\"flex justify-between items-center mb-4\">\n                    <h2 className=\"text-2xl font-semibold text-gray-800\">Abrechnungszeitraum anlegen</h2>\n                    <button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">\n                        <XCircle className=\"w-7 h-7\" />\n                    </button>\n                </div>\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                    <div>\n                        <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700\">Bezeichnung</label>\n                        <input type=\"text\" name=\"name\" id=\"name\" value={periodData.name} onChange={handleChange} required className={inputStd} placeholder=\"z.B. Probatorik, 1. KZT-Abschnitt\"/>\n                    </div>\n                    <div>\n                        <label htmlFor=\"date\" className=\"block text-sm font-medium text-gray-700\">Datum</label>\n                        <input type=\"date\" name=\"date\" id=\"date\" value={periodData.date} onChange={handleChange} required className={inputStd} />\n                    </div>\n                     <div>\n                        <label htmlFor=\"pointsLimit\" className=\"block text-sm font-medium text-gray-700\">Punkte-Kontingent (automatisch vorgeschlagen)</label>\n                        <input type=\"number\" name=\"pointsLimit\" id=\"pointsLimit\" value={periodData.pointsLimit} onChange={handleChange} required className={inputStd} />\n                    </div>\n                    <div>\n                        <label className=\"block text-sm font-medium text-gray-700\">Art des Zeitraums</label>\n                        <select name=\"type\" value={periodData.type} onChange={handleChange} className={inputStd}>\n                            <option value=\"probatorik\">Probatorik</option>\n                            <option value=\"verlauf\">Verlauf (KZT/LZT)</option>\n                            <option value=\"abschluss\">Abschluss</option>\n                        </select>\n                    </div>\n                    <div className=\"flex justify-end space-x-3 pt-4\">\n                        <button type=\"button\" onClick={onClose} className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200\">Abbrechen</button>\n                        <button type=\"submit\" className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700\">Speichern</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    );\n};\n\nexport default AddBillingPeriodModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}